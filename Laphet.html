<!DOCTYPE html>
<!-- saved from url=(0078)https://laphet.de/apps/gbb/easybundle/1?page=addProductsPage1&currentFlow=byob -->
<html class="js bundle-1 gbbBundle-HTML" lang="de" data-google-analytics-opt-out="" style="--gbb-product-card-bg-color: #FFFFFF; --gbb-product-card-text-color: #080808; --gbb-product-card-final-price-visibility: block; --gbb-product-card-compare-at-price-visibility: block; --gbb-product-card-button-color: #dfedf9; --gbb-product-card-button-text-color: #000000; --gbb-product-card-allow-only-one-quantity: block; --gbb-product-card-quantity-selector-bg-color: #eeeeee; --gbb-navigation-banner-title-color: #ffffff; --gbb-navigation-banner-text-color: #ffffff; --gbb-navigation-banner-step-completion-color: #000000; --gbb-navigation-banner-step-done-color: #ffffff; --gbb-navigation-banner-step-text-color: #000000; --gbb-navigation-banner-step-progress-bar-filled-color: #000000; --gbb-navigation-banner-step-progress-bar-empty-color: #eeeeee; --gbb-cart-footer-bg-color: #ffffff; --gbb-cart-footer-buttons-container-bg-color: #f6f6f6; --gbb-cart-footer-show-hide-prices: visible; --gbb-cart-footer-text-color: #000000; --gbb-cart-footer-back-button-color: #dfedf9; --gbb-cart-footer-back-button-text-color: #1E1E1E; --gbb-cart-footer-next-button-text-color: #000000; --gbb-cart-footer-next-button-color: #dfedf9; --gbb-cart-footer-discount-text-color: #000000; --gbb-cart-footer-discount-progress-bar-empty-color: #f6f6f6; --gbb-cart-footer-discount-progress-bar-filled-color: #15A524; --gbb-cart-footer-discount-text-visibility: visible; --site-header-height: 100px; --iconColor: #5F5A56;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="theme-color" content=""><style data-tippy-stylesheet="">.tippy-box[data-animation=fade][data-state=hidden]{opacity:0}[data-tippy-root]{max-width:calc(100vw - 10px)}.tippy-box{position:relative;background-color:#333;color:#fff;border-radius:4px;font-size:14px;line-height:1.4;white-space:normal;outline:0;transition-property:transform,visibility,opacity}.tippy-box[data-placement^=top]>.tippy-arrow{bottom:0}.tippy-box[data-placement^=top]>.tippy-arrow:before{bottom:-7px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.tippy-box[data-placement^=bottom]>.tippy-arrow{top:0}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{top:-7px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.tippy-box[data-placement^=left]>.tippy-arrow{right:0}.tippy-box[data-placement^=left]>.tippy-arrow:before{border-width:8px 0 8px 8px;border-left-color:initial;right:-7px;transform-origin:center left}.tippy-box[data-placement^=right]>.tippy-arrow{left:0}.tippy-box[data-placement^=right]>.tippy-arrow:before{left:-7px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:center right}.tippy-box[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-arrow{width:16px;height:16px;color:#333}.tippy-arrow:before{content:"";position:absolute;border-color:transparent;border-style:solid}.tippy-content{position:relative;padding:5px 9px;z-index:1}</style><link rel="icon" type="image/png" href="https://laphet.de/cdn/shop/files/Lilac_and_White_Traditional_Real_Estate_Agency_Logotype_Template.png?crop=center&amp;height=32&amp;v=1719607966&amp;width=32"><title>
      Laphet
</title>
    
    

<meta property="og:site_name" content="Laphet">
<meta property="og:url" content="https://laphet.de/apps/gbb/easybundle/1?page=addproductspage1">
<meta property="og:title" content="Laphet">
<meta property="og:type" content="website">
<meta property="og:description" content="Entdecken Sie Teepesto - den veganen, essbaren fermentierten Tee, reich an Geschmack und Nährstoffen. Perfekt für eine pflanzliche und gesunde Ernährung. Jetzt probieren!"><meta property="og:image" content="http://laphet.de/cdn/shop/files/Laphet_1.png?v=1719658115">
  <meta property="og:image:secure_url" content="https://laphet.de/cdn/shop/files/Laphet_1.png?v=1719658115">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="628"><meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Laphet">
<meta name="twitter:description" content="Entdecken Sie Teepesto - den veganen, essbaren fermentierten Tee, reich an Geschmack und Nährstoffen. Perfekt für eine pflanzliche und gesunde Ernährung. Jetzt probieren!">
<script type="text/javascript" async="" src="./Laphet_files/browsee.min.js.download"></script><script type="text/javascript" async="" src="./Laphet_files/eventpromotionbar.js.download"></script><script type="text/javascript" async="" src="./Laphet_files/shopify-script.js.download"></script><script type="text/javascript" async="" src="./Laphet_files/a4cea4064280301bd60ee9a70.js.download"></script><script type="text/javascript" async="" src="./Laphet_files/loox.1682202239152.js.download"></script><script type="text/javascript" async="" src="./Laphet_files/script.js.download"></script><script type="text/javascript" async="" src="./Laphet_files/avada-cookies-bar-main.min.js.download"></script><script async="true" src="./Laphet_files/fbevents.js.download"></script><script type="text/javascript" async="" src="./Laphet_files/js(1)"></script><script type="text/javascript" async="" src="./Laphet_files/tfa.js.download"></script><script type="text/javascript" async="" src="./Laphet_files/trekkie.storefront.c44d6898594db6c4847cb75ef4de7d5f4456a012.min.js.download"></script><script async="" src="./Laphet_files/fbevents.js.download"></script><script async="" src="./Laphet_files/gtm.js.download"></script><script>eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('2.8();9(a.b=="c d"){2.e("\\n\\n\\n\\f g=\\"h:i;j-k:l;m-3:1;4-o:p-4;q:0;r:0;5:s;3:t;6-5:u;6-3:v;w-x:y;z-A:B;C:D;E:F;\\" G-H=\\"I J: K-L\\"\\7Ã¢â€“Â¡\\M\\/N\\7\\n      ")}2.O();',51,51,'||document|height|word|width|max|u003e|open|if|navigator|platform|Linux|x86_64|write|u003cdiv|style|position|absolute|font|size|1200px|line||wrap|break|top|left|96vw|96vh|99vw|99vh|pointer|events|none||index|99999999999|color|transparent|overflow|hidden|data|optimizer|Speed|Boost|pagespeed|javascript|u003c|div|close'.split('|'),0,{}))</script>
<script src="./Laphet_files/globo_checkout.js.download" type="text/javascript"></script>

  <!-- Google tag (gtag.js) -->
<script async="" src="./Laphet_files/js(2)"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GKGBG9W3QV');
</script>
        <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KPKD8WP8');</script>
<!-- End Google Tag Manager -->
	<!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1069926074129938');
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1069926074129938&ev=PageView&noscript=1"
/></noscript>
<!-- End Meta Pixel Code -->
    <link rel="canonical" href="https://laphet.de/apps/gbb/easybundle/1?page=addproductspage1">
    <link rel="preconnect" href="https://cdn.shopify.com/" crossorigin="">
    <!-- Added by AVADA SEO Suite -->
	


<meta property="og:site_name" content="undefined">
<meta property="og:url" content="https://laphet.de/apps/gbb/easybundle/1?page=addproductspage1">
<meta property="og:title" content="Laphet">
<meta property="og:type" content="website">
<meta property="og:description" content="Entdecken Sie Teepesto - den veganen, essbaren fermentierten Tee, reich an Geschmack und Nährstoffen. Perfekt für eine pflanzliche und gesunde Ernährung. Jetzt probieren!"><meta property="og:image" content="undefined">
<meta property="og:image:secure_url" content="undefined">
<meta name="twitter:site" content="@undefined"><meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Laphet">
<meta name="twitter:description" content="Entdecken Sie Teepesto - den veganen, essbaren fermentierten Tee, reich an Geschmack und Nährstoffen. Perfekt für eine pflanzliche und ge...">
<meta name="twitter:image" content="undefined">




<meta name="twitter:image" content="undefined">
<script>window.FPConfig = {};window.FPConfig.ignoreKeywords=["/cart","/account"]</script>


<!-- Added by AVADA SEO Suite: Breadcrumb Structured Data  -->
<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
    "@type": "ListItem",
    "position": 1,
    "name": "Home",
    "item": "https://laphet.de"
  }]
}
</script>
<!-- Added by AVADA SEO Suite -->
 



	<!-- /Added by AVADA SEO Suite --><link rel="preconnect" href="https://fonts.shopifycdn.com/" crossorigin=""><link rel="stylesheet" type="text/css" href="./Laphet_files/flickity.min.css">
    <link rel="stylesheet" href="./Laphet_files/owl.carousel.min.css">
    <link rel="stylesheet" href="./Laphet_files/owl.theme.default.min.css">
    <link rel="stylesheet" type="text/css" href="./Laphet_files/animate.min.css">
    <script src="./Laphet_files/global.js.download" defer="defer"></script>
    <script src="./Laphet_files/jquery.min.js.download"></script>
    <script type="text/javascript" src="./Laphet_files/flickity.pkgd.min.js.download"></script>
    <script src="./Laphet_files/owl.carousel.min.js.download"></script>
    <script>window.performance && window.performance.mark && window.performance.mark('shopify.content_for_header.start');</script><meta name="google-site-verification" content="xUmAcqqAMKSdvk-_Z7xRoQ0rGEkI6ZKOwksUmlfOMog">
<meta id="shopify-digital-wallet" name="shopify-digital-wallet" content="/65436647664/digital_wallets/dialog">
<meta name="shopify-checkout-api-token" content="c61621e8c2860bdac60705f05e429959">
<meta id="in-context-paypal-metadata" data-shop-id="65436647664" data-venmo-supported="false" data-environment="production" data-locale="de_DE" data-paypal-v4="true" data-currency="EUR">
<script async="async" src="./Laphet_files/preloads.js.download"></script>
<link rel="preconnect" href="https://shop.app/" crossorigin="anonymous">
<script async="async" src="./Laphet_files/preloads(1).js.download" crossorigin="anonymous"></script>
<script id="apple-pay-shop-capabilities" type="application/json">{"shopId":65436647664,"countryCode":"DE","currencyCode":"EUR","merchantCapabilities":["supports3DS"],"merchantId":"gid:\/\/shopify\/Shop\/65436647664","merchantName":"Laphet","requiredBillingContactFields":["postalAddress","email","phone"],"requiredShippingContactFields":["postalAddress","email","phone"],"shippingType":"shipping","supportedNetworks":["visa","maestro","masterCard","amex"],"total":{"type":"pending","label":"Laphet","amount":"1.00"},"shopifyPaymentsEnabled":true,"supportsSubscriptions":false}</script>
<script id="shopify-features" type="application/json">{"accessToken":"c61621e8c2860bdac60705f05e429959","betas":["rich-media-storefront-analytics"],"domain":"laphet.de","predictiveSearch":true,"shopId":65436647664,"smart_payment_buttons_url":"https:\/\/laphet.de\/cdn\/shopifycloud\/payment-sheet\/assets\/latest\/spb.de.js","dynamic_checkout_cart_url":"https:\/\/laphet.de\/cdn\/shopifycloud\/payment-sheet\/assets\/latest\/dynamic-checkout-cart.de.js","locale":"de"}</script>
<script>var Shopify = Shopify || {};
Shopify.shop = "myanmar-grocery.myshopify.com";
Shopify.locale = "de";
Shopify.currency = {"active":"EUR","rate":"1.0"};
Shopify.country = "DE";
Shopify.theme = {"name":"Laphet® | Current Theme","id":167953105231,"schema_name":"Whisk","schema_version":"3.0.0","theme_store_id":1819,"role":"main"};
Shopify.theme.handle = "null";
Shopify.theme.style = {"id":null,"handle":null};
Shopify.cdnHost = "laphet.de/cdn";
Shopify.routes = Shopify.routes || {};
Shopify.routes.root = "/";</script>
<script type="module">!function(o){(o.Shopify=o.Shopify||{}).modules=!0}(window);</script>
<script>!function(o){function n(){var o=[];function n(){o.push(Array.prototype.slice.apply(arguments))}return n.q=o,n}var t=o.Shopify=o.Shopify||{};t.loadFeatures=n(),t.autoloadFeatures=n()}(window);</script>
<script>window.ShopifyPay = window.ShopifyPay || {};
window.ShopifyPay.apiHost = "shop.app\/pay";</script>
<script>
  window.Shopify = window.Shopify || {};
  if (!window.Shopify.featureAssets) window.Shopify.featureAssets = {};
  window.Shopify.featureAssets['shop-js'] = {"init-fed-cm":["modules/v2/client.init-fed-cm_BsrfTLNc.de.esm.js","modules/v2/chunk.common_C-c9Lh-p.esm.js"],"shop-cash-offers":["modules/v2/client.shop-cash-offers_D0Yzs0hR.de.esm.js","modules/v2/chunk.common_C-c9Lh-p.esm.js","modules/v2/chunk.modal_BQsrVM38.esm.js"],"init-shop-email-lookup-coordinator":["modules/v2/client.init-shop-email-lookup-coordinator_ENRsFuV8.de.esm.js","modules/v2/chunk.common_C-c9Lh-p.esm.js"],"shop-toast-manager":["modules/v2/client.shop-toast-manager_CpWvagY2.de.esm.js","modules/v2/chunk.common_C-c9Lh-p.esm.js"],"checkout-modal":["modules/v2/client.checkout-modal_C7sSGYkE.de.esm.js","modules/v2/chunk.common_C-c9Lh-p.esm.js","modules/v2/chunk.modal_BQsrVM38.esm.js"],"avatar":["modules/v2/client.avatar_BTnouDA3.de.esm.js"],"pay-button":["modules/v2/client.pay-button_Dqld5l2Y.de.esm.js","modules/v2/chunk.common_C-c9Lh-p.esm.js"],"shop-login-button":["modules/v2/client.shop-login-button_5E_QVA3t.de.esm.js","modules/v2/chunk.common_C-c9Lh-p.esm.js","modules/v2/chunk.modal_BQsrVM38.esm.js"],"init-customer-accounts-sign-up":["modules/v2/client.init-customer-accounts-sign-up_DshdRwwk.de.esm.js","modules/v2/client.shop-login-button_5E_QVA3t.de.esm.js","modules/v2/chunk.common_C-c9Lh-p.esm.js","modules/v2/chunk.modal_BQsrVM38.esm.js"],"init-shop-for-new-customer-accounts":["modules/v2/client.init-shop-for-new-customer-accounts_Ze3eJKZO.de.esm.js","modules/v2/client.shop-login-button_5E_QVA3t.de.esm.js","modules/v2/chunk.common_C-c9Lh-p.esm.js","modules/v2/chunk.modal_BQsrVM38.esm.js"],"init-customer-accounts":["modules/v2/client.init-customer-accounts_Oo_n3IUP.de.esm.js","modules/v2/client.shop-login-button_5E_QVA3t.de.esm.js","modules/v2/chunk.common_C-c9Lh-p.esm.js","modules/v2/chunk.modal_BQsrVM38.esm.js"],"shop-follow-button":["modules/v2/client.shop-follow-button_DSlID_4_.de.esm.js","modules/v2/chunk.common_C-c9Lh-p.esm.js","modules/v2/chunk.modal_BQsrVM38.esm.js"],"lead-capture":["modules/v2/client.lead-capture_Bg8kbA8t.de.esm.js","modules/v2/chunk.common_C-c9Lh-p.esm.js","modules/v2/chunk.modal_BQsrVM38.esm.js"],"payment-terms":["modules/v2/client.payment-terms_CSh1mFk-.de.esm.js","modules/v2/chunk.common_C-c9Lh-p.esm.js","modules/v2/chunk.modal_BQsrVM38.esm.js"]};
</script>
<script>(function() {
  function asyncLoad() {
    var urls = ["https:\/\/geolocation-recommendations.shopifyapps.com\/locale_bar\/script.js?shop=myanmar-grocery.myshopify.com","https:\/\/loox.io\/widget\/zMFMCTvYaH\/loox.1682202239152.js?shop=myanmar-grocery.myshopify.com","https:\/\/chimpstatic.com\/mcjs-connected\/js\/users\/ec9ac55de5a94e21ae9b3b519\/a4cea4064280301bd60ee9a70.js?shop=myanmar-grocery.myshopify.com","https:\/\/api.browsee.io\/api\/integration\/shopify-script.js?apiKey=85f2900213869fdab98c40165617f09100aa713a399ae662\u0026shop=myanmar-grocery.myshopify.com","https:\/\/cdn.hextom.com\/js\/eventpromotionbar.js?shop=myanmar-grocery.myshopify.com"];
    for (var i = 0; i < urls.length; i++) {
      var s = document.createElement('script');
      s.type = 'text/javascript';
      s.async = true;
      s.src = urls[i];
      var x = document.getElementsByTagName('script')[0];
      x.parentNode.insertBefore(s, x);
    }
  };
  if(window.attachEvent) {
    window.attachEvent('onload', asyncLoad);
  } else {
    window.addEventListener('load', asyncLoad, false);
  }
})();</script>
<script id="__st">var __st={"a":65436647664,"offset":3600,"reqid":"9f2a9b3d-08d3-4f10-8880-d8b9053d9aab-1738918143","pageurl":"laphet.de\/apps\/gbb\/easybundle\/1?page=addProductsPage1\u0026currentFlow=byob","t":"prospect","u":"aed65ce5ad1f"};</script>
<script>window.ShopifyPaypalV4VisibilityTracking = true;</script>
<script id="captcha-bootstrap">!function(){'use strict';const t='contact',e='account',n='new_comment',o=[[t,t],['blogs',n],['comments',n],[t,'customer']],c=[[e,'customer_login'],[e,'guest_login'],[e,'recover_customer_password'],[e,'create_customer']],r=t=>t.map((([t,e])=>`form[action*='/${t}']:not([data-nocaptcha='true']) input[name='form_type'][value='${e}']`)).join(','),a=t=>()=>t?[...document.querySelectorAll(t)].map((t=>t.form)):[];function s(){const t=[...o],e=r(t);return a(e)}const i='password',u='form_key',d=['recaptcha-v3-token','g-recaptcha-response','h-captcha-response',i],f=()=>{try{return window.sessionStorage}catch{return}},m='__shopify_v',_=t=>t.elements[u];function p(t,e,n=!1){try{const o=window.sessionStorage,c=JSON.parse(o.getItem(e)),{data:r}=function(t){const{data:e,action:n}=t;return t[m]||n?{data:e,action:n}:{data:t,action:n}}(c);for(const[e,n]of Object.entries(r))t.elements[e]&&(t.elements[e].value=n);n&&o.removeItem(e)}catch(o){console.error('form repopulation failed',{error:o})}}const l='form_type',E='cptcha';function T(t){t.dataset[E]=!0}const w=window,h=w.document,L='Shopify',v='ce_forms',y='captcha';let A=!1;((t,e)=>{const n=(g='f06e6c50-85a8-45c8-87d0-21a2b65856fe',I='https://cdn.shopify.com/shopifycloud/storefront-forms-hcaptcha/ce_storefront_forms_captcha_hcaptcha.v1.5.2.iife.js',D={infoText:'Durch hCaptcha geschützt',privacyText:'Datenschutz',termsText:'Allgemeine Geschäftsbedingungen'},(t,e,n)=>{const o=w[L][v],c=o.bindForm;if(c)return c(t,g,e,D).then(n);var r;o.q.push([[t,g,e,D],n]),r=I,A||(h.body.append(Object.assign(h.createElement('script'),{id:'captcha-provider',async:!0,src:r})),A=!0)});var g,I,D;w[L]=w[L]||{},w[L][v]=w[L][v]||{},w[L][v].q=[],w[L][y]=w[L][y]||{},w[L][y].protect=function(t,e){n(t,void 0,e),T(t)},Object.freeze(w[L][y]),function(t,e,n,w,h,L){const[v,y,A,g]=function(t,e,n){const i=e?o:[],u=t?c:[],d=[...i,...u],f=r(d),m=r(i),_=r(d.filter((([t,e])=>n.includes(e))));return[a(f),a(m),a(_),s()]}(w,h,L),I=t=>{const e=t.target;return e instanceof HTMLFormElement?e:e&&e.form},D=t=>v().includes(t);t.addEventListener('submit',(t=>{const e=I(t);if(!e)return;const n=D(e)&&!e.dataset.hcaptchaBound&&!e.dataset.recaptchaBound,o=_(e),c=g().includes(e)&&(!o||!o.value);(n||c)&&t.preventDefault(),c&&!n&&(function(t){try{if(!f())return;!function(t){const e=f();if(!e)return;const n=_(t);if(!n)return;const o=n.value;o&&e.removeItem(o)}(t);const e=Array.from(Array(32),(()=>Math.random().toString(36)[2])).join('');!function(t,e){_(t)||t.append(Object.assign(document.createElement('input'),{type:'hidden',name:u})),t.elements[u].value=e}(t,e),function(t,e){const n=f();if(!n)return;const o=[...t.querySelectorAll(`input[type='${i}']`)].map((({name:t})=>t)),c=[...d,...o],r={};for(const[a,s]of new FormData(t).entries())c.includes(a)||(r[a]=s);n.setItem(e,JSON.stringify({[m]:1,action:t.action,data:r}))}(t,e)}catch(e){console.error('failed to persist form',e)}}(e),e.submit())}));const S=(t,e)=>{t&&!t.dataset[E]&&(n(t,e.some((e=>e===t))),T(t))};for(const o of['focusin','change'])t.addEventListener(o,(t=>{const e=I(t);D(e)&&S(e,y())}));const B=e.get('form_key'),M=e.get(l),P=B&&M;t.addEventListener('DOMContentLoaded',(()=>{const t=y();if(P)for(const e of t)e.elements[l].value===M&&p(e,B);[...new Set([...A(),...v().filter((t=>'true'===t.dataset.shopifyCaptcha))])].forEach((e=>S(e,t)))}))}(h,new URLSearchParams(w.location.search),n,t,e,['guest_login'])})(!0,!0)}();</script>
<script integrity="sha256-EGCDRYTvIEOXsReXgqGwkAR+5Dl8tickSrieA/ZcQwc=" data-source-attribution="shopify.loadfeatures" defer="defer" src="./Laphet_files/load_feature-1060834584ef204397b1179782a1b090047ee4397cb627244ab89e03f65c4307.js.download" crossorigin="anonymous"></script>
<script crossorigin="anonymous" defer="defer" src="./Laphet_files/storefront-80e528be853eac23af2454534897ca9536b1d3d04aa043b042f34879a3c111c8.js.download"></script>
<script data-source-attribution="shopify.dynamic_checkout.dynamic.init">var Shopify=Shopify||{};Shopify.PaymentButton=Shopify.PaymentButton||{isStorefrontPortableWallets:!0,init:function(){window.Shopify.PaymentButton.init=function(){};var t=document.createElement("script");t.src="https://laphet.de/cdn/shopifycloud/portable-wallets/latest/portable-wallets.de.js",t.type="module",document.head.appendChild(t)}};
</script>
<script data-source-attribution="shopify.dynamic_checkout.buyer_consent">
  function portableWalletsHideBuyerConsent(e){var t=document.getElementById("shopify-buyer-consent"),n=document.getElementById("shopify-subscription-policy-button");t&&n&&(t.classList.add("hidden"),t.setAttribute("aria-hidden","true"),n.removeEventListener("click",e))}function portableWalletsShowBuyerConsent(e){var t=document.getElementById("shopify-buyer-consent"),n=document.getElementById("shopify-subscription-policy-button");t&&n&&(t.classList.remove("hidden"),t.removeAttribute("aria-hidden"),n.addEventListener("click",e))}window.Shopify?.PaymentButton&&(window.Shopify.PaymentButton.hideBuyerConsent=portableWalletsHideBuyerConsent,window.Shopify.PaymentButton.showBuyerConsent=portableWalletsShowBuyerConsent);
</script>
<script data-source-attribution="shopify.dynamic_checkout.cart.bootstrap">document.addEventListener("DOMContentLoaded",(function(){function t(){return document.querySelector("shopify-accelerated-checkout-cart, shopify-accelerated-checkout")}if(t())Shopify.PaymentButton.init();else{new MutationObserver((function(e,n){t()&&(Shopify.PaymentButton.init(),n.disconnect())})).observe(document.body,{childList:!0,subtree:!0})}}));
</script>
<script id="sections-script" data-sections="footer" defer="defer" src="./Laphet_files/scripts.js.download"></script>
<link rel="stylesheet" media="screen" href="./Laphet_files/accelerated-checkout-backwards-compat.css" crossorigin="anonymous">

<style id="shopify-accelerated-checkout-cart">
        #shopify-buyer-consent {
  margin-top: 1em;
  display: inline-block;
  width: 100%;
}

#shopify-buyer-consent.hidden {
  display: none;
}

#shopify-subscription-policy-button {
  background: none;
  border: none;
  padding: 0;
  text-decoration: underline;
  font-size: inherit;
  cursor: pointer;
}

#shopify-subscription-policy-button::before {
  box-shadow: none;
}

      </style>
<script>window.performance && window.performance.mark && window.performance.mark('shopify.content_for_header.end');</script>


    <style data-shopify="">
      
      
      
      
      
      
      @font-face {
  font-family: "Century Gothic";
  font-weight: 400;
  font-style: normal;
  font-display: swap;
  src: url("//laphet.de/cdn/fonts/century_gothic/centurygothic_n4.ad57dd3bb953e5ec072f848ba96048738158e9b0.woff2?h1=dGVhZWF0cy5teXNob3BpZnkuY29t&h2=bXlhbm1hci1ncm9jZXJ5LmFjY291bnQubXlzaG9waWZ5LmNvbQ&h3=bGFwaGV0LmRl&h4=dGVhZWF0cy5jb20&hmac=fabd0a5193a0ca17fea6cc6aa166ac33e1ef99a41011de3f1a85c0daf3487e3b") format("woff2"),
       url("//laphet.de/cdn/fonts/century_gothic/centurygothic_n4.346454bcdd76b0c02e149e968e75218ca6ee803f.woff?h1=dGVhZWF0cy5teXNob3BpZnkuY29t&h2=bXlhbm1hci1ncm9jZXJ5LmFjY291bnQubXlzaG9waWZ5LmNvbQ&h3=bGFwaGV0LmRl&h4=dGVhZWF0cy5jb20&hmac=47799fbd5111a115bc2e3096b5016b6019c60b6a488e49a5542430d69c65960c") format("woff");
}

      @font-face {
  font-family: "Century Gothic";
  font-weight: 700;
  font-style: normal;
  font-display: swap;
  src: url("//laphet.de/cdn/fonts/century_gothic/centurygothic_n7.9c88796e9511a086b9c0038824e3fcaa4e104f7d.woff2?h1=dGVhZWF0cy5teXNob3BpZnkuY29t&h2=bXlhbm1hci1ncm9jZXJ5LmFjY291bnQubXlzaG9waWZ5LmNvbQ&h3=bGFwaGV0LmRl&h4=dGVhZWF0cy5jb20&hmac=8deea9f96a8e68680e1d4351945e5a76b1cea8eded6a0010fa1ce4b3137d5ea6") format("woff2"),
       url("//laphet.de/cdn/fonts/century_gothic/centurygothic_n7.bfbdd76b5b769e73488b72ad922937634199bb91.woff?h1=dGVhZWF0cy5teXNob3BpZnkuY29t&h2=bXlhbm1hci1ncm9jZXJ5LmFjY291bnQubXlzaG9waWZ5LmNvbQ&h3=bGFwaGV0LmRl&h4=dGVhZWF0cy5jb20&hmac=0d7987f774dffed162193f5680a0ce78a75e105bf235a5fa7b52a091cccdc0d9") format("woff");
}

:root {
        --border-radius-square: 50%;
        --border-radius-pill: 9999px;;
        --border-radius: 8px;

        --space-xsmall: 0.33rem;
        --space-small: 0.66rem;
        --space-medium: 1rem;
        --space-large: 2rem;
        --space-xlarge: 4rem;

        --font-body-family: "New York", Iowan Old Style, Apple Garamond, Baskerville, Times New Roman, Droid Serif, Times, Source Serif Pro, serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
        --font-body-style: normal;
        --font-body-weight: 400;
        --font-body-size: 16px;
        --font-body-text-transform: unset;
        --font-body-letter-spacing: 0;
        --font-heading-family: "New York", Iowan Old Style, Apple Garamond, Baskerville, Times New Roman, Droid Serif, Times, Source Serif Pro, serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
        --font-heading-style: normal;
        --font-heading-weight: 400;
        --font-heading-base-size: 2.8rem;
        
          --font-heading-text-transform: none;
          --font-heading-letter-spacing: 0;
        
        --font-heading-size-large: var(--font-heading-base-size);
        --font-heading-size-medium: calc(var(--font-heading-base-size) * 0.8);
        --font-heading-size-small: calc(var(--font-heading-base-size) * 0.6);
        --font-heading-size-xsmall: 1.3rem;
        --font-heading-line-height: 1.15;
        --font-copy-size-large: 1.25rem;
        --font-copy-size-small: 0.9rem;
        --font-copy-size-xsmall: 0.775rem;
        --font-copy-size-xxsmall: 0.7rem;
        --font-copy-line-height: 1.5;
        --font-accent-family: "Century Gothic", sans-serif;
        --font-accent-style: normal;
        --font-accent-weight: 400;
        
          --font-accent-text-transform: none;
          --font-accent-letter-spacing: 0;
        
        --font-accent-line-height: 1.1;
        --font-accent-base-size: 0.75rem;
        --font-button-family: var(--font-body-family);
        --font-button-letter-spacing: var(--font-body-letter-spacing);
        --font-button-text-transform: var(--font-body-text-transform);
        --font-button-size: 1rem;

        --product-image-aspect-ratio: 1;
        
          --product-image-aspect-ratio-fallback-padding-top: 100%;
        

        --border-color-opacity: 0.25;
        --color-border: #e6e6e6;
        --color-background-raw: 0, 0%, 100%;
        --color-foreground-raw: 120, 2%, 11%;
        --color-primary-raw: 208, 68%, 93%;
        --color-secondary-raw: 17, 45%, 87%;
        --color-tertiary-raw: 200, 15%, 85%;
        --color-quaternary-raw: 181, 53%, 16%;
        --color-quinary-raw: 134, 23%, 89%;
        --color-senary-raw: 15, 55%, 96%;
        --color-primary-contrast-raw: 0, 0%, 0%;
        --color-secondary-contrast-raw: 120, 2%, 11%;
        --color-tertiary-contrast-raw: 120, 2%, 11%;
        --color-quaternary-contrast-raw: 0, 0%, 100%;
        --color-quinary-contrast-raw: 120, 2%, 11%;
        --color-senary-contrast-raw: 120, 2%, 11%;
        --color-site-header-bg: #ffffff;
        --color-site-header-border: #e6e6e6;
        --color-nav-text: #1c1d1c;
        --color-nav-text-raw: 120, 2%, 11%;
        --color-site-footer-bg: #1c1d1c;
        --color-site-footer-text-raw: 0, 0%, 100%;
        --color-site-footer-text: #ffffff;
        --color-site-footer-border: #434343;
        --color-badge-default: #e6e6e6;
        --color-sale-badge-bg: #dc1e1e;
        --color-sale-badge-text: #ffffff;
        --color-sold-out-badge-bg: #ececec;
        --color-sold-out-badge-text: #434543;
        --color-coming-soon-badge-bg: #e9ece0;
        --color-coming-soon-badge-text: #000000;
        --color-new-badge-bg: #edd8d0;
        --color-new-badge-text: #1c1d1c;
        --color-foreground: hsl(var(--color-foreground-raw));
        --color-background: hsl(var(--color-background-raw));
        --color-image-placeholder: linear-gradient(335deg, rgba(244, 242, 234, 1) 14%, rgba(224, 232, 234, 1) 100%);
        --color-primary: hsl(var(--color-primary-raw));
        --color-secondary: hsl(var(--color-secondary-raw));
        --color-tertiary: hsl(var(--color-tertiary-raw));
        --color-quaternary: hsl(var(--color-quaternary-raw));
        --color-quinary: hsl(var(--color-quinary-raw));
        --color-senary: hsl(var(--color-senary-raw));
        --color-primary-contrast: hsl(var(--color-primary-contrast-raw));
        --color-secondary-contrast: hsl(var(--color-secondary-contrast-raw));
        --color-tertiary-contrast: hsl(var(--color-tertiary-contrast-raw));
        --color-quaternary-contrast: hsl(var(--color-quaternary-contrast-raw));
        --color-quinary-contrast: hsl(var(--color-quinary-contrast-raw));
        --color-senary-contrast: hsl(var(--color-senary-contrast-raw));
        --color-box-shadow: hsla(var(--color-foreground-raw), 0.15);
        --color-overlay: hsla(var(--color-senary-raw), 0.7);
        --color-default: var(--color-background);
        --color-inverse: var(--color-foreground);
        --color-discount-bg: hsla(var(--color-foreground-raw), 0.07);

        --border-size--thick: 2px;
        --border-size--thin: 1px;
        --border--thin: var(--border-size--thin) solid var(--color-border);
        --border--thick: var(--border-size--thick) solid var(--color-border);
        --border-radius-arch: 120px;
        --box-shadow--bottom: 0 12px 20px -15px var(--color-box-shadow);
        --box-shadow--all-sides: 0 0 20px var(--color-box-shadow);
        --box-shadow--all-sides-small: 0 0 10px var(--color-box-shadow);

        --space-drawer-sides: var(--space-medium);
        --space-viewport-sides: var(--space-large);
        --space-grid-gap: var(--space-large);

        --container-max-width-copy: 45rem;
        --container-width-form: 38ch;
        --container-width-large: 62rem;
        --container-width-medium: 40rem;
        --container-width-small: 24rem;
        --drawer-width: 320px;
        --page-width: 100rem;
        --drawer-header-height: 5rem;
        --pointer-element-min-height: 44px;
        --button-tag-height: calc(var(--pointer-element-min-height) * 0.75);
        --site-header-min-height: 6rem;
        --site-header-height: var(--site-header-min-height);
        --link-underline-offset: 0.25em;

        --transition-duration: 200ms;
        --transition-duration-long: 500ms;
        --transition-timing-function: ease;

        --z-index-hidden: -1;
        --z-index-background: 0;
        --z-index-base: 1;
        --z-index-overlay: 2;
        --z-index-overlay-interaction: 3;
        --z-index-slideshow-interaction: 5;
        --z-index-header-under-freeze: 10;
        --z-index-site-footer: 90;
        --z-index-pop-up-open: 92;
        --z-index-pop-up-overlay: 93;
        --z-index-newsletter-modal: 95;
        --z-index-product-quick-add: 100;
        --z-index-site-header: 110;
        --z-index-site-header-heading: 111;
        --z-index-announcement-bar: 111;
        --z-index-skip-to-content-link: 115;
        --z-index-search-on-mobile: 120;
        --z-index-freeze-overlay: 195;
        --z-index-drawer: 200;
        --z-index-modal-overlay: 249;
        --z-index-modal: 250;
        --z-index-age-verifier: 300;
      }

      @media screen and (max-width: 767px) {
        :root {
          --space-grid-gap: var(--space-medium);
          --space-viewport-sides: var(--space-medium);
          --font-heading-size-large: calc(var(--font-heading-base-size) * 0.8);
          --font-heading-size-medium: calc(var(--font-heading-base-size) * 0.6);
          --font-heading-size-small: calc(var(--font-heading-base-size) * 0.5);
          --font-heading-size-xsmall: 1.2rem;
        }
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      html {
        background-color: var(--color-background);
        box-sizing: border-box;
        font-size: var(--font-body-size);
        min-height: 100%;
      }

      body {
        accent-color: var(--color-primary);
        color: var(--color-foreground);
        font-family: var(--font-body-family);
        font-size: 1rem;
        -moz-osx-font-smoothing: grayscale;
        -webkit-font-smoothing: antialiased;
        font-style: var(--font-body-style);
        font-weight: var(--font-body-weight);
        height: 100%;
        line-height: var(--font-copy-line-height);
        margin: 0;
        min-height: 100vh;
        position: relative;
      }

      
        .image-container--product,
        .image-container--product img,
        .image-container--product svg,
        .collection-card__image-container--rounded,
        .collection-card__image-container--rounded img,
        .collection-card__image-container--rounded svg {
          border-radius: 5%;
        }
      

      
    </style>

    <link href="./Laphet_files/styles-base.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-buttons.css" rel="stylesheet" type="text/css" media="all">

    <link href="./Laphet_files/styles-component-age-verifier.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-announcement-bar.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-header.css" rel="stylesheet" type="text/css" media="all">

    <link href="./Laphet_files/styles-component-banner.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-accordion.css" rel="stylesheet" type="text/css" media="all">
    
    <link href="./Laphet_files/styles-component-badge.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-blog-posts.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-button-tabs.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-cards.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-cart-item.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-cart-notification.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-contact-form.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-drawer.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-drawer-menu.css" rel="stylesheet" type="text/css" media="all">

    <link href="./Laphet_files/styles-component-featured-product.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-footer.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-icon-list.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-image-grid-with-text.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-image-with-text.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-line-items.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-loader.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-logo-list.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-media-gallery.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-newsletter.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-map.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-model-viewer-ui.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-pagination.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-promo-popup.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-results-grid.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-component-slider.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-utilities-align-display.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-utilities-animations.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-utilities-colors.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-utilities-containers.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-utilities-element-object.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-utilities-flex-grid.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-utilities-forms.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-utilities-misc.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-utilities-typography.css" rel="stylesheet" type="text/css" media="all">
    <link href="./Laphet_files/styles-utilities-spacing.css" rel="stylesheet" type="text/css" media="all">
    <script src="./Laphet_files/lazysizes.min.js.download" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
      <style>
        
      </style>
    

    <script>document.documentElement.className = document.documentElement.className.replace('no-js', 'js');</script>

	<script>var loox_global_hash = '1738674247829';</script><script>var loox_pop_active = true;var loox_pop_display = {"home_page":true,"product_page":true,"cart_page":false,"other_pages":true};</script><script>var loox_floating_widget = {"active":true,"rtl":false,"position":"right","button_text":"Bewertungen","button_bg_color":"FAF1EE","button_text_color":"000000","display_on_home_page":true,"display_on_product_page":true,"display_on_cart_page":true,"display_on_other_pages":true,"hide_on_mobile":false,"orientation":"default"};
</script><script>var visitor_level_referral = {"active":true,"rtl":false,"position":"left","button_text":"Erhalte €3","button_bg_color":"e0ecfc","button_text_color":"000000","display_on_home_page":false,"display_on_product_page":true,"display_on_cart_page":true,"display_on_other_pages":true,"hide_on_mobile":true,"sidebar_visible":true,"orientation":"default"};
</script><style>.loox-reviews-default { max-width: 1200px; margin: 0 auto; }.loox-rating .loox-icon { color:#EBBF20; }
:root { --lxs-rating-icon-color: #EBBF20; }</style>
<style>

.smartnWrapper ul, ol {
    display: block;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: 40px;
    list-style-type: revert;
}
.smartnWrapper li {
    list-style: inherit;
    list-style-position: inside;
}



.smart-d-block{display:block;}
.smart-d-inline-block{display:inline-block;}

.smart-align-middle{vertical-align:middle;}
.smart-align-top {vertical-align: top;}

.smart-m-0{margin: 0rem;} 
.smart-mr-0{margin-right: 0rem;} 
.smart-ml-0{margin-left: 0rem;}
.smart-mt-0{margin-top: 0rem;}
.smart-mb-0{margin-bottom: 0rem;}
  
.smart-m-1{margin: .25rem;} 
.smart-mr-1{margin-right: .25rem;} 
.smart-ml-1{margin-left: .25rem;}
.smart-mt-1{margin-top: .25rem;}
.smart-mb-1{margin-bottom: .25rem;}

.smart-m-2{margin: .5rem;} 
.smart-mr-2{margin-right: .5rem;} 
.smart-ml-2{margin-left: .5rem;}
.smart-mt-2{margin-top: .5rem;}
.smart-mb-2{margin-bottom: .5rem;}

.smart-m-3{margin: 1em;} 
.smart-mr-3{margin-right: 1rem;} 
.smart-ml-3{margin-left: 1rem;}
.smart-mt-3{margin-top: 1rem;}
.smart-mb-3{margin-bottom: 1rem;}

.smart-m-4{margin: 1.5rem;} 
.smart-mr-4{margin-right: 1.5rem;} 
.smart-ml-4{margin-left: 1.5rem;}
.smart-mt-4{margin-top: 1.5rem;}
.smart-mb-4{margin-bottom: 1.5rem;}

.smart-m-5{margin: 3rem;} 
.smart-mr-5{margin-right: 3rem;} 
.smart-ml-5{margin-left: 3rem;}
.smart-mt-5{margin-top: 3rem;}
.smart-mb-5{margin-bottom: 3rem;}

.smart-p-0{padding: 0rem;} 
.smart-pr-0{padding-right: 0rem;} 
.smart-pl-0{padding-left: 0rem;}
.smart-pt-0{padding-top: 0rem;}
.smart-pb-0{padding-bottom: 0rem;}
  
.smart-p-1{padding: .25rem;} 
.smart-pr-1{padding-right: .25rem;} 
.smart-pl-1{padding-left: .25rem;}
.smart-pt-1{padding-top: .25rem;}
.smart-pb-1{padding-bottom: .25rem;}

.smart-p-2{padding: .5rem;} 
.smart-pr-2{padding-right: .5rem;} 
.smart-pl-2{padding-left: .5rem;}
.smart-pt-2{padding-top: .5rem;}
.smart-pb-2{padding-bottom: .5rem;}

.smart-p-3{padding: 1em;} 
.smart-pr-3{padding-right: 1rem;} 
.smart-pl-3{padding-left: 1rem;}
.smart-pt-3{padding-top: 1rem;}
.smart-pb-3{padding-bottom: 1rem;}

.smart-p-4{padding: 1.5rem;} 
.smart-pr-4{padding-right: 1.5rem;} 
.smart-pl-4{padding-left: 1.5rem;}
.smart-pt-4{padding-top: 1.5rem;}
.smart-pb-4{padding-bottom: 1.5rem;}

.smart-p-5{padding: 3rem;} 
.smart-pr-5{padding-right: 3rem;} 
.smart-pl-5{padding-left: 3rem;}
.smart-pt-5{padding-top: 3rem;}
.smart-pb-5{padding-bottom: 3rem;}

.smart-px-2{padding-left:.5rem;padding-right:.5rem;}
.smart-py-1{padding-top:.25rem;padding-bottom:.25rem;}
.smart-mx-auto{margin-left: auto;margin-right: auto;}
.smart-text-center{text-align:center;}
.smart-text-left{text-align:left;}

.smart-px-0{padding-left:0px !important;padding-right:0px !important;}
    
.smartbanPhotoOuter {line-height: 0px;}

@-ms-viewport{width:device-width}.smart-container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:576px){.smart-container{max-width:540px}}@media (min-width:768px){.smart-container{max-width:720px}}@media (min-width:992px){.smart-container{max-width:960px}}@media (min-width:1200px){.smart-container{max-width:1140px}}.smart-container-fluid{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.smart-row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.smart-no-gutters{margin-right:0;margin-left:0}.smart-no-gutters>.col,.smart-no-gutters>[class*=col-]{padding-right:0;padding-left:0}.smart-col,.smart-col-1,.smart-col-10,.smart-col-11,.smart-col-12,.smart-col-2,.smart-col-3,.smart-col-4,.smart-col-5,.smart-col-6,.smart-col-7,.smart-col-8,.smart-col-9,.smart-col-auto,.smart-col-lg,.smart-col-lg-1,.smart-col-lg-10,.smart-col-lg-11,.smart-col-lg-12,.smart-col-lg-2,.smart-col-lg-3,.smart-col-lg-4,.smart-col-lg-5,.smart-col-lg-6,.smart-col-lg-7,.smart-col-lg-8,.smart-col-lg-9,.smart-col-lg-auto,.smart-col-md,.smart-col-md-1,.smart-col-md-10,.smart-col-md-11,.smart-col-md-12,.smart-col-md-2,.smart-col-md-3,.smart-col-md-4,.smart-col-md-5,.smart-col-md-6,.smart-col-md-7,.smart-col-md-8,.smart-col-md-9,.smart-col-md-auto,.smart-col-sm,.smart-col-sm-1,.smart-col-sm-10,.smart-col-sm-11,.smart-col-sm-12,.smart-col-sm-2,.smart-col-sm-3,.smart-col-sm-4,.smart-col-sm-5,.smart-col-sm-6,.smart-col-sm-7,.smart-col-sm-8,.smart-col-sm-9,.smart-col-sm-auto,.smart-col-xl,.smart-col-xl-1,.smart-col-xl-10,.smart-col-xl-11,.smart-col-xl-12,.smart-col-xl-2,.smart-col-xl-3,.smart-col-xl-4,.smart-col-xl-5,.smart-col-xl-6,.smart-col-xl-7,.smart-col-xl-8,.smart-col-xl-9,.smart-col-xl-auto{position:relative;width:100%;min-height:1px;padding-right:15px;padding-left:15px}.smart-col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.smart-col-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:none}.smart-col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.smart-col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.smart-col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.smart-col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.smart-col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.smart-col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.smart-col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.smart-col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.smart-col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.smart-col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.smart-col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.smart-col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.smart-order-first{-ms-flex-order:-1;order:-1}.smart-order-last{-ms-flex-order:13;order:13}.smart-order-0{-ms-flex-order:0;order:0}.smart-order-1{-ms-flex-order:1;order:1}.smart-order-2{-ms-flex-order:2;order:2}.smart-order-3{-ms-flex-order:3;order:3}.smart-order-4{-ms-flex-order:4;order:4}.smart-order-5{-ms-flex-order:5;order:5}.smart-order-6{-ms-flex-order:6;order:6}.smart-order-7{-ms-flex-order:7;order:7}.smart-order-8{-ms-flex-order:8;order:8}.smart-order-9{-ms-flex-order:9;order:9}.smart-order-10{-ms-flex-order:10;order:10}.smart-order-11{-ms-flex-order:11;order:11}.smart-order-12{-ms-flex-order:12;order:12}.smart-offset-1{margin-left:8.333333%}.smart-offset-2{margin-left:16.666667%}.smart-offset-3{margin-left:25%}.smart-offset-4{margin-left:33.333333%}.smart-offset-5{margin-left:41.666667%}.smart-offset-6{margin-left:50%}.smart-offset-7{margin-left:58.333333%}.smart-offset-8{margin-left:66.666667%}.smart-offset-9{margin-left:75%}.smart-offset-10{margin-left:83.333333%}.smart-offset-11{margin-left:91.666667%}@media (min-width:576px){.smart-col-sm{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.smart-col-sm-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:none}.smart-col-sm-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.smart-col-sm-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.smart-col-sm-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.smart-col-sm-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.smart-col-sm-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.smart-col-sm-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.smart-col-sm-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.smart-col-sm-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.smart-col-sm-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.smart-col-sm-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.smart-col-sm-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.smart-col-sm-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.smart-order-sm-first{-ms-flex-order:-1;order:-1}.smart-order-sm-last{-ms-flex-order:13;order:13}.smart-order-sm-0{-ms-flex-order:0;order:0}.smart-order-sm-1{-ms-flex-order:1;order:1}.smart-order-sm-2{-ms-flex-order:2;order:2}.smart-order-sm-3{-ms-flex-order:3;order:3}.smart-order-sm-4{-ms-flex-order:4;order:4}.smart-order-sm-5{-ms-flex-order:5;order:5}.smart-order-sm-6{-ms-flex-order:6;order:6}.smart-order-sm-7{-ms-flex-order:7;order:7}.smart-order-sm-8{-ms-flex-order:8;order:8}.smart-order-sm-9{-ms-flex-order:9;order:9}.smart-order-sm-10{-ms-flex-order:10;order:10}.smart-order-sm-11{-ms-flex-order:11;order:11}.smart-order-sm-12{-ms-flex-order:12;order:12}.smart-offset-sm-0{margin-left:0}.smart-offset-sm-1{margin-left:8.333333%}.smart-offset-sm-2{margin-left:16.666667%}.smart-offset-sm-3{margin-left:25%}.smart-offset-sm-4{margin-left:33.333333%}.smart-offset-sm-5{margin-left:41.666667%}.smart-offset-sm-6{margin-left:50%}.smart-offset-sm-7{margin-left:58.333333%}.smart-offset-sm-8{margin-left:66.666667%}.smart-offset-sm-9{margin-left:75%}.smart-offset-sm-10{margin-left:83.333333%}.smart-offset-sm-11{margin-left:91.666667%}}@media (min-width:768px){.smart-col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.smart-col-md-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:none}.smart-col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.smart-col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.smart-col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.smart-col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.smart-col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.smart-col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.smart-col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.smart-col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.smart-col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.smart-col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.smart-col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.smart-col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.smart-order-md-first{-ms-flex-order:-1;order:-1}.smart-order-md-last{-ms-flex-order:13;order:13}.smart-order-md-0{-ms-flex-order:0;order:0}.smart-order-md-1{-ms-flex-order:1;order:1}.smart-order-md-2{-ms-flex-order:2;order:2}.smart-order-md-3{-ms-flex-order:3;order:3}.smart-order-md-4{-ms-flex-order:4;order:4}.smart-order-md-5{-ms-flex-order:5;order:5}.smart-order-md-6{-ms-flex-order:6;order:6}.smart-order-md-7{-ms-flex-order:7;order:7}.smart-order-md-8{-ms-flex-order:8;order:8}.smart-order-md-9{-ms-flex-order:9;order:9}.smart-order-md-10{-ms-flex-order:10;order:10}.smart-order-md-11{-ms-flex-order:11;order:11}.smart-order-md-12{-ms-flex-order:12;order:12}.smart-offset-md-0{margin-left:0}.smart-offset-md-1{margin-left:8.333333%}.smart-offset-md-2{margin-left:16.666667%}.smart-offset-md-3{margin-left:25%}.smart-offset-md-4{margin-left:33.333333%}.smart-offset-md-5{margin-left:41.666667%}.smart-offset-md-6{margin-left:50%}.smart-offset-md-7{margin-left:58.333333%}.smart-offset-md-8{margin-left:66.666667%}.smart-offset-md-9{margin-left:75%}.smart-offset-md-10{margin-left:83.333333%}.smart-offset-md-11{margin-left:91.666667%}}@media (min-width:992px){.smart-col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.smart-col-lg-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:none}.smart-col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.smart-col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.smart-col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.smart-col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.smart-col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.smart-col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.smart-col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.smart-col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.smart-col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.smart-col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.smart-col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.smart-col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.smart-order-lg-first{-ms-flex-order:-1;order:-1}.smart-order-lg-last{-ms-flex-order:13;order:13}.smart-order-lg-0{-ms-flex-order:0;order:0}.smart-order-lg-1{-ms-flex-order:1;order:1}.smart-order-lg-2{-ms-flex-order:2;order:2}.smart-order-lg-3{-ms-flex-order:3;order:3}.smart-order-lg-4{-ms-flex-order:4;order:4}.smart-order-lg-5{-ms-flex-order:5;order:5}.smart-order-lg-6{-ms-flex-order:6;order:6}.smart-order-lg-7{-ms-flex-order:7;order:7}.smart-order-lg-8{-ms-flex-order:8;order:8}.smart-order-lg-9{-ms-flex-order:9;order:9}.smart-order-lg-10{-ms-flex-order:10;order:10}.smart-order-lg-11{-ms-flex-order:11;order:11}.smart-order-lg-12{-ms-flex-order:12;order:12}.smart-offset-lg-0{margin-left:0}.smart-offset-lg-1{margin-left:8.333333%}.smart-offset-lg-2{margin-left:16.666667%}.smart-offset-lg-3{margin-left:25%}.smart-offset-lg-4{margin-left:33.333333%}.smart-offset-lg-5{margin-left:41.666667%}.smart-offset-lg-6{margin-left:50%}.smart-offset-lg-7{margin-left:58.333333%}.smart-offset-lg-8{margin-left:66.666667%}.smart-offset-lg-9{margin-left:75%}.smart-offset-lg-10{margin-left:83.333333%}.smart-offset-lg-11{margin-left:91.666667%}}@media (min-width:1200px){.smart-col-xl{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.smart-col-xl-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:none}.smart-col-xl-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.smart-col-xl-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.smart-col-xl-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.smart-col-xl-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.smart-col-xl-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.smart-col-xl-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.smart-col-xl-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.smart-col-xl-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.smart-col-xl-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.smart-col-xl-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.smart-col-xl-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.smart-col-xl-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.smart-order-xl-first{-ms-flex-order:-1;order:-1}.smart-order-xl-last{-ms-flex-order:13;order:13}.smart-order-xl-0{-ms-flex-order:0;order:0}.smart-order-xl-1{-ms-flex-order:1;order:1}.smart-order-xl-2{-ms-flex-order:2;order:2}.smart-order-xl-3{-ms-flex-order:3;order:3}.smart-order-xl-4{-ms-flex-order:4;order:4}.smart-order-xl-5{-ms-flex-order:5;order:5}.smart-order-xl-6{-ms-flex-order:6;order:6}.smart-order-xl-7{-ms-flex-order:7;order:7}.smart-order-xl-8{-ms-flex-order:8;order:8}.smart-order-xl-9{-ms-flex-order:9;order:9}.smart-order-xl-10{-ms-flex-order:10;order:10}.smart-order-xl-11{-ms-flex-order:11;order:11}.smart-order-xl-12{-ms-flex-order:12;order:12}.smart-offset-xl-0{margin-left:0}.smart-offset-xl-1{margin-left:8.333333%}.smart-offset-xl-2{margin-left:16.666667%}.smart-offset-xl-3{margin-left:25%}.smart-offset-xl-4{margin-left:33.333333%}.smart-offset-xl-5{margin-left:41.666667%}.smart-offset-xl-6{margin-left:50%}.smart-offset-xl-7{margin-left:58.333333%}.smart-offset-xl-8{margin-left:66.666667%}.smart-offset-xl-9{margin-left:75%}.smart-offset-xl-10{margin-left:83.333333%}.smart-offset-xl-11{margin-left:91.666667%}}.smart-d-none{display:none!important}.smart-d-inline{display:inline!important}.smart-d-inline-block{display:inline-block!important}.smart-d-block{display:block!important}.smart-d-table{display:table!important}.smart-d-table-row{display:table-row!important}.smart-d-table-cell{display:table-cell!important}.smart-d-flex{display:-ms-flexbox!important;display:flex!important}.smart-d-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}@media (min-width:576px){.smart-d-sm-none{display:none!important}.smart-d-sm-inline{display:inline!important}.smart-d-sm-inline-block{display:inline-block!important}.smart-d-sm-block{display:block!important}.smart-d-sm-table{display:table!important}.smart-d-sm-table-row{display:table-row!important}.smart-d-sm-table-cell{display:table-cell!important}.smart-d-sm-flex{display:-ms-flexbox!important;display:flex!important}.smart-d-sm-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media (min-width:768px){.smart-d-md-none{display:none!important}.smart-d-md-inline{display:inline!important}.smart-d-md-inline-block{display:inline-block!important}.smart-d-md-block{display:block!important}.smart-d-md-table{display:table!important}.smart-d-md-table-row{display:table-row!important}.smart-d-md-table-cell{display:table-cell!important}.smart-d-md-flex{display:-ms-flexbox!important;display:flex!important}.smart-d-md-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media (min-width:992px){.smart-d-lg-none{display:none!important}.smart-d-lg-inline{display:inline!important}.smart-d-lg-inline-block{display:inline-block!important}.smart-d-lg-block{display:block!important}.smart-d-lg-table{display:table!important}.smart-d-lg-table-row{display:table-row!important}.smart-d-lg-table-cell{display:table-cell!important}.smart-d-lg-flex{display:-ms-flexbox!important;display:flex!important}.smart-d-lg-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media (min-width:1200px){.smart-d-xl-none{display:none!important}.smart-d-xl-inline{display:inline!important}.smart-d-xl-inline-block{display:inline-block!important}.smart-d-xl-block{display:block!important}.smart-d-xl-table{display:table!important}.smart-d-xl-table-row{display:table-row!important}.smart-d-xl-table-cell{display:table-cell!important}.smart-d-xl-flex{display:-ms-flexbox!important;display:flex!important}.smart-d-xl-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media  print{.smart-d-print-none{display:none!important}.smart-d-print-inline{display:inline!important}.smart-d-print-inline-block{display:inline-block!important}.smart-d-print-block{display:block!important}.smart-d-print-table{display:table!important}.smart-d-print-table-row{display:table-row!important}.smart-d-print-table-cell{display:table-cell!important}.smart-d-print-flex{display:-ms-flexbox!important;display:flex!important}.smart-d-print-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}.smart-flex-row{-ms-flex-direction:row!important;flex-direction:row!important}.smart-flex-column{-ms-flex-direction:column!important;flex-direction:column!important}.smart-flex-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.smart-flex-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.smart-flex-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.smart-flex-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.smart-flex-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.smart-flex-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.smart-flex-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.smart-flex-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.smart-flex-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.smart-flex-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.smart-justify-content-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.smart-justify-content-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.smart-justify-content-center{-ms-flex-pack:center!important;justify-content:center!important}.smart-justify-content-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.smart-justify-content-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.smart-align-items-start{-ms-flex-align:start!important;align-items:flex-start!important}.smart-align-items-end{-ms-flex-align:end!important;align-items:flex-end!important}.smart-align-items-center{-ms-flex-align:center!important;align-items:center!important}.smart-align-items-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.smart-align-items-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.smart-align-content-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.smart-align-content-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.smart-align-content-center{-ms-flex-line-pack:center!important;align-content:center!important}.smart-align-content-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.smart-align-content-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.smart-align-content-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.smart-align-self-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.smart-align-self-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.smart-align-self-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.smart-align-self-center{-ms-flex-item-align:center!important;align-self:center!important}.smart-align-self-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.smart-align-self-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}@media (min-width:576px){.smart-flex-sm-row{-ms-flex-direction:row!important;flex-direction:row!important}.smart-flex-sm-column{-ms-flex-direction:column!important;flex-direction:column!important}.smart-flex-sm-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.smart-flex-sm-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.smart-flex-sm-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.smart-flex-sm-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.smart-flex-sm-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.smart-flex-sm-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.smart-flex-sm-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.smart-flex-sm-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.smart-flex-sm-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.smart-flex-sm-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.smart-justify-content-sm-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.smart-justify-content-sm-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.smart-justify-content-sm-center{-ms-flex-pack:center!important;justify-content:center!important}.smart-justify-content-sm-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.smart-justify-content-sm-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.smart-align-items-sm-start{-ms-flex-align:start!important;align-items:flex-start!important}.smart-align-items-sm-end{-ms-flex-align:end!important;align-items:flex-end!important}.smart-align-items-sm-center{-ms-flex-align:center!important;align-items:center!important}.smart-align-items-sm-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.smart-align-items-sm-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.smart-align-content-sm-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.smart-align-content-sm-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.smart-align-content-sm-center{-ms-flex-line-pack:center!important;align-content:center!important}.smart-align-content-sm-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.smart-align-content-sm-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.smart-align-content-sm-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.smart-align-self-sm-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.smart-align-self-sm-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.smart-align-self-sm-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.smart-align-self-sm-center{-ms-flex-item-align:center!important;align-self:center!important}.smart-align-self-sm-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.smart-align-self-sm-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}@media (min-width:768px){.smart-flex-md-row{-ms-flex-direction:row!important;flex-direction:row!important}.smart-flex-md-column{-ms-flex-direction:column!important;flex-direction:column!important}.smart-flex-md-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.smart-flex-md-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.smart-flex-md-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.smart-flex-md-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.smart-flex-md-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.smart-flex-md-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.smart-flex-md-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.smart-flex-md-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.smart-flex-md-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.smart-flex-md-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.smart-justify-content-md-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.smart-justify-content-md-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.smart-justify-content-md-center{-ms-flex-pack:center!important;justify-content:center!important}.smart-justify-content-md-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.smart-justify-content-md-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.smart-align-items-md-start{-ms-flex-align:start!important;align-items:flex-start!important}.smart-align-items-md-end{-ms-flex-align:end!important;align-items:flex-end!important}.smart-align-items-md-center{-ms-flex-align:center!important;align-items:center!important}.smart-align-items-md-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.smart-align-items-md-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.smart-align-content-md-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.smart-align-content-md-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.smart-align-content-md-center{-ms-flex-line-pack:center!important;align-content:center!important}.smart-align-content-md-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.smart-align-content-md-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.smart-align-content-md-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.smart-align-self-md-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.smart-align-self-md-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.smart-align-self-md-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.smart-align-self-md-center{-ms-flex-item-align:center!important;align-self:center!important}.smart-align-self-md-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.smart-align-self-md-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}@media (min-width:992px){.smart-flex-lg-row{-ms-flex-direction:row!important;flex-direction:row!important}.smart-flex-lg-column{-ms-flex-direction:column!important;flex-direction:column!important}.smart-flex-lg-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.smart-flex-lg-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.smart-flex-lg-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.smart-flex-lg-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.smart-flex-lg-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.smart-flex-lg-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.smart-flex-lg-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.smart-flex-lg-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.smart-flex-lg-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.smart-flex-lg-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.smart-justify-content-lg-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.smart-justify-content-lg-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.smart-justify-content-lg-center{-ms-flex-pack:center!important;justify-content:center!important}.smart-justify-content-lg-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.smart-justify-content-lg-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.smart-align-items-lg-start{-ms-flex-align:start!important;align-items:flex-start!important}.smart-align-items-lg-end{-ms-flex-align:end!important;align-items:flex-end!important}.smart-align-items-lg-center{-ms-flex-align:center!important;align-items:center!important}.smart-align-items-lg-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.smart-align-items-lg-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.smart-align-content-lg-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.smart-align-content-lg-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.smart-align-content-lg-center{-ms-flex-line-pack:center!important;align-content:center!important}.smart-align-content-lg-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.smart-align-content-lg-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.smart-align-content-lg-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.smart-align-self-lg-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.smart-align-self-lg-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.smart-align-self-lg-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.smart-align-self-lg-center{-ms-flex-item-align:center!important;align-self:center!important}.smart-align-self-lg-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.smart-align-self-lg-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}@media (min-width:1200px){.smart-flex-xl-row{-ms-flex-direction:row!important;flex-direction:row!important}.smart-flex-xl-column{-ms-flex-direction:column!important;flex-direction:column!important}.smart-flex-xl-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.smart-flex-xl-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.smart-flex-xl-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.smart-flex-xl-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.smart-flex-xl-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.smart-flex-xl-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.smart-flex-xl-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.smart-flex-xl-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.smart-flex-xl-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.smart-flex-xl-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.smart-justify-content-xl-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.smart-justify-content-xl-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.smart-justify-content-xl-center{-ms-flex-pack:center!important;justify-content:center!important}.smart-justify-content-xl-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.smart-justify-content-xl-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.smart-align-items-xl-start{-ms-flex-align:start!important;align-items:flex-start!important}.smart-align-items-xl-end{-ms-flex-align:end!important;align-items:flex-end!important}.smart-align-items-xl-center{-ms-flex-align:center!important;align-items:center!important}.smart-align-items-xl-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.smart-align-items-xl-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.smart-align-content-xl-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.smart-align-content-xl-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.smart-align-content-xl-center{-ms-flex-line-pack:center!important;align-content:center!important}.smart-align-content-xl-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.smart-align-content-xl-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.smart-align-content-xl-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.smart-align-self-xl-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.smart-align-self-xl-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.smart-align-self-xl-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.smart-align-self-xl-center{-ms-flex-item-align:center!important;align-self:center!important}.smart-align-self-xl-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.smart-align-self-xl-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}

.smart-counter{display:none !important}

.smart-modal {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    display: none;
    overflow: auto;
    background-color: #000000;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 2147483647;
}

.smart-modal-window {
    position: relative;
    background-color: #FFFFFF;
    width: 50%;
    margin: 10vh auto;
    padding: 20px;
    max-height: 80vh;
    overflow: auto;
    
}

.smart-modal-window.smart-modal-small {
    width: 30%;
}

.smart-modal-window.smart-modal-large {
    width: 75%;
}

.smart-modal-close {
    position: absolute;
    top: 0;
    right: 0;
    color: rgba(0,0,0,0.3);
    height: 30px;
    width: 30px;
    font-size: 30px;
    line-height: 30px;
    text-align: center;
}

.smart-modal-close:hover,
.smart-modal-close:focus {
    color: #000000;
    cursor: pointer;
}

.smart-modal-open {
    display: block;
}

@media (max-width: 767px) {
    .smart-modal-window.smart-modal-large {
    width: 90% !important;
    }
    .smart-modal-window.smart-modal-small {
    width: 75% !important;
    }
    .smart-modal-window {
    width: 90% !important;
    }
}

#smart-modal-content div {
    width: auto !important;
}

.smartbCountry {display:none;}
.smartbanCountry {display:none;}
.smarthCountry {display:none;}
        
</style>


<script src="./Laphet_files/popper.min.js.download"></script>
<script src="./Laphet_files/tippy-bundle.umd.js.download"></script>

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', (event) => {
        var countsmartid = document.getElementById("smart-modal-outer");
        if(countsmartid){
        }else{
            var mysmartDiv = document.createElement("div");
            mysmartDiv.id = 'smart_modal_wrapper';
            mysmartDiv.innerHTML = '<div id="smart-modal-outer" class="smart-modal"><div class="smart-modal-window" id="smart-modal-window"><span class="smart-modal-close" id="smart-modal-close" data-dismiss="modal">&times;</span><div id="smart-modal-content"></div></div></div>';
            document.body.appendChild(mysmartDiv);
        }
    })
</script>
 


  <style>
    @media screen and (min-width: 767px) {
    
    }
     @media screen and (max-width: 767px) {
     .page-Uber-uns-about-us-page ul.logo-list.space--mt--large.list--unstyled {
    display: block !important;
}
      .page-Uber-uns-about-us-page li.logo-list__item {
    margin-bottom: 15px;
}
       .map {
    display: flex !important;
    flex-direction: column !important;
    gap: 1rem;
}

.map > *:first-child {
    flex: 0 0 50vh !important;
    order: 2;
}

.map > *:last-child {
    flex: 1 0 auto !important;
    order: 1;
}
     }
  </style>
  

<!-- BEGIN app block: shopify://apps/customer-accounts-concierge/blocks/loyalty/3c495b68-652c-468d-a0ef-5bad6935d104 --><!-- BEGIN app snippet: theme_customization_tags -->
<!-- END app snippet -->

<script>
  window.frcp = window.frcp || {}
  frcp.appProxy = null || '/apps/customer-portal'
  frcp.plugins = frcp.plugins || Object({"social_logins":null,"wishlist":null,"order_actions":"basic","custom_forms":null,"loyalty":null,"customer_account":"grandfathered","reorder_btn":true,"custom_pages":true,"cp_integrations":"basic","recently_viewed":true})
  frcp.moneyFormat ="€{{amount_with_comma_separator}}"
  frcp.loyalty = {
    customer: {
      id: null,
      froonzeToken: "ada95ce74e35368b18d952ce518c75a4db60c250dd50e55c7b337ee40087a401",
      firstName: null,
      lastName: null,
      phone: null,
      email: null,
      gender: null,
      dateOfBirth: '',
      tags: null,
      data: Object(),
    },
    settings: Object({"earning_rules":[],"spending_rules":[]}),
    texts: {
      launcher_button: Object(null),
      customer_page: Object(null),
    },
    referralToken: "MTM1cmVmNDEyOTczNDkyNg",
    socialAppIds: { facebook: "493867338961209" },
    widgetJsUrl: "https://cdn.shopify.com/extensions/94b7ae26-fce5-4df5-826a-2f949027db4d/accounts-concierge-173/assets/loyalty_widget-vMSlUyLk.js",
    widgetCssUrl: "https://cdn.shopify.com/extensions/94b7ae26-fce5-4df5-826a-2f949027db4d/accounts-concierge-173/assets/loyalty_widget-vMSlUyLk.css",
  }
  frcp.customerPage ||= {}
  frcp.customerPage.profile ||= {}
  frcp.customerPage.profile.dateOfBirth = ''
</script>


  


<!-- BEGIN app snippet: assets_loader --><script id="loyalty_widget_loader">
  (function() {
    const _loadAsset = function(tag, params, id) {
      const asset = document.createElement(tag)
      for (const key in params) asset[key] = params[key]
      if (id) asset.id = `frcp_${id.split('-')[0]}_main_js`
      document.head.append(asset)
    }
    _loadAsset('script', { src: 'https://cdn.shopify.com/extensions/94b7ae26-fce5-4df5-826a-2f949027db4d/accounts-concierge-173/assets/loyalty_widget_loader-6k7wN_NO.js', type: 'module', defer: true }, 'loyalty_widget_loader-6k7wN_NO.js')
    
      _loadAsset('link', { href: 'https://cdn.shopify.com/extensions/94b7ae26-fce5-4df5-826a-2f949027db4d/accounts-concierge-173/assets/loyalty_widget_loader-6k7wN_NO.css', rel: 'stylesheet', media: 'all' })
    
  })()
</script><script src="./Laphet_files/loyalty_widget_loader-6k7wN_NO.js.download" type="module" defer="" id="frcp_loyalty_widget_loader_main_js"></script><link href="./Laphet_files/loyalty_widget_loader-6k7wN_NO.css" rel="stylesheet" media="all">
<!-- END app snippet -->

<!-- END app block --><!-- BEGIN app block: shopify://apps/pagefly-page-builder/blocks/app-embed/83e179f7-59a0-4589-8c66-c0dddf959200 -->
<script type="module">
  window.PAGEFLY = {page_optimization:{assets_prefetching: false}}
  window?.PAGEFLY?.page_optimization?.assets_prefetching && console.log('PageFly enabled prefetch assets')
</script>


<!-- END app block --><!-- BEGIN app block: shopify://apps/textbox-textfield-by-textify/blocks/app-embed/b5626f69-87af-4a23-ada4-1674452f85d0 --><script>console.log("Textify v1.05")</script>

<script defer="" src="./Laphet_files/textbox.js.download"></script>
<!-- END app block --><!-- BEGIN app block: shopify://apps/instafeed/blocks/head-block/c447db20-095d-4a10-9725-b5977662c9d5 --><link rel="preconnect" href="https://storage.nfcube.com/">
<link rel="preconnect" href="https://scontent.cdninstagram.com/">


  <script>
    document.addEventListener('DOMContentLoaded', function () {
      let instafeedScript = document.createElement('script');

      
        instafeedScript.src = 'https://storage.nfcube.com/instafeed-15c4b561d56183eb1100af04f08e5b9e.js';
      

      document.body.appendChild(instafeedScript);
    });
  </script>





<!-- END app block --><!-- BEGIN app block: shopify://apps/sami-product-labels/blocks/app-embed-block/b9b44663-5d51-4be1-8104-faedd68da8c5 --><script type="text/javascript">
  window.Samita = window.Samita || {};
  Samita.ProductLabels = Samita.ProductLabels || {};
  Samita.ProductLabels.locale  = {"shop_locale":{"locale":"de","enabled":true,"primary":true,"published":true}};
  Samita.ProductLabels.page = {title : document.title.replaceAll('"', "'"), href : window.location.href, type: ""};
  Samita.ProductLabels.dataShop = {"install":1,"configuration":{"money_format":"€{{amount_with_comma_separator}}"},"pricing":{"plan":"FREE","features":{"chose_product_form_collections_tag":false,"design_custom_unlimited_position":false,"design_countdown_timer_label_badge":false,"design_text_hover_label_badge":false,"label_display_product_page_first_image":false,"choose_product_variants":false,"choose_country_restriction":false,"conditions_specific_products":20,"conditions_include_exclude_product_tag":false,"conditions_inventory_status":false,"conditions_sale_products":false,"conditions_customer_tag":false,"conditions_products_created_published":false,"conditions_set_visibility_date_time":false,"images_samples":{"collections":["free_labels","custom","suggestions_for_you","all"]},"badges_labels_conditions":{"fields":["ALL","PRODUCTS"]}}},"settings":{"notUseSearchFileApp":false,"general":{"maximum_condition":"3"},"done_fix_offer":true,"translations":{"default":{"Days":"d","Hours":"h","Minutes":"m","Seconds":"s"}}},"url":"myanmar-grocery.myshopify.com","api_url":"","app_url":"https://d3g7uyxz2n998u.cloudfront.net/"};
  Samita.ProductLabels.dataShop.configuration.money_format = "€{{amount_with_comma_separator}}";
  Samita.ProductLabels.theme_id = null;
  Samita.ProductLabels.products = [];
  
  

  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
          if (typeof Shopify!= "undefined" && Shopify?.theme?.id == 167953105231) {
              Samita.ProductLabels.themeInfo = {"id":167953105231,"name":"Laphet® | Current Theme","role":"main","theme_store_id":1819,"theme_name":"Whisk","theme_version":"3.0.0"}
          }
      
      
  
      
      
          if (typeof Shopify!= "undefined" && Shopify?.theme?.id == 167953105231) {
              Samita.ProductLabels.theme = {"selectors":{"product":{"elementSelectors":[".product-detail","#ProductHero",".product-details-root",".product-template","#ProductSection-product-template","#shopify-section-product-template",".product:not(.featured-product,.slick-slide)",".product-main",".grid:not(.product-grid,.sf-grid,.featured-product)",".grid.product-single","#__pf",".gfqv-product-wrapper",".ga-product",".t4s-container",".gCartItem, .flexRow.noGutter, .cart__row, .line-item, .cart-item, .cart-row, .CartItem, .cart-line-item, .cart-table tbody tr, .container-indent table tbody tr"],"elementNotSelectors":[".mini-cart__recommendations-list"],"notShowCustomBlocks":".variant-swatch__item,.swatch-element,.fera-productReviews-review,share-button,.hdt-variant-picker,.col-story-block,.lightly-spaced-row","link":"[samitaPL-product-link], h3[data-href*=\"/products/\"], div[data-href*=\"/products/\"], a[data-href*=\"/products/\"], a.product-block__link[href*=\"/products/\"], a.indiv-product__link[href*=\"/products/\"], a.thumbnail__link[href*=\"/products/\"], a.product-item__link[href*=\"/products/\"], a.product-card__link[href*=\"/products/\"], a.product-card-link[href*=\"/products/\"], a.product-block__image__link[href*=\"/products/\"], a.stretched-link[href*=\"/products/\"], a.grid-product__link[href*=\"/products/\"], a.product-grid-item--link[href*=\"/products/\"], a.product-link[href*=\"/products/\"], a.product__link[href*=\"/products/\"], a.full-unstyled-link[href*=\"/products/\"], a.grid-item__link[href*=\"/products/\"], a.grid-product__link[href*=\"/products/\"], a[data-product-page-link][href*=\"/products/\"], a[href*=\"/products/\"]:not(.logo-bar__link,.ButtonGroup__Item.Button,.menu-promotion__link,.site-nav__link,.mobile-nav__link,.hero__sidebyside-image-link,.announcement-link,.breadcrumbs-list__link,.single-level-link,.d-none,.icon-twitter,.icon-facebook,.icon-pinterest,#btn,.list-menu__item.link.link--tex,.btnProductQuickview,.index-banner-slides-each,.global-banner-switch,.sub-nav-item-link,.announcement-bar__link,.Carousel__Cell,.Heading,.facebook,.twitter,.pinterest,.loyalty-redeem-product-title,.breadcrumbs__link,.btn-slide,.h2m-menu-item-inner--sub,.glink,.announcement-bar__link,.ts-link,.hero__slide-link)","signal":"[data-product-handle], [data-product-id]","notSignal":":not([data-section-id=\"product-recommendations\"],[data-section-type=\"product-recommendations\"],#product-area,#looxReviews)","priceSelectors":[".price-container",".product-card__price",".product-block--price",".price-list","#ProductPrice",".product-price",".product__price—reg","#productPrice-product-template",".product__current-price",".product-thumb-caption-price-current",".product-item-caption-price-current",".grid-product__price,.product__price","span.price","span.product-price",".productitem--price",".product-pricing","div.price","span.money",".product-item__price",".product-list-item-price","p.price",".product-meta__prices","div.product-price","span#price",".price.money","h3.price","a.price",".price-area",".product-item-price",".pricearea",".collectionGrid .collectionBlock-info > p","#ComparePrice",".product--price-wrapper",".product-page--price-wrapper",".color--shop-accent.font-size--s.t--meta.f--main",".ComparePrice",".ProductPrice",".prodThumb .title span:last-child",".price",".product-single__price-product-template",".product-info-price",".price-money",".prod-price","#price-field",".product-grid--price",".prices,.pricing","#product-price",".money-styling",".compare-at-price",".product-item--price",".card__price",".product-card__price",".product-price__price",".product-item__price-wrapper",".product-single__price",".grid-product__price-wrap","a.grid-link p.grid-link__meta",".product__prices","#comparePrice-product-template","dl[class*=\"price\"]","div[class*=\"price\"]",".gl-card-pricing",".ga-product_price-container"],"titleSelectors":[".card-heading",".product-card__name",".product-info__title",".product-thumbnail__title",".product-card__title","div.product__title",".card__heading.h5",".cart-item__name.h4",".spf-product-card__title.h4",".gl-card-title",".ga-product_title"],"imageSelectors":[".image-container img",".media-gallery__link img",".grid-view-item__image-wrapper img",".wp-alt-image img",".product__link img",".inline-image__pad img",".product-card__img-wrapper img",".product-image-wrapper img",".product-card__image-wrapper picture",".image-wrapper img",".image-wrapper img","picture img",".aspect-ratio img",".product-single__media-image img",".thumb img",".product__media img",".rimage-wrapper > img",".ProductItem__Image",".img-wrapper img",".aspect-ratio img",".product-card__image-wrapper > .product-card__image",".ga-products_image img",".image__container",".image-wrap .grid-product__image",".boost-sd__product-image img",".box-ratio > img",".image-cell img.card__image","img[src*=\"cdn.shopify.com\"][src*=\"/products/\"]","img[srcset*=\"cdn.shopify.com\"][srcset*=\"/products/\"]","img[data-srcset*=\"cdn.shopify.com\"][data-srcset*=\"/products/\"]","img[data-src*=\"cdn.shopify.com\"][data-src*=\"/products/\"]","img[data-srcset*=\"cdn.shopify.com\"][data-srcset*=\"/products/\"]","img[srcset*=\"cdn.shopify.com\"][src*=\"no-image\"]",".product-card__image > img",".product-image-main .image-wrap",".grid-product__image",".media > img","img[srcset*=\"cdn/shop/products/\"]","[data-bgset*=\"cdn.shopify.com\"][data-bgset*=\"/products/\"] > [data-bgset*=\"cdn.shopify.com\"][data-bgset*=\"/products/\"]","[data-bgset*=\"cdn.shopify.com\"][data-bgset*=\"/products/\"]","img[src*=\"cdn.shopify.com\"][src*=\"no-image\"]","img[src*=\"cdn/shop/products/\"]",".ga-product_image",".gfqv-product-image"],"media":".card__inner,.spf-product-card__inner","soldOutBadge":".tag.tag--rectangle, .grid-product__tag--sold-out, on-sale-badge","paymentButton":".shopify-payment-button, .product-form--smart-payment-buttons, .lh-wrap-buynow, .wx-checkout-btn","formSelectors":[".product__basket-button","form.product_form",".main-product-form","form.t4s-form__product",".product-single__form",".shopify-product-form","#shopify-section-product-template form[action*=\"/cart/add\"]","form[action*=\"/cart/add\"]:not(.form-card)",".ga-products-table li.ga-product",".pf-product-form"],"variantActivator":".inline-block","variant":".variant-input[checked=\"checked\"]","variantIdByAttribute":"swatch-current-variant","quantity":".gInputElement, [name=\"qty\"], [name=\"quantity\"]","quantityWrapper":"#Quantity, input.quantity-selector.quantity-input, [data-quantity-input-wrapper], .product-form__quantity-selector, .product-form__item--quantity, .ProductForm__QuantitySelector, .quantity-product-template, .product-qty, .qty-selection, .product__quantity, .js-qty__num","productAddToCartBtnSelectors":[".product-form__buttons",".add-to-cart-btn",".product__add-to-cart-button","#AddToCart--product-template","#addToCart","#AddToCart-product-template","#AddToCart",".add_to_cart",".product-form--atc-button","#AddToCart-product",".AddtoCart","button.btn-addtocart",".product-submit","[name=\"add\"]","[type=\"submit\"]",".product-form__add-button",".product-form--add-to-cart",".btn--add-to-cart",".button-cart",".action-button > .add-to-cart","button.btn--tertiary.add-to-cart",".form-actions > button.button",".gf_add-to-cart",".zend_preorder_submit_btn",".gt_button",".wx-add-cart-btn",".previewer_add-to-cart_btn > button",".qview-btn-addtocart",".ProductForm__AddToCart",".button--addToCart","#AddToCartDesk","[data-pf-type=\"ProductATC\"]"],"customAddEl":{"productPageSameLevel":true,"collectionPageSameLevel":true,"cartPageSameLevel":false},"cart":{"buttonOpenCartDrawer":"","drawerForm":".ajax-cart__form, #mini-cart-form, #CartPopup, #rebuy-cart, #CartDrawer-Form, #cart , #theme-ajax-cart, form[action*=\"/cart\"]:not([action*=\"/cart/add\"]):not([hidden])","form":"body, #mini-cart-form","rowSelectors":["gCartItem","flexRow.noGutter","cart__row","line-item","cart-item","cart-row","CartItem","cart-line-item","cart-table tbody tr","container-indent table tbody tr"],"price":"td.cart-item__details > div.product-option"},"collection":{"positionBadgeImageWrapper":"","positionBadgeTitleWrapper":"","positionBadgePriceWrapper":"","notElClass":["cart-item-list__body","product-list","samitaPL-card-list","cart-items-con","boost-pfs-search-suggestion-group","collection","pf-slide","boost-sd__cart-body","boost-sd__product-list","snize-search-results-content","productGrid","footer__links","header__links-list","cartitems--list","Cart__ItemList","minicart-list-prd","mini-cart-item","mini-cart__line-item-list","cart-items","grid","products","ajax-cart__form","hero__link","collection__page-products","cc-filters-results","footer-sect","collection-grid","card-list","page-width","collection-template","mobile-nav__sublist","product-grid","site-nav__dropdown","search__results","product-recommendations","faq__wrapper","section-featured-product","announcement_wrapper","cart-summary-item-container","cart-drawer__line-items","product-quick-add","cart__items","rte","m-cart-drawer__items","scd__items","sf__product-listings","line-item","the-flutes","section-image-with-text-overlay","CarouselWrapper"]},"quickView":{"activator":"a.quickview-icon.quickview, .qv-icon, .previewer-button, .sca-qv-button, .product-item__action-button[data-action=\"open-modal\"], .boost-pfs-quickview-btn, .collection-product[data-action=\"show-product\"], button.product-item__quick-shop-button, .product-item__quick-shop-button-wrapper, .open-quick-view, .product-item__action-button[data-action=\"open-modal\"], .tt-btn-quickview, .product-item-quick-shop .available, .quickshop-trigger, .productitem--action-trigger:not(.productitem--action-atc), .quick-product__btn, .thumbnail, .quick_shop, a.sca-qv-button, .overlay, .quick-view, .open-quick-view, [data-product-card-link], a[rel=\"quick-view\"], a.quick-buy, div.quickview-button > a, .block-inner a.more-info, .quick-shop-modal-trigger, a.quick-view-btn, a.spo-quick-view, div.quickView-button, a.product__label--quick-shop, span.trigger-quick-view, a.act-quickview-button, a.product-modal, [data-quickshop-full], [data-quickshop-slim], [data-quickshop-trigger]","productForm":".qv-form, .qview-form, .description-wrapper_content, .wx-product-wrapper, #sca-qv-add-item-form, .product-form, #boost-pfs-quickview-cart-form, .product.preview .shopify-product-form, .product-details__form, .gfqv-product-form, #ModalquickView form#modal_quick_view, .quick-shop-modal form[action*=\"/cart/add\"], #quick-shop-modal form[action*=\"/cart/add\"], .white-popup.quick-view form[action*=\"/cart/add\"], .quick-view form[action*=\"/cart/add\"], [id*=\"QuickShopModal-\"] form[action*=\"/cart/add\"], .quick-shop.active form[action*=\"/cart/add\"], .quick-view-panel form[action*=\"/cart/add\"], .content.product.preview form[action*=\"/cart/add\"], .quickView-wrap form[action*=\"/cart/add\"], .quick-modal form[action*=\"/cart/add\"], #colorbox form[action*=\"/cart/add\"], .product-quick-view form[action*=\"/cart/add\"], .quickform, .modal--quickshop-full, .modal--quickshop form[action*=\"/cart/add\"], .quick-shop-form, .fancybox-inner form[action*=\"/cart/add\"], #quick-view-modal form[action*=\"/cart/add\"], [data-product-modal] form[action*=\"/cart/add\"], .modal--quick-shop.modal--is-active form[action*=\"/cart/add\"]","appVariantActivator":".previewer_options","appVariantSelector":".full_info, [data-behavior=\"previewer_link\"]","appButtonClass":["sca-qv-cartbtn","qview-btn","btn--fill btn--regular"]}}},"integrateApps":["globo.relatedproduct.loaded","globoFilterQuickviewRenderCompleted","globoFilterRenderSearchCompleted","globoFilterRenderCompleted","shopify:block:select","vsk:product:changed","collectionUpdate","cart:updated","cart:refresh","cart-notification:show"],"timeOut":250,"theme_store_id":1819,"theme_name":"Whisk"}
          }
      
  
  Samita.ProductLabels.dataLabels = [];
  
  
  
    
    
    Samita.ProductLabels.dataLabels = [];
  

  Samita.ProductLabels.dataTrustBadges = [];
  
  

  Samita.ProductLabels.dataHighlights = [];
  
  

  Samita.ProductLabels.dataBanners = [];
  
  

  Samita.ProductLabels.dataImages = [];
  
  

</script>
<!-- END app block --><!-- BEGIN app block: shopify://apps/customer-accounts-concierge/blocks/customer_account_page/3c495b68-652c-468d-a0ef-5bad6935d104 -->

<!-- BEGIN app snippet: main_color_variables -->





<style>
  :root {
    --frcp-primaryColor:  #5873F9;
    --frcp-btnTextColor: #ffffff;
    --frcp-backgroundColor: #ffffff;
    --frcp-textColor: #202202;
    --frcp-hoverOpacity:  0.7;
  }
</style>
<!-- END app snippet -->


<script>
  window.frcp ||= {}
  frcp.customerPage ||= {}
  frcp.customerPage.enabled = true
</script>


<!-- END app block --><!-- BEGIN app block: shopify://apps/customer-accounts-concierge/blocks/custom_forms/3c495b68-652c-468d-a0ef-5bad6935d104 -->


<!-- END app block --><!-- BEGIN app block: shopify://apps/yeps/blocks/yeps/e514c124-b6d8-42cf-8001-0defa550f08e --><script>
window.YepsID = '0189e162-e74e-5053-da3d-fb983a07c357';

window.YepsData = {"campaigns":[],"hacks":{}};
window.YepsActive = false;
window.YepsIsolate = true;
window.YepsMigrated = false;

window.YepsContext = {
  locale: 'de',
  marketId: '10304553200',
  currency: 'EUR',
  pageType: '',
  
  
  
  
  
  
};
</script>


<!-- END app block --><script src="./Laphet_files/eventpromotionbar(1).js.download" type="text/javascript" defer="defer"></script>
<script src="./Laphet_files/pagefly.js.download" type="text/javascript" defer="defer"></script>
<script src="./Laphet_files/global_deliverytimer.js.download" type="text/javascript" defer="defer"></script>
<link href="./Laphet_files/global_deliverytimer.css" rel="stylesheet" type="text/css" media="all">
<script src="./Laphet_files/giftBoxLogicv1.js.download" type="text/javascript" defer="defer"></script>
<link href="./Laphet_files/giftBoxv1.css" rel="stylesheet" type="text/css" media="all">
<script src="./Laphet_files/samita.ProductLabels.index.js.download" type="text/javascript" defer="defer"></script>
<script src="./Laphet_files/yeps.js.download" type="text/javascript" defer="defer"></script>
<link href="./Laphet_files/yeps.css" rel="stylesheet" type="text/css" media="all">
<script src="./Laphet_files/upcart-bundle.js.download" type="text/javascript" defer="defer"></script>
<script src="./Laphet_files/avada-cookie.js.download" type="text/javascript" defer="defer"></script>
<script src="./Laphet_files/inbox-chat-loader.js.download" type="text/javascript" defer="defer"></script>
<link href="https://monorail-edge.shopifysvc.com/" rel="dns-prefetch">
<script>(function(){if ("sendBeacon" in navigator && "performance" in window) {var session_token = document.cookie.match(/_shopify_s=([^;]*)/);function handle_abandonment_event(e) {var entries = performance.getEntries().filter(function(entry) {return /monorail-edge.shopifysvc.com/.test(entry.name);});if (!window.abandonment_tracked && entries.length === 0) {window.abandonment_tracked = true;var currentMs = Date.now();var navigation_start = performance.timing.navigationStart;var payload = {shop_id: 65436647664,url: window.location.href,navigation_start,duration: currentMs - navigation_start,session_token: session_token && session_token.length === 2 ? session_token[1] : "",page_type: ""};window.navigator.sendBeacon("https://monorail-edge.shopifysvc.com/v1/produce", JSON.stringify({schema_id: "online_store_buyer_site_abandonment/1.1",payload: payload,metadata: {event_created_at_ms: currentMs,event_sent_at_ms: currentMs}}));}}window.addEventListener('pagehide', handle_abandonment_event);}}());</script>
<script id="web-pixels-manager-setup">(function d(d,e,n,o,r,i){if(!Boolean(null===(t=null===(a=window.Shopify)||void 0===a?void 0:a.analytics)||void 0===t?void 0:t.replayQueue)){var a,t,s=function(){var d={modern:/Edge?\/(1{2}[4-9]|1[2-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Firefox\/(1{2}[4-9]|1[2-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Chrom(ium|e)\/(9{2}|\d{3,})\.\d+(\.\d+|)|(Maci|X1{2}).+ Version\/(15\.\d+|(1[6-9]|[2-9]\d|\d{3,})\.\d+)([,.]\d+|)( \(\w+\)|)( Mobile\/\w+|) Safari\/|Chrome.+OPR\/(9{2}|\d{3,})\.\d+\.\d+|(CPU[ +]OS|iPhone[ +]OS|CPU[ +]iPhone|CPU IPhone OS|CPU iPad OS)[ +]+(15[._]\d+|(1[6-9]|[2-9]\d|\d{3,})[._]\d+)([._]\d+|)|Android:?[ /-](13\d|1[4-9]\d|[2-9]\d{2}|\d{4,})(\.\d+|)(\.\d+|)|Android.+Firefox\/(13\d|1[4-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Android.+Chrom(ium|e)\/(13\d|1[4-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|SamsungBrowser\/([2-9]\d|\d{3,})\.\d+/,legacy:/Edge?\/(1[6-9]|[2-9]\d|\d{3,})\.\d+(\.\d+|)|Firefox\/(5[4-9]|[6-9]\d|\d{3,})\.\d+(\.\d+|)|Chrom(ium|e)\/(5[1-9]|[6-9]\d|\d{3,})\.\d+(\.\d+|)([\d.]+$|.*Safari\/(?![\d.]+ Edge\/[\d.]+$))|(Maci|X1{2}).+ Version\/(10\.\d+|(1[1-9]|[2-9]\d|\d{3,})\.\d+)([,.]\d+|)( \(\w+\)|)( Mobile\/\w+|) Safari\/|Chrome.+OPR\/(3[89]|[4-9]\d|\d{3,})\.\d+\.\d+|(CPU[ +]OS|iPhone[ +]OS|CPU[ +]iPhone|CPU IPhone OS|CPU iPad OS)[ +]+(10[._]\d+|(1[1-9]|[2-9]\d|\d{3,})[._]\d+)([._]\d+|)|Android:?[ /-](13\d|1[4-9]\d|[2-9]\d{2}|\d{4,})(\.\d+|)(\.\d+|)|Mobile Safari.+OPR\/([89]\d|\d{3,})\.\d+\.\d+|Android.+Firefox\/(13\d|1[4-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Android.+Chrom(ium|e)\/(13\d|1[4-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Android.+(UC? ?Browser|UCWEB|U3)[ /]?(15\.([5-9]|\d{2,})|(1[6-9]|[2-9]\d|\d{3,})\.\d+)\.\d+|SamsungBrowser\/(5\.\d+|([6-9]|\d{2,})\.\d+)|Android.+MQ{2}Browser\/(14(\.(9|\d{2,})|)|(1[5-9]|[2-9]\d|\d{3,})(\.\d+|))(\.\d+|)|K[Aa][Ii]OS\/(3\.\d+|([4-9]|\d{2,})\.\d+)(\.\d+|)/},e=d.modern,n=d.legacy,o=navigator.userAgent;return e.test(o)?"modern":(n.test(o),"legacy")}(),l=null!=i?i:{modern:"",legacy:""};window.Shopify=window.Shopify||{};var u=window.Shopify;u.analytics=u.analytics||{};var c=u.analytics;c.replayQueue=[],c.publish=function(d,e,n){return c.replayQueue.push([d,e,n]),!0};try{self.performance.mark("wpm:start")}catch(d){}var f=[n,"/wpm","/b",r,s.substring(0,1),".js"].join(""),h=l[s];!function(d){var e=d.src,n=d.async,o=void 0===n||n,r=d.onload,i=d.onerror,a=d.sri,t=document.createElement("script"),s=document.head,l=document.body;t.async=o,t.src=e,a&&(t.integrity=a,t.crossOrigin="anonymous"),r&&t.addEventListener("load",r),i&&t.addEventListener("error",i),s?s.appendChild(t):l?l.appendChild(t):console.error("Did not find a head or body element to append the script")}({src:f,async:!0,onload:function(){if(!function(){var d,e;return Boolean(null===(e=null===(d=window.Shopify)||void 0===d?void 0:d.analytics)||void 0===e?void 0:e.initialized)}()){var n=window.webPixelsManager.init(d)||void 0;if(n){e(n);var o=window.Shopify.analytics;o.replayQueue.forEach((function(d){var e=d[0],o=d[1],r=d[2];n.publishCustomEvent(e,o,r)})),o.replayQueue=[],o.publish=n.publishCustomEvent,o.visitor=n.visitor,o.initialized=!0}}},onerror:function(){var e=d.storefrontBaseUrl.replace(/\/$/,""),n="".concat(e,"/.well-known/shopify/monorail/unstable/produce_batch"),r=JSON.stringify({metadata:{event_sent_at_ms:(new Date).getTime()},events:[{schema_id:"web_pixels_manager_load/3.1",payload:{version:o||"latest",bundle_target:s,page_url:self.location.href,status:"failed",surface:d.surface,error_msg:"".concat(f," has failed to load")},metadata:{event_created_at_ms:(new Date).getTime()}}]});try{if(self.navigator.sendBeacon.bind(self.navigator)(n,r))return!0}catch(d){}var i=new XMLHttpRequest;try{return i.open("POST",n,!0),i.setRequestHeader("Content-Type","text/plain"),i.send(r),!0}catch(d){console&&console.warn&&console.warn("[Web Pixels Manager] Got an unhandled error while logging a load error.")}return!1},sri:function(d){return"string"==typeof d&&/^sha384-[A-Za-z0-9+/=]+$/.test(d)}(h)?h:""})}})({shopId: 65436647664,storefrontBaseUrl: "https://laphet.de",extensionsBaseUrl: "https://extensions.shopifycdn.com/cdn/shopifycloud/web-pixels-manager",surface: "storefront-renderer",enabledBetaFlags: ["6a396365"],webPixelsConfigList: [{"id":"1655505231","configuration":"{\"endpoint\":\"https:\\\/\\\/api.parcelpanel.com\",\"debugMode\":\"false\"}","eventPayloadVersion":"v1","runtimeContext":"STRICT","scriptVersion":"80f7ab1c83d56434772453c4e99e612e","type":"APP","apiClientId":2681387,"privacyPurposes":["ANALYTICS"]},{"id":"1139867983","configuration":"{\"config\":\"{\\\"pixel_id\\\":\\\"GT-MQDF4PP\\\",\\\"target_country\\\":\\\"DE\\\",\\\"gtag_events\\\":[{\\\"type\\\":\\\"purchase\\\",\\\"action_label\\\":\\\"MC-NSH2DCVS7M\\\"},{\\\"type\\\":\\\"page_view\\\",\\\"action_label\\\":\\\"MC-NSH2DCVS7M\\\"},{\\\"type\\\":\\\"view_item\\\",\\\"action_label\\\":\\\"MC-NSH2DCVS7M\\\"}],\\\"enable_monitoring_mode\\\":false}\"}","eventPayloadVersion":"v1","runtimeContext":"OPEN","scriptVersion":"642ed32d7fafb3e0986c8ba3bf3908a1","type":"APP","apiClientId":1780363,"privacyPurposes":[]},{"id":"561676623","configuration":"{\"pixel_id\":\"1069926074129938\",\"pixel_type\":\"facebook_pixel\",\"metaapp_system_user_token\":\"-\"}","eventPayloadVersion":"v1","runtimeContext":"OPEN","scriptVersion":"8d894c63179843e74a9691414b5ad83d","type":"APP","apiClientId":2329312,"privacyPurposes":["ANALYTICS","MARKETING","SALE_OF_DATA"]},{"id":"shopify-app-pixel","configuration":"{}","eventPayloadVersion":"v1","runtimeContext":"STRICT","scriptVersion":"0282","apiClientId":"shopify-pixel","type":"APP","privacyPurposes":["ANALYTICS","MARKETING"]},{"id":"shopify-custom-pixel","eventPayloadVersion":"v1","runtimeContext":"LAX","scriptVersion":"0282","apiClientId":"shopify-pixel","type":"CUSTOM","privacyPurposes":["ANALYTICS","MARKETING"]}],isMerchantRequest: false,effectiveTopLevelDomain: "",initData: {"shop":{"name":"Laphet","paymentSettings":{"currencyCode":"EUR"},"myshopifyDomain":"myanmar-grocery.myshopify.com","countryCode":"DE","storefrontUrl":"https:\/\/laphet.de"},"customer":null,"cart":{"cost":{"totalAmount":{"amount":9.9,"currencyCode":"EUR"}},"lines":[{"cost":{"totalAmount":{"amount":4.95,"currencyCode":"EUR"}},"merchandise":{"price":{"amount":4.95,"currencyCode":"EUR"},"product":{"title":"Teepesto","vendor":"Tea Eats","id":"8796098265423","untranslatedTitle":"Teepesto","url":"\/products\/laphet-tee-pesto","type":"Fermented Tea"},"id":"49252148347215","image":{"src":"\/\/laphet.de\/cdn\/shop\/files\/Teepesto_Mild.png?v=1738400929"},"sku":"TPO1001","title":"Default Title","untranslatedTitle":"Default Title"},"quantity":1},{"cost":{"totalAmount":{"amount":4.95,"currencyCode":"EUR"}},"merchandise":{"price":{"amount":4.95,"currencyCode":"EUR"},"product":{"title":"Teepesto mit Chili","vendor":"Tea Eats","id":"8799383355727","untranslatedTitle":"Teepesto mit Chili","url":"\/products\/laphet-teepesto-chili","type":"Fermented Tea"},"id":"49252272505167","image":{"src":"\/\/laphet.de\/cdn\/shop\/files\/Teepesto_Chili.png?v=1738401332"},"sku":"TPC1002","title":"Default Title","untranslatedTitle":"Default Title"},"quantity":1}],"totalQuantity":2,"attributes":[{"key":"lang","value":"de"},{"key":"Invoice Language","value":"de"}],"id":"Z2NwLWV1cm9wZS13ZXN0MzowMUo0UkFYRE1ESFdDQzc5REpTRVdRWTRBSw"},"checkout":null,"productVariants":[],"purchasingCompany":null},},function pageEvents(webPixelsManagerAPI) {webPixelsManagerAPI.publish("page_viewed", {});},"https://laphet.de/cdn","fa4e28fae492e8b8cbffa58e31a72fa67ab51995","bb202aaewd7fabeadp1286c7ffm6c4f3798",{"modern":"","legacy":""});</script><script async="" src="./Laphet_files/bbb202aaewd7fabeadp1286c7ffm6c4f3798m.js.download"></script>  <script>window.ShopifyAnalytics = window.ShopifyAnalytics || {};
window.ShopifyAnalytics.meta = window.ShopifyAnalytics.meta || {};
window.ShopifyAnalytics.meta.currency = 'EUR';
var meta = {"page":{}};
for (var attr in meta) {
  window.ShopifyAnalytics.meta[attr] = meta[attr];
}</script>
<script>window.ShopifyAnalytics.merchantGoogleAnalytics = function() {
  
};
</script>
<script class="analytics">(function () {
    var customDocumentWrite = function(content) {
      var jquery = null;

      if (window.jQuery) {
        jquery = window.jQuery;
      } else if (window.Checkout && window.Checkout.$) {
        jquery = window.Checkout.$;
      }

      if (jquery) {
        jquery('body').append(content);
      }
    };

    var hasLoggedConversion = function(token) {
      if (token) {
        return document.cookie.indexOf('loggedConversion=' + token) !== -1;
      }
      return false;
    }

    var setCookieIfConversion = function(token) {
      if (token) {
        var twoMonthsFromNow = new Date(Date.now());
        twoMonthsFromNow.setMonth(twoMonthsFromNow.getMonth() + 2);

        document.cookie = 'loggedConversion=' + token + '; expires=' + twoMonthsFromNow;
      }
    }

    var trekkie = window.ShopifyAnalytics.lib = window.trekkie = window.trekkie || [];
    if (trekkie.integrations) {
      return;
    }
    trekkie.methods = [
      'identify',
      'page',
      'ready',
      'track',
      'trackForm',
      'trackLink'
    ];
    trekkie.factory = function(method) {
      return function() {
        var args = Array.prototype.slice.call(arguments);
        args.unshift(method);
        trekkie.push(args);
        return trekkie;
      };
    };
    for (var i = 0; i < trekkie.methods.length; i++) {
      var key = trekkie.methods[i];
      trekkie[key] = trekkie.factory(key);
    }
    trekkie.load = function(config) {
      trekkie.config = config || {};
      trekkie.config.initialDocumentCookie = document.cookie;
      var first = document.getElementsByTagName('script')[0];
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.onerror = function(e) {
        var scriptFallback = document.createElement('script');
        scriptFallback.type = 'text/javascript';
        scriptFallback.onerror = function(error) {
                var Monorail = {
      produce: function produce(monorailDomain, schemaId, payload) {
        var currentMs = new Date().getTime();
        var event = {
          schema_id: schemaId,
          payload: payload,
          metadata: {
            event_created_at_ms: currentMs,
            event_sent_at_ms: currentMs
          }
        };
        return Monorail.sendRequest("https://" + monorailDomain + "/v1/produce", JSON.stringify(event));
      },
      sendRequest: function sendRequest(endpointUrl, payload) {
        // Try the sendBeacon API
        if (window && window.navigator && typeof window.navigator.sendBeacon === 'function' && typeof window.Blob === 'function' && !Monorail.isIos12()) {
          var blobData = new window.Blob([payload], {
            type: 'text/plain'
          });

          if (window.navigator.sendBeacon(endpointUrl, blobData)) {
            return true;
          } // sendBeacon was not successful

        } // XHR beacon

        var xhr = new XMLHttpRequest();

        try {
          xhr.open('POST', endpointUrl);
          xhr.setRequestHeader('Content-Type', 'text/plain');
          xhr.send(payload);
        } catch (e) {
          console.log(e);
        }

        return false;
      },
      isIos12: function isIos12() {
        return window.navigator.userAgent.lastIndexOf('iPhone; CPU iPhone OS 12_') !== -1 || window.navigator.userAgent.lastIndexOf('iPad; CPU OS 12_') !== -1;
      }
    };
    Monorail.produce('monorail-edge.shopifysvc.com',
      'trekkie_storefront_load_errors/1.1',
      {shop_id: 65436647664,
      theme_id: 167953105231,
      app_name: "storefront",
      context_url: window.location.href,
      source_url: "//laphet.de/cdn/s/trekkie.storefront.c44d6898594db6c4847cb75ef4de7d5f4456a012.min.js"});

        };
        scriptFallback.async = true;
        scriptFallback.src = '//laphet.de/cdn/s/trekkie.storefront.c44d6898594db6c4847cb75ef4de7d5f4456a012.min.js';
        first.parentNode.insertBefore(scriptFallback, first);
      };
      script.async = true;
      script.src = '//laphet.de/cdn/s/trekkie.storefront.c44d6898594db6c4847cb75ef4de7d5f4456a012.min.js';
      first.parentNode.insertBefore(script, first);
    };
    trekkie.load(
      {"Trekkie":{"appName":"storefront","development":false,"defaultAttributes":{"shopId":65436647664,"isMerchantRequest":null,"themeId":167953105231,"themeCityHash":"8412055188451296332","contentLanguage":"de","currency":"EUR"},"isServerSideCookieWritingEnabled":true,"monorailRegion":"shop_domain"},"Session Attribution":{},"S2S":{"facebookCapiEnabled":true,"source":"trekkie-storefront-renderer","apiClientId":580111}}
    );

    var loaded = false;
    trekkie.ready(function() {
      if (loaded) return;
      loaded = true;

      window.ShopifyAnalytics.lib = window.trekkie;

  
      var originalDocumentWrite = document.write;
      document.write = customDocumentWrite;
      try { window.ShopifyAnalytics.merchantGoogleAnalytics.call(this); } catch(error) {};
      document.write = originalDocumentWrite;

      window.ShopifyAnalytics.lib.page(null,{"shopifyEmitted":true});

      var match = window.location.pathname.match(/checkouts\/(.+)\/(thank_you|post_purchase)/)
      var token = match? match[1]: undefined;
      if (!hasLoggedConversion(token)) {
        setCookieIfConversion(token);
        
      }
    });


        var eventsListenerScript = document.createElement('script');
        eventsListenerScript.async = true;
        eventsListenerScript.src = "//laphet.de/cdn/shopifycloud/shopify/assets/shop_events_listener-20905db421adb60b04582abab58b285362bc2e1011d17cd3eabb3bfe05798c59.js";
        document.getElementsByTagName('head')[0].appendChild(eventsListenerScript);

})();</script><script async="" src="./Laphet_files/shop_events_listener-20905db421adb60b04582abab58b285362bc2e1011d17cd3eabb3bfe05798c59.js.download"></script>
<script class="boomerang">
(function () {
  window.BOOMR = window.BOOMR || {};
  window.BOOMR.themeName = "Whisk";
  window.BOOMR.themeVersion = "3.0.0";
  window.BOOMR.shopId = 65436647664;
  window.BOOMR.themeId = 167953105231;
})();</script>
<script defer="" src="./Laphet_files/shopify-perf-kit-1.2.0.min.js.download" data-application="storefront-renderer" data-shop-id="65436647664" data-render-region="gcp-europe-west3" data-page-type="" data-theme-instance-id="167953105231" data-monorail-region="shop_domain" data-resource-timing-sampling-rate="10"></script>
<script type="text/javascript" src="./Laphet_files/jquery.min(1).js.download"></script><style>.loox-icon { font-size: inherit; }a[href='#looxReviews'] { text-decoration:none; color: inherit;}.rtl.loox-rating { display: flex; justify-content: flex-start; align-items: center; }.rtl.loox-rating span { padding-right: 5px; }.rtl.loox-rating .loox-icon[data-lx-fill="half"] { transform: rotateY(180deg); }svg.loox-icon { width: 1em; height: 1em; flex-shrink: 0; }.loox-rating .loox-rating-content { display: inline-flex; align-items: center; gap: 2px; vertical-align: middle; }.loox-overlay-is-active { overflow: hidden !important; }.loox-rating[data-alignment="left"]{text-align: left;}.loox-rating[data-alignment="center"]{text-align: center;}.loox-rating[data-alignment="right"]{text-align: right;}.rtl.loox-rating[data-alignment="left"] .loox-rating-content {margin-right: auto;}.rtl.loox-rating[data-alignment="center"] .loox-rating-content {margin: 0 auto}.rtl.loox-rating[data-alignment="right"] .loox-rating-content {margin-left: auto;}.loox-rating[data-floating-product-reviews-enabled="true"] { cursor: pointer; }</style><style>#looxReviews, #looxCarousel {float:none;clear:both;}#looxReviews:before, #looxReviews:after, #looxCarousel:before, #looxCarousel:after {content:" ";visibility:hidden;display:block;height:0;clear:both;}</style><svg xmlns="http://www.w3.org/2000/svg" style="display: none" id="loox-rating-icon-svg-store">
	<defs></defs>
	<symbol id="looxicons-rating-icon-fill" viewBox="0 0 24 24" fill="currentcolor">
		<path d="M24 9.425c0 .212-.125.443-.375.693l-5.236 5.105 1.24 7.212c.01.067.015.164.015.289a.85.85 0 0 1-.151.511.51.51 0 0 1-.44.21c-.183 0-.375-.058-.577-.174L12 19.869l-6.476 3.404c-.212.115-.404.173-.577.173-.202 0-.353-.07-.454-.21a.85.85 0 0 1-.152-.511c0-.058.01-.154.03-.289l1.24-7.211-5.25-5.106C.12 9.858 0 9.628 0 9.425c0-.355.27-.577.808-.663l7.24-1.053 3.245-6.562c.183-.395.418-.592.707-.592s.524.197.707.592l3.245 6.562 7.24 1.053c.539.086.808.308.808.663Z"></path>
	</symbol>
	<symbol id="looxicons-rating-icon-line" viewBox="0 0 24 24" fill="currentcolor">
		<path d="m16.399 14.574 4.413-4.283-6.086-.894L12 3.887l-2.726 5.51-6.086.894L7.6 14.574l-1.053 6.072L12 17.776l5.438 2.87-1.039-6.072ZM24 9.425c0 .212-.125.443-.375.693l-5.236 5.105 1.24 7.212c.01.067.015.164.015.289 0 .48-.197.72-.591.72-.183 0-.375-.057-.577-.172L12 19.867l-6.476 3.404c-.212.115-.404.173-.577.173-.202 0-.353-.07-.454-.21a.85.85 0 0 1-.152-.511c0-.058.01-.154.03-.289l1.24-7.211-5.25-5.106C.12 9.858 0 9.628 0 9.425c0-.355.27-.577.808-.663l7.24-1.053 3.245-6.562c.183-.395.418-.592.707-.592s.524.197.707.592l3.245 6.562 7.24 1.053c.539.086.808.308.808.663Z"></path>
	</symbol>
	<defs>
		<style>
			.lx-icon-fill {
				--lx-fill-width: calc(100% - var(--lx-rating-percent, 0%));
				clip-path: inset(0 var(--lx-fill-width, 0) 0 0);
			}
			.lx-icon-line {
				clip-path: inset(0 0 0 var(--lx-rating-percent, 0%));
			}
			[data-lx-fill='empty'] {
				--lx-rating-percent: 0%;
			}
			[data-lx-fill='half'] {
				--lx-rating-percent: 50%;
			}
			[data-lx-fill='full'] {
				--lx-rating-percent: 100%;
			}
		</style>

		<g id="looxicons-rating-icon">
			<use href="#looxicons-rating-icon-line" class="lx-icon-line"></use>
			<use href="#looxicons-rating-icon-fill" class="lx-icon-fill"></use>
		</g>
	</defs>
</svg><style>
      .loox-floating-widget-btn { display: flex; justify-content: center; align-items: center; gap: 4px; }
      .loox-floating-widget-btn svg.loox-icon { font-size: 16px }
    </style><style>
    .loox-float-toggler-container { width: 0; position: fixed; z-index: 9999; top: 50%; display: flex; justify-content: center; transition-duration: 0.4s; transition-timing-function: cubic-bezier(1, 0, 0, 1); }
    .loox-float-toggler-container-right { right: 0; transform: rotate(90deg) translate(50%, 50%); } .loox-float-toggler-container-left { left: 0; transform: rotate(270deg) translate(-50%, 0); transform-origin: top;} .loox-float-toggler-container .loox-float-toggler { padding: 10px 20px 15px 20px; font-size: 18px; line-height: 1; cursor: pointer; position: relative; transition-duration: 0.4s; transition-timing-function: cubic-bezier(1, 0, 0, 1); width: auto; white-space: nowrap; border-radius: 0 0 15px 15px; margin: 0 8px 0px 8px; }
    .loox-float-toggler:hover, .loox-float-toggler:focus { color: initial; }
    
    .loox-float-toggler[data-orientation="flipped"] { transform: rotate(180deg);border-radius: 15px 15px 0 0 !important;padding: 15px 20px 10px 20px !important; }
  </style><script src="./Laphet_files/pixel.modern.js.download" async=""></script><script src="./Laphet_files/pixel.modern(1).js.download" async=""></script><style>
                    .gbbActiveVariant {
                            background: #dfedf9 !important;
                            color:#000000 !important;
                        }
                    .gbbActiveImage {
                            border: 2px solid #dfedf9 !important;
                    }    
                    .gbbBodyWrapper ::-webkit-scrollbar-thumb{
                        background: #000000 !important;
                    }    
                    .gbbActiveMsgDeliveryOptions {
                        border: 1px solid #A2A2A2 !important;
                        background-color: rgb(255, 255, 255) !important;
                    }      
                    .gbbCustomerUploadButton{
                        background-color: #000000;
                        color: #ffffff;
                    }      
                    </style><link rel="stylesheet" href="./Laphet_files/css"><style>.loox-pn,.loox-pn *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:transparent;background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;bottom:auto;box-shadow:none;box-sizing:content-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;content:normal;counter-increment:none;counter-reset:none;cursor:auto;display:inline;empty-cells:show;float:none;font:normal;font-family:inherit;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;left:auto;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;max-height:none;max-width:none;min-height:0;min-width:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;position:static;quotes:'\201C' '\201D' '\2018' '\2019';right:auto;tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;top:auto;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;width:auto;word-spacing:normal;z-index:auto}.loox-pn{display:block;position:fixed;z-index:9999;bottom:25px;left:10px;color:#333;transition:transform .6s cubic-bezier(.68,-.55,.265,1.55),opacity .6s;background:#fff;box-shadow:0 2px 4px 0 rgba(0,0,0,0.31),0 2px 4px 0 rgba(0,0,0,0.28);margin-bottom:15px;cursor:pointer}.loox-pn--hidden{transform:translateX(-100%);opacity:0}.loox-pn--shown{transform:translateX(0);opacity:1}.loox-pn--no-branding{margin-bottom:0}.loox-pn-bottom_left{right:auto;top:auto;bottom:25px;left:10px}.loox-pn-bottom_left.loox-pn--hidden{transform:translateX(-100%);opacity:0}.loox-pn-bottom_right{top:auto;bottom:25px;left:auto;right:10px}.loox-pn-bottom_right.loox-pn--hidden{transform:translateX(100%);opacity:0}.loox-pn-top_left{top:10px;bottom:auto;left:10px;right:auto}.loox-pn-top_left.loox-pn--hidden{transform:translateX(-100%);opacity:0}.loox-pn-top_right{top:10px;bottom:auto;left:auto;right:10px}.loox-pn-top_right.loox-pn--hidden{transform:translateX(100%);opacity:0}.loox-pn-review{display:block;max-width:120px;cursor:pointer;overflow:hidden;font-size:12px}.loox-pn-review *{cursor:pointer}.loox-pn-review__link{display:block;cursor:pointer}.loox-pn-review__image img{display:block;max-width:100%;height:auto;transition-duration:.25s;opacity:1}.loox-pn-review__body{display:block;padding:2.5px 8px 5px;text-decoration:none;color:#333}.loox-pn-review__nickname{display:block;padding:2.5px 0;line-height:1.4;font-weight:bold;font-size:12px;color:#4a4a4a}.loox-pn-review__stars{display:flex;padding:2.5px 0;line-height:12px}.loox-pn-review__star{display:block;margin-right:2px}.loox-pn-review__star:last-child{margin-right:0}.loox-pn-review__content{display:block;padding:2.5px 0;font-size:12px;color:#4a4a4a;line-height:1.4;font-style:italic}.loox-pn-review__content:before{content:'"'}.loox-pn-review__content:after{content:'"'}.loox-pn-product{display:flex;max-width:120px;overflow:hidden;font-size:12px;padding:8px;align-items:center;position:relative;box-sizing:border-box;cursor:pointer;border-top:1px solid #e7e7e7}.loox-pn-product *{cursor:pointer}.loox-pn-product__image-wrap{display:block;flex-grow:1;margin-right:8px;width:25px;max-width:25px;min-width:25px}.loox-pn-product__image{display:block;width:25px;height:25px;background-position:center;background-size:cover;background-repeat:no-repeat}.loox-pn-product__image{display:block;flex-grow:1;width:25px;min-height:25px;max-height:max-width}.loox-pn-product__image : $product-image-size,.loox-pn-product__image min-width: $product-image-size,.loox-pn-product__image background-position: center,.loox-pn-product__image background-size: cover,.loox-pn-product__image background-repeat: no-repeat,.loox-pn-product__image img{display:block;width:25px;height:auto}.loox-pn-product__title{font-size:10px;line-height:1.2;color:#4a4a4a}.loox-pn-product__hover{display:flex;position:absolute;top:0;bottom:0;left:0;right:0;background:#ccc;color:#000;font-size:10px;text-transform:uppercase;align-items:center;justify-content:center;opacity:0;transition:opacity .25s}.loox-pn-product:hover .loox-pn-product__hover,.loox-pn-product:focus .loox-pn-product__hover{opacity:1}.loox-pn-close{position:absolute;cursor:pointer;display:block;background:#fff;width:25px;line-height:25px;height:25px;border-radius:50%;box-shadow:0 0 5px -1px rgba(0,0,0,0.47);top:0;right:-35px;bottom:auto;left:auto}.loox-pn-close:empty{display:block}.loox-pn-close:before{display:block;content:"";position:absolute;top:50%;left:50%;margin-top:-5px;margin-left:-5px;width:10px;height:10px;background-image:url("data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTZweCIgdmVyc2lvbj0iMS4xIiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNjQgNjQiPgogIDxnPgogICAgPHBhdGggZmlsbD0iIzAwMDAwMCIgZD0iTTI4Ljk0MSwzMS43ODZMMC42MTMsNjAuMTE0Yy0wLjc4NywwLjc4Ny0wLjc4NywyLjA2MiwwLDIuODQ5YzAuMzkzLDAuMzk0LDAuOTA5LDAuNTksMS40MjQsMC41OSAgIGMwLjUxNiwwLDEuMDMxLTAuMTk2LDEuNDI0LTAuNTlsMjguNTQxLTI4LjU0MWwyOC41NDEsMjguNTQxYzAuMzk0LDAuMzk0LDAuOTA5LDAuNTksMS40MjQsMC41OWMwLjUxNSwwLDEuMDMxLTAuMTk2LDEuNDI0LTAuNTkgICBjMC43ODctMC43ODcsMC43ODctMi4wNjIsMC0yLjg0OUwzNS4wNjQsMzEuNzg2TDYzLjQxLDMuNDM4YzAuNzg3LTAuNzg3LDAuNzg3LTIuMDYyLDAtMi44NDljLTAuNzg3LTAuNzg2LTIuMDYyLTAuNzg2LTIuODQ4LDAgICBMMzIuMDAzLDI5LjE1TDMuNDQxLDAuNTljLTAuNzg3LTAuNzg2LTIuMDYxLTAuNzg2LTIuODQ4LDBjLTAuNzg3LDAuNzg3LTAuNzg3LDIuMDYyLDAsMi44NDlMMjguOTQxLDMxLjc4NnoiLz4KICA8L2c+Cjwvc3ZnPgo=");background-position:center;background-repeat:no-repeat;background-size:cover}.loox-pn-bottom_left .loox-pn-close,.loox-pn-top_left .loox-pn-close{top:0;right:-35px;bottom:auto;left:auto}.loox-pn-bottom_right .loox-pn-close,.loox-pn-top_right .loox-pn-close{top:0;left:-35px;bottom:auto;right:auto}.loox-pn-branding{cursor:pointer;display:block;width:26px;height:10px;background-image:url("data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3My43IDI4LjM1Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzE5MTkxOTt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPkFydGJvYXJkIDM8L3RpdGxlPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTAsMjQuNTJWMy44OEgzLjM4VjIxLjQ3aDguMjNsMS41NiwzLjA1Wm01My4zNy0yLjc4YTEwLjg4LDEwLjg4LDAsMCwxLTE1LDAsOS40Miw5LjQyLDAsMCwxLTEuMTYtMS4zNWwtNi44Mi04LjU1LTIuNi0zdi4wNmwtLjEyLS4xM2E2Ljc5LDYuNzksMCwwLDAtNS4wOS0yLDYuNzksNi43OSwwLDAsMC01LjEsMiw3LjUyLDcuNTIsMCwwLDAtMiw1LjQyLDcuNTcsNy41NywwLDAsMCwyLDUuNDQsNi43Nyw2Ljc3LDAsMCwwLDUuMSwyLjA2YzUuNDQsMCw4LjItNS43Nyw4LjItNS43N2wyLjI1LDIuNjdzLTMuMjIsMy40Mi0zLDMuMjFhMTAuMzEsMTAuMzEsMCwwLDEtNy40NSwyLjk1LDEwLjM0LDEwLjM0LDAsMCwxLTcuNS0zLDEwLjEsMTAuMSwwLDAsMS0zLjA2LTcuNTdBMTAuMTQsMTAuMTQsMCwwLDEsMTUuMTEsNi42YTEwLjMzLDEwLjMzLDAsMCwxLDcuNS0zLDEwLjI2LDEwLjI2LDAsMCwxLDcuNDgsMywxMC42NCwxMC42NCwwLDAsMSwxLjI4LDEuNTJsOS40LDExLjU1YTcuMzEsNy4zMSwwLDAsMCw1LjEsMkE2LjgxLDYuODEsMCwwLDAsNTEsMTkuNjFhNy41Nyw3LjU3LDAsMCwwLDItNS40NCw3LjUyLDcuNTIsMCwwLDAtMi01LjQyLDYuNzksNi43OSwwLDAsMC01LjEtMiw2Ljc5LDYuNzksMCwwLDAtNS4wOSwybC0uMDUuMDZ2MGwtMywzLjY5LTItMi40OVMzNy44OCw3LjEsMzguMzksNi42YTEwLjMzLDEwLjMzLDAsMCwxLDcuNS0zQTEwLjMsMTAuMywwLDAsMSw1Ni40MiwxNC4xN2ExMC4xMywxMC4xMywwLDAsMS0zLjA1LDcuNTdabS0yMy4zMSwwLDAsMCwwLDBabTM3LjItNy41Niw2LjQxLDEwLjNoLTMuOEw2NS4yMSwxN2wtNC4zNyw3LjQ4SDU3bDYuNDItMTAuM0w1NywzLjg4aDMuOGw0LjY3LDcuNTJMNjkuOSwzLjg4aDMuOEw2Ny4yNiwxNC4yMloiLz48L3N2Zz4=");background-position:center center;background-repeat:no-repeat;background-size:cover;margin:0 0 0 auto;position:absolute;bottom:-15px;right:0}@font-face{font-family:'LooxIcons';src:url("data:application/x-font-woff;base64,d09GRgABAAAAAAwMAA8AAAAAFTgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABWAAAADsAAABUIIslek9TLzIAAAGUAAAAQwAAAFY+IFJkY21hcAAAAdgAAABdAAABlON/VkpjdnQgAAACOAAAABMAAAAgBtX/BGZwZ20AAAJMAAAFkAAAC3CKkZBZZ2FzcAAAB9wAAAAIAAAACAAAABBnbHlmAAAH5AAAAXAAAAImHl93/2hlYWQAAAlUAAAAMwAAADYO0v8/aGhlYQAACYgAAAAfAAAAJAc5A1FobXR4AAAJqAAAABAAAAAQDsj//GxvY2EAAAm4AAAACgAAAAoBYwC2bWF4cAAACcQAAAAgAAAAIAC6C7JuYW1lAAAJ5AAAAXcAAALNzJ0dH3Bvc3QAAAtcAAAANAAAAEvdq9qhcHJlcAAAC5AAAAB6AAAAhuVBK7x4nGNgZGBg4GIwYLBjYHJx8wlh4MtJLMljkGJgYYAAkDwymzEnMz2RgQPGA8qxgGkOIGaDiAIAJjsFSAB4nGNgZN7EOIGBlYGBqYppDwMDQw+EZnzAYMjIBBRlYGVmwAoC0lxTGBxeMHxUZg76n8UQxRzEMA0ozAiSAwD8KQwLAHic7ZCxDYAwDATPcUAIsQUtomIaKsZPywThnWQMXjq//JZcPDABLg6RwR6M0K3UWu6sLc+c2me5kYq9e61Q6C6ZbkvzFB9t5tfW5jU2j7460W0ZqC+12ME/0dcP9gAAAHicY2BAAxIQyBz0PwuEARJsA90AeJytVml300YUHXlJnIQsJQstamHExGmwRiZswYAJQbJjIF2crZWgixQ76b7xid/gX/Nk2nPoN35a7xsvJJC053Cak6N3583VzNtlElqS2AvrkZSbL8XU1iaN7DwJ6YZNy1F8KDt7IWWKyd8FURCtltq3HYdERCJQta6wRBD7HlmaZHzoUUbLtqRXTcotPekuW+NBvVXffho6yrE7oaRmM3RoPbIlVRhVokimPVLSpmWo+itJK7y/wsxXzVDCiE4iabwZxtBI3htntMpoNbbjKIpsstwoUiSa4UEUeZTVEufkigkMygfNkPLKpxHlw/yIrNijnFawS7bT/L4vead3OT+xX29RtuRAH8iO7ODsdCVfhFtbYdy0k+0oVBF213dCbNnsVP9mj/KaRgO3KzK90IxgqXyFECs/ocz+IVktnE/5kkejWrKRE0HrZU7sSz6B1uOIKXHNGFnQ3dEJEdT9kjMM9pg+Hvzx3imWCxMCeBzLekclnAgTKWFzNEnaMHJgJWWLKqn1rpg45XVaxFvCfu3a0ZfOaONQd2I8Ww8dWzlRyfFoUqeZTJ3aSc2jKQ2ilHQmeMyvAyg/oklebWM1iZVH0zhmxoREIgIt3EtTQSw7saQpBM2jGb25G6a5di1apMkD9dyj9/TmVri501PaDvSzRn9Wp2I62AvT6WnkL/Fp2uUiRen66Rl+TOJB1gIykS02w5SDB2/9DtLL15YchdcG2O7t8yuofdZE8KQB+xvQHk/VKQlMhZhViFZAYq1rWZbJ1awWqcjUd0OaVr6s0wSKchwXx76Mcf1fMzOWmBK+34nTsyMuPXPtSwjTHHybdT2a16nFcgFxZnlOp1mW7+s0x/IDneZZntfpCEtbp6MsP9RpgeVHOh1jeUELmnTfwZCLMOQCDpAwhKUDQ1hegiEsFQxhuQhDWBZhCMslGMLyYxjCchmGsLysZdXUU0nj2plYBmxCYGKOHrnMReVqKrlUQrtoVGpDnhJulVQUz6p/ZaBePPKGObAWSJfIml8xzpWPRuX41hUtbxo7V8Cx6m8fjvY58VLWi4U/Bf/V1lQlvWLNw5Or8BuGnmwnqjapeHRNl89VPbr+X1RUWAv0G0iFWCjKsmxwZyKEjzqdhmqglUPMbMw8tOt1y5qfw/03MUIWUP34NxQaC9yDTllJWe3grNXX27LcO4NyOBMsSTE38/pW+CIjs9J+kVnKno98HnAFjEpl2GoDrRW82ScxD5neJM8EcVtRNkja2M4EiQ0c84B5850EJmHqqg3kTuGGDfgFYW7BeSdconqjLIfuRezzKKT8W6fiRPaoaIzAs9kbYa/vQspvcQwkNPmlfgxUFaGpGDUV0DRSbqgGX8bZum1Cxg70Iyp2w7Ks4sPHFveVkm0ZhHykiNWjo5/WXqJOqtx+ZhSX752+BcEgNTF/e990cZDKu1rJMkdtA1O3GpVT15pD41WH6uZR9b3j7BM5a5puuiceel/TqtvBxVwssPZtDtJSJhfU9WGFDaLLxaVQ6mU0Se+4BxgWGNDvUIqN/6v62HyeK1WF0XEk307Ut9HnYAz8D9h/R/UD0Pdj6HINLs/3mhOfbvThbJmuohfrp+g3MGutuVm6BtzQdAPiIUetjrjKDXynBnF6pLkc6SHgY90V4gHAJoDF4BPdtYzmUwCj+Yw5PsDnzGHQZA6DLeYw2GbOGsAOcxjsMofBHnMYfMGcdYAvmcMgZA6DiDkMnjAnAHjKHAZfMYfB18xh8A1z7gN8yxwGMXMYJMxhsK/p1jDMLV7QXaC2QVWgA1NPWNzD4lBTZcj+jheG/b1BzP7BIKb+qOn2kPoTLwz1Z4OY+otBTP1V050h9TdeGOrvBjH1D4OY+ky/GMtlBr+MfJcKB5RdbD7n74n3D9vFQLkAAQAB//8AD3icjdE7T8JQFMDxe25bWsotpQ96QXlZqUAYaIxQB4duxrg46uJoIgvuRidGEzd3FgZ1MCR+BBxgJHwGQ/ATgIKXh0ySsJzk3un3PwcBQtMO1+B8lEZlX9ZVmecEhOH49C1xdu4TAITRDcKY4JNtX2YPXGN/6OriPWlSTqBFMFUwomYYSiAG7L3ygWfkZtPxKvtpECyuoXZcEiXjEbEIuN1wGmL3oQy5g1gGBkRtTwYkFAGxXhd1mZeAtlUSFfITSid5Jln5gqiAfF9LxM2wEpTEgMAB2QjqB50stfQIJ5hF8EqgAhU9aizYu/YaNr59Hlavv14Kvd6EBVD5/wC7aff7dnNYq0Fr0ZJYU4IQnn6zliZrkVAWHfoK1WRJFHiQNlv4lpmaL9wrYS0NOUc0rIC49M/0lT98CvDT44dT3WnlgXZcTJSgMh4pVph3u7ocX/HjBI4ekkL/51O7HL4yvGHO72DpzK6nlnQ+8wvxomyleJxjYGRgYADi7BVH98Xz23xl4GZ+ARRhuPr87goY/f/P/1PML5gdgFwOBiaQKADDKBCsAHicY2BkYGAO+p8FJF/8//P/F/MLBqAICmABALXwB48AA+gAAAOgAAADoAAAA6D//AAAAAAAUAC2ARMAAAABAAAABAAqAAIAAAAAAAIABgAWAHMAAAA6C3AAAAAAeJx1kN1qwjAYht/Mn20K29hgp8vRUMbqDwxBEASHnmwnMjwdtda2UhtJo+Bt7B52MbuJXcte2ziGspY0z/fky5evAXCNbwjkzxNHzgJnjHI+wSl6lgv0z5aL5BfLJVTxZrlM/265ggcElqu4wQcriOI5owU+LQtciUvLJ7gQd5YL9I+Wi+Se5RJuxavlMr1nuYKJSC1XcS++Bmq11VEQGlkb1GW72erI6VYqqihxY+muTah0KvtyrhLjx7FyPLXc89gP1rGr9+F+nvg6jVQiW05zr0Z+4mvX+LNd9XQTtI2Zy7lWSzm0GXKl1cL3jBMas+o2Gn/PwwAKK2yhEfGqQhhI1GjrnNtoooUOacoMycw8K0ICFzGNizV3hNlKyrjPMWeU0PrMiMkOPH6XR35MCrg/ZhV9tHoYT0i7M6LMS/blsLvDrBEpyTLdzM5+e0+x4WltWsNduy511pXE8KCG5H3s1hY0Hr2T3Yqh7aLB95//+wHmboRRAHicY2BigAAuBuyAhZGJkZmRhZGVgaW4JLGIC0TopuYWlFTygpkZiTlpuok5JQwMAMB2Cv54nGPw3sFwIihiIyNjX+QGxp0cDBwMyQUbGVidNjEwMmiBGJu5mBg5ICw+BjCLzWkX0wGgNCeQze60i8EBwmZmcNmowtgRGLHBoSNiI3OKy0Y1EG8XRwMDI4tDR3JIBEhJJBBs5mFi5NHawfi/dQNL70YmBhcADHYj9AAA");font-weight:normal;font-style:normal}.loox-pn-icon{display:inline-block;font:normal normal normal 14px/1 LooxIcons !important;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.loox-pn-icon-star:after{content:'\e800\fe0e'}.loox-pn-icon-star-o:after{content:'\e801\fe0e'}.loox-pn-icon-star-half-o:after{content:'\f123\fe0e'}.loox-rtl.loox-pn{direction:rtl}.loox-rtl .loox-pn-product>.loox-pn-product__image-wrap{margin:0 0 0 8px}.loox-rtl .loox-pn-review__star{margin:0 0 0 2px}.loox-pn-review__nickname,.loox-pn-review__content{font-family:'Poppins',sans-serif}.loox-pn-review__star{color:#EBBF20}.loox-pn-product__title{font-family:'Poppins',sans-serif}<br>		.loox-pn {<br>			box-shadow: 0px 2px 6px rgb(0 0 0 / 5%), 0px 4px 55px rgb(0 0 0 / 15%);<br>		}<br>		.loox-pn a.loox-pn-close {<br>			top: -4px;<br>			padding: 6px;<br>			box-sizing: border-box;<br>			box-shadow: 0px 4px 7px rgba(0, 0, 0, 0.1);<br>		}<br>		.loox-pn a.loox-pn-close:before {<br>			background-image: url('https://images.loox.io/uploads/assets/widgets/exit-popup-icon.svg');<br>			position: relative;<br>			width: 100%;<br>			height: 100%;<br>			margin: 0;<br>			top: 0;<br>			left: 0;<br>		}<br>		.loox-pn.loox-pn-bottom_right .loox-pn-close,<br>		.loox-pn.loox-pn-top_right .loox-pn-close,<br>		.loox-pn.loox-pn-bottom_left .loox-pn-close,<br>		.loox-pn.loox-pn-top_left .loox-pn-close {<br>			left: auto;<br>			right: -6px;<br>		}<br><br>		.loox-rtl.loox-pn.loox-pn-bottom_right .loox-pn-close,<br>		.loox-rtl.loox-pn.loox-pn-top_right .loox-pn-close,<br>		.loox-rtl.loox-pn.loox-pn-bottom_left .loox-pn-close,<br>		.loox-rtl.loox-pn.loox-pn-top_left .loox-pn-close {<br>			left: -6px;<br>			right: auto;<br>		}<br><br>		.loox-pn-review__content {<br>			font-weight: normal;<br>			font-style: normal;<br>			color: black;<br>		}<br>		.loox-pn-review__nickname {<br>			padding: 8px 0 0px 0;<br>			color: black;<br>		}<br>		.loox-pn-review__image img {<br>			max-height: 160px;<br>			width: 100%;<br>			object-fit: cover;<br>			overflow: hidden;<br>		}<br>		.loox-pn-review__body {<br>			max-height: 160px;<br>		}<br>	<br>		.loox-pn,<br>		.loox-pn .loox-pn-review {<br>			border-radius: 4px;<br>		}<br>	</style><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"><style>
    #epb_timer * {
      direction: ltr;
    }
      .ht-flip-clock {
    font-family: "Helvetica Neue", Helvetica, sans-serif;
    font-size: 16px;
    -webkit-user-select: none;
    text-align: center;
    position: relative;
    width: 100%;
    display: inline-flex;
    font-size: 1vw;
    font-family: "Helvetica Neue", Helvetica, sans-serif;
    box-sizing: border-box;
    align-items: flex-end; }
    .ht-flip-clock .ht-flip-clock-group {
      display: flex;
      position: relative; }
      .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-label {
        position: absolute;
        
        left: 0;
        width: 100%;
        
        height: 2em;
        line-height: 2em;
        font-weight: 400;
        text-transform: capitalize;
        transform: translateY(-100%); }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-label.ht-flip-clock-meridium {
          font-size: 1.75em;
          line-height: 1.75em;
          top: 50%;
          left: 100%;
          flex: 0;
          width: auto;
          text-transform: uppercase;
          font-weight: 200;
          transform: translate(0.5em, -50%); }
      .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list {
        width: 4em;
        height: 6em;
        position: relative;
        border-radius: .75rem;
        box-shadow: 0 1.5px 3px rgba(0, 0, 0, 0.24), 0 3px 8px rgba(0, 0, 0, 0.05);
        font-weight: bold;
        color: #ccc; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list:not(:last-child) {
          margin-right: .333em; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list:not(.flip) .active .ht-flip-clock-list-item-inner {
          z-index: 4; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list:not(.flip) .ht-flip-clock-list-item-inner .ht-top:after,
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list:not(.flip) .ht-flip-clock-list-item-inner .ht-bottom:after {
          display: none; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner {
          position: absolute;
          width: 100%;
          height: 100%; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip {
          animation-delay: 500ms;
          animation-duration: 500ms; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .ht-flip-clock-list-item-inner {
            perspective: 15em; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .ht-top,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .ht-bottom,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active > div,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before > div {
            animation-delay: inherit;
            animation-fill-mode: forwards;
            animation-duration: inherit;
            animation-timing-function: ease-in; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .ht-top:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .ht-bottom:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active > div:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before > div:after {
              animation-duration: inherit;
              animation-fill-mode: inherit;
              animation-timing-function: inherit; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before {
            animation-delay: 0s; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before .ht-top {
              animation-name: flip-top; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before .ht-top:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before .ht-bottom:after {
              animation-name: show-shadow; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active > div {
            animation-name: indexing; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active .ht-top:after,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active .ht-bottom:after {
            animation-delay: calc(500ms * .15);
            animation-name: hide-shadow; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active .ht-bottom {
            animation-name: flip-bottom; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .active {
          z-index: 2; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .active .ht-bottom {
            z-index: 2;
            transform-origin: top center; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .before {
          z-index: 3; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .before .ht-top {
            z-index: 2;
            transform-origin: bottom center; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .before .ht-top:after {
              background: linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 0%, black 100%); }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .before .ht-bottom:after {
            background: linear-gradient(to bottom, black 0%, rgba(0, 0, 0, 0.1) 100%); }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner {
          position: absolute;
          width: 100%;
          height: 100%;
          transform: rotateX(0.0001deg); }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner:first-child {
            z-index: 2; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner > .ht-top,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner > .ht-bottom {
            width: 100%;
            height: 50%;
            overflow: hidden;
            position: relative;
            font-size: 4.5em;
            background: #333;
            box-shadow: inset 0 0 0.2em rgba(0, 0, 0, 0.5); }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner > .ht-top:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner > .ht-bottom:after {
              content: " ";
              display: block;
              position: absolute;
              top: 0;
              right: 0;
              bottom: 0;
              left: 0;
              overflow: hidden; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner > .ht-top:before,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner > .ht-bottom:before {
              content: " ";
              display: block;
              width: 100%;
              height: 1px;
              position: absolute; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner .ht-top {
            border-radius: .75rem .75rem 0 0;
            line-height: 1.33333; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner .ht-top:after {
              border-radius: .75rem .75rem 0 0; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner .ht-top:before {
              background: #333;
              opacity: .4;
              bottom: 0; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner .ht-bottom {
            border-radius: 0 0 .75rem .75rem;
            line-height: 0; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner .ht-bottom:after {
              border-radius: 0 0 .75rem .75rem; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner .ht-bottom:before {
              background: #ccc;
              opacity: .1; }
    .ht-flip-clock .ht-flip-clock-divider {
      position: relative;
      width: 1.5em;
      height: 6em; }
      .ht-flip-clock .ht-flip-clock-divider:before, .ht-flip-clock .ht-flip-clock-divider:after {
        content: " ";
        display: block;
        width: .75em;
        height: .75em;
       
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%; }
      .ht-flip-clock .ht-flip-clock-divider:before {
        transform: translate(-50%, 75%); }
      .ht-flip-clock .ht-flip-clock-divider:after {
        transform: translate(-50%, -175%); }
  
  @keyframes indexing {
    0% {
      z-index: 2; }
    1% {
      z-index: 3; }
    100% {
      z-index: 4; } }
  
  @keyframes flip-bottom {
    0% {
      transform: rotateX(90deg); }
    100% {
      transform: rotateX(0); } }
  
  @keyframes flip-top {
    0% {
      transform: rotateX(0); }
    100% {
      transform: rotateX(-90deg); } }
  
  @keyframes show-shadow {
    0% {
      opacity: 0; }
    100% {
      opacity: 1; } }
  
  @keyframes hide-shadow {
    0% {
      opacity: 1; }
    100% {
      opacity: 0; } }
  
  </style><script defer="" id="ecomsend-main-js" src="./Laphet_files/ecomsend.js.download"></script><style>.dropdown__arrow{margin-left:3px;border-left: 2px solid #858585;border-bottom: 2px solid #858585;height: 10px;width: 10px;transform: translate(2px, -2px) rotate(-45deg); -webkit-transform: translate(2px, -2px) rotate(-45deg);border-right: 2px solid transparent;border-top: 2px solid transparent;display: inline-block;-moz-transform: translate(2px, -2px) rotate(-45deg);-ms-transform: translate(2px, -2px) rotate(-45deg);-o-transform: translate(2px, -2px) rotate(-45deg);}@media only screen and (max-width: 375px) {#visual_timer_wrapper1 #dlt_cname_label b {display: none;}}</style><script src="./Laphet_files/portable-wallets.de.js.download" type="module"></script><link rel="stylesheet" type="text/css" href="chrome-extension://enejkfhimljloggnimhebadbjajhgkad/font/Inter.css"><script type="module" defer="" src="./Laphet_files/consent-tracking-api.js.download"></script><meta http-equiv="origin-trial" id="origin-trial" content="Ayudt5SzRWp86yExqv4T3+PiWzcX+WBtprm+ux6vfIGn5Dg3JSrZL2Y5UkppRzYnVyYzu8hvj+Q4pdGSWsLVYgMAAABgeyJvcmlnaW4iOiJodHRwczovL3BheS5nb29nbGUuY29tOjQ0MyIsImZlYXR1cmUiOiJUcGNkIiwiZXhwaXJ5IjoxNzM1MzQzOTk5LCJpc1RoaXJkUGFydHkiOnRydWV9"><style id="global-shopify-accelerated-checkout-cart-styles">shopify-accelerated-checkout-cart {
}</style><style>@import url(https://fonts.bunny.net/css2?family=Lato&family=Montserrat:wght@400;500&family=Noto+Sans&family=Open+Sans:wght@400;500&family=Playfair+Display:wght@400;500&family=Roboto:wght@400;500&display=swap);</style><style>body:has(.Avada-CookiesBar__Overlay){overflow:hidden}.Avada-Preview .CookiesBar-Pop__Close,#Avada-CookiesBar .CookiesBar-Pop__Close{position:absolute;cursor:pointer}.Avada-Preview .Avada-DataSalesCheckbox,#Avada-CookiesBar .Avada-DataSalesCheckbox{display:flex;padding:0 12px 12px 12px;gap:8px;align-items:center}.Avada-Preview .Avada_PreviewMobile__Wrapper,#Avada-CookiesBar .Avada_PreviewMobile__Wrapper{height:634px;width:280px;overflow:hidden;font-family:"Poppins",sans-serif;background-color:#eaeaea;border-radius:52px;border:5px solid #e0e0e0;position:relative}.Avada-Preview .Avada_PreviewMobile__Wrapper #Avada_PreviewMobile__TimeLine,#Avada-CookiesBar .Avada_PreviewMobile__Wrapper #Avada_PreviewMobile__TimeLine{transition:width 1s ease}.Avada-Preview .Avada_PreviewMobile__Wrapper .Avada_PreviewMobile__Inline,#Avada-CookiesBar .Avada_PreviewMobile__Wrapper .Avada_PreviewMobile__Inline{background-color:#fff;width:270px;height:620px;margin:3.5px auto auto;border-radius:45px;position:relative}.Avada-Preview .Avada_PreviewMobile__Wrapper .Avada-Preview_CookiesMobile--bottom,#Avada-CookiesBar .Avada_PreviewMobile__Wrapper .Avada-Preview_CookiesMobile--bottom{top:330px}.Avada-Preview .Avada_PreviewMobile__Wrapper .Avada-Preview_CookiesMobile--top,#Avada-CookiesBar .Avada_PreviewMobile__Wrapper .Avada-Preview_CookiesMobile--top{left:0}.Avada-Preview .Avada-CookiesBar__Header,#Avada-CookiesBar .Avada-CookiesBar__Header{font-weight:650}.Avada-Preview .Avada-CookiesMobile,#Avada-CookiesBar .Avada-CookiesMobile{width:100%;position:absolute;max-height:576px;overflow:auto}.Avada-Preview .Avada-CookiesMobile::-webkit-scrollbar,#Avada-CookiesBar .Avada-CookiesMobile::-webkit-scrollbar{display:none}.Avada-Preview .Avada-CookiesMobile .CookiesBar-Pop__Close,#Avada-CookiesBar .Avada-CookiesMobile .CookiesBar-Pop__Close{background:none;border:none;padding:0;top:8px;right:8px}.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar_Icon,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar_Icon{display:flex;justify-content:center;margin:24px 0 -20px 0}.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar__Header,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar__Header{text-align:center;padding-top:26px;width:90%;margin:0 auto -10px}.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar_Message,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar_Message{width:90%;margin:0 auto;padding-top:10px}.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar_Message div,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar_Message div{margin-top:8px;font-size:12px;text-align:center;max-height:200px;overflow:auto;-ms-overflow-style:none;scrollbar-width:none}.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar_Message div::-webkit-scrollbar,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar_Message div::-webkit-scrollbar{display:none}.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar_Footer,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar_Footer{margin-bottom:12px}.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar_BtnEnd,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar_BtnEnd{display:flex;justify-content:center;margin-top:11px}.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar__PreferencesText-Container,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar__PreferencesText-Container{margin-bottom:18px;text-align:center}.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar__PreferencesText-Container button,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar__PreferencesText-Container button{border:none;background:none;font-family:inherit;padding:0}.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar__PreferencesList,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar__PreferencesList{width:90%;margin:0 auto}.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar_GroupButton,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar_GroupButton{display:flex;gap:12px;margin-bottom:15px;justify-content:center;flex-wrap:wrap;max-width:250px}.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny,.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree{display:inline-flex;align-items:center;justify-content:center;min-width:90px;cursor:pointer;padding:3px 6px;flex-grow:1}.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_DenyButtonText,.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_AgreeButtonText,.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_DenyButtonText,.Avada-Preview .Avada-CookiesMobile .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_AgreeButtonText,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_DenyButtonText,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_AgreeButtonText,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_DenyButtonText,#Avada-CookiesBar .Avada-CookiesMobile .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_AgreeButtonText{line-break:anywhere;line-height:1.8}.Avada-Preview .Avada-CookiesMobile.Avada-CookiesBar-Preferences__PopUp,#Avada-CookiesBar .Avada-CookiesMobile.Avada-CookiesBar-Preferences__PopUp{max-height:80%;top:10% !important;bottom:10%;max-width:96%;left:2%;right:2%;transform:unset}.Avada-Preview .Avada-CookiesMobile.Avada-CookiesBar-Preferences__PopUp .Avada-CookiesBar_GroupButton,#Avada-CookiesBar .Avada-CookiesMobile.Avada-CookiesBar-Preferences__PopUp .Avada-CookiesBar_GroupButton{padding:0 6px}.Avada-Preview .Avada-CookiesFull_bar,#Avada-CookiesBar .Avada-CookiesFull_bar{display:flex;position:absolute;width:100%;max-height:fit-content;margin-left:0}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar__ContentWrapper .Avada-CookiesBar__Header,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar__ContentWrapper .Avada-CookiesBar__Header{padding-left:4px}.Avada-Preview .Avada-CookiesFull_bar .CookiesBar-Pop__Close,#Avada-CookiesBar .Avada-CookiesFull_bar .CookiesBar-Pop__Close{background:none;border:none;padding:0;top:10px;right:10px}.Avada-Preview .Avada-CookiesFull_bar:not(:has(.Avada-CookiesBar__PreferencesList)) .Avada-DataSalesCheckbox,#Avada-CookiesBar .Avada-CookiesFull_bar:not(:has(.Avada-CookiesBar__PreferencesList)) .Avada-DataSalesCheckbox{padding:unset;margin:16px 0 0 55px}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container{display:flex;flex-direction:column;width:100%;justify-content:space-between;padding:20px}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Content,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Content{display:flex;gap:8px}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Icon,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Icon{display:flex;align-items:center}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Icon svg,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Icon svg{width:30px !important;height:30px !important}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Message,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Message{display:flex;flex-direction:column;justify-content:center;padding:4px 0 4px 4px}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Message div,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Message div{font-size:16px}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer{display:flex;align-items:center;margin-left:55px}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar__PreferencesText-Container,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar__PreferencesText-Container{text-align:center}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar__PreferencesText-Container button,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar__PreferencesText-Container button{border:none;background:none;font-family:inherit;padding:0}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd{display:flex;align-items:center;margin-right:20px}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton{display:flex;gap:20px;justify-content:center}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny,.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree{font-family:inherit;display:inline-flex;align-items:center;justify-content:center;min-width:90px;cursor:pointer;flex-grow:1;padding:3px 6px}.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_DenyButtonText,.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_AgreeButtonText,.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_DenyButtonText,.Avada-Preview .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_AgreeButtonText,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_DenyButtonText,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_AgreeButtonText,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_DenyButtonText,#Avada-CookiesBar .Avada-CookiesFull_bar .Avada-CookiesBar_Container .Avada-CookiesBar_Footer .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_AgreeButtonText{font-size:16px;line-break:anywhere;line-height:1.8}.Avada-Preview .Avada-CookiesFull_bar.Avada-CookiesBar-Preferences__PopUp,#Avada-CookiesBar .Avada-CookiesFull_bar.Avada-CookiesBar-Preferences__PopUp{width:600px}.Avada-Preview .Avada-CookiesFloat_card,#Avada-CookiesBar .Avada-CookiesFloat_card{position:absolute;width:350px}.Avada-Preview .Avada-CookiesFloat_card,#Avada-CookiesBar .Avada-CookiesFloat_card,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card{min-height:120px;max-height:fit-content;border-radius:5px;padding:20px}.Avada-Preview .Avada-CookiesFloat_card:not(:has(.Avada-CookiesBar__PreferencesList)) .Avada-DataSalesCheckbox,#Avada-CookiesBar .Avada-CookiesFloat_card:not(:has(.Avada-CookiesBar__PreferencesList)) .Avada-DataSalesCheckbox,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card:not(:has(.Avada-CookiesBar__PreferencesList)) .Avada-DataSalesCheckbox{padding:12px 0 0 0}.Avada-Preview .Avada-CookiesFloat_card.Avada-CookiesBar-Preferences__PopUp,#Avada-CookiesBar .Avada-CookiesFloat_card.Avada-CookiesBar-Preferences__PopUp,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card.Avada-CookiesBar-Preferences__PopUp{margin:20px 0;width:600px}.Avada-Preview .Avada-CookiesFloat_card.Avada-CookiesBar-Preferences__PopUp .Avada-CookiesBar_GroupButton,#Avada-CookiesBar .Avada-CookiesFloat_card.Avada-CookiesBar-Preferences__PopUp .Avada-CookiesBar_GroupButton,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card.Avada-CookiesBar-Preferences__PopUp .Avada-CookiesBar_GroupButton{max-width:unset !important}.Avada-Preview .Avada-CookiesFloat_card .CookiesBar-Pop__Close,#Avada-CookiesBar .Avada-CookiesFloat_card .CookiesBar-Pop__Close,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .CookiesBar-Pop__Close{background:none;border:none;padding:0;top:5px;right:5px}.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container{display:flex;flex-direction:column;align-items:center}.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Icon,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Icon,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Icon{width:60px;float:left;padding-top:10px}.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Content,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Content,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Content{margin-top:12px;padding-right:5px}.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Message,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Message,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Message{padding-top:5px;padding-bottom:5px}.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Message div,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Message div,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Message div{font-size:12px;max-height:200px;overflow:auto;-ms-overflow-style:none;scrollbar-width:none}.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Message div::-webkit-scrollbar,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Message div::-webkit-scrollbar,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_Content .Avada-CookiesBar_Message div::-webkit-scrollbar{display:none}.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_BtnEnd,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_BtnEnd,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_BtnEnd{width:100%;display:flex;justify-content:center}.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar__PreferencesText-Container,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar__PreferencesText-Container,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar__PreferencesText-Container{text-align:center}.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar__PreferencesText-Container button,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar__PreferencesText-Container button,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar__PreferencesText-Container button{border:none;background:none;font-family:inherit;padding:0}.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton{display:flex;gap:12px;margin:10px 0 15px 0;max-width:250px;flex-wrap:wrap}.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny,.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree{display:inline-flex;align-items:center;justify-content:center;min-width:90px;cursor:pointer;padding:3px 6px;flex-grow:1}.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_DenyButtonText,.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_AgreeButtonText,.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_DenyButtonText,.Avada-Preview .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_AgreeButtonText,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_DenyButtonText,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_AgreeButtonText,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_DenyButtonText,#Avada-CookiesBar .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_AgreeButtonText,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_DenyButtonText,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnDeny .Avada-CookiesBar_AgreeButtonText,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_DenyButtonText,.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card .Avada-CookiesBar_Container .Avada-CookiesBar_GroupButton .Avada-CookiesBar_BtnAgree .Avada-CookiesBar_AgreeButtonText{font-size:14px;line-break:anywhere;line-height:1.8}.Avada-Preview_CookiesFloat_card__bottom_left{left:16px;bottom:16px}.Avada-Preview_CookiesFloat_card__bottom_right{right:16px;bottom:16px}.Avada-Preview_CookiesFloat_card__top_left{left:16px;top:16px}.Avada-Preview_CookiesFloat_card__top_right{right:16px;top:16px}.Avada-Preview_CookiesFloat_card__middle{left:50%;top:50%;transform:translate(-50%, -50%)}.Avada-Preview_CookiesFull_bar__top{top:0;width:100%}.Avada-Preview_CookiesFull_bar__bottom{bottom:0;width:100%}.Avada-Preview_CookiesMobile__top{top:44px;width:100%}.Avada-Preview_CookiesMobile__bottom{bottom:0;width:100%}.Avada-Preview_CookiesMobile__middle{top:50%;transform:translateY(-50%)}.Avada-Cookies_ContainerDesktop{position:relative;width:100%;height:80vh;max-height:694px;overflow:auto}.Avada-Cookies_ContainerDesktop.--overlay{background-color:#e7e7e7}.Avada-Cookies_ContainerDesktop::-webkit-scrollbar{display:none}.Avada-Preview_ToolBar{position:relative;height:42px;border-bottom:1px solid #c5c1c1}.Avada-Preview_ToolBar .Avada-Preview_BrowserControl{position:absolute;display:flex;width:52px;height:12px;left:13px;top:calc(50% - 6px + .5px);justify-content:space-between}.Avada-Preview_ToolBar .Avada-Preview_BrowserControl .Avada-Preview_Option{width:12px;height:12px;left:calc(50% - 6px - 20px);top:calc(50% - 6px);box-sizing:border-box;border-radius:50%}.Avada-Preview_ToolBar .Avada-Preview_BrowserControl .Avada-Preview_OptionColorRed{background:#ff6058;border:.5px solid #e14942}.Avada-Preview_ToolBar .Avada-Preview_BrowserControl .Avada-Preview_OptionColorYellow{background:#ffc130;border:.5px solid #e1a325}.Avada-Preview_ToolBar .Avada-Preview_BrowserControl .Avada-Preview_OptionColorGreen{background:#27ca40;border:.5px solid #3eaf3f}.Avada-CookiesBar-Preferences__PopUp{border-radius:10px;z-index:11}.Avada-CookiesBar-Preferences__PopUp::-webkit-scrollbar{width:7px;height:8px;cursor:pointer}.Avada-CookiesBar-Preferences__PopUp::-webkit-scrollbar{width:6px;height:6px}.Avada-CookiesBar-Preferences__PopUp::-webkit-scrollbar-track{border-radius:10px;background:rgba(0,0,0,.1)}.Avada-CookiesBar-Preferences__PopUp::-webkit-scrollbar-thumb{border-radius:10px;background:rgba(0,0,0,.2)}.Avada-CookiesBar-Preferences__PopUp::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,.4)}.Avada-CookiesBar-Preferences__PopUp::-webkit-scrollbar-thumb:active{background:rgba(0,0,0,.9)}.Avada-CookiesBar-Preferences__PopUp .Avada-CookiesBar_Container{margin-right:0 !important}.Avada-CookiesBar-Preferences__PopUp .Avada-CookiesBar_Container .Avada-CookiesBar_Footer{margin-left:0 !important}.Avada-CookiesBar-Preferences__PopUp .Avada-CookiesBar_BtnEnd{width:100%;justify-content:center}.Avada-CookiesBar-Preferences__PopUp .Avada-CookiesBar_BtnEnd .Avada-CookiesBar_GroupButton{margin:15px 0 !important}.Avada-CookiesBar-Preferences__PopUp .Avada-CookiesBar__BtnEnd--Desktop{position:sticky;top:-21px;left:0;right:0;z-index:10;margin-right:0 !important}.Avada-CookiesBar-Preferences__PopUp .Avada-CookiesBar__BtnEnd--Mobile{position:sticky;top:0;left:0;right:0;z-index:10}.Avada-CookiesBar-Preferences__PopUp.Avada-CookiesFloat_card,.Avada-CookiesBar-Preferences__PopUp.Avada-CookiesFull_bar{display:flex;width:600px !important;max-height:694px;padding:20px !important;position:absolute;left:50%;overflow-y:auto;overflow-x:hidden;top:20px;bottom:20px;transform:translateX(-50%)}.Avada-CookiesBar-Preferences__PopUp.Avada-CookiesFloat_card::-webkit-scrollbar,.Avada-CookiesBar-Preferences__PopUp.Avada-CookiesFull_bar::-webkit-scrollbar{display:none}.Avada-CookiesBar-Preferences__PopUp.Avada-CookiesFloat_card .Avada-CookiesBar_Content,.Avada-CookiesBar-Preferences__PopUp.Avada-CookiesFull_bar .Avada-CookiesBar_Content{display:flex;flex-direction:column;align-items:center}.Avada-CookiesBar-Preferences__PopUp.Avada-CookiesFloat_card .Avada-CookiesBar_Footer,.Avada-CookiesBar-Preferences__PopUp.Avada-CookiesFull_bar .Avada-CookiesBar_Footer{display:flex;align-items:center;flex-direction:column}.Avada-CookiesBar-Preferences__PopUp.-custom{height:fit-content !important}.Avada-CookiesBar-Preferences__PopUp.Avada-CookiesFull_bar .Avada-CookiesBar_GroupButton{margin:10px 0 15px 0}.Avada-CookiesBar__PreferencesText{text-decoration:underline;line-height:1.3;cursor:pointer}.Avada-CookiesBar__MessageInner{display:block}.Avada-CookiesBar__MessageInner .Avada-CookiesBar__PolicyWrapper{display:inline}#Avada-CookiesBar p{margin:0}#Avada-CookiesBar .Avada-CookiesBar__Overlay,#Avada-CookiesBar .Avada-CookiesBar__Overlay__middle{background:#7b7b7b;border-color:#7b7b7b;opacity:.8;position:fixed;top:0;left:0;right:0;bottom:0;display:block}#Avada-CookiesBar .Avada-CookiesBar__Overlay{z-index:10}#Avada-CookiesBar .Avada-CookiesBar__Overlay__middle{z-index:0}#Avada-CookiesBar .Avada-CookiesFloat_card,#Avada-CookiesBar .Avada-CookiesMobile,#Avada-CookiesBar .Avada-CookiesFull_bar,#Avada-CookiesBar .Avada-CookiesBar__Reopen-Popup{position:fixed}#Avada-CookiesBar .Avada-CookiesBar__Reopen-Popup{position:fixed}@media only screen and (max-width: 737px){#Avada-CookiesBar .Avada-CookiesBar__Reopen-Popup--bottom-right{right:12px !important;bottom:12px !important}}@media only screen and (max-width: 737px){#Avada-CookiesBar .Avada-CookiesBar__Reopen-Popup--bottom-left{left:12px !important;bottom:12px !important}}#Avada-CookiesBar .Avada-CookiesBar__Reopen-Popup--bottom-left.Avada-CookiesBar__Reopen-Popup--Icon{bottom:60px;left:12px}#Avada-CookiesBar .Avada-CookiesBar__Reopen-Popup--bottom-left.Avada-CookiesBar__Reopen-Popup--Text{bottom:20px;left:65px}#Avada-CookiesBar .Avada-CookiesBar__Reopen-Popup--bottom-right.Avada-CookiesBar__Reopen-Popup--Icon{bottom:60px;right:12px}#Avada-CookiesBar .Avada-CookiesBar__Reopen-Popup--bottom-right.Avada-CookiesBar__Reopen-Popup--Text{bottom:20px;left:65px}#Avada-CookiesBar .Avada-CookiesFloat_card.Avada-CookiesBar-Preferences__PopUp,#Avada-CookiesBar .Avada-CookiesFull_bar.Avada-CookiesBar-Preferences__PopUp{height:694px;max-height:90%;top:50%;bottom:unset;transform:translate(-50%, -50%)}#Avada-CookiesBar .Avada-CookiesMobile.Avada-CookiesBar-Preferences__PopUp{max-height:80vh;top:50% !important;transform:translateY(-50%);bottom:unset}#Avada-CookiesBar .Avada-Preview_CookiesFull_bar__bottom{bottom:0}#Avada-CookiesBar .Avada-CookiesBar__PreferencesCard .Avada-ButtonToggle{margin-top:5px}.Avada-CookiesBar__CookieIcon{display:flex;width:var(--svgWidth) !important;height:var(--svgWidth) !important}.Avada-CookiesBar__CookieIcon svg{width:var(--svgWidth) !important;height:var(--svgWidth) !important}.Avada-CookiesBar__CookieIcon svg path{fill:var(--iconColor) !important}.Avada-CookiesBar__CookieIcon img.Avada-CookiesBar__CookieIconImage{width:var(--svgWidth) !important;height:var(--svgWidth) !important}.Avada-CookiesBar__InlineWrapper .Avada-CookiesFloat_card,.Avada-CookiesBar__InlineWrapper .Avada-CookiesMobile,.Avada-CookiesBar__InlineWrapper .Avada-CookiesFull_bar,.Avada-CookiesBar__InlineWrapper .Avada-CookiesBar__Reopen-Popup{position:unset !important}.Avada-CookiesBar-Preferences .Avada-CookiesFloat_card{max-width:700px;margin:auto;transform:unset}.Avada-PreviewMobile-Lines{background:url("https://cdnapps.avada.io/cookies-bar/preview/preview-mobile.png") no-repeat center center;height:100%;margin:auto}.Avada-PreviewMobile-Lines.-checkout{background-image:none}.Avada-PreviewDesktop-Lines{background:url("https://cdnapps.avada.io/cookies-bar/preview/preview-desktop.png") no-repeat center center;height:100%;margin:auto}.Avada-PreviewDesktop-Lines.-checkout{background-image:none}.Avada-Preview-ReopenButton{position:absolute;bottom:50px;right:50%;transform:translateX(50%);border:1px solid #303030;padding:4px 10px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer}</style><style type="text/css">null</style><style>#dlt_cname_label{display:none !important;}</style><link rel="dns-prefetch preconnect" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/" crossorigin=""><style>
    #epb_timer * {
      direction: ltr;
    }
      .ht-flip-clock {
    font-family: "Helvetica Neue", Helvetica, sans-serif;
    font-size: 16px;
    -webkit-user-select: none;
    text-align: center;
    position: relative;
    width: 100%;
    display: inline-flex;
    font-size: 1vw;
    font-family: "Helvetica Neue", Helvetica, sans-serif;
    box-sizing: border-box;
    align-items: flex-end; }
    .ht-flip-clock .ht-flip-clock-group {
      display: flex;
      position: relative; }
      .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-label {
        position: absolute;
        
        left: 0;
        width: 100%;
        
        height: 2em;
        line-height: 2em;
        font-weight: 400;
        text-transform: capitalize;
        transform: translateY(-100%); }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-label.ht-flip-clock-meridium {
          font-size: 1.75em;
          line-height: 1.75em;
          top: 50%;
          left: 100%;
          flex: 0;
          width: auto;
          text-transform: uppercase;
          font-weight: 200;
          transform: translate(0.5em, -50%); }
      .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list {
        width: 4em;
        height: 6em;
        position: relative;
        border-radius: .75rem;
        box-shadow: 0 1.5px 3px rgba(0, 0, 0, 0.24), 0 3px 8px rgba(0, 0, 0, 0.05);
        font-weight: bold;
        color: #ccc; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list:not(:last-child) {
          margin-right: .333em; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list:not(.flip) .active .ht-flip-clock-list-item-inner {
          z-index: 4; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list:not(.flip) .ht-flip-clock-list-item-inner .ht-top:after,
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list:not(.flip) .ht-flip-clock-list-item-inner .ht-bottom:after {
          display: none; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner {
          position: absolute;
          width: 100%;
          height: 100%; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip {
          animation-delay: 500ms;
          animation-duration: 500ms; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .ht-flip-clock-list-item-inner {
            perspective: 15em; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .ht-top,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .ht-bottom,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active > div,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before > div {
            animation-delay: inherit;
            animation-fill-mode: forwards;
            animation-duration: inherit;
            animation-timing-function: ease-in; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .ht-top:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .ht-bottom:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active > div:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before > div:after {
              animation-duration: inherit;
              animation-fill-mode: inherit;
              animation-timing-function: inherit; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before {
            animation-delay: 0s; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before .ht-top {
              animation-name: flip-top; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before .ht-top:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .before .ht-bottom:after {
              animation-name: show-shadow; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active > div {
            animation-name: indexing; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active .ht-top:after,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active .ht-bottom:after {
            animation-delay: calc(500ms * .15);
            animation-name: hide-shadow; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list.flip .active .ht-bottom {
            animation-name: flip-bottom; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .active {
          z-index: 2; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .active .ht-bottom {
            z-index: 2;
            transform-origin: top center; }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .before {
          z-index: 3; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .before .ht-top {
            z-index: 2;
            transform-origin: bottom center; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .before .ht-top:after {
              background: linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 0%, black 100%); }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .before .ht-bottom:after {
            background: linear-gradient(to bottom, black 0%, rgba(0, 0, 0, 0.1) 100%); }
        .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner {
          position: absolute;
          width: 100%;
          height: 100%;
          transform: rotateX(0.0001deg); }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner:first-child {
            z-index: 2; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner > .ht-top,
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner > .ht-bottom {
            width: 100%;
            height: 50%;
            overflow: hidden;
            position: relative;
            font-size: 4.5em;
            background: #333;
            box-shadow: inset 0 0 0.2em rgba(0, 0, 0, 0.5); }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner > .ht-top:after,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner > .ht-bottom:after {
              content: " ";
              display: block;
              position: absolute;
              top: 0;
              right: 0;
              bottom: 0;
              left: 0;
              overflow: hidden; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner > .ht-top:before,
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner > .ht-bottom:before {
              content: " ";
              display: block;
              width: 100%;
              height: 1px;
              position: absolute; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner .ht-top {
            border-radius: .75rem .75rem 0 0;
            line-height: 1.33333; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner .ht-top:after {
              border-radius: .75rem .75rem 0 0; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner .ht-top:before {
              background: #333;
              opacity: .4;
              bottom: 0; }
          .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner .ht-bottom {
            border-radius: 0 0 .75rem .75rem;
            line-height: 0; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner .ht-bottom:after {
              border-radius: 0 0 .75rem .75rem; }
            .ht-flip-clock .ht-flip-clock-group .ht-flip-clock-list .ht-flip-clock-list-item-inner .ht-bottom:before {
              background: #ccc;
              opacity: .1; }
    .ht-flip-clock .ht-flip-clock-divider {
      position: relative;
      width: 1.5em;
      height: 6em; }
      .ht-flip-clock .ht-flip-clock-divider:before, .ht-flip-clock .ht-flip-clock-divider:after {
        content: " ";
        display: block;
        width: .75em;
        height: .75em;
       
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%; }
      .ht-flip-clock .ht-flip-clock-divider:before {
        transform: translate(-50%, 75%); }
      .ht-flip-clock .ht-flip-clock-divider:after {
        transform: translate(-50%, -175%); }
  
  @keyframes indexing {
    0% {
      z-index: 2; }
    1% {
      z-index: 3; }
    100% {
      z-index: 4; } }
  
  @keyframes flip-bottom {
    0% {
      transform: rotateX(90deg); }
    100% {
      transform: rotateX(0); } }
  
  @keyframes flip-top {
    0% {
      transform: rotateX(0); }
    100% {
      transform: rotateX(-90deg); } }
  
  @keyframes show-shadow {
    0% {
      opacity: 0; }
    100% {
      opacity: 1; } }
  
  @keyframes hide-shadow {
    0% {
      opacity: 1; }
    100% {
      opacity: 0; } }
  
  </style><link rel="prefetch" fetchpriority="low" as="script" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/polyfills.aaTJ3aJS.js" crossorigin=""><link rel="prefetch" fetchpriority="low" as="script" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/app.Cmz0dp0l.js" crossorigin=""><style></style><link rel="prefetch" fetchpriority="low" as="script" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/page-OnePage.CBlRslaG.js" crossorigin=""><link rel="prefetch" fetchpriority="low" as="script" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/DeliveryMethodSelectorSection.D3DlSDiW.js" crossorigin=""><link rel="prefetch" fetchpriority="low" as="script" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/useEditorShopPayNavigation.BIRuXOUZ.js" crossorigin=""><link rel="prefetch" fetchpriority="low" as="script" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/VaultedPayment.BexX1No3.js" crossorigin=""><link rel="prefetch" fetchpriority="low" as="script" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/LocalizationExtensionField.CU41F_7o.js" crossorigin=""><link rel="prefetch" fetchpriority="low" as="script" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/RememberMeDescriptionText.BM5qMQpE.js" crossorigin=""><link rel="prefetch" fetchpriority="low" as="script" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/ShopPayOptInDisclaimer.BYBMSMJe.js" crossorigin=""><link rel="prefetch" fetchpriority="low" as="script" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/PayButtonSection.B4rA5W4K.js" crossorigin=""><link rel="prefetch" fetchpriority="low" as="script" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/component-ShopPayVerificationSwitch.CL_EzNEH.js" crossorigin=""><link rel="prefetch" fetchpriority="low" as="script" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/useSubscribeMessenger.C-ZloIHt.js" crossorigin=""><link rel="prefetch" fetchpriority="low" as="script" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/index.iwkAaohc.js" crossorigin=""><link rel="prefetch" fetchpriority="low" as="style" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/assets/app.CqblHuRC.css" crossorigin=""><link rel="prefetch" fetchpriority="low" as="style" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/assets/OnePage.PMX4OSBO.css" crossorigin=""><link rel="prefetch" fetchpriority="low" as="style" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/assets/DeliveryMethodSelectorSection.DmqjTkNB.css" crossorigin=""><link rel="prefetch" fetchpriority="low" as="style" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/assets/useEditorShopPayNavigation.DCOTvxC3.css" crossorigin=""><link rel="prefetch" fetchpriority="low" as="style" href="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1.de/assets/ShopPayVerificationSwitch.DW7NMDXG.css" crossorigin=""><link rel="prefetch" fetchpriority="low" as="image" href="https://cdn.shopify.com/s/files/1/0654/3664/7664/files/Black-logo-with-Transperant_x320.png?v=1719680221" crossorigin=""><style>.Avada-ButtonToggle{-webkit-appearance:none;appearance:none;background-color:initial;border:0;border-radius:6px;cursor:pointer;display:inline-block;outline:none;padding:0;position:relative;-webkit-user-select:none;user-select:none}.Avada-ButtonToggle .Avada-ButtonToggle_Track{background-color:#e3e3e3;transition:background-color 400ms cubic-bezier(0.25, 0.1, 0.25, 1);display:block;border-radius:34px;height:26px;width:52px}.Avada-ButtonToggle .Avada-ButtonToggle_Thumb{background-color:#fff;left:4px;position:absolute;top:4px;transition:transform 400ms cubic-bezier(0.25, 0.1, 0.25, 1);border-radius:50%;height:18px;width:18px}.Avada-ButtonToggle.-disabled .Avada-ButtonToggle_Thumb{background-color:#b5b5b5}.Avada-ButtonToggle.-active .Avada-ButtonToggle_Track{background-color:#303030}.Avada-ButtonToggle.-active .Avada-ButtonToggle_Thumb{-webkit-transform:translateX(26px);-ms-transform:translateX(26px);transform:translateX(26px)}.Avada-ButtonToggle.-active.-purple .Avada-ButtonToggle_Track{background-color:#5c6ac4}.Avada-ButtonToggle.-active.-blue .Avada-ButtonToggle_Track{background-color:#006edb}.Avada-ButtonToggle.-active.-black .Avada-ButtonToggle_Track{background-color:#303030}.Avada-ButtonToggle.-active.-extraSmall .Avada-ButtonToggle_Thumb{-webkit-transform:translateX(12px);-ms-transform:translateX(12px);transform:translateX(12px)}.Avada-ButtonToggle.-active.-small .Avada-ButtonToggle_Thumb{-webkit-transform:translateX(16px);-ms-transform:translateX(16px);transform:translateX(16px)}.Avada-ButtonToggle.-indeterminate.-square .Avada-ButtonToggle_Track{background-color:#303030}.Avada-ButtonToggle.-indeterminate.-square .Avada-ButtonToggle_Thumb{border-radius:2px;transition:transform 400ms cubic-bezier(0.25, 0.1, 0.25, 1);width:16px;height:4px;top:8px;left:8px}.Avada-ButtonToggle.-square .Avada-ButtonToggle_Track{border-radius:6px}.Avada-ButtonToggle.-square .Avada-ButtonToggle_Thumb{border-radius:3px}.Avada-ButtonToggle.-extraSmall .Avada-ButtonToggle_Track{width:32px;height:20px}.Avada-ButtonToggle.-extraSmall .Avada-ButtonToggle_Thumb{height:12px;width:12px}.Avada-ButtonToggle.-small .Avada-ButtonToggle_Track{width:40px;height:24px}.Avada-ButtonToggle.-small .Avada-ButtonToggle_Thumb{height:16px;width:16px}.Avada-ButtonToggle.-disabled{pointer-events:none;opacity:.5}</style><style>.Avada-CookiesBar__PreferencesCard{font-size:13px;padding:0px 16px 16px;background:#fff;border-radius:12px;margin-bottom:8px}.Avada-CookiesBar__PreferencesCard.-custom{padding-left:8px}.Avada-CookiesBar__PreferencesCard .Avada-CookiesBar__CardTop{display:flex;align-items:flex-start;position:sticky;top:41px;flex-wrap:wrap;background-color:#fff;padding-top:16px}.Avada-CookiesBar__PreferencesCard .Avada-CookiesBar__CardTop.--Mobile{top:54px}.Avada-CookiesBar__PreferencesCard .Avada-CookiesBar__CardTop .Avada-CookiesBar__TitleWrapper{display:flex;flex:1;gap:8px;align-items:center}.Avada-CookiesBar__PreferencesCard .Avada-CookiesBar__CardTop .Avada-CookiesBar__TitleWrapper.-custom{justify-content:space-between}.Avada-CookiesBar__PreferencesCard .Avada-CookiesBar__CardTop .Avada-CookiesBar__TitleWrapper .Avada-CookiesBar__Title{font-weight:650;word-wrap:break-word;color:#303030}.Avada-CookiesBar__PreferencesCard .Avada-CookiesBar__CardTop .Avada-CookiesBar__TitleWrapper .Avada-CookiesBar__Title.-disabled{color:#b5b5b5}.Avada-CookiesBar__PreferencesCard .Avada-CookiesBar__CardTop .Avada-CookiesBar__TitleWrapper .Avada-ButtonToggle{margin-top:4px}.Avada-CookiesBar__PreferencesCard .Avada-CookiesBar__CardTop .Avada-CookiesBar__IconBtn{width:20px;height:20px;text-align:center;cursor:pointer}.Avada-CookiesBar__PreferencesCard .Avada-CookiesBar__CardTop .Avada-CookiesBar__Description{padding-bottom:4px;color:#303030}.Avada-CookiesBar__PreferenceCookies-Wrapper{height:0;overflow:hidden;border-radius:8px;transition:height ease .5s}.Avada-CookiesBar__PreferenceCookies-Wrapper--Active{height:fit-content}.Avada-CookiesBar__PreferenceCookies-Wrapper .Avada-CookiesBar__PreferenceCookies{width:100%;height:100%;border-radius:8px;padding:7px;overflow:auto}.Avada-CookiesBar__PreferenceCookies-Wrapper .Avada-CookiesBar__PreferenceCookies::-webkit-scrollbar{width:7px;height:8px;cursor:pointer}.Avada-CookiesBar__PreferenceCookies-Wrapper .Avada-CookiesBar__PreferenceCookies::-webkit-scrollbar{width:6px;height:6px}.Avada-CookiesBar__PreferenceCookies-Wrapper .Avada-CookiesBar__PreferenceCookies::-webkit-scrollbar-track{border-radius:10px;background:rgba(0,0,0,.1)}.Avada-CookiesBar__PreferenceCookies-Wrapper .Avada-CookiesBar__PreferenceCookies::-webkit-scrollbar-thumb{border-radius:10px;background:rgba(0,0,0,.2)}.Avada-CookiesBar__PreferenceCookies-Wrapper .Avada-CookiesBar__PreferenceCookies::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,.4)}.Avada-CookiesBar__PreferenceCookies-Wrapper .Avada-CookiesBar__PreferenceCookies::-webkit-scrollbar-thumb:active{background:rgba(0,0,0,.9)}.Avada-CookiesBar__PreferenceCookies-Wrapper .Avada-CookiesBar__PreferenceCookies::-webkit-scrollbar{display:none}.Avada-CookiesBar__CookieItem{margin-top:8px}.Avada-CookiesBar__CookieItem .Avada-CookiesBar__CookieTrigger{cursor:pointer;padding:2px 0}.Avada-CookiesBar__CookieItem .Avada-CookiesBar__PushContent{padding:8px;display:flex;flex-direction:column;gap:8px;border-radius:12px;box-shadow:0 1px 0 0 rgba(26,26,26,.07),0 1px 0 0 rgba(204,204,204,.5) inset,0 -1px 0 0 rgba(0,0,0,.17) inset,-1px 0 0 0 rgba(0,0,0,.13) inset,1px 0 0 0 rgba(0,0,0,.13) inset;background-color:#efefef}.Avada-CookiesBar__CookieItem .Avada-CookiesBar__PushContent .Avada-CookiesBar__PushContent-Item{display:flex}.Avada-CookiesBar__CookieItem .Avada-CookiesBar__PushContent .Avada-CookiesBar__PushContent-Item .Avada-CookiesBar__PushContent--Bold{font-weight:650;line-height:1.5;flex-basis:94px}.Avada-CookiesBar__CookieItem .Avada-CookiesBar__PushContent .Avada-CookiesBar__Content{flex:1;word-break:break-all}.Avada-CookiesBar__DescriptionWrapper{transition:max-height .3s ease-in-out}.Avada-CookiesBar__DescriptionWrapper.-custom{max-height:0;margin-left:20px;overflow:auto}.Avada-CookiesBar__DescriptionWrapper.-custom::-webkit-scrollbar{display:none}.Avada-CookiesBar__DescriptionWrapper.-custom.-active{max-height:302px}.Avada-CookiesBar__Title--Wrapper{display:flex}.Avada-CookiesBar__Title--Wrapper.-custom{cursor:pointer}.TcfBanner__PurposeOption--Title{font-weight:650}</style><style>.Avada-Checkbox__Wrapper{width:18px;height:16px;border-radius:4px;cursor:pointer;display:flex !important;align-items:center;justify-content:center;position:relative}.Avada-Checkbox__Wrapper .Avada-Checkbox__Control{position:absolute;inset:0;display:flex;align-items:center;justify-content:center}.Avada-Checkbox__Wrapper .Avada-Checkbox__Control svg{width:100%;height:100%}.Avada-Checkbox__Input{position:absolute;z-index:100;width:100% !important;height:100% !important;opacity:0;margin:0 !important}</style><link rel="stylesheet" href="./Laphet_files/css(1)"></head>

  <body class="page-layout body--template- theme-style--soft page-" data-page="addProductsPage1" data-upcart-cart-enabled="true" data-new-gr-c-s-check-loaded="14.1221.0" data-gr-ext-installed="" style="overflow: initial;"><div></div><div id="Avada-CookiesBar" class="Avada-CookiesBar__OuterWrapper Avada-CookiesBarFloatCard__bottom_right" style="position: relative; z-index: 9999;"><style></style><div class="Avada-CookiesBar__Overlay__bottom_right"></div><div role="banner" aria-hidden="false" class="Avada-CookiesFloat_card Avada-Preview_CookiesFloat_card__bottom_right
        " style="background-color: rgb(246, 239, 235); font-family: &quot;Noto Sans&quot;, sans-serif; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 2px;"><div class="Avada-CookiesBar_Container"><div class="Avada-CookiesBar_Content"><div class="Avada-CookiesBar_Icon"><div class="Avada-CookiesBar__CookieIcon" style="--iconColor: #5F5A56; --svgWidth: 45px;"><div><div><svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" viewBox="0 0 31 30" fill="none" class="injected-svg" data-src="https://cdnapps.avada.io/cookies-bar/icon/cookie_bar_icon_1.svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <path d="M30.7226 12.225C30.6466 11.8219 30.3194 11.5163 29.9126 11.4675C29.5047 11.4188 29.1157 11.6391 28.9469 12.0131C28.6497 12.6694 27.9972 13.1259 27.2407 13.125C26.4016 13.1269 25.6929 12.5606 25.4566 11.7834C25.3141 11.3091 24.8266 11.0278 24.3447 11.1403C24.0485 11.2097 23.7682 11.25 23.4897 11.25C21.4244 11.2463 19.7435 9.56531 19.7397 7.5C19.7397 7.22156 19.7801 6.94125 19.8494 6.64594C19.9629 6.16406 19.6807 5.67562 19.2063 5.53312C18.4291 5.29781 17.8629 4.58906 17.8647 3.75C17.8638 2.9925 18.3204 2.34094 18.9766 2.04375C19.3507 1.875 19.571 1.485 19.5222 1.07812C19.4735 0.670312 19.1679 0.343125 18.7647 0.267188C17.8704 0.099375 16.9441 0 15.9897 0C7.71537 0.001875 0.991621 6.72563 0.989746 15C0.991621 23.2744 7.71537 29.9981 15.9897 30C24.2641 29.9981 30.9879 23.2744 30.9897 15C30.9897 14.0456 30.8904 13.1194 30.7226 12.225ZM25.2663 24.2766C22.886 26.655 19.6104 28.125 15.9897 28.125C12.3691 28.125 9.0935 26.655 6.71318 24.2766C4.33475 21.8962 2.86475 18.6206 2.86475 15C2.86475 11.3794 4.33475 8.10375 6.71318 5.72344C9.0935 3.345 12.3691 1.875 15.9897 1.875C16.1585 1.875 16.3235 1.89281 16.4913 1.90031C16.1782 2.44594 15.9907 3.07406 15.9897 3.75C15.9916 5.14969 16.7679 6.34969 17.8994 6.99C17.8816 7.15687 17.8647 7.32375 17.8647 7.5C17.8666 10.6041 20.3857 13.1231 23.4897 13.125C23.666 13.125 23.8329 13.1081 23.9997 13.0903C24.6401 14.2209 25.8391 14.9981 27.2397 15C27.9157 14.9991 28.5438 14.8116 29.0894 14.4984C29.0969 14.6653 29.1147 14.8313 29.1147 15C29.1147 18.6206 27.6447 21.8962 25.2663 24.2766Z" fill="#1D1D1D"></path>
    <path d="M12.2397 9.375C13.2753 9.375 14.1147 8.53553 14.1147 7.5C14.1147 6.46447 13.2753 5.625 12.2397 5.625C11.2042 5.625 10.3647 6.46447 10.3647 7.5C10.3647 8.53553 11.2042 9.375 12.2397 9.375Z" fill="#1D1D1D"></path>
    <path d="M8.48975 16.875C9.52528 16.875 10.3647 16.0355 10.3647 15C10.3647 13.9645 9.52528 13.125 8.48975 13.125C7.45421 13.125 6.61475 13.9645 6.61475 15C6.61475 16.0355 7.45421 16.875 8.48975 16.875Z" fill="#1D1D1D"></path>
    <path d="M17.8647 24.375C18.9003 24.375 19.7397 23.5355 19.7397 22.5C19.7397 21.4645 18.9003 20.625 17.8647 20.625C16.8292 20.625 15.9897 21.4645 15.9897 22.5C15.9897 23.5355 16.8292 24.375 17.8647 24.375Z" fill="#1D1D1D"></path>
    <path d="M16.9272 16.875C17.445 16.875 17.8647 16.4553 17.8647 15.9375C17.8647 15.4197 17.445 15 16.9272 15C16.4095 15 15.9897 15.4197 15.9897 15.9375C15.9897 16.4553 16.4095 16.875 16.9272 16.875Z" fill="#1D1D1D"></path>
    <path d="M24.4272 20.625C24.945 20.625 25.3647 20.2053 25.3647 19.6875C25.3647 19.1697 24.945 18.75 24.4272 18.75C23.9095 18.75 23.4897 19.1697 23.4897 19.6875C23.4897 20.2053 23.9095 20.625 24.4272 20.625Z" fill="#1D1D1D"></path>
    <path d="M11.3022 22.5C11.82 22.5 12.2397 22.0803 12.2397 21.5625C12.2397 21.0447 11.82 20.625 11.3022 20.625C10.7845 20.625 10.3647 21.0447 10.3647 21.5625C10.3647 22.0803 10.7845 22.5 11.3022 22.5Z" fill="#1D1D1D"></path>
</svg></div></div></div></div><div class="Avada-CookiesBar__ContentWrapper"><div class="Avada-CookiesBar__Header" style="color: rgb(95, 90, 86);"></div><div class="Avada-CookiesBar_Message"><div class="Avada-CookiesBar__MessageInner" style="color: rgb(95, 90, 86); font-size: 13px; text-align: left; font-family: inherit;"><span style="white-space: pre-line; font-size: 13px; word-break: break-word;">We use cookies on this website to ensure you get the best experience with us.</span> <div class="Avada-CookiesBar__PolicyWrapper" style="margin: 0px;"><a target="_blank" href="https://laphet.de/pages/gdpr-privacy-policy" rel="noreferrer" style="text-align: center; color: rgb(95, 90, 86); font-weight: normal; justify-content: center; font-size: 13px; margin-bottom: 0px;">Learn more</a></div></div></div></div></div><div class="Avada-CookiesBar_Footer"><div class="Avada-CookiesBar_BtnEnd Avada-CookiesBar__BtnEnd--Desktop" style="background-color: rgb(246, 239, 235);"><div class="Avada-CookiesBar_GroupButton"><button class="Avada-CookiesBar_BtnAgree" style="background-color: rgb(163, 128, 100); box-shadow: none; border-radius: 9px; border: none;"><span class="Avada-CookiesBar_AgreeButtonText" style="color: rgb(246, 239, 235); font-weight: 500; font-size: 13px; padding: 3px 8px;">Got it!</span></button><button class="Avada-CookiesBar_BtnDeny" style="background-color: rgb(246, 239, 235); border-radius: 9px; border: 1px solid rgb(95, 90, 86);"><span class="Avada-CookiesBar_DenyButtonText" style="color: rgb(95, 90, 86); font-weight: 500; font-size: 13px;">Decline</span></button></div></div><div class="Avada-CookiesBar__PreferencesText-Container"></div></div></div><button class="CookiesBar-Pop__Close"><span class="Avada-Icon__Cancel" style="width: 20px; height: 20px; display: block;"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 20 20" fill="none"><path d="M14.061 15.6419C14.1635 15.7525 14.2871 15.8411 14.4245 15.9026C14.5619 15.9641 14.7101 15.9972 14.8605 15.9998C15.0108 16.0025 15.1602 15.9747 15.2996 15.9181C15.439 15.8615 15.5657 15.7773 15.672 15.6705C15.7784 15.5637 15.8622 15.4364 15.9185 15.2963C15.9748 15.1563 16.0025 15.0062 15.9998 14.8552C15.9972 14.7041 15.9643 14.5551 15.9031 14.4171C15.8419 14.2791 15.7536 14.1549 15.6436 14.0519L11.5826 9.97194L15.6436 5.89194C15.8414 5.67868 15.9491 5.39661 15.944 5.10515C15.9388 4.8137 15.8213 4.53562 15.6162 4.3295C15.411 4.12339 15.1342 4.00532 14.8441 4.00018C14.554 3.99503 14.2733 4.10322 14.061 4.30194L10 8.38194L5.93899 4.30194C5.72672 4.10322 5.44597 3.99503 5.15587 4.00018C4.86578 4.00532 4.58899 4.12339 4.38383 4.3295C4.17867 4.53562 4.06116 4.8137 4.05604 5.10515C4.05092 5.39661 4.1586 5.67868 4.3564 5.89194L8.4174 9.97194L4.3564 14.0519C4.24638 14.1549 4.15814 14.2791 4.09694 14.4171C4.03574 14.5551 4.00283 14.7041 4.00017 14.8552C3.99752 15.0062 4.02518 15.1563 4.0815 15.2963C4.13781 15.4364 4.22164 15.5637 4.32797 15.6705C4.4343 15.7773 4.56096 15.8615 4.70039 15.9181C4.83982 15.9747 4.98917 16.0025 5.13952 15.9998C5.28987 15.9972 5.43814 15.9641 5.5755 15.9026C5.71286 15.8411 5.83648 15.7525 5.93899 15.6419L10 11.5619L14.061 15.6419Z" fill="#5F5A56"></path></svg></span></button></div><style></style></div><div id="ecomsend-widget"><div class="EcomSendAPP"></div></div>
    <a class="skip-to-content-link button button--inverse" href="https://laphet.de/apps/gbb/easybundle/1?page=addProductsPage1&amp;currentFlow=byob#MainContent">
      Direkt zum Inhalt
      <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KPKD8WP8"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    </a>

    <div class="group--header">
      <section id="shopify-section-announcement-bar-slider" class="shopify-section section--announcement-bar"> <style>
  @media screen and (min-width: 769px) {
  #shopify-section-announcement-bar-slider.section--announcement-bar {
    overflow: hidden !important;
    width: 100%;
    height: 44px;
}
  .announcement-bar {
    width: 100%;
    position: absolute;
    top: 0;
    left: 50%;
    transform: translate(-50%);
}
  }
 .slick-initialized .slick-slide { width: 100% !important;}
  .announcement-bar__link:focus-visible,
  .announcement-bar__link.focused {
    --box-shadow-color: hsla(120, 2%, 11%, 0.7);
  }

  .announcement-bar__link {
    --color-link: #1c1d1c;
    --color-link-raw: 120, 2%, 11%;
  }
 .bx-wrapper {
    margin-bottom: 0px !important;
    box-shadow: none !important;
    border: none !important;
    background: inherit !important;
}
</style>

  <div class="announcement-bar" role="region" aria-label="Ankündigung">
    <div class="  " style="background: linear-gradient(180deg, rgba(220, 233, 223, 1) 100%, rgba(211, 255, 45, 1) 100%, rgba(180, 255, 56, 1) 100%); color: #1c1d1c;" "="">
     <div class="bx-wrapper" style="max-width: 100%;"><div class="bx-viewport" aria-live="polite" style="width: 100%; overflow: hidden; position: relative; height: 44px;"><div class="announce_slider" style="width: auto; position: relative; transition-duration: 0.5s; transform: translate3d(0px, -88px, 0px);"><div class="announce-bar-item bx-clone" style="float: none; list-style: none; position: relative; width: 1920px;" aria-hidden="true"><a href="https://www.dhl.de/en/privatkunden/kampagnenseiten/gogreen.html" class="announcement-bar__announcement announcement-bar__link link--with-arrow line-height--heading motion-reduce">
                  Klimaneutraler Versand mit DHL GoGreen 🌳
                 
                </a></div>
      
        <div class="announce-bar-item" style="float: none; list-style: none; position: relative; width: 1920px;" aria-hidden="true"><a href="https://laphet.de/pages/payment-shipping" class="announcement-bar__announcement announcement-bar__link link--with-arrow line-height--heading motion-reduce">
                  📦 Kostenloser Versand ab 49€
                 
                </a></div>
        
        <div class="announce-bar-item" style="float: none; list-style: none; position: relative; width: 1920px;" aria-hidden="false"><span class="announcement-bar__announcement line-height--heading">
                  Spice it, Spread it, Love it! 😍
                </span></div>
        
        <div class="announce-bar-item" style="float: none; list-style: none; position: relative; width: 1920px;" aria-hidden="true"><a href="https://laphet.de/collections/all" class="announcement-bar__announcement announcement-bar__link link--with-arrow line-height--heading motion-reduce">
                  #IssDeinenTee
                 
                </a></div>
        
        <div class="announce-bar-item" style="float: none; list-style: none; position: relative; width: 1920px;" aria-hidden="true"><a href="https://www.dhl.de/en/privatkunden/kampagnenseiten/gogreen.html" class="announcement-bar__announcement announcement-bar__link link--with-arrow line-height--heading motion-reduce">
                  Klimaneutraler Versand mit DHL GoGreen 🌳
                 
                </a></div>
        
     <div class="announce-bar-item bx-clone" style="float: none; list-style: none; position: relative; width: 1920px;" aria-hidden="true"><a href="https://laphet.de/pages/payment-shipping" class="announcement-bar__announcement announcement-bar__link link--with-arrow line-height--heading motion-reduce">
                  📦 Kostenloser Versand ab 49€
                 
                </a></div></div></div></div>
    </div>
  </div>


<link rel="stylesheet" type="text/css" href="./Laphet_files/jquery.bxslider.min.css">
<script type="text/javascript" src="./Laphet_files/jquery.bxslider.min.js.download"></script>
<script>
$('.announce_slider').bxSlider({
  mode: 'vertical',
  pager:false,
  controls:false,
  infiniteLoop:true,
  auto:true,
  speed:500,
  pause:2500
});
</script>
<style> #shopify-section-announcement-bar-slider.section--announcement-bar {overflow: hidden;} </style></section>
      <!-- BEGIN sections: header-group -->
<section id="shopify-section-sections--22932444086607__announcement-bar" class="shopify-section shopify-section-group-header-group section--announcement-bar"> <style>
  .announcement-bar__link:focus-visible,
  .announcement-bar__link.focused {
    --box-shadow-color: hsla(120, 2%, 11%, 0.7);
  }

  .announcement-bar__link {
    --color-link: #1c1d1c;
    --color-link-raw: 120, 2%, 11%;
  }
</style>
</section><header id="shopify-section-sections--22932444086607__header" class="shopify-section shopify-section-group-header-group section--site-header motion-reduce"> <link href="./Laphet_files/styles-component-predictive-search.css" rel="stylesheet" type="text/css" media="all">

  <script src="./Laphet_files/sticky-header.js.download" defer="defer"></script><style data-shopify="">
  .site-header__heading-logo {
    width: 300px;
  }

  @media screen and (max-width: 549px) {
    .site-header__heading-logo {
      width: 150px;
    }
  }

  

  

  
    .site-header__expanded-section-title {
      font-family: var(--font-accent-family);
      font-size: 1rem;
      font-weight: var(--font-accent-weight);
      letter-spacing: var(--font-accent-letter-spacing);
      text-transform: var(--font-accent-text-transform);
    }
  

  
    .site-header__expanded-section-title {
      font-weight: bold;
    }
  

  
    .body--template-index .section--site-header:not(.scrolling-up) .site-header--transparent .site-header__link {
      --color-link: #1c1d1c;
      --color-link-raw: 120, 2%, 11%;
    }

    .body--template-index .section--site-header:not(.scrolling-up) .site-header--transparent .site-header__icon-button {
      --button-foreground-color: #1c1d1c;
      --button-foreground-color-raw: 120, 2%, 11%;
    }
  
</style>

<sticky-header class="site-header site-header--transparent" id="site-header">
  <div class="site-header__container space--viewport-sides site-header__container--middle-left  site-header__container--has-menu site-header__container--accounts-enabled"><div class="site-header__heading"><a href="https://laphet.de/" class="site-header__link display--block space--pv--small"><img srcset="//laphet.de/cdn/shop/files/Black_logo_with_Transperant.png?v=1719622638&amp;width=300 1x, //laphet.de/cdn/shop/files/Black_logo_with_Transperant.png?v=1719622638&amp;width=600 2x" src="./Laphet_files/Black_logo_with_Transperant.png" loading="lazy" class="site-header__heading-logo display--none--xsmall-down" width="3163" height="835" alt="Laphet">
            <img srcset="//laphet.de/cdn/shop/files/Black_logo_with_Transperant.png?v=1719622638&amp;width=150 1x, //laphet.de/cdn/shop/files/Black_logo_with_Transperant.png?v=1719622638&amp;width=600 2x" src="./Laphet_files/Black_logo_with_Transperant(1).png" loading="lazy" class="site-header__heading-logo display--none--xsmall-up" width="3163" height="835" alt="Laphet"><img srcset="//laphet.de/cdn/shop/files/Black_logo_with_Transperant.png?v=1719622638&amp;width=300 1x, //laphet.de/cdn/shop/files/Black_logo_with_Transperant.png?v=1719622638&amp;width=600 2x" src="./Laphet_files/Black_logo_with_Transperant.png" loading="lazy" class="site-header__heading-logo site-header__heading-logo--transparent display--none--xsmall-down" width="3163" height="835" alt="Laphet">
              <img srcset="//laphet.de/cdn/shop/files/Black_logo_with_Transperant.png?v=1719622638&amp;width=150 1x, //laphet.de/cdn/shop/files/Black_logo_with_Transperant.png?v=1719622638&amp;width=600 2x" src="./Laphet_files/Black_logo_with_Transperant(1).png" loading="lazy" class="site-header__heading-logo site-header__heading-logo--transparent display--none--xsmall-up" width="3163" height="835" alt="Laphet"></a></div><nav class="site-header__inline-menu">
        <ul class="site-header__inline-menu-list list--unstyled" role="list"><li class="site-header__inline-menu-item"><details-disclosure>
                  <details class="dropdown-link">
                    <summary class="dropdown-link__toggle site-header__link">
                      <span>Produkte</span>
                      <span class="dropdown-link__caret space--ml--xsmall motion-reduce">
                        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1em" height="1em" class=""><path d="M13.172 12l-4.95-4.95 1.414-1.414L16 12l-6.364 6.364-1.414-1.414z"></path></svg>

                      </span>
                    </summary>
                    <div class="site-header__expanded-section motion-reduce">
                      <ul class="list--unstyled align--text-left site-header__expanded-section-list container--page" role="list" tabindex="-1"><li class="site-header__expanded-section-list-item"><a href="https://laphet.de/collections/all" class="site-header__expanded-section-link site-header__expanded-section-title">
                                Alles anzeigen
                              </a></li><li class="site-header__expanded-section-list-item"><div><span class="site-header__expanded-section-title">
                                    Pesto
                                  </span><ul class="list--unstyled"><li class="space--mt--small">
                                      <a href="https://laphet.de/collections/teepesto" class="site-header__expanded-section-link">
                                        Teepesto
                                      </a>
                                    </li><li class="space--mt--small">
                                      <a href="https://laphet.de/collections/teesalat" class="site-header__expanded-section-link">
                                        Teesalat Set
                                      </a>
                                    </li></ul>
                              </div></li><li class="site-header__expanded-section-list-item"><div><span class="site-header__expanded-section-title">
                                    Topping
                                  </span><ul class="list--unstyled"><li class="space--mt--small">
                                      <a href="https://laphet.de/products/knusper-mix" class="site-header__expanded-section-link">
                                        Knusper Mix
                                      </a>
                                    </li></ul>
                              </div></li><li class="site-header__expanded-section-list-item"><div><span class="site-header__expanded-section-title">
                                    Sets &amp; Bundles
                                  </span><ul class="list--unstyled"><li class="space--mt--small">
                                      <a href="https://laphet.de/apps/gbb/easybundle/1?page=addProductsPage1&amp;currentFlow=byob" class="site-header__expanded-section-link">
                                        Erstelle dein Bündel
                                      </a>
                                    </li></ul>
                              </div></li><li class="site-header__expanded-section-list-item"><div><span class="site-header__expanded-section-title">
                                    Tee
                                  </span><ul class="list--unstyled"><li class="space--mt--small">
                                      <a href="https://laphet.de/collections/loserbiotee" class="site-header__expanded-section-link">
                                        Bio Loser Tee
                                      </a>
                                    </li></ul>
                              </div></li><li class="site-header__expanded-section-list-item"><div><span class="site-header__expanded-section-title">
                                    Geschenkideen
                                  </span><ul class="list--unstyled"><li class="space--mt--small">
                                      <a href="https://laphet.de/collections/geschenkideen" class="site-header__expanded-section-link">
                                        Geschenkkarte
                                      </a>
                                    </li></ul>
                              </div></li></ul>
                    </div>
                  </details>
                </details-disclosure></li><li class="site-header__inline-menu-item"><details-disclosure>
                  <details class="dropdown-link">
                    <summary class="dropdown-link__toggle site-header__link">
                      <span>Rezepte</span>
                      <span class="dropdown-link__caret space--ml--xsmall motion-reduce">
                        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1em" height="1em" class=""><path d="M13.172 12l-4.95-4.95 1.414-1.414L16 12l-6.364 6.364-1.414-1.414z"></path></svg>

                      </span>
                    </summary>
                    <div class="site-header__expanded-section motion-reduce">
                      <ul class="list--unstyled align--text-left site-header__expanded-section-list container--page" role="list" tabindex="-1"><li class="site-header__expanded-section-list-item"><div><span class="site-header__expanded-section-title">
                                    Salate &amp; Bowls
                                  </span><ul class="list--unstyled"><li class="space--mt--small">
                                      <a href="https://laphet.de/blogs/rezepte/fermentierter-teesalat" class="site-header__expanded-section-link">
                                        Teesalat
                                      </a>
                                    </li><li class="space--mt--small">
                                      <a href="https://laphet.de/blogs/rezepte/laphet-bowl-with-tofu" class="site-header__expanded-section-link">
                                        Laphet Bowl mit Tofu
                                      </a>
                                    </li><li class="space--mt--small">
                                      <a href="https://laphet.de/blogs/rezepte/tee-reissalat" class="site-header__expanded-section-link">
                                        Tee Reissalat
                                      </a>
                                    </li></ul>
                              </div></li><li class="site-header__expanded-section-list-item"><div><span class="site-header__expanded-section-title">
                                    Teeaufstrich
                                  </span><ul class="list--unstyled"><li class="space--mt--small">
                                      <a href="https://laphet.de/blogs/rezepte/laphet-toast-delight" class="site-header__expanded-section-link">
                                        Laphet Toast Delight
                                      </a>
                                    </li></ul>
                              </div></li><li class="site-header__expanded-section-list-item"><div><span class="site-header__expanded-section-title">
                                    Tee Dip
                                  </span><ul class="list--unstyled"><li class="space--mt--small">
                                      <a href="https://laphet.de/blogs/rezepte/eggplant-and-tea-fusion-hummus" class="site-header__expanded-section-link">
                                        Tee Hummus
                                      </a>
                                    </li></ul>
                              </div></li><li class="site-header__expanded-section-list-item"><div><span class="site-header__expanded-section-title">
                                    Pasta &amp; Pizza
                                  </span><ul class="list--unstyled"><li class="space--mt--small">
                                      <a href="https://laphet.de/blogs/rezepte/spaghetti-mit-teepesto" class="site-header__expanded-section-link">
                                        Spaghetti mit Teepesto
                                      </a>
                                    </li><li class="space--mt--small">
                                      <a href="https://laphet.de/blogs/rezepte/teepesto-pizza" class="site-header__expanded-section-link">
                                        Teepesto Pizza
                                      </a>
                                    </li></ul>
                              </div></li></ul>
                    </div>
                  </details>
                </details-disclosure></li><li class="site-header__inline-menu-item"><details-disclosure>
                  <details class="dropdown-link">
                    <summary class="dropdown-link__toggle site-header__link">
                      <span>B2B</span>
                      <span class="dropdown-link__caret space--ml--xsmall motion-reduce">
                        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1em" height="1em" class=""><path d="M13.172 12l-4.95-4.95 1.414-1.414L16 12l-6.364 6.364-1.414-1.414z"></path></svg>

                      </span>
                    </summary>
                    <div class="site-header__expanded-section motion-reduce">
                      <ul class="list--unstyled align--text-left site-header__expanded-section-list container--page" role="list" tabindex="-1"><li class="site-header__expanded-section-list-item"><a href="https://laphet.de/pages/retail-partner" class="site-header__expanded-section-link site-header__expanded-section-title">
                                Einzel- und Großhandel
                              </a></li><li class="site-header__expanded-section-list-item"><a href="https://laphet.de/pages/b2b-gastronomie" class="site-header__expanded-section-link site-header__expanded-section-title">
                                Gastronomie und Catering
                              </a></li></ul>
                    </div>
                  </details>
                </details-disclosure></li><li class="site-header__inline-menu-item"><a href="https://laphet.de/pages/storefinder" class="site-header__link">
                  Store Finder
                </a></li><li class="site-header__inline-menu-item"><details-disclosure>
                  <details class="dropdown-link">
                    <summary class="dropdown-link__toggle site-header__link">
                      <span>Über uns</span>
                      <span class="dropdown-link__caret space--ml--xsmall motion-reduce">
                        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1em" height="1em" class=""><path d="M13.172 12l-4.95-4.95 1.414-1.414L16 12l-6.364 6.364-1.414-1.414z"></path></svg>

                      </span>
                    </summary>
                    <div class="site-header__expanded-section motion-reduce">
                      <ul class="list--unstyled align--text-left site-header__expanded-section-list container--page" role="list" tabindex="-1"><li class="site-header__expanded-section-list-item"><a href="https://laphet.de/pages/sustainability" class="site-header__expanded-section-link site-header__expanded-section-title">
                                Nachhaltigkeit
                              </a></li><li class="site-header__expanded-section-list-item"><a href="https://laphet.de/blogs/laphet-blog" class="site-header__expanded-section-link site-header__expanded-section-title">
                                Blogs
                              </a></li><li class="site-header__expanded-section-list-item"><a href="https://laphet.de/pages/press-room" class="site-header__expanded-section-link site-header__expanded-section-title">
                                Presse
                              </a></li><li class="site-header__expanded-section-list-item"><a href="https://laphet.de/pages/about-us" class="site-header__expanded-section-link site-header__expanded-section-title">
                                Über uns
                              </a></li><li class="site-header__expanded-section-list-item"><a href="https://laphet.de/pages/kontakt-support" class="site-header__expanded-section-link site-header__expanded-section-title">
                                Kontakt
                              </a></li></ul>
                    </div>
                  </details>
                </details-disclosure></li></ul>
      </nav>
    <details-modal class="site-header__search" data-document-class="search-open">
      <details>
        <summary class="button button--icon site-header__icon-button site-header__icon-button--search" aria-haspopup="dialog" aria-label="Suchen" role="button">
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class=""><path d="M18.031 16.617l4.283 4.282-1.415 1.415-4.282-4.283A8.96 8.96 0 0 1 11 20c-4.968 0-9-4.032-9-9s4.032-9 9-9 9 4.032 9 9a8.96 8.96 0 0 1-1.969 5.617zm-2.006-.742A6.977 6.977 0 0 0 18 11c0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7a6.977 6.977 0 0 0 4.875-1.975l.15-.15z"></path></svg>

        </summary>
        <div class="site-header__expanded-section site-header__expanded-section--search site-header__expanded-section--horizontal" role="dialog" aria-labelledby="SiteHeaderSearchTitle">
<predictive-search class="predictive-search" data-loading-text="Wird geladen..."><form action="https://laphet.de/search" method="get" role="search" class="space--viewport-sides">
  <div class="search-bar container--medium align--block-center">
    <label id="SiteHeaderSearchTitle" class="space--mb--xsmall" for="SearchBox-sections--22932444086607__header">
      Suchen
    </label>
    <div class="inline-text-input">
      <input id="SearchBox-sections--22932444086607__header" type="search" name="q" value="" placeholder="Gib deinen Suchbegriff ein" class="inline-text-input__input" role="combobox" aria-expanded="false" aria-owns="predictive-search-results-list" aria-controls="predictive-search-results-list" aria-haspopup="listbox" aria-autocomplete="list" autocorrect="off" autocomplete="off" autocapitalize="off" spellcheck="false">
      <input type="hidden" name="options[prefix]" value="last">
      <button type="reset" class="inline-text-input__reset button--icon  display--hidden" aria-label="Suchbegriff zurücksetzen">
        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class=""><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-9.414l2.828-2.829 1.415 1.415L13.414 12l2.829 2.828-1.415 1.415L12 13.414l-2.828 2.829-1.415-1.415L10.586 12 7.757 9.172l1.415-1.415L12 10.586z"></path></svg>

      </button>
      <button class="inline-text-input__button button--icon" aria-label="Suchen">
        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class=""><path d="M18.031 16.617l4.283 4.282-1.415 1.415-4.282-4.283A8.96 8.96 0 0 1 11 20c-4.968 0-9-4.032-9-9s4.032-9 9-9 9 4.032 9 9a8.96 8.96 0 0 1-1.969 5.617zm-2.006-.742A6.977 6.977 0 0 0 18 11c0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7a6.977 6.977 0 0 0 4.875-1.975l.15-.15z"></path></svg>

      </button>
    </div>
  </div><div class="predictive-search__container space--mt--medium" tabindex="-1" data-predictive-search="">
      <div class="predictive-search__loading-state">
<style data-shopify="">
  .loader--predictive-search {
    width: 60px;
    height: 60px;
  }</style>

<div class="loader loader--predictive-search">
  <span class="loader__reduced-motion-message copy--small copy--italic">
    Wird geladen...
  </span>
  <div class="loader__inner-container">
    <div class="loader__circle-1"></div>
    <div class="loader__circle-2"></div>
  </div>
</div>
</div>
    </div>
    <span class="js-predictive-search-status display--hidden" role="status" aria-hidden="true"></span></form></predictive-search><button type="button" data-close-modal="" class="site-header__search-close-button button--icon site-header__icon-button no-js-hidden" aria-label="Schließen">
            <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="30px" height="30px" class=""><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path></svg>

          </button>
        </div>
      </details>
    </details-modal>

    
<a href="https://laphet.de/account/login" class="button button--icon site-header__icon-button site-header__account display--none--medium-down">
        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class=""><path d="M20 22h-2v-2a3 3 0 0 0-3-3H9a3 3 0 0 0-3 3v2H4v-2a5 5 0 0 1 5-5h6a5 5 0 0 1 5 5v2zm-8-9a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"></path></svg>

        <span class="display--hidden">Einloggen</span>
      </a>
    <div id="cart-icon-bubble" class="site-header__cart display--inline-block no-js-hidden"><drawer-opener id="cart-drawer-opener" data-drawer-id="cart-drawer" data-type="slide_out_drawer">
          <button class="button--icon site-header__icon-button" data-drawer-to-open="cart-drawer" aria-haspopup="dialog" aria-label="Translation missing: de.cart.name">
            <div class="site-header__cart-indicator">
              <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class="">
          <path d="M4 6.414L.757 3.172l1.415-1.415L5.414 5h15.242a1 1 0 0 1 .958 1.287l-2.4 8a1 1 0 0 1-.958.713H6v2h11v2H5a1 1 0 0 1-1-1V6.414zM6 7v6h11.512l1.8-6H6zm-.5 16a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm12 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"></path>
        
</svg>

              <span class="display--hidden">
                Translation missing: de.cart.name
              </span><div class="site-header__cart-count color--bg-primary"><span aria-hidden="true">2</span><span class="display--hidden">
                    2 Artikel
                  </span>
                </div></div>
          </button>
        </drawer-opener></div>

    <noscript>
      <div class="site-header__cart display--inline-block">
        <a class="button button--icon site-header__icon-button" href="/cart">
          <div class="site-header__cart-indicator">
            <svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class="">
          <path d="M4 6.414L.757 3.172l1.415-1.415L5.414 5h15.242a1 1 0 0 1 .958 1.287l-2.4 8a1 1 0 0 1-.958.713H6v2h11v2H5a1 1 0 0 1-1-1V6.414zM6 7v6h11.512l1.8-6H6zm-.5 16a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm12 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" />
        
</svg>

            <span class="display--hidden">
              Translation missing: de.cart.name
            </span><div class="site-header__cart-count color--bg-primary"><span aria-hidden="true">2</span><span class="display--hidden">
                  2 Artikel
                </span>
              </div></div>
        </a>
      </div>
    </noscript>

    
    <div class="site-header__menu-toggle">
      <drawer-opener data-drawer-id="menu-drawer" class="no-js-hidden">
        <button class="site-header__icon-button button--icon" aria-haspopup="dialog" aria-label="Menü" data-drawer-to-open="menu-drawer">
          <span>
            <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class=""><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"></path></svg>

          </span>
        </button>
      </drawer-opener>

      <noscript>
        <details>
          <summary class="button button--icon site-header__icon-button" aria-haspopup="dialog" aria-label="Menü">
            <svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class=""><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" /></svg>

          </summary>
          <div class="site-header__expanded-section" role="dialog" aria-modal="true" aria-label="Menü">
            <div tabindex="-1">


<div class="mobile-nav drawer-menu">
  <nav>
    <h2  class="display--hidden">
      Menü
    </h2>
    <ul class="list--unstyled drawer-menu__main-list" role="list"><li class="drawer-menu__main-list-item"><details class="drawer-menu__main-dropdown">
              <summary class="drawer-menu__toggle drawer-menu__toggle--main">
                <span>
                  Produkte
                </span>
                <span class="icon--to-open motion-reduce"><svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.5rem" height="1.5rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"/></g></g></g></svg>
</span>
              </summary>
              <div id="link-Produkte" class="motion-reduce" tabindex="-1">
                <div>
                  <ul class="drawer-menu__main-dropdown-list-item list--unstyled" role="list" tabindex="-1"><li class="drawer-menu__main-dropdown-list-item"><a href="/collections/all"  class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Alles anzeigen
                          </a></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Pesto
                              </span>
                              <span class="icon--to-open motion-reduce"><svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"/></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Pesto" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="/collections/teepesto"  class="drawer-menu__link drawer-menu__link--grandchild">
                                      Teepesto
                                    </a>
                                  </li><li>
                                    <a href="/collections/teesalat"  class="drawer-menu__link drawer-menu__link--grandchild">
                                      Teesalat Set
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Topping
                              </span>
                              <span class="icon--to-open motion-reduce"><svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"/></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Topping" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="/products/knusper-mix"  class="drawer-menu__link drawer-menu__link--grandchild">
                                      Knusper Mix
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Sets &amp; Bundles
                              </span>
                              <span class="icon--to-open motion-reduce"><svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"/></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Sets &amp; Bundles" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="https://laphet.de/apps/gbb/easybundle/1?page=addProductsPage1&currentFlow=byob"  class="drawer-menu__link drawer-menu__link--grandchild">
                                      Erstelle dein Bündel
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Tee
                              </span>
                              <span class="icon--to-open motion-reduce"><svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"/></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Tee" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="/collections/loserbiotee"  class="drawer-menu__link drawer-menu__link--grandchild">
                                      Bio Loser Tee
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Geschenkideen
                              </span>
                              <span class="icon--to-open motion-reduce"><svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"/></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Geschenkideen" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="/collections/geschenkideen"  class="drawer-menu__link drawer-menu__link--grandchild">
                                      Geschenkkarte
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li></ul>
                </div>
              </div>
            </details></li><li class="drawer-menu__main-list-item"><details class="drawer-menu__main-dropdown">
              <summary class="drawer-menu__toggle drawer-menu__toggle--main">
                <span>
                  Rezepte
                </span>
                <span class="icon--to-open motion-reduce"><svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.5rem" height="1.5rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"/></g></g></g></svg>
</span>
              </summary>
              <div id="link-Rezepte" class="motion-reduce" tabindex="-1">
                <div>
                  <ul class="drawer-menu__main-dropdown-list-item list--unstyled" role="list" tabindex="-1"><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Salate &amp; Bowls
                              </span>
                              <span class="icon--to-open motion-reduce"><svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"/></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Salate &amp; Bowls" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="/blogs/rezepte/fermentierter-teesalat"  class="drawer-menu__link drawer-menu__link--grandchild">
                                      Teesalat
                                    </a>
                                  </li><li>
                                    <a href="/blogs/rezepte/laphet-bowl-with-tofu"  class="drawer-menu__link drawer-menu__link--grandchild">
                                      Laphet Bowl mit Tofu
                                    </a>
                                  </li><li>
                                    <a href="/blogs/rezepte/tee-reissalat"  class="drawer-menu__link drawer-menu__link--grandchild">
                                      Tee Reissalat
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Teeaufstrich
                              </span>
                              <span class="icon--to-open motion-reduce"><svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"/></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Teeaufstrich" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="/blogs/rezepte/laphet-toast-delight"  class="drawer-menu__link drawer-menu__link--grandchild">
                                      Laphet Toast Delight
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Tee Dip
                              </span>
                              <span class="icon--to-open motion-reduce"><svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"/></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Tee Dip" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="/blogs/rezepte/eggplant-and-tea-fusion-hummus"  class="drawer-menu__link drawer-menu__link--grandchild">
                                      Tee Hummus
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Pasta &amp; Pizza
                              </span>
                              <span class="icon--to-open motion-reduce"><svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"/></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Pasta &amp; Pizza" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="/blogs/rezepte/spaghetti-mit-teepesto"  class="drawer-menu__link drawer-menu__link--grandchild">
                                      Spaghetti mit Teepesto
                                    </a>
                                  </li><li>
                                    <a href="/blogs/rezepte/teepesto-pizza"  class="drawer-menu__link drawer-menu__link--grandchild">
                                      Teepesto Pizza
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li></ul>
                </div>
              </div>
            </details></li><li class="drawer-menu__main-list-item"><details class="drawer-menu__main-dropdown">
              <summary class="drawer-menu__toggle drawer-menu__toggle--main">
                <span>
                  B2B
                </span>
                <span class="icon--to-open motion-reduce"><svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.5rem" height="1.5rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"/></g></g></g></svg>
</span>
              </summary>
              <div id="link-B2B" class="motion-reduce" tabindex="-1">
                <div>
                  <ul class="drawer-menu__main-dropdown-list-item list--unstyled" role="list" tabindex="-1"><li class="drawer-menu__main-dropdown-list-item"><a href="/pages/retail-partner"  class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Einzel- und Großhandel
                          </a></li><li class="drawer-menu__main-dropdown-list-item"><a href="/pages/b2b-gastronomie"  class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Gastronomie und Catering
                          </a></li></ul>
                </div>
              </div>
            </details></li><li class="drawer-menu__main-list-item"><a class="drawer-menu__link drawer-menu__link--main" href="/pages/storefinder" >
              Store Finder
            </a></li><li class="drawer-menu__main-list-item"><details class="drawer-menu__main-dropdown">
              <summary class="drawer-menu__toggle drawer-menu__toggle--main">
                <span>
                  Über uns
                </span>
                <span class="icon--to-open motion-reduce"><svg  xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.5rem" height="1.5rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"/></g></g></g></svg>
</span>
              </summary>
              <div id="link-Über uns" class="motion-reduce" tabindex="-1">
                <div>
                  <ul class="drawer-menu__main-dropdown-list-item list--unstyled" role="list" tabindex="-1"><li class="drawer-menu__main-dropdown-list-item"><a href="/pages/sustainability"  class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Nachhaltigkeit
                          </a></li><li class="drawer-menu__main-dropdown-list-item"><a href="/blogs/laphet-blog"  class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Blogs
                          </a></li><li class="drawer-menu__main-dropdown-list-item"><a href="/pages/press-room"  class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Presse
                          </a></li><li class="drawer-menu__main-dropdown-list-item"><a href="/pages/about-us"  class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Über uns
                          </a></li><li class="drawer-menu__main-dropdown-list-item"><a href="/pages/kontakt-support"  class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Kontakt
                          </a></li></ul>
                </div>
              </div>
            </details></li><li class="drawer-menu__main-list-item"><a class="drawer-menu__link drawer-menu__link--main" href="/account/login">Einloggen</a></li>
    </ul>
  </nav></div>
</div>
          </div>
        </details>
      </noscript>
    </div>
  </div>
</sticky-header>

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "name": "Laphet",
    
    "sameAs": [
      "",
      "https:\/\/www.facebook.com\/laphet.de\/",
      "https:\/\/www.pinterest.com\/laphet_de\/",
      "https:\/\/www.instagram.com\/laphet.de\/",
      "",
      "",
      "https:\/\/www.youtube.com\/@laphet.teaeat",
      ""
    ],
    "url": "https:\/\/laphet.de"
  }
</script>
</header><aside id="shopify-section-sections--22932444086607__menu-drawer" class="shopify-section shopify-section-group-header-group section--menu-drawer"><dialog id="menu-drawer" data-drawer-dialog="" class="drawer drawer--menu color--bg-primary motion-reduce no-js-hidden" aria-labelledby="MenuDrawerTitle" tabindex="-1" hidden="">
  <header class="drawer__header">
    <span></span>
    <button class="button--icon space--mt--medium drawer__close-button--right" data-drawer-to-close="menu-drawer" aria-label="Schließen"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="30" height="30" class=""><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path></svg>
</button>
  </header>
  <div class="drawer__scrollable">


<div class="mobile-nav drawer-menu">
  <nav>
    <h2 id="MenuDrawerTitle" class="display--hidden">
      Menü
    </h2>
    <ul class="list--unstyled drawer-menu__main-list" role="list"><li class="drawer-menu__main-list-item"><details class="drawer-menu__main-dropdown">
              <summary class="drawer-menu__toggle drawer-menu__toggle--main">
                <span>
                  Produkte
                </span>
                <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.5rem" height="1.5rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"></path></g></g></g></svg>
</span>
              </summary>
              <div id="link-Produkte" class="motion-reduce" tabindex="-1">
                <div>
                  <ul class="drawer-menu__main-dropdown-list-item list--unstyled" role="list" tabindex="-1"><li class="drawer-menu__main-dropdown-list-item"><a href="https://laphet.de/collections/all" class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Alles anzeigen
                          </a></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Pesto
                              </span>
                              <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"></path></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Pesto" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="https://laphet.de/collections/teepesto" class="drawer-menu__link drawer-menu__link--grandchild">
                                      Teepesto
                                    </a>
                                  </li><li>
                                    <a href="https://laphet.de/collections/teesalat" class="drawer-menu__link drawer-menu__link--grandchild">
                                      Teesalat Set
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Topping
                              </span>
                              <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"></path></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Topping" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="https://laphet.de/products/knusper-mix" class="drawer-menu__link drawer-menu__link--grandchild">
                                      Knusper Mix
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Sets &amp; Bundles
                              </span>
                              <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"></path></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Sets &amp; Bundles" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="https://laphet.de/apps/gbb/easybundle/1?page=addProductsPage1&amp;currentFlow=byob" class="drawer-menu__link drawer-menu__link--grandchild">
                                      Erstelle dein Bündel
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Tee
                              </span>
                              <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"></path></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Tee" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="https://laphet.de/collections/loserbiotee" class="drawer-menu__link drawer-menu__link--grandchild">
                                      Bio Loser Tee
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Geschenkideen
                              </span>
                              <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"></path></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Geschenkideen" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="https://laphet.de/collections/geschenkideen" class="drawer-menu__link drawer-menu__link--grandchild">
                                      Geschenkkarte
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li></ul>
                </div>
              </div>
            </details></li><li class="drawer-menu__main-list-item"><details class="drawer-menu__main-dropdown">
              <summary class="drawer-menu__toggle drawer-menu__toggle--main">
                <span>
                  Rezepte
                </span>
                <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.5rem" height="1.5rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"></path></g></g></g></svg>
</span>
              </summary>
              <div id="link-Rezepte" class="motion-reduce" tabindex="-1">
                <div>
                  <ul class="drawer-menu__main-dropdown-list-item list--unstyled" role="list" tabindex="-1"><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Salate &amp; Bowls
                              </span>
                              <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"></path></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Salate &amp; Bowls" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="https://laphet.de/blogs/rezepte/fermentierter-teesalat" class="drawer-menu__link drawer-menu__link--grandchild">
                                      Teesalat
                                    </a>
                                  </li><li>
                                    <a href="https://laphet.de/blogs/rezepte/laphet-bowl-with-tofu" class="drawer-menu__link drawer-menu__link--grandchild">
                                      Laphet Bowl mit Tofu
                                    </a>
                                  </li><li>
                                    <a href="https://laphet.de/blogs/rezepte/tee-reissalat" class="drawer-menu__link drawer-menu__link--grandchild">
                                      Tee Reissalat
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Teeaufstrich
                              </span>
                              <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"></path></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Teeaufstrich" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="https://laphet.de/blogs/rezepte/laphet-toast-delight" class="drawer-menu__link drawer-menu__link--grandchild">
                                      Laphet Toast Delight
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Tee Dip
                              </span>
                              <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"></path></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Tee Dip" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="https://laphet.de/blogs/rezepte/eggplant-and-tea-fusion-hummus" class="drawer-menu__link drawer-menu__link--grandchild">
                                      Tee Hummus
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li><li class="drawer-menu__main-dropdown-list-item"><details class="drawer-menu__main-dropdown-dropdown">
                            <summary class="drawer-menu__toggle drawer-menu__toggle--main-dropdown">
                              <span>
                                Pasta &amp; Pizza
                              </span>
                              <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.25rem" height="1.25rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"></path></g></g></g></svg>
</span>
                            </summary>
                            <div id="childlink-Pasta &amp; Pizza" class="motion-reduce">
                              <ul class="list--unstyled" role="list" tabindex="-1"><li>
                                    <a href="https://laphet.de/blogs/rezepte/spaghetti-mit-teepesto" class="drawer-menu__link drawer-menu__link--grandchild">
                                      Spaghetti mit Teepesto
                                    </a>
                                  </li><li>
                                    <a href="https://laphet.de/blogs/rezepte/teepesto-pizza" class="drawer-menu__link drawer-menu__link--grandchild">
                                      Teepesto Pizza
                                    </a>
                                  </li></ul>
                            </div>
                          </details></li></ul>
                </div>
              </div>
            </details></li><li class="drawer-menu__main-list-item"><details class="drawer-menu__main-dropdown">
              <summary class="drawer-menu__toggle drawer-menu__toggle--main">
                <span>
                  B2B
                </span>
                <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.5rem" height="1.5rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"></path></g></g></g></svg>
</span>
              </summary>
              <div id="link-B2B" class="motion-reduce" tabindex="-1">
                <div>
                  <ul class="drawer-menu__main-dropdown-list-item list--unstyled" role="list" tabindex="-1"><li class="drawer-menu__main-dropdown-list-item"><a href="https://laphet.de/pages/retail-partner" class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Einzel- und Großhandel
                          </a></li><li class="drawer-menu__main-dropdown-list-item"><a href="https://laphet.de/pages/b2b-gastronomie" class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Gastronomie und Catering
                          </a></li></ul>
                </div>
              </div>
            </details></li><li class="drawer-menu__main-list-item"><a class="drawer-menu__link drawer-menu__link--main" href="https://laphet.de/pages/storefinder">
              Store Finder
            </a></li><li class="drawer-menu__main-list-item"><details class="drawer-menu__main-dropdown">
              <summary class="drawer-menu__toggle drawer-menu__toggle--main">
                <span>
                  Über uns
                </span>
                <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.5rem" height="1.5rem" class=""><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-469.000000, -9.000000)"><g id="arrow-drop-down" transform="translate(469.000000, 9.500000)"><path d="M0,0 L5,5 L10,0 L0,0 Z" id="Shape"></path></g></g></g></svg>
</span>
              </summary>
              <div id="link-Über uns" class="motion-reduce" tabindex="-1">
                <div>
                  <ul class="drawer-menu__main-dropdown-list-item list--unstyled" role="list" tabindex="-1"><li class="drawer-menu__main-dropdown-list-item"><a href="https://laphet.de/pages/sustainability" class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Nachhaltigkeit
                          </a></li><li class="drawer-menu__main-dropdown-list-item"><a href="https://laphet.de/blogs/laphet-blog" class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Blogs
                          </a></li><li class="drawer-menu__main-dropdown-list-item"><a href="https://laphet.de/pages/press-room" class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Presse
                          </a></li><li class="drawer-menu__main-dropdown-list-item"><a href="https://laphet.de/pages/about-us" class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Über uns
                          </a></li><li class="drawer-menu__main-dropdown-list-item"><a href="https://laphet.de/pages/kontakt-support" class="drawer-menu__link drawer-menu__link--main-dropdown">
                            Kontakt
                          </a></li></ul>
                </div>
              </div>
            </details></li><li class="drawer-menu__main-list-item"><a class="drawer-menu__link drawer-menu__link--main" href="https://laphet.de/account/login">Einloggen</a></li>
    </ul>
  </nav><div class="rte space--mt--medium space--drawer-sides">
      
    </div><div class="space--mv--large space--drawer-sides">
<ul class="social-list flex--justify-left list--unstyled " role="list"><li>
      <a class="button--icon" href="https://www.facebook.com/laphet.de/" aria-describedby="a11y-external-message"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="26px" height="26px" class=""><path d="M14 19h5V5H5v14h7v-5h-2v-2h2v-1.654c0-1.337.14-1.822.4-2.311A2.726 2.726 0 0 1 13.536 6.9c.382-.205.857-.328 1.687-.381.329-.021.755.005 1.278.08v1.9H16c-.917 0-1.296.043-1.522.164a.727.727 0 0 0-.314.314c-.12.226-.164.45-.164 1.368V12h2.5l-.5 2h-2v5zM4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"></path></svg>
<span class="display--hidden">
          Facebook
        </span>
      </a>
    </li><li>
      <a class="button--icon" href="https://www.pinterest.com/laphet_de/" target="_blank" rel="noopener" aria-describedby="a11y-external-message"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="26px" height="26px" class=""><path d="M8.49 19.191c.024-.336.072-.671.144-1.001.063-.295.254-1.13.534-2.34l.007-.03.387-1.668c.079-.34.14-.604.181-.692a3.46 3.46 0 0 1-.284-1.423c0-1.337.756-2.373 1.736-2.373.36-.006.704.15.942.426.238.275.348.644.302.996 0 .453-.085.798-.453 2.035-.071.238-.12.404-.166.571-.051.188-.095.358-.132.522-.096.386-.008.797.237 1.106a1.2 1.2 0 0 0 1.006.456c1.492 0 2.6-1.985 2.6-4.548 0-1.97-1.29-3.274-3.432-3.274A3.878 3.878 0 0 0 9.2 9.1a4.13 4.13 0 0 0-1.195 2.961 2.553 2.553 0 0 0 .512 1.644c.181.14.25.383.175.59-.041.168-.14.552-.176.68a.41.41 0 0 1-.216.297.388.388 0 0 1-.355.002c-1.16-.479-1.796-1.778-1.796-3.44 0-2.985 2.491-5.584 6.192-5.584 3.135 0 5.481 2.329 5.481 5.14 0 3.532-1.932 6.104-4.69 6.104a2.508 2.508 0 0 1-2.046-.959l-.043.177-.207.852-.002.007c-.146.6-.248 1.017-.288 1.174-.106.355-.24.703-.4 1.04a8 8 0 1 0-1.656-.593zM12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10z"></path></svg>
<span class="display--hidden">
          Pinterest
        </span>
      </a>
    </li><li>
      <a class="button--icon" href="https://www.instagram.com/laphet.de/" target="_blank" rel="noopener" aria-describedby="a11y-external-message"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="26px" height="26px" class=""><path d="M12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm0-2a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm6.5-.25a1.25 1.25 0 0 1-2.5 0 1.25 1.25 0 0 1 2.5 0zM12 4c-2.474 0-2.878.007-4.029.058-.784.037-1.31.142-1.798.332-.434.168-.747.369-1.08.703a2.89 2.89 0 0 0-.704 1.08c-.19.49-.295 1.015-.331 1.798C4.006 9.075 4 9.461 4 12c0 2.474.007 2.878.058 4.029.037.783.142 1.31.331 1.797.17.435.37.748.702 1.08.337.336.65.537 1.08.703.494.191 1.02.297 1.8.333C9.075 19.994 9.461 20 12 20c2.474 0 2.878-.007 4.029-.058.782-.037 1.309-.142 1.797-.331.433-.169.748-.37 1.08-.702.337-.337.538-.65.704-1.08.19-.493.296-1.02.332-1.8.052-1.104.058-1.49.058-4.029 0-2.474-.007-2.878-.058-4.029-.037-.782-.142-1.31-.332-1.798a2.911 2.911 0 0 0-.703-1.08 2.884 2.884 0 0 0-1.08-.704c-.49-.19-1.016-.295-1.798-.331C14.925 4.006 14.539 4 12 4zm0-2c2.717 0 3.056.01 4.122.06 1.065.05 1.79.217 2.428.465.66.254 1.216.598 1.772 1.153a4.908 4.908 0 0 1 1.153 1.772c.247.637.415 1.363.465 2.428.047 1.066.06 1.405.06 4.122 0 2.717-.01 3.056-.06 4.122-.05 1.065-.218 1.79-.465 2.428a4.883 4.883 0 0 1-1.153 1.772 4.915 4.915 0 0 1-1.772 1.153c-.637.247-1.363.415-2.428.465-1.066.047-1.405.06-4.122.06-2.717 0-3.056-.01-4.122-.06-1.065-.05-1.79-.218-2.428-.465a4.89 4.89 0 0 1-1.772-1.153 4.904 4.904 0 0 1-1.153-1.772c-.248-.637-.415-1.363-.465-2.428C2.013 15.056 2 14.717 2 12c0-2.717.01-3.056.06-4.122.05-1.066.217-1.79.465-2.428a4.88 4.88 0 0 1 1.153-1.772A4.897 4.897 0 0 1 5.45 2.525c.638-.248 1.362-.415 2.428-.465C8.944 2.013 9.283 2 12 2z"></path></svg>
<span class="display--hidden">
          Instagram
        </span>
      </a>
    </li><li>
      <a class="button--icon" href="https://www.youtube.com/@laphet.teaeat" target="_blank" rel="noopener" aria-describedby="a11y-external-message"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="26px" height="26px" class=""><path d="M19.606 6.995c-.076-.298-.292-.523-.539-.592C18.63 6.28 16.5 6 12 6s-6.628.28-7.069.403c-.244.068-.46.293-.537.592C4.285 7.419 4 9.196 4 12s.285 4.58.394 5.006c.076.297.292.522.538.59C5.372 17.72 7.5 18 12 18s6.629-.28 7.069-.403c.244-.068.46-.293.537-.592C19.715 16.581 20 14.8 20 12s-.285-4.58-.394-5.005zm1.937-.497C22 8.28 22 12 22 12s0 3.72-.457 5.502c-.254.985-.997 1.76-1.938 2.022C17.896 20 12 20 12 20s-5.893 0-7.605-.476c-.945-.266-1.687-1.04-1.938-2.022C2 15.72 2 12 2 12s0-3.72.457-5.502c.254-.985.997-1.76 1.938-2.022C6.107 4 12 4 12 4s5.896 0 7.605.476c.945.266 1.687 1.04 1.938 2.022zM10 15.5v-7l6 3.5-6 3.5z"></path></svg>
<span class="display--hidden">
          YouTube
        </span>
      </a>
    </li></ul>
</div></div>
</div>
</dialog>

</aside><div id="shopify-section-sections--22932444086607__cart-drawer" class="shopify-section shopify-section-group-header-group">
<cart-drawer id="cart-drawer" data-drawer-dialog="" class="drawer drawer--cart color--bg- motion-reduce no-js-hidden" aria-labelledby="CartDrawerTitle" tabindex="-1" hidden="" role="dialog">
    <header class="drawer__header drawer__header--cart element--border-bottom--thick">
      <button class="button--icon drawer__close-button--left" data-drawer-to-close="cart-drawer" aria-label="Schließen"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="30" height="30" class=""><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path></svg>
</button>
      <h2 class="type--heading title--xsmall align--text-center">
        Ihr Warenkorb
      </h2>
      <div id="cart-drawer-icon-bubble">
        <div class="site-header__cart-indicator space--mt--xsmall">
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class="">
          <path d="M4 6.414L.757 3.172l1.415-1.415L5.414 5h15.242a1 1 0 0 1 .958 1.287l-2.4 8a1 1 0 0 1-.958.713H6v2h11v2H5a1 1 0 0 1-1-1V6.414zM6 7v6h11.512l1.8-6H6zm-.5 16a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm12 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"></path>
        
</svg>

<div class="site-header__cart-count color--bg-primary"><span aria-hidden="true">2</span><span class="display--hidden">
                2 Artikel
              </span>
            </div></div>
      </div>
    </header>

    <div id="cart-drawer-contents" class="drawer__scrollable">
      <div class="space--drawer-sides"><cart-items class="cart-items">
  <div class="js-cart-contents">
    <div id="cart-items-loader" class="cart-item__new-item-loader space--pv--small element--border-bottom--thin display--hidden">
      
<style data-shopify="">
  .loader--cart-item {
    width: 80px;
    height: 80px;
  }</style>

<div class="loader loader--cart-item">
  <span class="loader__reduced-motion-message copy--small copy--italic">
    Wird geladen...
  </span>
  <div class="loader__inner-container">
    <div class="loader__circle-1"></div>
    <div class="loader__circle-2"></div>
  </div>
</div>

    </div>
    
    <div id="cart-empty-message" class="align--text-center space--mv--medium display--hidden">
      <h3 class="copy--large">
        Ihr Warenkorb ist leer
      </h3>
      <a href="https://laphet.de/collections/all" class="button element--max-content-width align--block-center space--mt--small" tabindex="-1">
        Weiter shoppen
      </a><p class="space--mt--medium">
          Hast du ein Konto?
          <a href="https://laphet.de/account/login" tabindex="-1">Logge dich ein</a>
          damit es beim Checkout schneller geht.
        </p></div>

    
    <form action="https://laphet.de/cart" method="post" id="cart" class="js-cart-form ">
      <div id="cart-items">
        <ul class="js-cart-items-list list--unstyled"><li class="cart-item cart-item--with-image js-cart-item" id="CartItem-1">
              <div class="js-loader-overlay loader-overlay display--hidden">
                
<style data-shopify="">
  .loader--cart-item {
    width: 80px;
    height: 80px;
  }</style>

<div class="loader loader--cart-item">
  <span class="loader__reduced-motion-message copy--small copy--italic">
    Wird geladen...
  </span>
  <div class="loader__inner-container">
    <div class="loader__circle-1"></div>
    <div class="loader__circle-2"></div>
  </div>
</div>

              </div>
              <div class="cart-item__container">
                <div class="cart-item__title-container cart-item__title-container--mobile">
                  <a href="https://laphet.de/products/laphet-tee-pesto" class="cart-item__title space--mb--xsmall link--no-underline type--hyphenate js-cart-item-name">
                    Teepesto
                  </a></div>
                
                  <a class="cart-item__image image-container image-container--product display--block fade-in-image" href="https://laphet.de/products/laphet-tee-pesto" tabindex="-1" aria-hidden="true">
                    <img src="./Laphet_files/Teepesto_Mild.png" alt="Teepesto" srcset="//laphet.de/cdn/shop/files/Teepesto_Mild.png?crop=center&amp;height=200&amp;v=1738400929&amp;width=200 200w" width="200" height="200" loading="lazy" class="object-fit__image--cover">
                  </a>
                

                <div class="cart-item__info">
                  <div class="cart-item__title-container cart-item__title-container--desktop">
                    <a href="https://laphet.de/products/laphet-tee-pesto" class="cart-item__title link--no-underline type--hyphenate js-cart-item-name">
                      Teepesto
                    </a></div><dl class="copy--small"><div>
                            <dt class="display--inline">Bundle:</dt>
                            <dd class="display--inline">Mix &amp; Match
</dd>
                          </div><div>
                            <dt class="display--inline">Box ID:</dt>
                            <dd class="display--inline">1
</dd>
                          </div></dl>
                    <p class="copy--small">
                      
                    </p><div class="copy--small">
                      <span class="display--hidden">Grundpreis</span>
                      €55,00
                      <span aria-hidden="true">/</span>
                      <span class="display--hidden">&nbsp;pro&nbsp;</span>kg
                    </div><div class="cart-item__error" id="Line-item-error-1" role="alert">
                    <span class="js-cart-item-error-text cart-item__error-text form-message"></span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class="form-message__icon space--mr--xsmall"><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm0-8h2v6h-2V7z"></path></svg>
</div><ul class="list--unstyled space--mt--xsmall" role="list" aria-label="Rabatt"><li class="cart-item__discount copy--xxsmall space--mb--xsmall">
                          Quantity discount % <span class="type--no-wrap">(−€0,00)</span>
                        </li></ul><div class="copy--small flex space--gap--xsmall">
                    <span>
                      1 x
                    </span><span>
                        €4,95
                      </span></div>

                  <div class="cart-item__price">
                    <div><span>
                          €4,95
                        </span></div>
                  </div>
                </div>

                <div class="cart-item__quantity">
                  <div class="flex flex--align-center">
                    <label class="display--hidden" for="Quantity-1">
                      Anzahl
                    </label>
                    <quantity-input class="quantity-selector">
                      <button class="quantity-selector__button no-js-hidden" name="minus" type="button">
                        <span class="display--hidden">
                          Verringere die Menge für 
                        </span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class=""><path d="M5 11h14v2H5z"></path></svg>
</button>
                      <input class="quantity-selector__input" type="number" name="updates[]" min="0" value="1" id="Quantity-1" aria-label="Anzahl von Teepesto" data-index="1">
                      <button class="quantity-selector__button no-js-hidden" name="plus" type="button">
                        <span class="display--hidden">
                          Erhöhe die Menge für 
                        </span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class=""><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"></path></svg>
</button>
                    </quantity-input>
                    <noscript>
                      <button type="submit" class="button button--secondary button--tag space--mt--small">
                        Aktualisieren
                      </button>
                    </noscript>
                    <cart-remove-button id="Remove-1" data-index="1" class="cart-item__remove">
                      <a class="button--icon" href="https://laphet.de/cart/change?id=49252148347215:5137387cc9bca41694333fd666035c52&amp;quantity=0" aria-label="Teepesto entfernen">
                        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="18" height="18" class=""><path d="M17,6h5v2h-2v13c0,.55-.45,1-1,1H5c-.55,0-1-.45-1-1V8H2v-2H7V3c0-.55,.45-1,1-1h8c.55,0,1,.45,1,1v3Zm1,2H6v12h12V8Zm-4.59,6l1.77,1.77-1.41,1.41-1.77-1.77-1.77,1.77-1.41-1.41,1.77-1.77-1.77-1.77,1.41-1.41,1.77,1.77,1.77-1.77,1.41,1.41-1.77,1.77ZM9,4v2h6v-2h-6Z"></path></svg>

                      </a>
                    </cart-remove-button>
                  </div>
                </div>
              </div>
            </li><li class="cart-item cart-item--with-image js-cart-item" id="CartItem-2">
              <div class="js-loader-overlay loader-overlay display--hidden">
                
<style data-shopify="">
  .loader--cart-item {
    width: 80px;
    height: 80px;
  }</style>

<div class="loader loader--cart-item">
  <span class="loader__reduced-motion-message copy--small copy--italic">
    Wird geladen...
  </span>
  <div class="loader__inner-container">
    <div class="loader__circle-1"></div>
    <div class="loader__circle-2"></div>
  </div>
</div>

              </div>
              <div class="cart-item__container">
                <div class="cart-item__title-container cart-item__title-container--mobile">
                  <a href="https://laphet.de/products/laphet-teepesto-chili" class="cart-item__title space--mb--xsmall link--no-underline type--hyphenate js-cart-item-name">
                    Teepesto mit Chili
                  </a></div>
                
                  <a class="cart-item__image image-container image-container--product display--block fade-in-image" href="https://laphet.de/products/laphet-teepesto-chili" tabindex="-1" aria-hidden="true">
                    <img src="./Laphet_files/Teepesto_Chili.png" alt="" srcset="//laphet.de/cdn/shop/files/Teepesto_Chili.png?crop=center&amp;height=200&amp;v=1738401332&amp;width=200 200w" width="200" height="200" loading="lazy" class="object-fit__image--cover">
                  </a>
                

                <div class="cart-item__info">
                  <div class="cart-item__title-container cart-item__title-container--desktop">
                    <a href="https://laphet.de/products/laphet-teepesto-chili" class="cart-item__title link--no-underline type--hyphenate js-cart-item-name">
                      Teepesto mit Chili
                    </a></div><dl class="copy--small"><div>
                            <dt class="display--inline">Bundle:</dt>
                            <dd class="display--inline">Mix &amp; Match
</dd>
                          </div><div>
                            <dt class="display--inline">Box ID:</dt>
                            <dd class="display--inline">1
</dd>
                          </div></dl>
                    <p class="copy--small">
                      
                    </p><div class="copy--small">
                      <span class="display--hidden">Grundpreis</span>
                      €55,00
                      <span aria-hidden="true">/</span>
                      <span class="display--hidden">&nbsp;pro&nbsp;</span>kg
                    </div><div class="cart-item__error" id="Line-item-error-2" role="alert">
                    <span class="js-cart-item-error-text cart-item__error-text form-message"></span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class="form-message__icon space--mr--xsmall"><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm0-8h2v6h-2V7z"></path></svg>
</div><ul class="list--unstyled space--mt--xsmall" role="list" aria-label="Rabatt"><li class="cart-item__discount copy--xxsmall space--mb--xsmall">
                          Quantity discount % <span class="type--no-wrap">(−€0,00)</span>
                        </li></ul><div class="copy--small flex space--gap--xsmall">
                    <span>
                      1 x
                    </span><span>
                        €4,95
                      </span></div>

                  <div class="cart-item__price">
                    <div><span>
                          €4,95
                        </span></div>
                  </div>
                </div>

                <div class="cart-item__quantity">
                  <div class="flex flex--align-center">
                    <label class="display--hidden" for="Quantity-2">
                      Anzahl
                    </label>
                    <quantity-input class="quantity-selector">
                      <button class="quantity-selector__button no-js-hidden" name="minus" type="button">
                        <span class="display--hidden">
                          Verringere die Menge für 
                        </span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class=""><path d="M5 11h14v2H5z"></path></svg>
</button>
                      <input class="quantity-selector__input" type="number" name="updates[]" min="0" value="1" id="Quantity-2" aria-label="Anzahl von Teepesto mit Chili" data-index="2">
                      <button class="quantity-selector__button no-js-hidden" name="plus" type="button">
                        <span class="display--hidden">
                          Erhöhe die Menge für 
                        </span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class=""><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"></path></svg>
</button>
                    </quantity-input>
                    <noscript>
                      <button type="submit" class="button button--secondary button--tag space--mt--small">
                        Aktualisieren
                      </button>
                    </noscript>
                    <cart-remove-button id="Remove-2" data-index="2" class="cart-item__remove">
                      <a class="button--icon" href="https://laphet.de/cart/change?id=49252272505167:6286aa339919c620abcfe957dcc0f510&amp;quantity=0" aria-label="Teepesto mit Chili entfernen">
                        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="18" height="18" class=""><path d="M17,6h5v2h-2v13c0,.55-.45,1-1,1H5c-.55,0-1-.45-1-1V8H2v-2H7V3c0-.55,.45-1,1-1h8c.55,0,1,.45,1,1v3Zm1,2H6v12h12V8Zm-4.59,6l1.77,1.77-1.41,1.41-1.77-1.77-1.77,1.77-1.41-1.41,1.77-1.77-1.77-1.77,1.41-1.41,1.77,1.77,1.77-1.77,1.41,1.41-1.77,1.77ZM9,4v2h6v-2h-6Z"></path></svg>

                      </a>
                    </cart-remove-button>
                  </div>
                </div>
              </div>
            </li></ul>
      </div>

      <p class="display--hidden" id="cart-live-region-text" aria-live="polite" role="status"></p>
      <p class="display--hidden" id="shopping-cart-item-status" aria-live="polite" aria-hidden="true" role="status">Wird geladen...</p>
    </form>
  </div>
</cart-items>
</div>
      <div class="drawer__sticky-footer space--drawer-sides space--pb--medium element--border-top--thick"><footer class="cart-footer" id="cart-footer">
  <div class="js-cart-footer-contents">
    <div id="cart-footer-contents" class="container--small align--block-center "><cart-note>
          <details class="accordion accordion--no-border" id="CartNote-sections--22932444086607__cart-drawer">
            <summary class="accordion__summary">
              <span>
                Bestellnotiz hinzufügen
              </span>
              <span class="icon--to-open motion-reduce"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="1.2rem" height="1.2rem" class=""><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"></path></svg>
</span>
            </summary>
            <div class="accordion__content rte" id="CartNoteTextArea-sections--22932444086607__cart-drawer">
              <label for="Cart-note" class="display--hidden">
                Bestellnotiz
              </label>
              <textarea class="space--mb--small" name="note" id="Cart-note" placeholder="Gib hier besondere Anweisungen ein"></textarea>
            </div>
          </details>
        </cart-note><div class="align--block-center ">
        <div class="align--text-center space--mb--small">
          <div></div>

          <div>
            <button type="submit" class="element--full-width js-cart-checkout-button" name="checkout" form="cart">
              Auschecken €9,90 EUR
            </button>
          </div><div class="space--mt--small cart-form__additional-checkout-buttons">
                <div class="dynamic-checkout__content" id="dynamic-checkout-cart" data-shopify="dynamic-checkout-cart"> <shopify-accelerated-checkout-cart wallet-configs="[{&quot;name&quot;:&quot;shop_pay&quot;,&quot;wallet_params&quot;:{&quot;shopId&quot;:65436647664,&quot;merchantName&quot;:&quot;Laphet&quot;}},{&quot;name&quot;:&quot;paypal&quot;,&quot;wallet_params&quot;:{&quot;shopId&quot;:65436647664,&quot;countryCode&quot;:&quot;DE&quot;,&quot;merchantName&quot;:&quot;Laphet&quot;,&quot;phoneRequired&quot;:true,&quot;companyRequired&quot;:false,&quot;shippingType&quot;:&quot;shipping&quot;,&quot;shopifyPaymentsEnabled&quot;:true,&quot;hasManagedSellingPlanState&quot;:null,&quot;requiresBillingAgreement&quot;:false,&quot;merchantId&quot;:&quot;RKYVQ66B8SKKY&quot;,&quot;sdkUrl&quot;:&quot;https://www.paypal.com/sdk/js?components=buttons\u0026commit=false\u0026currency=EUR\u0026locale=de_DE\u0026client-id=AfUEYT7nO4BwZQERn9Vym5TbHAG08ptiKa9gm8OARBYgoqiAJIjllRjeIMI4g294KAH1JdTnkzubt1fr\u0026merchant-id=RKYVQ66B8SKKY\u0026intent=authorize&quot;}},{&quot;name&quot;:&quot;google_pay&quot;,&quot;wallet_params&quot;:{&quot;sdkUrl&quot;:&quot;https://pay.google.com/gp/p/js/pay.js&quot;,&quot;paymentData&quot;:{&quot;apiVersion&quot;:2,&quot;apiVersionMinor&quot;:0,&quot;shippingAddressParameters&quot;:{&quot;allowedCountryCodes&quot;:[&quot;AC&quot;,&quot;AD&quot;,&quot;AE&quot;,&quot;AF&quot;,&quot;AG&quot;,&quot;AI&quot;,&quot;AL&quot;,&quot;AM&quot;,&quot;AO&quot;,&quot;AR&quot;,&quot;AT&quot;,&quot;AU&quot;,&quot;AW&quot;,&quot;AX&quot;,&quot;AZ&quot;,&quot;BA&quot;,&quot;BB&quot;,&quot;BD&quot;,&quot;BE&quot;,&quot;BF&quot;,&quot;BG&quot;,&quot;BH&quot;,&quot;BI&quot;,&quot;BJ&quot;,&quot;BL&quot;,&quot;BM&quot;,&quot;BN&quot;,&quot;BO&quot;,&quot;BQ&quot;,&quot;BR&quot;,&quot;BS&quot;,&quot;BT&quot;,&quot;BW&quot;,&quot;BY&quot;,&quot;BZ&quot;,&quot;CA&quot;,&quot;CC&quot;,&quot;CD&quot;,&quot;CF&quot;,&quot;CG&quot;,&quot;CH&quot;,&quot;CI&quot;,&quot;CK&quot;,&quot;CL&quot;,&quot;CM&quot;,&quot;CN&quot;,&quot;CO&quot;,&quot;CR&quot;,&quot;CV&quot;,&quot;CW&quot;,&quot;CX&quot;,&quot;CY&quot;,&quot;CZ&quot;,&quot;DE&quot;,&quot;DJ&quot;,&quot;DK&quot;,&quot;DM&quot;,&quot;DO&quot;,&quot;DZ&quot;,&quot;EC&quot;,&quot;EE&quot;,&quot;EG&quot;,&quot;EH&quot;,&quot;ER&quot;,&quot;ES&quot;,&quot;ET&quot;,&quot;FI&quot;,&quot;FJ&quot;,&quot;FK&quot;,&quot;FO&quot;,&quot;FR&quot;,&quot;GA&quot;,&quot;GB&quot;,&quot;GD&quot;,&quot;GE&quot;,&quot;GF&quot;,&quot;GG&quot;,&quot;GH&quot;,&quot;GI&quot;,&quot;GL&quot;,&quot;GM&quot;,&quot;GN&quot;,&quot;GP&quot;,&quot;GQ&quot;,&quot;GR&quot;,&quot;GS&quot;,&quot;GT&quot;,&quot;GW&quot;,&quot;GY&quot;,&quot;HK&quot;,&quot;HN&quot;,&quot;HR&quot;,&quot;HT&quot;,&quot;HU&quot;,&quot;ID&quot;,&quot;IE&quot;,&quot;IL&quot;,&quot;IM&quot;,&quot;IN&quot;,&quot;IO&quot;,&quot;IQ&quot;,&quot;IS&quot;,&quot;IT&quot;,&quot;JE&quot;,&quot;JM&quot;,&quot;JO&quot;,&quot;JP&quot;,&quot;KE&quot;,&quot;KG&quot;,&quot;KH&quot;,&quot;KI&quot;,&quot;KM&quot;,&quot;KN&quot;,&quot;KR&quot;,&quot;KW&quot;,&quot;KY&quot;,&quot;KZ&quot;,&quot;LA&quot;,&quot;LB&quot;,&quot;LC&quot;,&quot;LI&quot;,&quot;LK&quot;,&quot;LR&quot;,&quot;LS&quot;,&quot;LT&quot;,&quot;LU&quot;,&quot;LV&quot;,&quot;LY&quot;,&quot;MA&quot;,&quot;MC&quot;,&quot;MD&quot;,&quot;ME&quot;,&quot;MF&quot;,&quot;MG&quot;,&quot;MK&quot;,&quot;ML&quot;,&quot;MM&quot;,&quot;MN&quot;,&quot;MO&quot;,&quot;MQ&quot;,&quot;MR&quot;,&quot;MS&quot;,&quot;MT&quot;,&quot;MU&quot;,&quot;MV&quot;,&quot;MW&quot;,&quot;MX&quot;,&quot;MY&quot;,&quot;MZ&quot;,&quot;NA&quot;,&quot;NC&quot;,&quot;NE&quot;,&quot;NF&quot;,&quot;NG&quot;,&quot;NI&quot;,&quot;NL&quot;,&quot;NO&quot;,&quot;NP&quot;,&quot;NR&quot;,&quot;NU&quot;,&quot;NZ&quot;,&quot;OM&quot;,&quot;PA&quot;,&quot;PE&quot;,&quot;PF&quot;,&quot;PG&quot;,&quot;PH&quot;,&quot;PK&quot;,&quot;PL&quot;,&quot;PM&quot;,&quot;PN&quot;,&quot;PS&quot;,&quot;PT&quot;,&quot;PY&quot;,&quot;QA&quot;,&quot;RE&quot;,&quot;RO&quot;,&quot;RS&quot;,&quot;RU&quot;,&quot;RW&quot;,&quot;SA&quot;,&quot;SB&quot;,&quot;SC&quot;,&quot;SD&quot;,&quot;SE&quot;,&quot;SG&quot;,&quot;SH&quot;,&quot;SI&quot;,&quot;SJ&quot;,&quot;SK&quot;,&quot;SL&quot;,&quot;SM&quot;,&quot;SN&quot;,&quot;SO&quot;,&quot;SR&quot;,&quot;SS&quot;,&quot;ST&quot;,&quot;SV&quot;,&quot;SX&quot;,&quot;SZ&quot;,&quot;TA&quot;,&quot;TC&quot;,&quot;TD&quot;,&quot;TF&quot;,&quot;TG&quot;,&quot;TH&quot;,&quot;TJ&quot;,&quot;TK&quot;,&quot;TL&quot;,&quot;TM&quot;,&quot;TN&quot;,&quot;TO&quot;,&quot;TR&quot;,&quot;TT&quot;,&quot;TV&quot;,&quot;TW&quot;,&quot;TZ&quot;,&quot;UA&quot;,&quot;UG&quot;,&quot;UM&quot;,&quot;US&quot;,&quot;UY&quot;,&quot;UZ&quot;,&quot;VA&quot;,&quot;VC&quot;,&quot;VE&quot;,&quot;VG&quot;,&quot;VN&quot;,&quot;VU&quot;,&quot;WF&quot;,&quot;WS&quot;,&quot;XK&quot;,&quot;YE&quot;,&quot;YT&quot;,&quot;ZA&quot;,&quot;ZM&quot;,&quot;ZW&quot;],&quot;phoneNumberRequired&quot;:true},&quot;merchantInfo&quot;:{&quot;merchantName&quot;:&quot;Laphet&quot;,&quot;merchantId&quot;:&quot;16708973830884969730&quot;,&quot;merchantOrigin&quot;:&quot;laphet.de&quot;},&quot;allowedPaymentMethods&quot;:[{&quot;type&quot;:&quot;CARD&quot;,&quot;parameters&quot;:{&quot;allowedCardNetworks&quot;:[&quot;VISA&quot;,&quot;MASTERCARD&quot;,&quot;AMEX&quot;],&quot;allowedAuthMethods&quot;:[&quot;PAN_ONLY&quot;,&quot;CRYPTOGRAM_3DS&quot;],&quot;billingAddressRequired&quot;:true,&quot;billingAddressParameters&quot;:{&quot;format&quot;:&quot;FULL&quot;,&quot;phoneNumberRequired&quot;:true}},&quot;tokenizationSpecification&quot;:{&quot;type&quot;:&quot;PAYMENT_GATEWAY&quot;,&quot;parameters&quot;:{&quot;gateway&quot;:&quot;shopify&quot;,&quot;gatewayMerchantId&quot;:&quot;65436647664&quot;}}}],&quot;emailRequired&quot;:true},&quot;customerAccountEmail&quot;:null,&quot;environment&quot;:&quot;PRODUCTION&quot;,&quot;availablePresentmentCurrencies&quot;:[&quot;EUR&quot;],&quot;auth&quot;:[{&quot;jwt&quot;:&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9.eyJtZXJjaGFudElkIjoiMTY3MDg5NzM4MzA4ODQ5Njk3MzAiLCJtZXJjaGFudE9yaWdpbiI6ImxhcGhldC5kZSIsImlhdCI6MTczODkxODE0Nn0.Fsa-g-YudHODxhk62GjlLkz-NfMG8aG6GKEJriCcc05xE4J7cO7w8sWsgnkkvBVxIhO73mlGoLC9Dvk766_0gQ&quot;,&quot;expiresAt&quot;:1738961346},{&quot;jwt&quot;:&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9.eyJtZXJjaGFudElkIjoiMTY3MDg5NzM4MzA4ODQ5Njk3MzAiLCJtZXJjaGFudE9yaWdpbiI6ImxhcGhldC5kZSIsImlhdCI6MTczODk2MTM0Nn0.OGs87ZMt5SVasvhg6ldXPDhyqmhuL6IdeTcnKThhG0IQhdsvWoZpWNd7HGczyExbkFdnxAHC1Sd-PtHcZVkPzQ&quot;,&quot;expiresAt&quot;:1739004546}]}}]" access-token="c61621e8c2860bdac60705f05e429959" buyer-country="DE" buyer-locale="de" buyer-currency="EUR" shop-id="65436647664" cart-id="Z2NwLWV1cm9wZS13ZXN0MzowMUo0UkFYRE1ESFdDQzc5REpTRVdRWTRBSw" requires-shipping=""><template shadowrootmode="closed"><style>*{box-sizing:border-box}.wallet-button-fade-in{animation:animation-fade-in .3s cubic-bezier(.1,.79,1,1)}@keyframes animation-fade-in{0%{opacity:0}to{opacity:1}}button[aria-disabled=true]{opacity:.5;cursor:not-allowed}
.wallet-cart-button__skeleton{animation:acceleratedCheckoutLoadingSkeleton var(--shopify-accelerated-checkout-skeleton-animation-duration, 4s) var(--shopify-accelerated-checkout-skeleton-animation-timing-function, ease) infinite;animation-delay:-.168s;background-color:var(--shopify-accelerated-checkout-skeleton-background-color, #dedede)}.wallet-button-wrapper{container-type:inline-size;container-name:wrapper;width:100%}.wallet-cart-grid{margin:0 -5px -5px;padding:0;display:flex;justify-content:var(--shopify-accelerated-checkout-inline-alignment, start)}.wallet-cart-button-container{position:relative;margin:0 5px 5px}.wallet-cart-button-container,.wallet-cart-button{width:150px;height:clamp(25px,var(--shopify-accelerated-checkout-button-inline-size, 42px),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);list-style-type:none!important;text-align:center;flex-shrink:0;flex-grow:0}.wallet-cart-grid.wallet-cart-grid--vertical,.additional-checkout-buttons--vertical .wallet-cart-grid{justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button-container,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button-container:first-child,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}@container wrapper (width >= 150px) and (width <= 500px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 310px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 470px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 630px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 790px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(6)){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(6)) wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(6)) .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(6)) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}@media screen and (max-width: 750px){.wallet-cart-grid{justify-content:flex-start;flex-direction:column;margin:0;max-width:none}.wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0;max-width:none}.wallet-cart-button-container:first-child{margin:0}.wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@supports (not (container-type: inline-size)) or (not (selector(:has(*)))){.wallet-cart-grid{justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-button-container:first-child{margin:0}.wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}.screen-reader-text{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}</style><style>.wallet-cart-button__skeleton{animation:acceleratedCheckoutLoadingSkeleton var(--shopify-accelerated-checkout-skeleton-animation-duration, 4s) var(--shopify-accelerated-checkout-skeleton-animation-timing-function, ease) infinite;animation-delay:-.168s;background-color:var(--shopify-accelerated-checkout-skeleton-background-color, #dedede)}.wallet-button-wrapper{container-type:inline-size;container-name:wrapper;width:100%}.wallet-cart-grid{margin:0 -5px -5px;padding:0;display:flex;justify-content:var(--shopify-accelerated-checkout-inline-alignment, start)}.wallet-cart-button-container{position:relative;margin:0 5px 5px}.wallet-cart-button-container,.wallet-cart-button{width:150px;height:clamp(25px,var(--shopify-accelerated-checkout-button-inline-size, 42px),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);list-style-type:none!important;text-align:center;flex-shrink:0;flex-grow:0}.wallet-cart-grid.wallet-cart-grid--vertical,.additional-checkout-buttons--vertical .wallet-cart-grid{justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button-container,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button-container:first-child,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}@container wrapper (width >= 150px) and (width <= 500px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 310px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 470px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 630px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 790px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(6)){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(6)) wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(6)) .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(6)) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}@media screen and (max-width: 750px){.wallet-cart-grid{justify-content:flex-start;flex-direction:column;margin:0;max-width:none}.wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0;max-width:none}.wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@supports (not (container-type: inline-size)) or (not (selector(:has(*)))){.wallet-cart-grid{justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:8px 0 0}.wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}.screen-reader-text{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}</style><div class="wallet-button-fade-in wallet-button-wrapper"><h2 class="screen-reader-text">Express-Checkout</h2><div class="wallet-cart-grid accelerated-checkout-button-container"><div class="wallet-cart-button-container" data-testid="grid-cell"><div class="wallet-cart-button"><slot name="button-ShopPay"></slot></div></div><div class="wallet-cart-button-container" data-testid="grid-cell"><div class="wallet-cart-button"><slot name="button-PayPal"></slot></div></div><div class="wallet-cart-button-container" data-testid="grid-cell"><div class="wallet-cart-button"><slot name="button-GooglePay"></slot></div></div></div></div></template><shop-pay-wallet-button access-token="c61621e8c2860bdac60705f05e429959" buyer-country="DE" buyer-currency="EUR" wallet-params="{&quot;shopId&quot;:65436647664,&quot;merchantName&quot;:&quot;Laphet&quot;}" page-type="cart_page" slot="button-ShopPay" requires-shipping=""><template shadowrootmode="closed"><style>.accelerated-checkout-button{height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);min-height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 0px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow);min-width:150px}:host([page-type="cart_page"]) .accelerated-checkout-button{height:100%;width:100%;border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow)}@media (forced-colors: active){.accelerated-checkout-button{border:1px solid transparent!important}:host([page-type="cart_page"]) .accelerated-checkout-button{border:1px solid transparent!important}}.accelerated-checkout-button{--gravity-button-height: clamp(25px, var(--shopify-accelerated-checkout-button-block-size, 44px), 55px);--gravity-button-min-height: clamp(25px, var(--shopify-accelerated-checkout-button-block-size, 44px), 55px);--gravity-button-border-radius: var(--shopify-accelerated-checkout-button-border-radius, 0px);--gravity-button-padding: 0px 10px;--gravity-button-width: 100%}:host([page-type="cart_page"]) .accelerated-checkout-button{--gravity-button-height: 100%;--gravity-button-min-height: 100%;--gravity-button-border-radius: var(--shopify-accelerated-checkout-button-border-radius, 4px);--gravity-button-width: 100%}
.button-content{display:flex;align-items:center;justify-content:center;width:100%;height:100%;gap:3px;white-space:nowrap;container-type:inline-size;container-name:bc}.ShopPromise>.separator{margin:0 8px}@container bc (width <= 338px){.ShopPromise{display:none!important}}gravity-button{display:block}</style><gravity-button class="accelerated-checkout-button"><template shadowrootmode="open">
<style>
  * {
    box-sizing: border-box;
    border-width: 0;
    border-style: solid;
    border-color: currentColor;
    --focused-box-shadow: 0 0 0 3px #DBD1FF, 0 0 #0000;
  }

  button {
    text-transform: none;
    -webkit-appearance: button;
    background-color: transparent;
    background-image: none;
    font-family: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    font-size: 100%;
    font-weight: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    color: inherit;
    margin: 0;
    padding: 0;
    cursor: pointer;
  }

  button:disabled {
    cursor: default;
    opacity: 0.5;
  }

  .gravity-button {
    position: relative;
    display: flex;
    min-height: var(--gravity-button-min-height);
    height: var(--gravity-button-height);
    width: var(--gravity-button-width, 260px);
    justify-content: center;
    color: #FFFFFF;
    align-items: center;
    overflow: visible;
    padding: var(--gravity-button-padding, 16px 10px);
    border-radius: var(--gravity-button-border-radius);
    border: none;
    background-color: #5433EB;
    transition: all;
  }

  .gravity-button:not([disabled]):focus-visible {
    box-shadow: var(--focused-base-box-shadow, var(--focused-box-shadow));
    outline: var(--focused-base-outline, 2px solid transparent);
    outline-offset: var(--focused-base-outline-offset, 2px);
  }

  .gravity-button:not([disabled]):hover {
    background-color: #4524DB;
  }
</style>

<button class="gravity-button">
  <slot id="button-content"></slot>
</button>
</template><div class="button-content"><svg xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="shop-pay-logo" viewBox="0 -2 341 81" height="20px" width="85px">
  <title id="shop-pay-logo">Shop Pay</title>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M227.297 0C220.448 0 214.896 5.47237 214.896 12.2229V67.8125C214.896 74.563 220.448 80.0354 227.297 80.0354H328.357C335.206 80.0354 340.758 74.563 340.758 67.8125V12.2229C340.758 5.47237 335.206 0 328.357 0H227.297ZM244.999 55.8917V41.8012H253.993C262.21 41.8012 266.579 37.2604 266.579 30.379C266.579 23.4976 262.21 19.3782 253.993 19.3782H239.205V55.8917H244.999ZM244.999 24.8084H252.663C257.982 24.8084 260.595 26.9617 260.595 30.5663C260.595 34.1708 258.077 36.3242 252.9 36.3242H244.999V24.8084ZM276.795 56.6407C281.212 56.6407 284.109 54.7214 285.439 51.4445C285.819 55.0959 288.052 56.9684 292.896 55.7044L292.944 51.819C290.996 52.0063 290.616 51.3041 290.616 49.2912V39.7415C290.616 34.124 286.864 30.8003 279.93 30.8003C273.09 30.8003 269.148 34.1708 269.148 39.8819H274.468C274.468 37.1668 276.415 35.5284 279.835 35.5284C283.444 35.5284 285.107 37.0732 285.059 39.7415V40.9586L278.932 41.614C272.045 42.3629 268.246 44.9376 268.246 49.4316C268.246 53.1298 270.905 56.6407 276.795 56.6407ZM277.982 52.4276C274.99 52.4276 273.803 50.836 273.803 49.2443C273.803 47.091 276.273 46.1079 281.117 45.5462L284.917 45.1249C284.679 49.2443 281.877 52.4276 277.982 52.4276ZM310.537 57.7174C308.115 63.5221 304.22 65.2541 298.141 65.2541H295.528V60.4793H298.331C301.655 60.4793 303.27 59.4494 305.028 56.5002L294.246 31.5493H300.23L307.925 49.7593L314.764 31.5493H320.606L310.537 57.7174Z" fill="white"></path>
  <path d="M29.5136 35.1798C21.5797 33.4835 18.0451 32.8197 18.0451 29.8064C18.0451 26.9722 20.4371 25.5604 25.221 25.5604C29.4282 25.5604 32.5036 27.3726 34.7674 30.9232C34.9382 31.1972 35.2906 31.292 35.5789 31.1445L44.506 26.6983C44.8263 26.5402 44.9438 26.1399 44.7623 25.8343C41.0569 19.5022 34.2121 16.0358 25.1996 16.0358C13.3574 16.0358 6 21.7885 6 30.9338C6 40.648 14.9591 43.1029 22.9038 44.7992C30.8484 46.4955 34.3936 47.1592 34.3936 50.1725C34.3936 53.1858 31.8095 54.6082 26.6518 54.6082C21.8893 54.6082 18.3548 52.4589 16.2191 48.2866C16.059 47.981 15.6852 47.8546 15.3756 48.0127L6.46985 52.364C6.16017 52.5221 6.03203 52.8908 6.19221 53.2069C9.72673 60.2134 16.9773 64.1538 26.6625 64.1538C38.996 64.1538 46.4494 58.496 46.4494 49.0663C46.4494 39.6365 37.4476 36.8972 29.5136 35.2009V35.1798Z" fill="white"></path>
  <path d="M77.3525 16.0358C72.291 16.0358 67.8168 17.8059 64.6026 20.9561C64.3997 21.1458 64.0687 21.0088 64.0687 20.7349V0.621625C64.0687 0.273937 63.791 0 63.4387 0H52.2692C51.9168 0 51.6391 0.273937 51.6391 0.621625V63.0476C51.6391 63.3952 51.9168 63.6692 52.2692 63.6692H63.4387C63.791 63.6692 64.0687 63.3952 64.0687 63.0476V35.6644C64.0687 30.3754 68.1798 26.319 73.7219 26.319C79.2639 26.319 83.279 30.2911 83.279 35.6644V63.0476C83.279 63.3952 83.5566 63.6692 83.909 63.6692H95.0785C95.4309 63.6692 95.7085 63.3952 95.7085 63.0476V35.6644C95.7085 24.1591 88.0628 16.0464 77.3525 16.0464V16.0358Z" fill="white"></path>
  <path d="M118.389 14.2552C112.324 14.2552 106.622 16.0779 102.542 18.7224C102.265 18.9016 102.169 19.2703 102.34 19.5548L107.262 27.8466C107.444 28.1416 107.828 28.247 108.127 28.0679C111.224 26.2241 114.769 25.2653 118.389 25.2864C128.138 25.2864 135.303 32.0716 135.303 41.0377C135.303 48.6763 129.569 54.3342 122.297 54.3342C116.371 54.3342 112.26 50.9311 112.26 46.1266C112.26 43.3767 113.445 41.122 116.531 39.5311C116.851 39.3625 116.969 38.9727 116.777 38.6671L112.132 30.9126C111.982 30.6598 111.662 30.5439 111.373 30.6492C105.148 32.925 100.78 38.4037 100.78 45.7579C100.78 56.8839 109.761 65.1863 122.287 65.1863C136.916 65.1863 147.434 55.1876 147.434 40.8481C147.434 25.476 135.197 14.2446 118.368 14.2446L118.389 14.2552Z" fill="white"></path>
  <path d="M180.098 15.9515C174.449 15.9515 169.409 18.006 165.725 21.6304C165.522 21.8306 165.191 21.6831 165.191 21.4092V17.0473C165.191 16.6996 164.914 16.4256 164.561 16.4256H153.68C153.328 16.4256 153.05 16.6996 153.05 17.0473V79.3784C153.05 79.7261 153.328 80 153.68 80H164.849C165.202 80 165.48 79.7261 165.48 79.3784V58.9385C165.48 58.6645 165.811 58.5276 166.013 58.7067C169.687 62.0782 174.545 64.0485 180.109 64.0485C193.211 64.0485 203.43 53.5862 203.43 39.9947C203.43 26.4032 193.2 15.941 180.109 15.941L180.098 15.9515ZM177.995 53.4914C170.541 53.4914 164.892 47.6439 164.892 39.9104C164.892 32.177 170.53 26.3295 177.995 26.3295C185.459 26.3295 191.086 32.0822 191.086 39.9104C191.086 47.7387 185.533 53.4914 177.984 53.4914H177.995Z" fill="white"></path>
</svg></div></gravity-button></template>&nbsp;</shop-pay-wallet-button><shopify-paypal-button access-token="c61621e8c2860bdac60705f05e429959" buyer-country="DE" buyer-currency="EUR" wallet-params="{&quot;shopId&quot;:65436647664,&quot;countryCode&quot;:&quot;DE&quot;,&quot;merchantName&quot;:&quot;Laphet&quot;,&quot;phoneRequired&quot;:true,&quot;companyRequired&quot;:false,&quot;shippingType&quot;:&quot;shipping&quot;,&quot;shopifyPaymentsEnabled&quot;:true,&quot;hasManagedSellingPlanState&quot;:null,&quot;requiresBillingAgreement&quot;:false,&quot;merchantId&quot;:&quot;RKYVQ66B8SKKY&quot;,&quot;sdkUrl&quot;:&quot;https://www.paypal.com/sdk/js?components=buttons&amp;commit=false&amp;currency=EUR&amp;locale=de_DE&amp;client-id=AfUEYT7nO4BwZQERn9Vym5TbHAG08ptiKa9gm8OARBYgoqiAJIjllRjeIMI4g294KAH1JdTnkzubt1fr&amp;merchant-id=RKYVQ66B8SKKY&amp;intent=authorize&quot;}" page-type="cart_page" slot="button-PayPal" requires-shipping=""><template shadowrootmode="closed"><style>.accelerated-checkout-button{height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);min-height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 0px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow);min-width:150px}:host([page-type="cart_page"]) .accelerated-checkout-button{height:100%;width:100%;border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow)}@media (forced-colors: active){.accelerated-checkout-button{border:1px solid transparent!important}:host([page-type="cart_page"]) .accelerated-checkout-button{border:1px solid transparent!important}}
::slotted(div){height:100%}</style><div class="accelerated-checkout-button"><slot name="shadow-slot-uid_0efcc51099_mdg6ndk6mdk"></slot></div></template><style>shopify-paypal-button[disabled]{opacity:.5;cursor:not-allowed}shopify-paypal-button div.paypal-buttons>iframe{z-index:auto!important;border-radius:0!important;box-shadow:none}</style><div slot="shadow-slot-uid_0efcc51099_mdg6ndk6mdk"><div id="zoid-paypal-buttons-uid_46ec11614d_mdg6ndk6mdk" class="paypal-buttons paypal-buttons-context-iframe paypal-buttons-label-paypal paypal-buttons-layout-horizontal" data-paypal-smart-button-version="5.0.468" style="height: 0px; transition: 0.2s ease-in-out;"><style nonce="">
                    #zoid-paypal-buttons-uid_46ec11614d_mdg6ndk6mdk {
                        position: relative;
                        display: inline-block;
                        width: 100%;
                        min-height: 25px;
                        min-width: 150px;
                        font-size: 0;
                    }

                    #zoid-paypal-buttons-uid_46ec11614d_mdg6ndk6mdk > iframe {
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                    }

                    #zoid-paypal-buttons-uid_46ec11614d_mdg6ndk6mdk > iframe.component-frame {
                        z-index: 100;
                    }

                    #zoid-paypal-buttons-uid_46ec11614d_mdg6ndk6mdk > iframe.prerender-frame {
                        transition: opacity .2s linear;
                        z-index: 200;
                    }

                    #zoid-paypal-buttons-uid_46ec11614d_mdg6ndk6mdk > iframe.visible {
                        opacity: 1;
                    }

                    #zoid-paypal-buttons-uid_46ec11614d_mdg6ndk6mdk > iframe.invisible {
                        opacity: 0;
                        pointer-events: none;
                    }

                    #zoid-paypal-buttons-uid_46ec11614d_mdg6ndk6mdk > .smart-menu {
                        position: absolute;
                        z-index: 300;
                        top: 0;
                        left: 0;
                        width: 100%;
                    }
                </style><iframe allowtransparency="true" name="__zoid__paypal_buttons__eyJzZW5kZXIiOnsiZG9tYWluIjoiaHR0cHM6Ly9sYXBoZXQuZGUifSwibWV0YURhdGEiOnsid2luZG93UmVmIjp7InR5cGUiOiJwYXJlbnQiLCJkaXN0YW5jZSI6MH19LCJyZWZlcmVuY2UiOnsidHlwZSI6InJhdyIsInZhbCI6IntcInVpZFwiOlwiem9pZC1wYXlwYWwtYnV0dG9ucy11aWRfNDZlYzExNjE0ZF9tZGc2bmRrNm1ka1wiLFwiY29udGV4dFwiOlwiaWZyYW1lXCIsXCJ0YWdcIjpcInBheXBhbC1idXR0b25zXCIsXCJjaGlsZERvbWFpbk1hdGNoXCI6e1wiX190eXBlX19cIjpcInJlZ2V4XCIsXCJfX3ZhbF9fXCI6XCJcXFxcLnBheXBhbFxcXFwuKGNvbXxjbikoOlxcXFxkKyk/JFwifSxcInZlcnNpb25cIjpcIjEwXzRfMFwiLFwicHJvcHNcIjp7XCJmdW5kaW5nU291cmNlXCI6XCJwYXlwYWxcIixcInN0eWxlXCI6e1wibGFiZWxcIjpcInBheXBhbFwiLFwibGF5b3V0XCI6XCJob3Jpem9udGFsXCIsXCJjb2xvclwiOlwiZ29sZFwiLFwic2hhcGVcIjpcInNoYXJwXCIsXCJ0YWdsaW5lXCI6ZmFsc2UsXCJoZWlnaHRcIjo0NCxcInBlcmlvZFwiOntcIl9fdHlwZV9fXCI6XCJ1bmRlZmluZWRcIn0sXCJtZW51UGxhY2VtZW50XCI6XCJiZWxvd1wiLFwiZGlzYWJsZU1heFdpZHRoXCI6dHJ1ZSxcImRpc2FibGVNYXhIZWlnaHRcIjp7XCJfX3R5cGVfX1wiOlwidW5kZWZpbmVkXCJ9LFwiYm9yZGVyUmFkaXVzXCI6NH0sXCJjcmVhdGVPcmRlclwiOntcIl9fdHlwZV9fXCI6XCJjcm9zc19kb21haW5fZnVuY3Rpb25cIixcIl9fdmFsX19cIjp7XCJpZFwiOlwidWlkXzRiMmU1MDY1MDlfbWRnNm5kazZtZGtcIixcIm5hbWVcIjpcImFcIn19LFwiY3JlYXRlQmlsbGluZ0FncmVlbWVudFwiOntcIl9fdHlwZV9fXCI6XCJ1bmRlZmluZWRcIn0sXCJvbkFwcHJvdmVcIjp7XCJfX3R5cGVfX1wiOlwiY3Jvc3NfZG9tYWluX2Z1bmN0aW9uXCIsXCJfX3ZhbF9fXCI6e1wiaWRcIjpcInVpZF84OWFhOGQ0MDk2X21kZzZuZGs2bWRrXCIsXCJuYW1lXCI6XCJvbkFwcHJvdmVcIn19LFwib25DYW5jZWxcIjp7XCJfX3R5cGVfX1wiOlwiY3Jvc3NfZG9tYWluX2Z1bmN0aW9uXCIsXCJfX3ZhbF9fXCI6e1wiaWRcIjpcInVpZF82YTRiZGY0OTk1X21kZzZuZGs2bWRrXCIsXCJuYW1lXCI6XCJvbkNhbmNlbFwifX0sXCJvbkNsaWNrXCI6e1wiX190eXBlX19cIjpcImNyb3NzX2RvbWFpbl9mdW5jdGlvblwiLFwiX192YWxfX1wiOntcImlkXCI6XCJ1aWRfYThmYTdlMDM1OV9tZGc2bmRrNm1ka1wiLFwibmFtZVwiOlwiYm91bmQgb25DbGlja1wifX0sXCJjc3BOb25jZVwiOntcIl9fdHlwZV9fXCI6XCJ1bmRlZmluZWRcIn0sXCJhcHBTd2l0Y2hXaGVuQXZhaWxhYmxlXCI6e1wiX190eXBlX19cIjpcInVuZGVmaW5lZFwifSxcInJlZGlyZWN0XCI6e1wiX190eXBlX19cIjpcImNyb3NzX2RvbWFpbl9mdW5jdGlvblwiLFwiX192YWxfX1wiOntcImlkXCI6XCJ1aWRfMTJiMjFkM2M2OV9tZGc2bmRrNm1ka1wiLFwibmFtZVwiOlwicmVkaXJlY3RcIn19LFwibGlzdGVuRm9ySGFzaENoYW5nZXNcIjp7XCJfX3R5cGVfX1wiOlwiY3Jvc3NfZG9tYWluX2Z1bmN0aW9uXCIsXCJfX3ZhbF9fXCI6e1wiaWRcIjpcInVpZF85MDY0MWNlYTRkX21kZzZuZGs2bWRrXCIsXCJuYW1lXCI6XCJsaXN0ZW5Gb3JIYXNoQ2hhbmdlc1wifX0sXCJyZW1vdmVMaXN0ZW5lckZvckhhc2hDaGFuZ2VzXCI6e1wiX190eXBlX19cIjpcImNyb3NzX2RvbWFpbl9mdW5jdGlvblwiLFwiX192YWxfX1wiOntcImlkXCI6XCJ1aWRfZmM5YzFlY2RhOV9tZGc2bmRrNm1ka1wiLFwibmFtZVwiOlwicmVtb3ZlTGlzdGVuZXJGb3JIYXNoQ2hhbmdlc1wifX0sXCJsaXN0ZW5Gb3JWaXNpYmlsaXR5Q2hhbmdlXCI6e1wiX190eXBlX19cIjpcImNyb3NzX2RvbWFpbl9mdW5jdGlvblwiLFwiX192YWxfX1wiOntcImlkXCI6XCJ1aWRfOTczZDlkZDA4MF9tZGc2bmRrNm1ka1wiLFwibmFtZVwiOlwibGlzdGVuRm9yVmlzaWJpbGl0eUNoYW5nZVwifX0sXCJyZW1vdmVMaXN0ZW5lckZvclZpc2liaWxpdHlDaGFuZ2VzXCI6e1wiX190eXBlX19cIjpcImNyb3NzX2RvbWFpbl9mdW5jdGlvblwiLFwiX192YWxfX1wiOntcImlkXCI6XCJ1aWRfMjdhY2ExODg2NV9tZGc2bmRrNm1ka1wiLFwibmFtZVwiOlwicmVtb3ZlTGlzdGVuZXJGb3JWaXNpYmlsaXR5Q2hhbmdlc1wifX0sXCJhbGxvd0JpbGxpbmdQYXltZW50c1wiOnRydWUsXCJhbW91bnRcIjp7XCJfX3R5cGVfX1wiOlwidW5kZWZpbmVkXCJ9LFwiYXBpU3RhZ2VIb3N0XCI6e1wiX190eXBlX19cIjpcInVuZGVmaW5lZFwifSxcImFwcGxlUGF5XCI6e1wiX190eXBlX19cIjpcInVuZGVmaW5lZFwifSxcImFwcGxlUGF5U3VwcG9ydFwiOmZhbHNlLFwiYnJhbmRlZFwiOntcIl9fdHlwZV9fXCI6XCJ1bmRlZmluZWRcIn0sXCJidXR0b25Mb2NhdGlvblwiOlwibGFwaGV0LmRlXCIsXCJidXR0b25TZXNzaW9uSURcIjpcInVpZF8xNmMwN2VlNDdhX21kZzZuZGs2bWRrXCIsXCJidXR0b25TaXplXCI6e1wiX190eXBlX19cIjpcInVuZGVmaW5lZFwifSxcImJ1eWVyQ291bnRyeVwiOntcIl9fdHlwZV9fXCI6XCJ1bmRlZmluZWRcIn0sXCJjbGllbnRBY2Nlc3NUb2tlblwiOntcIl9fdHlwZV9fXCI6XCJ1bmRlZmluZWRcIn0sXCJjdXN0b21lcklkXCI6XCJcIixcImNsaWVudElEXCI6XCJBZlVFWVQ3bk80QndaUUVSbjlWeW01VGJIQUcwOHB0aUthOWdtOE9BUkJZZ29xaUFKSWpsbFJqZUlNSTRnMjk0S0FIMUpkVG5renVidDFmclwiLFwiY2xpZW50TWV0YWRhdGFJRFwiOlwidWlkXzliMjJhMGMyZmJfbWRnNm5kazZtZGtcIixcImNvbW1pdFwiOmZhbHNlLFwiY29tcG9uZW50c1wiOltcImJ1dHRvbnNcIl0sXCJjcmVhdGVTdWJzY3JpcHRpb25cIjp7XCJfX3R5cGVfX1wiOlwidW5kZWZpbmVkXCJ9LFwiY3JlYXRlVmF1bHRTZXR1cFRva2VuXCI6e1wiX190eXBlX19cIjpcInVuZGVmaW5lZFwifSxcImNzcFwiOntcIm5vbmNlXCI6XCJcIn0sXCJjdXJyZW5jeVwiOlwiRVVSXCIsXCJkZWJ1Z1wiOmZhbHNlLFwiZGlzYWJsZUNhcmRcIjpbXSxcImRpc2FibGVGdW5kaW5nXCI6W10sXCJkaXNhYmxlU2V0Q29va2llXCI6dHJ1ZSxcImRpc3BsYXlPbmx5XCI6W10sXCJlbmFibGVGdW5kaW5nXCI6W10sXCJlbmFibGVUaHJlZURvbWFpblNlY3VyZVwiOmZhbHNlLFwiZW5hYmxlVmF1bHRcIjp7XCJfX3R5cGVfX1wiOlwidW5kZWZpbmVkXCJ9LFwiZW52XCI6XCJwcm9kdWN0aW9uXCIsXCJleHBlcmltZW50XCI6e1wiZW5hYmxlVmVubW9cIjpmYWxzZSxcInZlbm1vVmF1bHRXaXRob3V0UHVyY2hhc2VcIjpmYWxzZSxcInZlbm1vV2ViRW5hYmxlZFwiOmZhbHNlLFwidmVubW9FbmFibGVXZWJPbk5vbk5hdGl2ZUJyb3dzZXJcIjpmYWxzZX0sXCJleHBlcmltZW50YXRpb25cIjp7fSxcImZsb3dcIjpcInB1cmNoYXNlXCIsXCJmdW5kaW5nRWxpZ2liaWxpdHlcIjp7XCJwYXlwYWxcIjp7XCJlbGlnaWJsZVwiOnRydWUsXCJ2YXVsdGFibGVcIjpmYWxzZX0sXCJwYXlsYXRlclwiOntcImVsaWdpYmxlXCI6ZmFsc2UsXCJ2YXVsdGFibGVcIjpmYWxzZSxcInByb2R1Y3RzXCI6e1wicGF5SW4zXCI6e1wiZWxpZ2libGVcIjpmYWxzZSxcInZhcmlhbnRcIjpudWxsfSxcInBheUluNFwiOntcImVsaWdpYmxlXCI6ZmFsc2UsXCJ2YXJpYW50XCI6bnVsbH0sXCJwYXlsYXRlclwiOntcImVsaWdpYmxlXCI6ZmFsc2UsXCJ2YXJpYW50XCI6bnVsbH19fSxcImNhcmRcIjp7XCJlbGlnaWJsZVwiOnRydWUsXCJicmFuZGVkXCI6dHJ1ZSxcImluc3RhbGxtZW50c1wiOmZhbHNlLFwidmVuZG9yc1wiOntcInZpc2FcIjp7XCJlbGlnaWJsZVwiOnRydWUsXCJ2YXVsdGFibGVcIjp0cnVlfSxcIm1hc3RlcmNhcmRcIjp7XCJlbGlnaWJsZVwiOnRydWUsXCJ2YXVsdGFibGVcIjp0cnVlfSxcImFtZXhcIjp7XCJlbGlnaWJsZVwiOnRydWUsXCJ2YXVsdGFibGVcIjp0cnVlfSxcImRpc2NvdmVyXCI6e1wiZWxpZ2libGVcIjpmYWxzZSxcInZhdWx0YWJsZVwiOnRydWV9LFwiaGlwZXJcIjp7XCJlbGlnaWJsZVwiOmZhbHNlLFwidmF1bHRhYmxlXCI6ZmFsc2V9LFwiZWxvXCI6e1wiZWxpZ2libGVcIjpmYWxzZSxcInZhdWx0YWJsZVwiOnRydWV9LFwiamNiXCI6e1wiZWxpZ2libGVcIjpmYWxzZSxcInZhdWx0YWJsZVwiOnRydWV9LFwibWFlc3Ryb1wiOntcImVsaWdpYmxlXCI6dHJ1ZSxcInZhdWx0YWJsZVwiOnRydWV9LFwiZGluZXJzXCI6e1wiZWxpZ2libGVcIjp0cnVlLFwidmF1bHRhYmxlXCI6dHJ1ZX0sXCJjdXBcIjp7XCJlbGlnaWJsZVwiOmZhbHNlLFwidmF1bHRhYmxlXCI6dHJ1ZX19LFwiZ3Vlc3RFbmFibGVkXCI6dHJ1ZX0sXCJ2ZW5tb1wiOntcImVsaWdpYmxlXCI6ZmFsc2UsXCJ2YXVsdGFibGVcIjpmYWxzZX0sXCJpdGF1XCI6e1wiZWxpZ2libGVcIjpmYWxzZX0sXCJjcmVkaXRcIjp7XCJlbGlnaWJsZVwiOmZhbHNlfSxcImFwcGxlcGF5XCI6e1wiZWxpZ2libGVcIjpmYWxzZX0sXCJzZXBhXCI6e1wiZWxpZ2libGVcIjpmYWxzZX0sXCJpZGVhbFwiOntcImVsaWdpYmxlXCI6ZmFsc2V9LFwiYmFuY29udGFjdFwiOntcImVsaWdpYmxlXCI6ZmFsc2V9LFwiZ2lyb3BheVwiOntcImVsaWdpYmxlXCI6ZmFsc2V9LFwiZXBzXCI6e1wiZWxpZ2libGVcIjpmYWxzZX0sXCJzb2ZvcnRcIjp7XCJlbGlnaWJsZVwiOmZhbHNlfSxcIm15YmFua1wiOntcImVsaWdpYmxlXCI6ZmFsc2V9LFwicDI0XCI6e1wiZWxpZ2libGVcIjpmYWxzZX0sXCJ3ZWNoYXRwYXlcIjp7XCJlbGlnaWJsZVwiOmZhbHNlfSxcInBheXVcIjp7XCJlbGlnaWJsZVwiOmZhbHNlfSxcImJsaWtcIjp7XCJlbGlnaWJsZVwiOmZhbHNlfSxcInRydXN0bHlcIjp7XCJlbGlnaWJsZVwiOmZhbHNlfSxcIm94eG9cIjp7XCJlbGlnaWJsZVwiOmZhbHNlfSxcImJvbGV0b1wiOntcImVsaWdpYmxlXCI6ZmFsc2V9LFwiYm9sZXRvYmFuY2FyaW9cIjp7XCJlbGlnaWJsZVwiOmZhbHNlfSxcIm1lcmNhZG9wYWdvXCI6e1wiZWxpZ2libGVcIjpmYWxzZX0sXCJtdWx0aWJhbmNvXCI6e1wiZWxpZ2libGVcIjpmYWxzZX0sXCJzYXRpc3BheVwiOntcImVsaWdpYmxlXCI6ZmFsc2V9LFwicGFpZHlcIjp7XCJlbGlnaWJsZVwiOmZhbHNlfX0sXCJnZXRQYWdlVXJsXCI6e1wiX190eXBlX19cIjpcImNyb3NzX2RvbWFpbl9mdW5jdGlvblwiLFwiX192YWxfX1wiOntcImlkXCI6XCJ1aWRfNDgzZjdkZDUyN19tZGc2bmRrNm1ka1wiLFwibmFtZVwiOlwiZ2V0UGFnZVVybFwifX0sXCJnZXRQb3B1cEJyaWRnZVwiOntcIl9fdHlwZV9fXCI6XCJjcm9zc19kb21haW5fZnVuY3Rpb25cIixcIl9fdmFsX19cIjp7XCJpZFwiOlwidWlkXzllZjQ0NTYyNzVfbWRnNm5kazZtZGtcIixcIm5hbWVcIjpcImdldFBvcHVwQnJpZGdlXCJ9fSxcImdldFByZXJlbmRlckRldGFpbHNcIjp7XCJfX3R5cGVfX1wiOlwiY3Jvc3NfZG9tYWluX2Z1bmN0aW9uXCIsXCJfX3ZhbF9fXCI6e1wiaWRcIjpcInVpZF9kMDc4ODJiNTNkX21kZzZuZGs2bWRrXCIsXCJuYW1lXCI6XCJnZXRQcmVyZW5kZXJEZXRhaWxzXCJ9fSxcImdldFF1ZXJpZWRFbGlnaWJsZUZ1bmRpbmdcIjp7XCJfX3R5cGVfX1wiOlwiY3Jvc3NfZG9tYWluX2Z1bmN0aW9uXCIsXCJfX3ZhbF9fXCI6e1wiaWRcIjpcInVpZF85YjQ4ZjdhNGRjX21kZzZuZGs2bWRrXCIsXCJuYW1lXCI6XCJnZXRRdWVyaWVkRWxpZ2libGVGdW5kaW5nXCJ9fSxcImhvc3RlZEJ1dHRvbklkXCI6e1wiX190eXBlX19cIjpcInVuZGVmaW5lZFwifSxcImludGVudFwiOlwiYXV0aG9yaXplXCIsXCJqc1Nka0xpYnJhcnlcIjp7XCJfX3R5cGVfX1wiOlwidW5kZWZpbmVkXCJ9LFwibG9jYWxlXCI6e1wibGFuZ1wiOlwiZGVcIixcImNvdW50cnlcIjpcIkRFXCJ9LFwibWVyY2hhbnRJRFwiOltcIlJLWVZRNjZCOFNLS1lcIl0sXCJtZXJjaGFudFJlcXVlc3RlZFBvcHVwc0Rpc2FibGVkXCI6ZmFsc2UsXCJtZXNzYWdlXCI6e1wiX190eXBlX19cIjpcInVuZGVmaW5lZFwifSxcIm5vbmNlXCI6XCJcIixcIm9uQ29tcGxldGVcIjp7XCJfX3R5cGVfX1wiOlwidW5kZWZpbmVkXCJ9LFwib25Jbml0XCI6e1wiX190eXBlX19cIjpcImNyb3NzX2RvbWFpbl9mdW5jdGlvblwiLFwiX192YWxfX1wiOntcImlkXCI6XCJ1aWRfMWU5NWUxZjY0YV9tZGc2bmRrNm1ka1wiLFwibmFtZVwiOlwib25Jbml0XCJ9fSxcIm9uTWVzc2FnZUNsaWNrXCI6e1wiX190eXBlX19cIjpcImNyb3NzX2RvbWFpbl9mdW5jdGlvblwiLFwiX192YWxfX1wiOntcImlkXCI6XCJ1aWRfMGE4Yjk4YWQyM19tZGc2bmRrNm1ka1wiLFwibmFtZVwiOlwib25NZXNzYWdlQ2xpY2tcIn19LFwib25NZXNzYWdlSG92ZXJcIjp7XCJfX3R5cGVfX1wiOlwiY3Jvc3NfZG9tYWluX2Z1bmN0aW9uXCIsXCJfX3ZhbF9fXCI6e1wiaWRcIjpcInVpZF8wZjFmNTY5NzdhX21kZzZuZGs2bWRrXCIsXCJuYW1lXCI6XCJvbk1lc3NhZ2VIb3ZlclwifX0sXCJvbk1lc3NhZ2VSZWFkeVwiOntcIl9fdHlwZV9fXCI6XCJjcm9zc19kb21haW5fZnVuY3Rpb25cIixcIl9fdmFsX19cIjp7XCJpZFwiOlwidWlkXzcwOGZkODg3Y2VfbWRnNm5kazZtZGtcIixcIm5hbWVcIjpcIm9uTWVzc2FnZVJlYWR5XCJ9fSxcIm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlXCI6e1wiX190eXBlX19cIjpcInVuZGVmaW5lZFwifSxcIm9uU2hpcHBpbmdDaGFuZ2VcIjp7XCJfX3R5cGVfX1wiOlwidW5kZWZpbmVkXCJ9LFwib25TaGlwcGluZ09wdGlvbnNDaGFuZ2VcIjp7XCJfX3R5cGVfX1wiOlwidW5kZWZpbmVkXCJ9LFwiaGFzU2hpcHBpbmdDYWxsYmFja1wiOmZhbHNlLFwicGFnZVR5cGVcIjp7XCJfX3R5cGVfX1wiOlwidW5kZWZpbmVkXCJ9LFwicGFydG5lckF0dHJpYnV0aW9uSURcIjp7XCJfX3R5cGVfX1wiOlwidW5kZWZpbmVkXCJ9LFwicGF5bWVudE1ldGhvZE5vbmNlXCI6e1wiX190eXBlX19cIjpcInVuZGVmaW5lZFwifSxcInBheW1lbnRNZXRob2RUb2tlblwiOntcIl9fdHlwZV9fXCI6XCJ1bmRlZmluZWRcIn0sXCJwYXltZW50UmVxdWVzdFwiOntcIl9fdHlwZV9fXCI6XCJ1bmRlZmluZWRcIn0sXCJwbGF0Zm9ybVwiOlwiZGVza3RvcFwiLFwicmVmZXJyZXJEb21haW5cIjp7XCJfX3R5cGVfX1wiOlwidW5kZWZpbmVkXCJ9LFwicmVtZW1iZXJcIjp7XCJfX3R5cGVfX1wiOlwiY3Jvc3NfZG9tYWluX2Z1bmN0aW9uXCIsXCJfX3ZhbF9fXCI6e1wiaWRcIjpcInVpZF8xNzMxYmVjNzZiX21kZzZuZGs2bWRrXCIsXCJuYW1lXCI6XCJyZW1lbWJlclwifX0sXCJyZW1lbWJlcmVkXCI6W10sXCJyZW5kZXJlZEJ1dHRvbnNcIjpbXCJwYXlwYWxcIl0sXCJzZXNzaW9uSURcIjpcInVpZF85YjIyYTBjMmZiX21kZzZuZGs2bWRrXCIsXCJzZGtDb3JyZWxhdGlvbklEXCI6XCJwcmVidWlsZFwiLFwic2Vzc2lvblN0YXRlXCI6e1wiZ2V0XCI6e1wiX190eXBlX19cIjpcImNyb3NzX2RvbWFpbl9mdW5jdGlvblwiLFwiX192YWxfX1wiOntcImlkXCI6XCJ1aWRfZjFmNTViMTEzN19tZGc2bmRrNm1ka1wiLFwibmFtZVwiOlwiZ2V0XCJ9fSxcInNldFwiOntcIl9fdHlwZV9fXCI6XCJjcm9zc19kb21haW5fZnVuY3Rpb25cIixcIl9fdmFsX19cIjp7XCJpZFwiOlwidWlkXzQ1OTAyZTE4NjRfbWRnNm5kazZtZGtcIixcIm5hbWVcIjpcInNldFwifX19LFwiZ2V0U2hvcHBlckluc2lnaHRzVXNlZFwiOntcIl9fdHlwZV9fXCI6XCJjcm9zc19kb21haW5fZnVuY3Rpb25cIixcIl9fdmFsX19cIjp7XCJpZFwiOlwidWlkX2Q4NWFjM2FjMGRfbWRnNm5kazZtZGtcIixcIm5hbWVcIjpcImJyXCJ9fSxcInN0YWdlSG9zdFwiOntcIl9fdHlwZV9fXCI6XCJ1bmRlZmluZWRcIn0sXCJzdG9yYWdlSURcIjpcInVpZF8zZTAxYWI0MTkxX210ZTZtdG02bXRlXCIsXCJzdG9yYWdlU3RhdGVcIjp7XCJnZXRcIjp7XCJfX3R5cGVfX1wiOlwiY3Jvc3NfZG9tYWluX2Z1bmN0aW9uXCIsXCJfX3ZhbF9fXCI6e1wiaWRcIjpcInVpZF8zZjc3ODIzYjVjX21kZzZuZGs2bWRrXCIsXCJuYW1lXCI6XCJnZXRcIn19LFwic2V0XCI6e1wiX190eXBlX19cIjpcImNyb3NzX2RvbWFpbl9mdW5jdGlvblwiLFwiX192YWxfX1wiOntcImlkXCI6XCJ1aWRfYjQzYWIxYzRhNV9tZGc2bmRrNm1ka1wiLFwibmFtZVwiOlwic2V0XCJ9fX0sXCJzdXBwb3J0ZWROYXRpdmVCcm93c2VyXCI6ZmFsc2UsXCJzdXBwb3J0c1BvcHVwc1wiOnRydWUsXCJ0ZXN0XCI6e1wiYWN0aW9uXCI6XCJjaGVja291dFwifSxcInVzZXJFeHBlcmllbmNlRmxvd1wiOntcIl9fdHlwZV9fXCI6XCJ1bmRlZmluZWRcIn0sXCJ1c2VySURUb2tlblwiOntcIl9fdHlwZV9fXCI6XCJ1bmRlZmluZWRcIn0sXCJ2YXVsdFwiOmZhbHNlLFwid2FsbGV0XCI6e1wiX190eXBlX19cIjpcInVuZGVmaW5lZFwifX0sXCJleHBvcnRzXCI6e1wiaW5pdFwiOntcIl9fdHlwZV9fXCI6XCJjcm9zc19kb21haW5fZnVuY3Rpb25cIixcIl9fdmFsX19cIjp7XCJpZFwiOlwidWlkX2MzNmU3ODgyNzFfbWRnNm5kazZtZGtcIixcIm5hbWVcIjpcImluaXRcIn19LFwiY2xvc2VcIjp7XCJfX3R5cGVfX1wiOlwiY3Jvc3NfZG9tYWluX2Z1bmN0aW9uXCIsXCJfX3ZhbF9fXCI6e1wiaWRcIjpcInVpZF9hMTE2MTc1MWM3X21kZzZuZGs2bWRrXCIsXCJuYW1lXCI6XCJjbG9zZTo6bWVtb2l6ZWRcIn19LFwiY2hlY2tDbG9zZVwiOntcIl9fdHlwZV9fXCI6XCJjcm9zc19kb21haW5fZnVuY3Rpb25cIixcIl9fdmFsX19cIjp7XCJpZFwiOlwidWlkXzBkYmIwMDA2YTBfbWRnNm5kazZtZGtcIixcIm5hbWVcIjpcImNoZWNrQ2xvc2VcIn19LFwicmVzaXplXCI6e1wiX190eXBlX19cIjpcImNyb3NzX2RvbWFpbl9mdW5jdGlvblwiLFwiX192YWxfX1wiOntcImlkXCI6XCJ1aWRfYTFhZmNmYzQ5Yl9tZGc2bmRrNm1ka1wiLFwibmFtZVwiOlwiX25cIn19LFwib25FcnJvclwiOntcIl9fdHlwZV9fXCI6XCJjcm9zc19kb21haW5fZnVuY3Rpb25cIixcIl9fdmFsX19cIjp7XCJpZFwiOlwidWlkXzFkY2NjYjU3OGRfbWRnNm5kazZtZGtcIixcIm5hbWVcIjpcIlVuXCJ9fSxcInNob3dcIjp7XCJfX3R5cGVfX1wiOlwiY3Jvc3NfZG9tYWluX2Z1bmN0aW9uXCIsXCJfX3ZhbF9fXCI6e1wiaWRcIjpcInVpZF9jNWJjMTRlZDYzX21kZzZuZGs2bWRrXCIsXCJuYW1lXCI6XCJnblwifX0sXCJoaWRlXCI6e1wiX190eXBlX19cIjpcImNyb3NzX2RvbWFpbl9mdW5jdGlvblwiLFwiX192YWxfX1wiOntcImlkXCI6XCJ1aWRfMGJlMTcxMDBiZl9tZGc2bmRrNm1ka1wiLFwibmFtZVwiOlwieW5cIn19LFwiZXhwb3J0XCI6e1wiX190eXBlX19cIjpcImNyb3NzX2RvbWFpbl9mdW5jdGlvblwiLFwiX192YWxfX1wiOntcImlkXCI6XCJ1aWRfZDg1MTE1Y2E1MV9tZGc2bmRrNm1ka1wiLFwibmFtZVwiOlwiV25cIn19fX0ifX0__" title="PayPal" allowpaymentrequest="allowpaymentrequest" scrolling="no" id="jsx-iframe-ccf8d2dfe3" class="component-frame visible" style="background-color: transparent; border: none;" src="./Laphet_files/saved_resource.html"></iframe><div id="smart-menu" class="smart-menu"></div><div id="installments-modal" class="installments-modal"></div><iframe name="__detect_close_uid_503d61db45_mdg6ndk6mdk__" style="display: none;" src="./Laphet_files/saved_resource(1).html"></iframe></div></div></shopify-paypal-button><shopify-google-pay-button access-token="c61621e8c2860bdac60705f05e429959" buyer-country="DE" buyer-currency="EUR" wallet-params="{&quot;sdkUrl&quot;:&quot;https://pay.google.com/gp/p/js/pay.js&quot;,&quot;paymentData&quot;:{&quot;apiVersion&quot;:2,&quot;apiVersionMinor&quot;:0,&quot;shippingAddressParameters&quot;:{&quot;allowedCountryCodes&quot;:[&quot;AC&quot;,&quot;AD&quot;,&quot;AE&quot;,&quot;AF&quot;,&quot;AG&quot;,&quot;AI&quot;,&quot;AL&quot;,&quot;AM&quot;,&quot;AO&quot;,&quot;AR&quot;,&quot;AT&quot;,&quot;AU&quot;,&quot;AW&quot;,&quot;AX&quot;,&quot;AZ&quot;,&quot;BA&quot;,&quot;BB&quot;,&quot;BD&quot;,&quot;BE&quot;,&quot;BF&quot;,&quot;BG&quot;,&quot;BH&quot;,&quot;BI&quot;,&quot;BJ&quot;,&quot;BL&quot;,&quot;BM&quot;,&quot;BN&quot;,&quot;BO&quot;,&quot;BQ&quot;,&quot;BR&quot;,&quot;BS&quot;,&quot;BT&quot;,&quot;BW&quot;,&quot;BY&quot;,&quot;BZ&quot;,&quot;CA&quot;,&quot;CC&quot;,&quot;CD&quot;,&quot;CF&quot;,&quot;CG&quot;,&quot;CH&quot;,&quot;CI&quot;,&quot;CK&quot;,&quot;CL&quot;,&quot;CM&quot;,&quot;CN&quot;,&quot;CO&quot;,&quot;CR&quot;,&quot;CV&quot;,&quot;CW&quot;,&quot;CX&quot;,&quot;CY&quot;,&quot;CZ&quot;,&quot;DE&quot;,&quot;DJ&quot;,&quot;DK&quot;,&quot;DM&quot;,&quot;DO&quot;,&quot;DZ&quot;,&quot;EC&quot;,&quot;EE&quot;,&quot;EG&quot;,&quot;EH&quot;,&quot;ER&quot;,&quot;ES&quot;,&quot;ET&quot;,&quot;FI&quot;,&quot;FJ&quot;,&quot;FK&quot;,&quot;FO&quot;,&quot;FR&quot;,&quot;GA&quot;,&quot;GB&quot;,&quot;GD&quot;,&quot;GE&quot;,&quot;GF&quot;,&quot;GG&quot;,&quot;GH&quot;,&quot;GI&quot;,&quot;GL&quot;,&quot;GM&quot;,&quot;GN&quot;,&quot;GP&quot;,&quot;GQ&quot;,&quot;GR&quot;,&quot;GS&quot;,&quot;GT&quot;,&quot;GW&quot;,&quot;GY&quot;,&quot;HK&quot;,&quot;HN&quot;,&quot;HR&quot;,&quot;HT&quot;,&quot;HU&quot;,&quot;ID&quot;,&quot;IE&quot;,&quot;IL&quot;,&quot;IM&quot;,&quot;IN&quot;,&quot;IO&quot;,&quot;IQ&quot;,&quot;IS&quot;,&quot;IT&quot;,&quot;JE&quot;,&quot;JM&quot;,&quot;JO&quot;,&quot;JP&quot;,&quot;KE&quot;,&quot;KG&quot;,&quot;KH&quot;,&quot;KI&quot;,&quot;KM&quot;,&quot;KN&quot;,&quot;KR&quot;,&quot;KW&quot;,&quot;KY&quot;,&quot;KZ&quot;,&quot;LA&quot;,&quot;LB&quot;,&quot;LC&quot;,&quot;LI&quot;,&quot;LK&quot;,&quot;LR&quot;,&quot;LS&quot;,&quot;LT&quot;,&quot;LU&quot;,&quot;LV&quot;,&quot;LY&quot;,&quot;MA&quot;,&quot;MC&quot;,&quot;MD&quot;,&quot;ME&quot;,&quot;MF&quot;,&quot;MG&quot;,&quot;MK&quot;,&quot;ML&quot;,&quot;MM&quot;,&quot;MN&quot;,&quot;MO&quot;,&quot;MQ&quot;,&quot;MR&quot;,&quot;MS&quot;,&quot;MT&quot;,&quot;MU&quot;,&quot;MV&quot;,&quot;MW&quot;,&quot;MX&quot;,&quot;MY&quot;,&quot;MZ&quot;,&quot;NA&quot;,&quot;NC&quot;,&quot;NE&quot;,&quot;NF&quot;,&quot;NG&quot;,&quot;NI&quot;,&quot;NL&quot;,&quot;NO&quot;,&quot;NP&quot;,&quot;NR&quot;,&quot;NU&quot;,&quot;NZ&quot;,&quot;OM&quot;,&quot;PA&quot;,&quot;PE&quot;,&quot;PF&quot;,&quot;PG&quot;,&quot;PH&quot;,&quot;PK&quot;,&quot;PL&quot;,&quot;PM&quot;,&quot;PN&quot;,&quot;PS&quot;,&quot;PT&quot;,&quot;PY&quot;,&quot;QA&quot;,&quot;RE&quot;,&quot;RO&quot;,&quot;RS&quot;,&quot;RU&quot;,&quot;RW&quot;,&quot;SA&quot;,&quot;SB&quot;,&quot;SC&quot;,&quot;SD&quot;,&quot;SE&quot;,&quot;SG&quot;,&quot;SH&quot;,&quot;SI&quot;,&quot;SJ&quot;,&quot;SK&quot;,&quot;SL&quot;,&quot;SM&quot;,&quot;SN&quot;,&quot;SO&quot;,&quot;SR&quot;,&quot;SS&quot;,&quot;ST&quot;,&quot;SV&quot;,&quot;SX&quot;,&quot;SZ&quot;,&quot;TA&quot;,&quot;TC&quot;,&quot;TD&quot;,&quot;TF&quot;,&quot;TG&quot;,&quot;TH&quot;,&quot;TJ&quot;,&quot;TK&quot;,&quot;TL&quot;,&quot;TM&quot;,&quot;TN&quot;,&quot;TO&quot;,&quot;TR&quot;,&quot;TT&quot;,&quot;TV&quot;,&quot;TW&quot;,&quot;TZ&quot;,&quot;UA&quot;,&quot;UG&quot;,&quot;UM&quot;,&quot;US&quot;,&quot;UY&quot;,&quot;UZ&quot;,&quot;VA&quot;,&quot;VC&quot;,&quot;VE&quot;,&quot;VG&quot;,&quot;VN&quot;,&quot;VU&quot;,&quot;WF&quot;,&quot;WS&quot;,&quot;XK&quot;,&quot;YE&quot;,&quot;YT&quot;,&quot;ZA&quot;,&quot;ZM&quot;,&quot;ZW&quot;],&quot;phoneNumberRequired&quot;:true},&quot;merchantInfo&quot;:{&quot;merchantName&quot;:&quot;Laphet&quot;,&quot;merchantId&quot;:&quot;16708973830884969730&quot;,&quot;merchantOrigin&quot;:&quot;laphet.de&quot;},&quot;allowedPaymentMethods&quot;:[{&quot;type&quot;:&quot;CARD&quot;,&quot;parameters&quot;:{&quot;allowedCardNetworks&quot;:[&quot;VISA&quot;,&quot;MASTERCARD&quot;,&quot;AMEX&quot;],&quot;allowedAuthMethods&quot;:[&quot;PAN_ONLY&quot;,&quot;CRYPTOGRAM_3DS&quot;],&quot;billingAddressRequired&quot;:true,&quot;billingAddressParameters&quot;:{&quot;format&quot;:&quot;FULL&quot;,&quot;phoneNumberRequired&quot;:true}},&quot;tokenizationSpecification&quot;:{&quot;type&quot;:&quot;PAYMENT_GATEWAY&quot;,&quot;parameters&quot;:{&quot;gateway&quot;:&quot;shopify&quot;,&quot;gatewayMerchantId&quot;:&quot;65436647664&quot;}}}],&quot;emailRequired&quot;:true},&quot;customerAccountEmail&quot;:null,&quot;environment&quot;:&quot;PRODUCTION&quot;,&quot;availablePresentmentCurrencies&quot;:[&quot;EUR&quot;],&quot;auth&quot;:[{&quot;jwt&quot;:&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9.eyJtZXJjaGFudElkIjoiMTY3MDg5NzM4MzA4ODQ5Njk3MzAiLCJtZXJjaGFudE9yaWdpbiI6ImxhcGhldC5kZSIsImlhdCI6MTczODkxODE0Nn0.Fsa-g-YudHODxhk62GjlLkz-NfMG8aG6GKEJriCcc05xE4J7cO7w8sWsgnkkvBVxIhO73mlGoLC9Dvk766_0gQ&quot;,&quot;expiresAt&quot;:1738961346},{&quot;jwt&quot;:&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9.eyJtZXJjaGFudElkIjoiMTY3MDg5NzM4MzA4ODQ5Njk3MzAiLCJtZXJjaGFudE9yaWdpbiI6ImxhcGhldC5kZSIsImlhdCI6MTczODk2MTM0Nn0.OGs87ZMt5SVasvhg6ldXPDhyqmhuL6IdeTcnKThhG0IQhdsvWoZpWNd7HGczyExbkFdnxAHC1Sd-PtHcZVkPzQ&quot;,&quot;expiresAt&quot;:1739004546}]}" page-type="cart_page" slot="button-GooglePay" requires-shipping=""><template shadowrootmode="closed"><style>.accelerated-checkout-button{height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);min-height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 0px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow);min-width:150px}:host([page-type="cart_page"]) .accelerated-checkout-button{height:100%;width:100%;border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow)}@media (forced-colors: active){.accelerated-checkout-button{border:1px solid transparent!important}:host([page-type="cart_page"]) .accelerated-checkout-button{border:1px solid transparent!important}}
.button{display:flex;justify-content:center;align-items:center;width:100%;border:none}.button:hover:not(:disabled){filter:brightness(92%);cursor:pointer}.button:disabled{opacity:.5;cursor:not-allowed}.logo-only>svg{width:50px}.dark{background:#000;color:#fff}.light{background:#fff;color:#000;outline:1px solid #3c4043}@media (forced-colors: active){.light{outline:none}}.content{display:flex;justify-content:center;align-items:center;white-space:pre}</style><button type="button" aria-label="Google Pay" class="button accelerated-checkout-button dark logo-only" style="font: 16px / 24px &quot;New York&quot;, &quot;Iowan Old Style&quot;, &quot;Apple Garamond&quot;, Baskerville, &quot;Times New Roman&quot;, &quot;Droid Serif&quot;, Times, &quot;Source Serif Pro&quot;, serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 17" width="45px" id="google-pay-logo-dark">
  <path d="M19.526 2.635v4.083h2.518q.9 0 1.488-.605.605-.604.605-1.437 0-.816-.605-1.422-.588-.62-1.488-.62h-2.518zm0 5.52v4.736h-1.504V1.198h3.99q1.519 0 2.582 1.012 1.08 1.013 1.08 2.466 0 1.487-1.08 2.482-1.046.997-2.583.996zm7.668 2.287q0 .587.499.98.498.39 1.168.391.949 0 1.692-.701.745-.703.744-1.65-.704-.555-1.962-.555-.916 0-1.528.442-.613.44-.613 1.093m1.946-5.815q1.668 0 2.633.89.964.891.964 2.442v4.932h-1.439v-1.11h-.065q-.933 1.372-2.486 1.372-1.323 0-2.215-.784t-.891-1.96q0-1.242.94-1.976c.94-.734 1.463-.735 2.51-.735q1.34 0 2.206.49v-.344q0-.784-.621-1.33a2.13 2.13 0 0 0-1.455-.547q-1.26 0-1.995 1.062l-1.324-.834q1.095-1.568 3.238-1.568m11.853.262-5.02 11.53H34.42l1.864-4.034-3.302-7.496h1.635l2.387 5.749h.032l2.322-5.75z" style="fill: #ffffff"></path>
  <path d="M13.448 7.134q-.001-.71-.116-1.366H6.988v2.588h3.634a3.1 3.1 0 0 1-1.344 2.042v1.68h2.169c1.27-1.17 2.001-2.9 2.001-4.944" style="fill: #4285f4"></path>
  <path d="M6.988 13.7c1.816 0 3.344-.595 4.459-1.621l-2.169-1.681c-.603.406-1.38.643-2.29.643-1.754 0-3.244-1.182-3.776-2.774H.978v1.731a6.73 6.73 0 0 0 6.01 3.703" style="fill: #34a853"></path>
  <path d="M3.212 8.267a4.03 4.03 0 0 1 0-2.572V3.964H.978A6.7 6.7 0 0 0 .261 6.98c0 1.085.26 2.11.717 3.017z" style="fill: #fbbc05"></path>
  <path d="M6.988 2.921c.992 0 1.88.34 2.58 1.008v.001l1.92-1.918C10.324.928 8.804.262 6.989.262a6.73 6.73 0 0 0-6.01 3.702l2.234 1.731c.532-1.592 2.022-2.774 3.776-2.774" style="fill: #ea4335"></path>
</svg></button></template>&nbsp;</shopify-google-pay-button></shopify-accelerated-checkout-cart> <small id="shopify-buyer-consent" class="hidden" aria-hidden="true"> Ein oder mehrere Artikel in deinem Warenkorb ist/sind ein wiederkehrender Kauf oder ein Kauf mit Zahlungsaufschub. Indem ich fortfahre, stimme ich den <span id="shopify-subscription-policy-button">Stornierungsrichtlinie</span> zu und autorisiere Sie, meine Zahlungsmethode zu den auf dieser Seite aufgeführten Preisen, in der Häufigkeit und zu den Terminen zu belasten, bis meine Bestellung ausgeführt wurde oder ich, sofern zulässig, storniere. </small> </div>
              </div><p class="copy--xsmall copy--italic space--mt--medium align--text-center">Inklusive Steuern. <a href="https://laphet.de/policies/shipping-policy">Versand </a> wird beim Checkout berechnet.
</p></div>
        <div id="cart-errors" class="copy--bold"></div>
      </div>
    </div>
  </div>
</footer></div>
    </div>
  </cart-drawer></div>
<!-- END sections: header-group -->
    </div>

    <main id="MainContent" class="page-layout__main" role="main" tabindex="-1">
      
    
    <div class="gbbPageBody gbbProductsCardLayoutV2 bundle-1" style="font-family: &quot;New York&quot;, &quot;Iowan Old Style&quot;, &quot;Apple Garamond&quot;, Baskerville, &quot;Times New Roman&quot;, &quot;Droid Serif&quot;, Times, &quot;Source Serif Pro&quot;, serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; background-color: rgb(255, 255, 255);" id="gbbBundle"><div class="gbbHTMLWrapper"><div class="gbbBodyWrapper"><div class="gbbAddGiftBoxPageWrapper" style=""><div class="gbbAddProductsPageHeader"><div class="gbbPageHeader gbbPageHeaderWithoutLine"></div><div class="gbbAddProductsPageNavigationContainer"></div></div><div class="gbbAddProductPageSubtextWrapper"><div class="gbbAddProductPageSubtext" style="color: rgb(0, 0, 0);"></div><div class="gbbAddProductPageBanners"><img class="gbbMobileImageBanner" src="./Laphet_files/1722149086411.png"><img class="gbbDesktopImageBanner" src="./Laphet_files/1720675307123.png"></div></div><div class="gbbDiscountComponent"></div><div class="gbbMultipleCategoriesContainerHTMLForTabUI"><div class="gbbMultipleCategoriesPageHTMLForTabUI"><div class="gbbFiltersSearchSortHeader"></div><div class="gbbMultipleCategoriesRibbonContainer"><div class="gbbCategoryContainer gbbCategoryContainerTabUI gbbCategoryContainerTabUIActive" categoryid="category43222"><div class="gbbCategoryHeaderContainer gbbCategoryHeaderContainerTabUI" currentindex="0" categoryid="category43222"><div class="gbbCategoryTitlesContainer gbbCategoryTitlesContainerForTabUI"><div class="gbbCategoryTitle">Teepesto</div></div><img class="gbbCategoryImageForTabUI" src="./Laphet_files/multiple_category_category.png"></div></div><div class="gbbCategoryContainer gbbCategoryContainerTabUI" categoryid="category32869"><div class="gbbCategoryHeaderContainer gbbCategoryHeaderContainerTabUI" currentindex="1" categoryid="category32869"><div class="gbbCategoryTitlesContainer gbbCategoryTitlesContainerForTabUI"><div class="gbbCategoryTitle">Topping</div></div><img class="gbbCategoryImageForTabUI" src="./Laphet_files/multiple_category_category.png"></div></div><div class="gbbCategoryContainer gbbCategoryContainerTabUI" categoryid="category58846"><div class="gbbCategoryHeaderContainer gbbCategoryHeaderContainerTabUI" currentindex="2" categoryid="category58846"><div class="gbbCategoryTitlesContainer gbbCategoryTitlesContainerForTabUI"><div class="gbbCategoryTitle">Bio Loser Tee</div></div><img class="gbbCategoryImageForTabUI" src="./Laphet_files/multiple_category_category.png"></div></div></div><div class="gbbMultipleCategoriesDropdownContainer"><select class="gbbMutipleCategoriesDropdown"><option value="category43222" categoryid="category43222" currentindex="0">Teepesto</option><option value="category32869" categoryid="category32869" currentindex="1">Topping</option><option value="category58846" categoryid="category58846" currentindex="2">Bio Loser Tee</option></select><div class="gbbMultipleCategoriesDropdownArrow"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 128 128" fill="none">
<path fill-rule="evenodd" clip-rule="evenodd" d="M35.006 49.4059C36.8805 47.5314 39.9197 47.5314 41.7942 49.4059L64.0001 71.6118L86.206 49.4059C88.0805 47.5314 91.1197 47.5314 92.9942 49.4059C94.8687 51.2804 94.8687 54.3196 92.9942 56.1941L67.3942 81.7941C65.5197 83.6686 62.4805 83.6686 60.606 81.7941L35.006 56.1941C33.1315 54.3196 33.1315 51.2804 35.006 49.4059Z" fill="#4A4A4A"></path>
</svg></div></div><div class="gbbMultipleCategoriesActiveCategorySubtitle"></div><div class="gbbMultipleCategoryBodyContainer"><div class="gbbMultipleCategoryBody"><div class="gbbMultiCategoryProductsContainer"><div class="gbbAddProductsContainerHTML"><div class="gbbProductsContainer"><div class="gbbProductsItemsContainer gbbProductsItemsContainerLessProducts" total-products="2"><div class="gbbProductItem" productid="8796098265423" firstvariantid="49252148347215" style="background: rgb(255, 255, 255); color: rgb(8, 8, 8);"><div class="gbbProductImageContainer"><img class="gbbProductImageContainerImg0 gbbProductImageContainerImg gbbFade" src="./Laphet_files/Teepesto_Mild(1).png" style="display: block;"><a class="gbbPrevImage" style="display: none;">❮</a><a class="gbbNextImage" style="display: none;">❯</a><div class="gbbProductItemOverLay"><div class="gbbOverLayIconContainer"></div></div></div><div class="gbbProductTextContainer"><div class="gbbProductItemTitle" style="cursor: pointer;"><div class="gbbProductTitleOnly">Teepesto</div><div class="gbbVariantTitle"></div></div></div><div class="gbbProductActionContainer"><div class="gbbProductItemPricesContainer"><div class="gbbProductItemCompareAtPrice"></div><div class="gbbProductItemPrice">€4.95</div></div><div class="gbbProductButtonWrapper"><div class="gbbProductAddButton" style="background: rgb(223, 237, 249); color: rgb(0, 0, 0);">In den Warenkorb</div></div></div></div><div class="gbbProductItem" productid="8799383355727" firstvariantid="49252272505167" data-load-more-indicator-status="active" style="background: rgb(255, 255, 255); color: rgb(8, 8, 8);"><div class="gbbProductImageContainer"><img class="gbbProductImageContainerImg0 gbbProductImageContainerImg gbbFade" src="./Laphet_files/Teepesto_Chili(1).png" style="display: block;"><a class="gbbPrevImage" style="display: none;">❮</a><a class="gbbNextImage" style="display: none;">❯</a><div class="gbbProductItemOverLay"><div class="gbbOverLayIconContainer"></div></div></div><div class="gbbProductTextContainer"><div class="gbbProductItemTitle" style="cursor: pointer;"><div class="gbbProductTitleOnly">Teepesto mit Chili</div><div class="gbbVariantTitle"></div></div></div><div class="gbbProductActionContainer"><div class="gbbProductItemPricesContainer"><div class="gbbProductItemCompareAtPrice"></div><div class="gbbProductItemPrice">€4.95</div></div><div class="gbbProductButtonWrapper"><div class="gbbProductAddButton" style="background: rgb(223, 237, 249); color: rgb(0, 0, 0);">In den Warenkorb</div></div></div></div></div></div></div></div></div></div></div></div><div class="gbbAddProductsPageFooterHTML" style="background: rgb(255, 255, 255); color: rgb(0, 0, 0);"><div class="gbbPageFooterHTML"><div class="gbbDiscountFooterHTML"><div class="gbbDiscountMessageContainer"><div class="gbbDiscountMessage" style="color: rgb(0, 0, 0);">Wähle 5 Produkte und spare 5%!</div></div><div class="progressBarContainer"><div class="progressBar" style="background: rgb(246, 246, 246);"><div class="progressBarFill" style="background: rgb(21, 165, 36); width: 0%;"></div></div></div></div><div class="gbbProductsFooterHTML" style="background: rgb(255, 255, 255); color: rgb(0, 0, 0); grid-template-columns: 1fr;"><div class="gbbFooterButtonsContainer" style="background: rgb(246, 246, 246);"><div class="gbbFooterButtonsWrapper"><div class="gbbFooterBackButton gbbDisabled" style="background: rgb(223, 237, 249); color: rgb(30, 30, 30);">Zurück</div><div class="gbbFooterTotalContainer"><div class="gbbFooterTotalLabel" style="color: rgb(0, 0, 0);">Insgesamt</div><div class="gbbFooterTotalValueContainer" style="color: rgb(0, 0, 0);"><div class="gbbFooterDiscountedTotalValue" style="color: rgb(0, 0, 0);">€0.00</div></div></div><div class="gbbFooterNextButton" style="background: rgb(223, 237, 249); color: rgb(0, 0, 0); grid-column: 3 / 3;">Weiter</div></div></div></div><div class="gbbCartIconWithQuantityContainer" style="background: rgb(223, 237, 249); color: rgb(0, 0, 0);"><div class="gbbCartIconWithQuantityText"><div class="gbbCartQuantity">0</div></div><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.50059C3 4.00353 3.40294 3.60059 3.9 3.60059H5.83438C6.88071 3.60059 7.76448 4.37015 7.91285 5.40059H19.5C19.7507 5.40059 19.99 5.50514 20.1604 5.68908C20.3307 5.87302 20.4166 6.11966 20.3974 6.36961L19.9678 11.9537C19.8356 13.673 18.4019 15.0006 16.6775 15.0006H9.05636L9.16772 15.936C9.18568 16.087 9.31365 16.2006 9.46562 16.2006H17.1C17.5971 16.2006 18 16.6035 18 17.1006C18 17.5976 17.5971 18.0006 17.1 18.0006H9.46562C8.40184 18.0006 7.50609 17.2051 7.38034 16.1488L6.13228 5.66512C6.11432 5.51422 5.98635 5.40059 5.83438 5.40059H3.9C3.40294 5.40059 3 4.99764 3 4.50059ZM8.84207 13.2006H16.6775C17.4613 13.2006 18.113 12.5971 18.1731 11.8156L18.5281 7.20059H8.12778L8.84207 13.2006ZM12 20.4006C12 21.0633 11.4627 21.6006 10.8 21.6006C10.1373 21.6006 9.6 21.0633 9.6 20.4006C9.6 19.7378 10.1373 19.2006 10.8 19.2006C11.4627 19.2006 12 19.7378 12 20.4006ZM18 20.4006C18 21.0633 17.4627 21.6006 16.8 21.6006C16.1373 21.6006 15.6 21.0633 15.6 20.4006C15.6 19.7378 16.1373 19.2006 16.8 19.2006C17.4627 19.2006 18 19.7378 18 20.4006Z" fill="#000000"></path>
</svg></div></div></div></div></div></div></div>
    <script>window.tmpCartSettings2 = {"userData":{"_id":"668cf3d226dcdb61a32e74ab","shopName":"myanmar-grocery.myshopify.com","brandName":"Tea Eats GmbH","bundleSettings":{"allowMultipleBoxesFromSameBundle":true,"showCompareAtPrice":false,"dontIndexGiftboxBuilderPages_onGoogle":false,"isValidateInventoryEnabled":false,"calculateAutomaticDiscountInPercentage":true,"combineWithOrderDiscounts":true,"isDiscountMethodAutomatic":false,"removeUnUsedVariantImages":false},"counters":{"reviewModal":100,"themeExtensionModal":5,"instructionsModalCnt":1,"viewBundleModalCnt":0,"createBundleModalCnt":1},"countryCode":"DE","countryName":"Germany","createdAt":"2024-07-09T08:24:50.581Z","currency":"EUR","currencyInfo":{"code":"EUR","symbol":"€","thousandsSeparator":" ","decimalSeparator":",","symbolOnLeft":false,"spaceBetweenAmountAndSymbol":true,"decimalDigits":2},"customSettings":{"initialModalPopupCnt":0,"disableCartSettings":false,"addToCartBtnSelectors":"","checkoutBtnSelectors":"","customStyle":null,"addAfterAddTocartBtn":false,"addAftercheckoutBtn":false,"disableApp":false,"loadingGif":"https://gift-box-builder-app4.s3.us-east-2.amazonaws.com/public/icons/loadingGif.gif","stackDiscounts":true,"showOnlyAdminSelectedVariants":true,"overWriteCheckoutBtn":false,"addGiftMessageToNote":true,"buyNowBtn":"","cartItemQuantityBtnSelectors":"","cartItemRemoveParentSelectors":"","cartItemRemoveSelectors":"","cartItemSelectors":"","checkIfShowBundleAsProductEnabled":false,"customBundleScript":"","customCartIntegrationScript":"","customStyleForBuilderPages":".gbbProductItemCompareAtPrice {\ndisplay: none;\n}\n\n.gbbCategoryContainer.gbbCategoryContainerTabUI.gbbCategoryContainerTabUIActive {\nbackground: #dfedf9;\n}\n\n.gbbCategoryContainerTabUIActive .gbbCategoryHeaderContainerTabUI {\ncolor: #000000;\n}\n\n.gbbSummaryPageCreateNewBoxButton{\nbackground: rgb(237, 216, 208) !important;\ncolor: #000000 !important;\n}","customStyleForDummyProductPage":null,"customThemeIntegrationScript":"","enableCustomThemeIntegrationScript":false,"isCartIntegrationEnabled":false,"loadingBgColor":"#ffffff","preparingBundleGif":"https://d3ks0ngva6go34.cloudfront.net/public/packagingbundle.gif","redirectToCartEnabled":false,"redirectToCheckoutEnabled":true,"redirectToScript":"","redirectUrlForCheckoutBtn":"","selectorToRenderBundlePostionOnCart":"Over","selectorToRenderBundlePostionOnSideCart":"Over","selectorToRenderBundleProduct":"","selectorToRenderBundleProductOnSideCart":"","sideCartCheckoutBtnSelectors":"","integrations":{"judgeme":{"isEnabled":false,"public_token":""}}},"isAppFree":false,"isSubscription":{"id":33494335823,"name":"Monthly_Essential_EasyBundles","price":"19.00","billing_on":"2024-07-24","status":"active","created_at":"2024-07-09T10:25:45+02:00","updated_at":"2024-07-09T10:25:52+02:00","activated_on":"2024-07-09","return_url":"https://myanmar-grocery.myshopify.com/admin/apps/10b4272bede142b02924feec498b4009","test":false,"cancelled_on":null,"trial_days":15,"trial_ends_on":"2024-07-24","api_client_id":3918921729,"decorated_return_url":"https://myanmar-grocery.myshopify.com/admin/apps/10b4272bede142b02924feec498b4009?charge_id=33494335823","capped_amount":"199.00","balance_used":"0.0","balance_remaining":"199.00","risk_level":0.8315,"currency":"USD"},"multipleCurrenciesInfo":{"CHF":{"code":"CHF","symbol":"CHF","thousandsSeparator":"'","decimalSeparator":".","symbolOnLeft":true,"spaceBetweenAmountAndSymbol":true,"decimalDigits":2},"DKK":{"code":"DKK","symbol":"kr.","thousandsSeparator":"","decimalSeparator":",","symbolOnLeft":false,"spaceBetweenAmountAndSymbol":true,"decimalDigits":2},"EUR":{"code":"EUR","symbol":"€","thousandsSeparator":" ","decimalSeparator":",","symbolOnLeft":false,"spaceBetweenAmountAndSymbol":true,"decimalDigits":2},"NOK":{"code":"NOK","symbol":"kr","thousandsSeparator":" ","decimalSeparator":",","symbolOnLeft":true,"spaceBetweenAmountAndSymbol":true,"decimalDigits":2},"PLN":{"code":"PLN","symbol":"zł","thousandsSeparator":" ","decimalSeparator":",","symbolOnLeft":false,"spaceBetweenAmountAndSymbol":true,"decimalDigits":2}},"otherInfo":[],"planId":"","shopDomain":"laphet.de","status":"1","storefrontAccessToken":"b519a0ab91a8ca971a059ee02d291d19","timezone":"","updatedAt":"2025-02-01T23:07:41.700Z","mantleApiToken":"149ad92c-57c0-49f9-8759-497995194ff8","loginData":{"lastLoggedInAt":"2025-02-01T23:07:41.165Z"},"isOnBoardingCompleted":true,"onboardingObject":{"selectedDomain":"food-beverages","selectedBundleTypeId":null},"videoPage":{"backgroundColor":"#ffffff","logoImg":"https://db07ji0eqime4.cloudfront.net/redeemPage/giftcard/default-no-logo.jpg"},"reviewData":{"reviewStatus":"REVIEW_GIVEN","reviewGivenDate":"2024-07-10T23:00:50.526Z"},"isAppLevelMetafieldCreated":true,"totalBundleRevenue":462.99999999999994,"totalOrdersCount":11,"trackEvents":{"OB Welcome page visited":true}},"languageData":{"_id":"668cf3d226dcdb61a32e74ff","shopName":"myanmar-grocery.myshopify.com","__v":0,"createdAt":"2024-07-09T08:24:50.807Z","en":{"landingPage":{"bannerText":{"id":"bannerText","label":"Banner Text","type":"text","value":"Build your own Bundle in just a few clicks!"},"bannerSubtext":{"id":"bannerSubtext","label":"Banner Subtext","type":"text","value":"Send a custom bundle to your loved one in just a few steps"},"bannerButtonText":{"id":"bannerButtonText","label":"Banner Button Text","type":"text","value":"Start Building your Bundle"},"selectPreCuratedBoxLabel":{"id":"selectPreCuratedBoxLabel","label":"Select Pre-Curated Box Label","type":"text","value":"Or select from a range of pre-curated Gift Boxes"}},"sortBy":{"sortLabel":{"id":"sortLabel","label":"Sort Label","type":"text","value":"Sort"},"alphabeticalAToZ":{"id":"alphabeticalAToZ","label":"Alphabetical, A-Z Label","value":"Alphabetical, A-Z"},"alphabeticalZToA":{"id":"alphabeticalZToA","label":"Alphabetical, Z-A Label","value":"Alphabetical, Z-A"},"priceHighToLow":{"id":"priceHighToLow","label":"Price, High to Low Label","value":"Price, High to Low"},"priceLowToHigh":{"id":"priceLowToHigh","label":"Price, Low to High Label","value":"Price, Low to High"},"featured":{"id":"featured","label":"Featured Label","type":"text","value":"Featured"}},"giftBoxPage":{"selectGiftBoxLabel":{"id":"selectGiftBoxLabel","label":"Select Bundle Label","type":"text","value":"Select a Bundle Box"},"giftBoxPageSubtext":{"id":"giftBoxPageSubtext","label":"Gift Box Page Subtext","type":"text","value":""}},"personalizePage":{"selectGreetingCardLabel":{"id":"selectGreetingCardLabel","label":"Select Greeting Card Label","type":"text","value":"Select A Greeting Card"},"clearSelectionButton":{"id":"clearSelectionButton","label":"Clear Selection label","type":"text","value":"Clear Selection"},"noImagesAvailable":{"id":"noImagesAvailable","label":"No Images Available label","type":"text","value":"No Images Available"},"messageLabel":{"id":"messageLabel","label":"Message Label","type":"text","value":"Message"},"senderNamePlaceholder":{"id":"senderNamePlaceholder","label":"Sender Name Placeholder","type":"text","value":"From"},"recipientNamePlaceholder":{"id":"recipientNamePlaceholder","label":"Recipient Name Placeholder","type":"text","value":"To"},"messagePlaceholder":{"id":"messagePlaceholder","label":"Message Placeholder","type":"text","value":"Enter a message here..."},"emailAddressLabel":{"id":"emailAddressLabel","label":"Recipient Email Address Label","type":"text","value":"Recipient Email Address"},"emailAddressPlaceholder":{"id":"emailAddressPlaceholder","label":"Recipient Email Address Placeholder","type":"text","value":"Enter a recipient email address here..."},"emailValidationMessage":{"id":"emailValidationMessage","label":"Email Validation Message","type":"text","value":"Please enter a valid email address"},"sendNow":{"id":"sendNow","label":"Send Now Label","type":"text","value":"Send Now"},"sendLater":{"id":"sendLater","label":"Send Later Label","type":"text","value":"Send Later"},"personalizePageSubtext":{"id":"personalizePageSubtext","label":"Personalize Page Subtext","type":"text","value":""},"messageIsRequiredError":{"id":"messageIsRequiredError","label":"Message is required warning","type":"text","value":"Please enter a message"}},"reviewPage":{"reviewPageBannerText":{"id":"reviewPageBannerText","label":"Review Page Banner Text","type":"text","value":"You’ve made the  Right Choice!"},"reviewPageBannerSubtext":{"id":"reviewPageBannerSubtext","label":"Review Page Banner Subtext","type":"text","value":"Review your bundle and proceed to checkout"},"addOnsLabel":{"id":"addOnsLabel","label":"Add Ons Label","type":"text","value":"Add Ons"},"totalValueLabel":{"id":"totalValueLabel","label":"Total Value Label","type":"text","value":"Gesamtwert"},"totalLabel":{"id":"totalLabel","label":"Total Label","type":"text","value":"Insgesamt"},"productLabel":{"id":"productLabel","label":"Product Header Label","type":"text","value":"Produkt"},"priceLabel":{"id":"priceLabel","label":"Price Header Text","type":"text","value":"Preis"},"quantityLabel":{"id":"quantityLabel","label":"Quantity Header Text","type":"text","value":"Menge"},"deliveryDateLabel":{"id":"deliveryDateLabel","label":"Delivery Date Label","type":"text","value":"Delivery Date"},"productsLabelText":{"id":"productsLabelText","label":"Products Label Text","type":"text","value":"Produkte"},"messagesLabelText":{"id":"messagesLabelText","label":"Messages Label Text","type":"text","value":"Nachrichten"},"discountAppliedLabel":{"id":"discountAppliedLabel","label":"Discount Applied Label","type":"text","value":"Rabatt"},"subtotalLabel":{"id":"subtotalLabel","label":"Sub Total Label","type":"text","value":"Zwischensumme"},"orderDetailsLabel":{"id":"orderDetailsLabel","label":"Order Details Label","type":"text","value":"Details der Bestellung"},"itemsLabel":{"id":"itemsLabel","label":"No. of Items Label","type":"text","value":"Artikel(s)"},"oneTimePurchaseLabel":{"id":"oneTimePurchaseLabel","label":"One-Time Purchase label","type":"text","value":"One-Time Purchase"},"subscribeAndSaveLabel":{"id":"subscribeAndSaveLabel","label":"Subscribe and Save label","type":"text","value":"Subscribe and Save"},"noSubscriptionFoundLabel":{"id":"noSubscriptionFoundLabel","label":"No Subscription plans found label","type":"text","value":"Oops! No Subscription plans were found"},"deliveryFrequencyLabel":{"id":"deliveryFrequencyLabel","label":"Delivery Frequency Label","type":"text","value":"Delivery Frequency"},"createNewBoxLabel":{"id":"createNewBoxLabel","label":"Create New Box Label","type":"text","value":"Neues Bündel erstellen"},"editButtonText":{"id":"editButtonText","label":"Edit Label","type":"text","value":"Bearbeiten"},"deliverySchedulerPlaceholderText":{"id":"deliverySchedulerPlaceholderText","label":"Delivery Scheduler Placeholder Text","type":"text","value":"Select a date"}},"productPage":{"selectProductsLabel":{"id":"selectProductsLabel","label":"Select Products Label","type":"text","value":"Select Products"},"productPageSubtext":{"id":"productPageSubtext","label":"Product Page Subtext","type":"text","value":""}},"videoMessage":{"permissionDenied":{"id":"permissionDenied","label":"Permission Denied","type":"text","value":"Permission Denied"},"uploadConfirmation":{"id":"uploadConfirmation","label":"Upload Confirmation","type":"text","value":"Your video has been successfully uploaded!"},"pressToRecord":{"id":"pressToRecord","label":"Press to record","type":"text","value":"Press to record"},"recording":{"id":"recording","label":"Recording","type":"text","value":"Recording...."},"errorMessage":{"id":"errorMessage","label":"Error Message","type":"text","value":"An error occured, Please try again!"},"loading":{"id":"loading","label":"Loading","type":"text","value":"Loading...."},"uploading":{"id":"uploading","label":"Uploading","type":"text","value":"Uploading...."},"sendVideoMessageText":{"id":"sendVideoMessageText","label":"Send Video Message Text","type":"text","value":"Send Video Message"},"giftMessageDeliveryInfo":{"id":"giftMessageDeliveryInfo","label":"Message Delivery Info","type":"text","value":"The message will be sent to the recipient via email as soon as the order is placed"},"saveVideoText":{"id":"saveVideoText","label":"Save Video Text","type":"text","value":"Save Video"},"reRecordVideoText":{"id":"reRecordVideoText","label":"Re-Record Video Text","type":"text","value":"Re-Record Video"}},"navigationSteps":{"productPageStepText":{"id":"productPageStepText","label":"Product Page Step Text","type":"text","value":"Add Products"},"giftBoxStepText":{"id":"giftBoxStepText","label":"Bundle Step Text","type":"text","value":"Add Gift Box"},"personalizeStepText":{"id":"personalizeStepText","label":"Personalize Step Text","type":"text","value":"Personalize"},"multipleCategoriesStepText":{"id":"multipleCategoriesStepText","label":"Multiple Categories Step Text","type":"text","value":"Multiple Categories"}},"general":{"noProductsAvailable":{"id":"noProductsAvailable","label":"No Products Available label","type":"text","value":"Keine Produkte verfügbar"},"filtersLabel":{"id":"filtersLabel","label":"Filters Label","type":"text","value":"Filter"},"clearSelection":{"id":"clearSelection","label":"Clear Filters Selection","type":"text","value":"Auswahl löschen"},"searchLabel":{"id":"searchLabel","label":"Search Label","type":"text","value":"Suche"},"addToBoxButtonText":{"id":"addToBoxButtonText","label":"Add To Box Button","type":"text","value":"In den Warenkorb"},"chooseOptionsButtonText":{"id":"chooseOptionsButtonText","label":"Choose Options Button","type":"text","value":"Optionen auswählen"},"loadMoreProductsButtonText":{"id":"loadMoreProductsButtonText","label":"Load More Products Button","type":"text","value":"Weitere Produkte laden"},"loadingCheckoutButtonText":{"id":"loadingCheckoutButtonText","label":"Loading Checkout Button","type":"text","value":"Ladevorgang Kasse..."},"addedText":{"id":"addedText","label":"Added Label","type":"text","value":"Hinzugefügt"},"addButtonText":{"id":"addButtonText","label":"Add Button Text","type":"text","value":"hinzufügen"},"nextButtonText":{"id":"nextButtonText","label":"Next Button Text","type":"text","value":"Weiter"},"addToCartButtonText":{"id":"addToCartButtonText","label":"Add To Cart Button Text","type":"text","value":"In den Warenkorb"},"backButtonText":{"id":"backButtonText","label":"Back Button Text","type":"text","value":"Zurück"},"checkoutButtonText":{"id":"checkoutButtonText","label":"Checkout Button Text","type":"text","value":"Checkout"},"removeButtonText":{"id":"removeButtonText","label":"Remove Button Text","type":"text","value":"entfernen"},"reviewButtonText":{"id":"reviewButtonText","label":"Review Button Text","type":"text","value":"Überprüfung"},"combinationNotAvailable":{"id":"combinationNotAvailable","label":"Combination Not Available","type":"text","value":"Combination Not Available"},"quantity":{"id":"quantity","label":"Quantity Label","type":"text","value":"Menge"},"viewCartProductsLabel":{"id":"viewCartProductsLabel","label":"View Cart Products Label","type":"text","value":"View Selected Products"},"selectedProductsLabel":{"id":"selectedProductsLabel","label":"Selected Products Label","type":"text","value":"Selected Products"},"selectBundleProductsText":{"id":"selectBundleProductsText","label":"Select Bundle Products label","type":"text","value":"Select Bundle Products"},"redirectingText":{"id":"redirectingText","label":"Redirecting label","type":"text","value":"Redirecting..."},"preparingBundleText":{"id":"preparingBundleText","label":"Preparing Bundle Label","type":"text","value":"Preparing Bundle..."},"productsNotAvailableText":{"id":"productsNotAvailableText","label":"Products Not Available Label","type":"text","value":"Oops! Some Products are not available"},"discountsMayNotApplyText":{"id":"discountsMayNotApplyText","label":"Discounts may not be applied Label","type":"text","value":"discounts may not be applied"},"removeAllBoxProducts":{"id":"removeAllBoxProducts","label":"Remove all Box Products Label (Cart Page Popup)","type":"text","value":"This is a Box Product. Removing this will remove all the products from box"},"cartPageCheckoutButtonLoadingText":{"id":"cartPageCheckoutButtonLoadingText","label":"Cart Page Checkout Button Loading Text","type":"text","value":"Ladevorgang Kasse..."},"inventoryInStockText":{"id":"inventoryInStockText","label":"Inventory in Stock Label","type":"text","value":"in Stock"},"inventoryLimitReachedText":{"id":"inventoryLimitReachedText","label":"Inventory Limit Reached Label","type":"text","value":"No More Stock"}},"discountRules":{"rule1":{"amount":{"id":"amount","label":"Amount","type":"text","value":""},"text":{"id":"text","label":"Text","type":"text","value":""}},"rule2":{"amount":{"id":"amount","label":"Amount","type":"text","value":""},"text":{"id":"text","label":"Text","type":"text","value":""}},"rule3":{"amount":{"id":"amount","label":"Amount","type":"text","value":""},"text":{"id":"text","label":"Text","type":"text","value":""}},"rule4":{"amount":{"id":"amount","label":"Amount","type":"text","value":""},"text":{"id":"text","label":"Text","type":"text","value":""}},"rule5":{"amount":{"id":"amount","label":"Amount","type":"text","value":""},"text":{"id":"text","label":"Text","type":"text","value":""}}},"conditions":{"amount":{"greaterThanOrEqualTo":{"id":"greaterThanOrEqualTo","label":"Greater than condition message","type":"text","value":"Add products worth at least ##conditionAmount## on this step"},"lessThanOrEqualTo":{"id":"lessThanOrEqualTo","label":"Less than condition message","type":"text","value":"Add products worth maximum of ##conditionAmount## on this step"},"equalTo":{"id":"equalTo","label":"Equal to condition message","type":"text","value":"Add products worth ##conditionAmount## on this step"}},"quantity":{"greaterThanOrEqualTo":{"id":"greaterThanOrEqualTo","label":"Greater than condition message","type":"text","value":"Add at least ##conditionQuantity## products on this step"},"lessThanOrEqualTo":{"id":"lessThanOrEqualTo","label":"Less than condition message","type":"text","value":"Add a maximum of ##conditionQuantity## products to continue"},"equalTo":{"id":"equalTo","label":"Equal to condition message","type":"text","value":"Add exactly ##conditionQuantity## products on this step"}},"weight":{"greaterThanOrEqualTo":{"id":"greaterThanOrEqualTo","label":"Greater than condition message","type":"text","value":"Add products weighing at least ##conditionWeight## on this step"},"lessThanOrEqualTo":{"id":"lessThanOrEqualTo","label":"Less than condition message","type":"text","value":"Add products weighing maximum of ##conditionWeight## on this step"},"equalTo":{"id":"equalTo","label":"Equal to condition message","type":"text","value":"Add products weighing ##conditionWeight## on this step"}}},"multipleCategoriesPage":{"multipleCategoriesSubtext":{"id":"multipleCategoriesSubtext","label":"Multiple Categories Page Subtext","type":"text","value":""}},"multipleCategories":{},"addons":{"maxAddonProductsAllowed":{"id":"maxAddonProductsAllowed","label":"Max Addon Products Allowed message","type":"text","value":" add maximum ##maxAllowedAddons## products to continue"},"addonProductsMandatory":{"id":"addonProductsMandatory","label":"Addon Products Mandatory message","type":"text","value":"Please add atleast one product"}}},"languageMode":"MULTIPLE","updatedAt":"2024-07-09T15:41:15.707Z","mixAndMatchTextData":{"en":{"conditions":{"amount":{"greaterThanOrEqualTo":{"id":"greaterThanOrEqualTo","label":"Greater than condition message","type":"text","value":"Add products worth at least ##conditionAmount## on this step"},"lessThanOrEqualTo":{"id":"lessThanOrEqualTo","label":"Less than condition message","type":"text","value":"Add products worth maximum of ##conditionAmount## on this step"},"equalTo":{"id":"equalTo","label":"Equal to condition message","type":"text","value":"Add products worth ##conditionAmount## on this step"}},"quantity":{"greaterThanOrEqualTo":{"id":"greaterThanOrEqualTo","label":"Greater than condition message","type":"text","value":"Add at least ##conditionQuantity## products on this step"},"lessThanOrEqualTo":{"id":"lessThanOrEqualTo","label":"Less than condition message","type":"text","value":"Add a maximum of ##conditionQuantity## products to continue"},"equalTo":{"id":"equalTo","label":"Equal to condition message","type":"text","value":"Add exactly ##conditionQuantity## products on this step"}},"weight":{"greaterThanOrEqualTo":{"id":"greaterThanOrEqualTo","label":"Greater than condition message","type":"text","value":"Add products weighing at least ##conditionWeight## on this step"},"lessThanOrEqualTo":{"id":"lessThanOrEqualTo","label":"Less than condition message","type":"text","value":"Add products weighing maximum of ##conditionWeight## on this step"},"equalTo":{"id":"equalTo","label":"Equal to condition message","type":"text","value":"Add products weighing ##conditionWeight## on this step"}}},"general":{"noProductsAvailable":{"id":"noProductsAvailable","label":"No Products Available label","type":"text","value":"No Products Available"},"addBundleToCartBtnText":{"id":"addBundleToCartBtnText","label":"Add Bundle Cart label","type":"text","value":"Add Bundle to Cart"},"addBundleToCartLoadingBtnText":{"id":"addBundleToCartLoadingBtnText","label":"Add Bundle Loading label","type":"text","value":"Adding Bundle..."},"inventoryLimitReachedText":{"id":"inventoryLimitReachedText","label":"Inventory Limit Reached Label","type":"text","value":"No More Stock"},"emptyCardText":{"id":"emptyCardText","label":"Add Product Card Text","type":"text","value":"Add Product"}},"footer":{"footerPrevBtnText":{"id":"footerPrevBtnText","label":"Footer Previous Button","type":"text","value":"Prev"},"footerNextBtnText":{"id":"footerNextBtnText","label":"Footer Next Button","type":"text","value":"Next"},"footerFinishBtnText":{"id":"footerFinishBtnText","label":"Footer Finish Button","type":"text","value":"Done"}},"productCard":{"productCardAddBtnText":{"id":"productCardAddBtnText","label":"Product Add to Cart Button","type":"text","value":"Add to Cart"},"productVariantLabelText":{"id":"productVariantLabelText","label":"Product Variant Label","type":"text","value":"Select variant"}}}}},"pageCustomizationData":{"_id":"668cf3d226dcdb61a32e74fe","shopName":"myanmar-grocery.myshopify.com","__v":0,"banners":{"landingPageImageSrc":"https://d3ks0ngva6go34.cloudfront.net/public/banners/landing_page_bannerv2.png","pageBannerImageSrc":"https://d3ks0ngva6go34.cloudfront.net/public/banners/page_banner_temp.png","productReviewImageSrc":"https://d3ks0ngva6go34.cloudfront.net/public/banners/landing_page_bannerv2.png"},"cartFooter":{"cartFooterBgColor":"#ffffff","cartFooterTextColor":"#000000","cartFooterNextButtonColor":"#dfedf9","cartFooterNextButtonTextColor":"#000000","cartFooterBackButtonColor":"#dfedf9","cartFooterBackButtonTextColor":"#1E1E1E","cartFooterDiscountTextColor":"#000000","cartFooterDiscountProgressBarEmptyColor":"#f6f6f6","cartFooterDiscountProgressBarFilledColor":"#15A524","cartFooterButtonsContainerBgColor":"#f6f6f6"},"colors":{"disabledColor":"gray","primaryColor":"blue","productBox":"blue","secondaryColor":"aqua","textColor":"black"},"createdAt":"2024-07-09T08:24:50.807Z","landingPage":{"landingPageTextColor":"#000000","landingPageButtonBgColor":"#000000","landingPageButtonTextColor":"#ffffff"},"navigationBanner":{"navigationBannerTitleColor":"#ffffff","navigationBannerTextColor":"#ffffff","navigationBannerStepCompletionColor":"#000000","navigationBannerStepDoneColor":"#ffffff","navigationBannerStepTextColor":"#000000","navigationBannerStepProgressBarFilledColor":"#000000","navigationBannerStepProgressBarEmptyColor":"#eeeeee"},"previewPage":{"bannerTextColor":"#ffffff"},"primaryFont":"","productCard":{"productCardBgColor":"#FFFFFF","productCardTextColor":"#080808","productCardButtonColor":"#dfedf9","productCardButtonTextColor":"#000000","productCardQuantitySelectorBgColor":"#eeeeee"},"quickSettings":{"isQuickSettingsEnabled":true,"colors":{"primaryColor":"#000000","buttonBgColor":"#000000","buttonTextColor":"#ffffff"}},"summaryBlock":{"summaryBlockAddToCartButtonColor":"#dfedf9","summaryBlockAddToCartButtonTextColor":"#000000","summaryBlockBackButtonColor":"#252525","summaryBlockBackButtonTextColor":"#ffffff","summaryBuildNewBoxButtonColor":"#edd8d0","summaryBuildNewBoxTextColor":"#000000"},"updatedAt":"2024-07-28T06:50:05.326Z","templateLevelConfig":{},"categoryBlock":{"categoryBgColor":"#f5f5f5"},"generalSettings":{"scrollBar":{"scrollBarColor":"#000000"},"conditionToast":{"conditionToastBgColor":"#000000","conditionToastTextColor":"#ffffff"},"icon":{"iconBgColor":"#000000","iconTextColor":"#ffffff"},"productPage":{"productPageTitleColor":"#000000"},"bundle":{"bundleBgColor":"#ffffff"}}},"stepsConfigurationData":{"_id":"668d429926dcdb61a3623c28","bundleId":"1","shopName":"myanmar-grocery.myshopify.com","__v":0,"bundleChecklist":{"publishBundle":true,"reviewDefaultLanguageText":true,"changeBundleColors":true},"bundleChecklistStatus":"IN_PROGRESS","bundleDesignTemplate":"BUILD_FROM_SCRATCH_NEWPRODUCTCARD","bundleName":"Mix & Match","bundleStatus":"ACTIVE","createdAt":"2024-07-09T14:00:57.086Z","landingPageData":{"isVisibleOnAdminUi":true,"isLandingPageEnabled":false,"stepImage":"https://d3ks0ngva6go34.cloudfront.net/public/banners/landing_page_bannerv2.png","bannerText":"Build your own Bundle in just a few clicks!","bannerButtonText":"Build your Custom Bundle","bannerSubtext":"Send a custom bundle to your loved one in just a few steps"},"multipleCategoriesData":{"isMultipleCategoriesEnabled":false,"stepImage":"https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconf3.png"},"personalizationData":{"isVisibleOnAdminUi":true,"isPersonalizationEnabled":false,"personalizeStepText":"Personalize","personalizePageSubtext":"","stepImage":"https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg","giftwrap":{},"giftMessage":{},"giftAddons":{},"greetingCard":{},"scheduleDelivery":{"isScheduleDeliveryEnabled":false,"leadTime":"7","maxDateInDays":"60","disabledDaysOfWeek":[],"disabledDates":[]}},"summaryPageData":{"isSummaryPageEnabled":true,"reviewPageBannerText":"Du hast die richtige Wahl getroffen!","reviewPageBannerSubtext":"Überprüfe dein Bündel und gehe zur Kasse.","reviewPageEmptyStateBanner":"https://d3ks0ngva6go34.cloudfront.net/public/Empty+Gift.png","reviewPageEmptyStateBannerText":"","reviewPageEmptyStateBannerSubText":"","reviewPageEmptyStateBannerButtonText":"Zurück zur Auswahl","customHTMLBlock":"","multiLangData":{}},"updatedAt":"2024-08-13T09:52:55.048Z","productsData1":{"isVisibleOnAdminUi":true,"stepImage":"https://d3ks0ngva6go34.cloudfront.net/giftBox/myanmar-grocery.myshopify.com/1720533679363.jpg","categories":{"category43222":{"categoryId":"category43222","categoryImg":"https://d3ks0ngva6go34.cloudfront.net/public/icons/multiple_category_category.png","conditions":[],"autoNextStepOnConditionMet":false,"products":[],"categoryBanner":"","title":"Teepesto","subTitle":"","productPageKey":"productsData1","uniqueProductsData":[{"id":8796098265423,"productId":8796098265423,"title":"Teepesto","handle":"laphet-tee-pesto","tags":["Edible Fermented Tea","Vegan"],"updated_at":"2024-08-12T10:41:02+02:00","collectionIds":["626675089743"],"collectionNames":["Teepesto Kollektion"]},{"id":8799383355727,"productId":8799383355727,"title":"Teepesto mit Chili","handle":"laphet-teepesto-chili","tags":["Edible Fermented Tea","Vegan"],"updated_at":"2024-08-11T08:51:54+02:00","collectionIds":["626675089743"],"collectionNames":["Teepesto Kollektion"]}]},"category32869":{"categoryId":"category32869","categoryImg":"https://d3ks0ngva6go34.cloudfront.net/public/icons/multiple_category_category.png","conditions":[],"autoNextStepOnConditionMet":false,"products":[{"productId":"8800374620495","graphqlId":"gid://shopify/Product/8800374620495","handle":"knusper-mix","variants":[{"variantId":"47972301603151","variantGraphqlId":"gid://shopify/ProductVariant/47972301603151"}],"hasOnlyDefaultVariant":true,"images":[{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/FrontMockUpnew_1_copy.jpg?v=1707080741"},{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/IMG_1143.heic?v=1707080741"},{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/Peach_Mix_and_Match_Fashion_Edition_Instagram_Post_copy_2.jpg?v=1719167133"},{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/back.jpg?v=1707080741"},{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/5.png?v=1707080741"}],"title":"Knusper Mix - Topping","tags":["Edible Fermented Tea","Vegan"],"updated_at":"2024-07-09T09:22:56+02:00"}],"categoryBanner":"","title":"Topping","subTitle":"","productPageKey":"productsData1","uniqueProductsData":[{"productId":"8800374620495","graphqlId":"gid://shopify/Product/8800374620495","handle":"knusper-mix","variants":[{"variantId":"47972301603151","variantGraphqlId":"gid://shopify/ProductVariant/47972301603151"}],"hasOnlyDefaultVariant":true,"images":[{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/FrontMockUpnew_1_copy.jpg?v=1707080741"},{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/IMG_1143.heic?v=1707080741"},{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/Peach_Mix_and_Match_Fashion_Edition_Instagram_Post_copy_2.jpg?v=1719167133"},{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/back.jpg?v=1707080741"},{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/5.png?v=1707080741"}],"title":"Knusper Mix - Topping","tags":["Edible Fermented Tea","Vegan"],"updated_at":"2024-07-09T09:22:56+02:00"}]},"category58846":{"categoryId":"category58846","categoryImg":"https://d3ks0ngva6go34.cloudfront.net/public/icons/multiple_category_category.png","conditions":[],"autoNextStepOnConditionMet":false,"products":[],"categoryBanner":"","title":"Bio Loser Tee","subTitle":"","productPageKey":"productsData1","uniqueProductsData":[{"id":8627794346319,"productId":8627794346319,"title":"Floral Rice","handle":"bio-tee-floral-rice","tags":["Bio Tee","Green Tea","Grüner Tee","Loose Tea","Lose Tee","Myanmar Tea","Organic Tea"],"updated_at":"2024-08-10T22:34:14+02:00","collectionIds":["605894246735"],"collectionNames":["Bio Loser Tee Kollektion"]},{"id":8626668634447,"productId":8626668634447,"title":"Calm Whisperer","handle":"calm-whisperer-bio-weisser-tee","tags":["Bio Tee"],"updated_at":"2024-08-10T22:32:42+02:00","collectionIds":["605894246735"],"collectionNames":["Bio Loser Tee Kollektion"]},{"id":8624165257551,"productId":8624165257551,"title":"Timeless Jade","handle":"timeless-jade","tags":["Bio Tee"],"updated_at":"2024-08-10T22:34:25+02:00","collectionIds":["605894246735"],"collectionNames":["Bio Loser Tee Kollektion"]},{"id":8622038253903,"productId":8622038253903,"title":"Wonder Ruby","handle":"wonder-ruby-schwarzer-tee","tags":["Bio Tee"],"updated_at":"2024-08-10T22:34:34+02:00","collectionIds":["605894246735"],"collectionNames":["Bio Loser Tee Kollektion"]}]}},"productPageStepText":"Mix & Match","productPageSubtext":"","pageType":"MULTIPLE_CATEGORY","isMultiCategoryTabBasedUIEnabled":true,"productPageKey":"productsData1","autoNextStepOnConditionMet":false,"conditions":[],"displayVariantsAsIndividualProducts":false,"filterBySearch":{"isSearchEnabled":false,"searchQuery":{"searchField":"title","searchFieldType":"String"}},"filterTypes":{"isFiltersEnabled":true,"categories":{},"filterRule":"OR","filterRuleAcrossCategory":"OR"},"isPageConditionsEnabled":false,"isProductsEnabled":true,"pageBanners":{"mobileBanner":"https://d3ks0ngva6go34.cloudfront.net/giftBox/myanmar-grocery.myshopify.com/1722149086411.png","desktopBanner":"https://d3ks0ngva6go34.cloudfront.net/giftBox/myanmar-grocery.myshopify.com/1720675307123.png"},"uniqueProductsData":[{"id":8796098265423,"productId":8796098265423,"title":"Teepesto","handle":"laphet-tee-pesto","tags":["Edible Fermented Tea","Vegan"],"updated_at":"2024-08-12T10:41:02+02:00","collectionIds":["626675089743"],"collectionNames":["Teepesto Kollektion"]},{"id":8799383355727,"productId":8799383355727,"title":"Teepesto mit Chili","handle":"laphet-teepesto-chili","tags":["Edible Fermented Tea","Vegan"],"updated_at":"2024-08-11T08:51:54+02:00","collectionIds":["626675089743"],"collectionNames":["Teepesto Kollektion"]},{"productId":"8800374620495","graphqlId":"gid://shopify/Product/8800374620495","handle":"knusper-mix","variants":[{"variantId":"47972301603151","variantGraphqlId":"gid://shopify/ProductVariant/47972301603151"}],"hasOnlyDefaultVariant":true,"images":[{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/FrontMockUpnew_1_copy.jpg?v=1707080741"},{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/IMG_1143.heic?v=1707080741"},{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/Peach_Mix_and_Match_Fashion_Edition_Instagram_Post_copy_2.jpg?v=1719167133"},{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/back.jpg?v=1707080741"},{"originalSrc":"https://cdn.shopify.com/s/files/1/0654/3664/7664/files/5.png?v=1707080741"}],"title":"Knusper Mix - Topping","tags":["Edible Fermented Tea","Vegan"],"updated_at":"2024-07-09T09:22:56+02:00"},{"id":8627794346319,"productId":8627794346319,"title":"Floral Rice","handle":"bio-tee-floral-rice","tags":["Bio Tee","Green Tea","Grüner Tee","Loose Tea","Lose Tee","Myanmar Tea","Organic Tea"],"updated_at":"2024-08-10T22:34:14+02:00","collectionIds":["605894246735"],"collectionNames":["Bio Loser Tee Kollektion"]},{"id":8626668634447,"productId":8626668634447,"title":"Calm Whisperer","handle":"calm-whisperer-bio-weisser-tee","tags":["Bio Tee"],"updated_at":"2024-08-10T22:32:42+02:00","collectionIds":["605894246735"],"collectionNames":["Bio Loser Tee Kollektion"]},{"id":8624165257551,"productId":8624165257551,"title":"Timeless Jade","handle":"timeless-jade","tags":["Bio Tee"],"updated_at":"2024-08-10T22:34:25+02:00","collectionIds":["605894246735"],"collectionNames":["Bio Loser Tee Kollektion"]},{"id":8622038253903,"productId":8622038253903,"title":"Wonder Ruby","handle":"wonder-ruby-schwarzer-tee","tags":["Bio Tee"],"updated_at":"2024-08-10T22:34:34+02:00","collectionIds":["605894246735"],"collectionNames":["Bio Loser Tee Kollektion"]}]},"bundleImg":"https://d3ks0ngva6go34.cloudfront.net/giftBox/myanmar-grocery.myshopify.com/1720541788553.jpg","bundleLink":"https://myanmar-grocery.myshopify.com/apps/gbb/easybundle/1","bundleUpsellConfig":{"isEnabled":false,"showOnAllBundleProducts":true,"selectedProducts":[],"showOnSpecificProductPages":[],"collectionsSelectedData":[],"showOnSpecificCollectionPages":[],"bundleWidgetText":"Save More With Bundle","bundleWidgetRedirectText":"Redirecting","useLinkProductAsDefaultProduct":false},"enableRecurringDiscounts":false,"isOneTimePurchaseEnabled":true,"isOrderSubscriptionsEnabled":false,"productsForBundleLink":[],"selectedProductsForBundleLink":[],"bundleType":"FULLPAGE_BUNDLE"},"discountsData":{"_id":"668d4cd726dcdb61a369bdcf","bundleId":"1","shopName":"myanmar-grocery.myshopify.com","__v":0,"createdAt":"2024-07-09T14:44:39.769Z","discountMode":"PERCENTAGE","discountTextBody":{"percentageAndFixed":{"rule1":{"text":"Wähle 5 Produkte und spare 5%!"},"rule2":{"text":"Juhu 🎊 5% gespart! Füge 5 weitere Produkte hinzu, um 10% zu erhalten."},"rule3":{"text":"Juhu! 🎉 Du hast 10% gespart! Wenn du noch 5 weitere Produkte hinzufügst, bekommst du sogar 15% Rabatt! 🚀"},"rule4":{"text":"Congrats🎉 Add ##discountConditionDiff####discountUnit## more to get ##discountValue####discountValueUnit## discount!"},"rule5":{"text":" Congrats🎉 Add ##discountConditionDiff####discountUnit## more to get ##discountValue####discountValueUnit## discount!"}},"fixedBundlePrice":{"rule1":{"text":"Add ##discountConditionDiff## product(s) to get the bundle at ##discountValueUnit####discountValue##"},"rule2":{"text":"Congrats🎉 Add ##discountConditionDiff## product(s) more to get the bundle at ##discountValueUnit####discountValue##"},"rule3":{"text":"Congrats🎉 Add ##discountConditionDiff## product(s) more to get the bundle at ##discountValueUnit####discountValue##"},"rule4":{"text":"Congrats🎉 Add ##discountConditionDiff## product(s) more to get the bundle at ##discountValueUnit####discountValue##"},"rule5":{"text":"Congrats🎉 Add ##discountConditionDiff## product(s) more to get the bundle at ##discountValueUnit####discountValue##"}}},"discountTextForSuccess":{"value":"Herzlichen Glückwunsch 🎊, du hast das beste Angebot für dein Bündel erhalten!"},"isDeleted":false,"isDiscountEnabled":true,"isDiscountProgressBarEnabled":true,"isKiteIntegrationEnabled":false,"isShowDiscountsEnabled":true,"rules":[{"discountValue":"5","value":"5","type":"quantity","discountCodePrefix":"MixnMatch5"},{"discountValue":"10","value":"10","type":"quantity","discountCodePrefix":"MixnMatch10"},{"discountValue":"15","value":"15","type":"quantity","discountCodePrefix":"MinxMatch15"}],"type":"amount","updateMultiLanguage":false,"updatedAt":"2024-07-09T15:10:23.446Z","multiLangData":{"en":{"discountTextBody":{"percentageAndFixed":{"rule1":{"text":"Wähle 5 Produkte und spare 5%!"},"rule2":{"text":"Congrats🎉 Add ##discountConditionDiff####discountUnit## more to get ##discountValue####discountValueUnit## discount!"},"rule3":{"text":"Congrats🎉 Add ##discountConditionDiff####discountUnit## more to get ##discountValue####discountValueUnit## discount!"},"rule4":{"text":"Congrats🎉 Add ##discountConditionDiff####discountUnit## more to get ##discountValue####discountValueUnit## discount!"},"rule5":{"text":" Congrats🎉 Add ##discountConditionDiff####discountUnit## more to get ##discountValue####discountValueUnit## discount!"}},"fixedBundlePrice":{"rule1":{"text":"Add ##discountConditionDiff## product(s) to get the bundle at ##discountValueUnit####discountValue##"},"rule2":{"text":"Congrats🎉 Add ##discountConditionDiff## product(s) more to get the bundle at ##discountValueUnit####discountValue##"},"rule3":{"text":"Congrats🎉 Add ##discountConditionDiff## product(s) more to get the bundle at ##discountValueUnit####discountValue##"},"rule4":{"text":"Congrats🎉 Add ##discountConditionDiff## product(s) more to get the bundle at ##discountValueUnit####discountValue##"},"rule5":{"text":"Congrats🎉 Add ##discountConditionDiff## product(s) more to get the bundle at ##discountValueUnit####discountValue##"}}},"discountTextForSuccess":{"value":"Congratulations 🎊 you have gotten the best offer on your bundle!"}}}}}</script>
    <script>// comment at the first line of the file dec2024
let DEFAULT_addToCartBtnSelectorsApp4 = 'input[name="add"], button[name="add"], form[action*="/cart/add"] input[type="submit"], form[action*="/cart/add"] button[type="submit"], form[action*="/cart/add"] button:not([type="button"]), form[action*="/cart/add"] .gbb__add-to-cart';
let DEFAULT_checkoutBtnSelectorsApp4 = 'button[name="checkout"], input[name="checkout"], form[action*="/cart"] a[href="/checkout"], a[href="/checkout"], form[action="/cart"] input[type="submit"][name="checkout"], form[action="/cart"] button[type="submit"][name="checkout"]';
let DEFAULT_quantityBtnSelectorsApp4 = '.ajaxcart__qty,quantity-input .quantity,.product-form__input, .product-form__quantity ';
let DEFAULT_sideCartSelectorsApp4 = '.cart-notification,cart-notification,.cart-notification-wrapper,#cart-notification, #CartDrawer, .drawer, .drawer-cover, .Drawer';
let DEFAULT_buyNowBtnApp4 = '.shopify-payment-button__button, .shopify-payment-button__button--unbranded';
let DEFAULT_cartFormApp4 = 'form[action="/cart"], form[action="/cart/"], form[action="cart"]';

let DEFAULT_BUNDLE_IMAGE = "https://gift-box-builder-app4.s3.us-east-2.amazonaws.com/public/default_bundle_image.jpg"

let DEFAULT_scheduleDeliveryPickerSelector = ".gbbSummaryPageDeliverOrderDetailsDiv"
let DEFAULT_EMPTY_REVIEWPAGE_TEXT = "It's Lonely in here 😔"
let DEFAULT_EMPTY_REVIEWPAGE_SUBTEXT = "Tap the button to add products"
let DEFAULT_EMPTY_REVIEWPAGE_BANNER = "https://gift-box-builder-app4.s3.us-east-2.amazonaws.com/public/Empty+Gift.png"
let DEFAULT_EMPTY_REVIEWPAGE_BUTTONTEXT = "Go back to the bundle flow"

// const DEFAULT_BODY_OVERFLOW_VALUE = "";
let DEFAULT_BODY_OVERFLOW_VALUE = "";

let CONSTANT_IMAGES_DROPDOWN_BUTTON = "https://d3ks0ngva6go34.cloudfront.net/public/Keyboard+arrow+up.svg";
let CONSTANT_IMAGES_CALENDAR_ICON = "https://d3ks0ngva6go34.cloudfront.net/public/calendar.svg";
let CONSTATNT_IMAGES_FILTER_ICON = "https://gift-box-builder-app4.s3.us-east-2.amazonaws.com/public/filters_icon.png";


const ADDPRODUCT_PAGES_LIST = ["addProductsPage1", "addProductsPage2", "addProductsPage3", "addProductsPage4", "addProductsPage5", "addProductsPage6", "addProductsPage7", "addProductsPage8", "addProductsPage9", "addProductsPage10", "addProductsPage11", "addProductsPage12"]
let CONSTANT_SVG_CIRCLE = `<svg xmlns="http://www.w3.org/2000/svg"xmlns:xlink="http://www.w3.org/1999/xlink"><circle style="stroke:#006600; fill:white" cx="20" cy="20" r="12"></circle></svg>`
const STEP_SVG = ` <svg width="32" height="36" viewBox="0 0 32 36" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M17.5934 34.5608C16.8036 35.1751 15.6978 35.1751 14.9081 34.5608L1.48121 24.1177C0.519403 23.3697 0.528664 21.9129 1.4999 21.1772C2.16804 20.671 3.09271 20.6762 3.75509 21.1899L16.2507 30.8804L28.7464 21.1899C29.4087 20.6762 30.3334 20.671 31.0015 21.1772C31.9728 21.913 31.982 23.3697 31.0202 24.1177L17.5934 34.5608ZM16.2507 26.2483L1.79469 15.0047C0.668966 14.1292 0.668969 12.4277 1.79469 11.5522L14.9081 1.35288C15.6978 0.738648 16.8037 0.738649 17.5934 1.35289L30.7068 11.5522C31.8325 12.4277 31.8325 14.1292 30.7068 15.0047L16.2507 26.2483ZM16.2507 21.5236L26.9045 13.2785L16.2507 5.03333L5.59691 13.2785L16.2507 21.5236Z" fill="#232323" />
    </svg>`
const CONSTANT_ARROW_SVG = `<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
        width="24px" height="24px" viewBox="0 0 512.000000 512.000000"
        preserveAspectRatio="xMidYMid meet">
       <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
       fill="#000000" stroke="none">
       <path d="M2265 5109 c-592 -71 -1125 -334 -1540 -760 -375 -385 -598 -825
       -696 -1374 -21 -116 -24 -161 -24 -415 0 -254 3 -299 24 -415 101 -569 343
       -1031 742 -1420 385 -375 825 -598 1374 -696 116 -21 161 -24 415 -24 254 0
       299 3 415 24 276 49 483 116 720 231 246 121 448 264 654 465 399 389 641 851
       742 1420 21 116 24 161 24 415 0 254 -3 299 -24 415 -49 276 -116 483 -231
       720 -121 246 -264 448 -465 654 -389 399 -852 641 -1420 742 -97 17 -169 22
       -375 25 -140 1 -291 -2 -335 -7z m651 -1430 c36 -13 86 -62 105 -104 24 -51
       24 -109 0 -160 -11 -26 -158 -184 -415 -449 l-397 -410 109 -110 c515 -525
       687 -705 703 -741 51 -111 -16 -244 -138 -275 -36 -9 -55 -8 -98 5 -52 15 -72
       33 -535 507 -265 270 -490 509 -501 529 -22 45 -25 116 -5 162 13 33 942 999
       990 1031 49 32 120 38 182 15z"/>
       </g>
       </svg>`;

const ARROW_DOWN_SVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 128 128" fill="none">
<path fill-rule="evenodd" clip-rule="evenodd" d="M35.006 49.4059C36.8805 47.5314 39.9197 47.5314 41.7942 49.4059L64.0001 71.6118L86.206 49.4059C88.0805 47.5314 91.1197 47.5314 92.9942 49.4059C94.8687 51.2804 94.8687 54.3196 92.9942 56.1941L67.3942 81.7941C65.5197 83.6686 62.4805 83.6686 60.606 81.7941L35.006 56.1941C33.1315 54.3196 33.1315 51.2804 35.006 49.4059Z" fill="#4A4A4A"/>
</svg>`;

const CART_SVG = `<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.50059C3 4.00353 3.40294 3.60059 3.9 3.60059H5.83438C6.88071 3.60059 7.76448 4.37015 7.91285 5.40059H19.5C19.7507 5.40059 19.99 5.50514 20.1604 5.68908C20.3307 5.87302 20.4166 6.11966 20.3974 6.36961L19.9678 11.9537C19.8356 13.673 18.4019 15.0006 16.6775 15.0006H9.05636L9.16772 15.936C9.18568 16.087 9.31365 16.2006 9.46562 16.2006H17.1C17.5971 16.2006 18 16.6035 18 17.1006C18 17.5976 17.5971 18.0006 17.1 18.0006H9.46562C8.40184 18.0006 7.50609 17.2051 7.38034 16.1488L6.13228 5.66512C6.11432 5.51422 5.98635 5.40059 5.83438 5.40059H3.9C3.40294 5.40059 3 4.99764 3 4.50059ZM8.84207 13.2006H16.6775C17.4613 13.2006 18.113 12.5971 18.1731 11.8156L18.5281 7.20059H8.12778L8.84207 13.2006ZM12 20.4006C12 21.0633 11.4627 21.6006 10.8 21.6006C10.1373 21.6006 9.6 21.0633 9.6 20.4006C9.6 19.7378 10.1373 19.2006 10.8 19.2006C11.4627 19.2006 12 19.7378 12 20.4006ZM18 20.4006C18 21.0633 17.4627 21.6006 16.8 21.6006C16.1373 21.6006 15.6 21.0633 15.6 20.4006C15.6 19.7378 16.1373 19.2006 16.8 19.2006C17.4627 19.2006 18 19.7378 18 20.4006Z" fill="${window.tmpCartSettings2?.pageCustomizationData?.cartFooter?.cartFooterNextButtonTextColor || "#ffffff"}"/>
</svg>`

const CONSTANT_CLOSE_ICON_SVG = `<svg fill="${window.tmpCartSettings2?.pageCustomizationData?.generalSettings?.icon?.iconBgColor || "black"}" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 26 26" width="16px" height="16px"
style="background: ${window.tmpCartSettings2?.pageCustomizationData?.generalSettings?.icon?.iconTextColor || "white"}; border-radius: 50%; "><path d="M 13 0.1875 C 5.925781 0.1875 0.1875 5.925781 0.1875 13 C 0.1875 20.074219 5.925781 25.8125 13 25.8125 C 20.074219 25.8125 25.8125 20.074219 25.8125 13 C 25.8125 5.925781 20.074219 0.1875 13 0.1875 Z M 18.78125 17.394531 L 17.390625 18.78125 C 17.136719 19.035156 16.722656 19.035156 16.46875 18.78125 L 13 15.3125 L 9.53125 18.78125 C 9.277344 19.035156 8.863281 19.035156 8.609375 18.777344 L 7.21875 17.394531 C 6.96875 17.136719 6.96875 16.726563 7.21875 16.46875 L 10.6875 13 L 7.222656 9.535156 C 6.96875 9.277344 6.96875 8.863281 7.222656 8.609375 L 8.609375 7.222656 C 8.863281 6.964844 9.28125 6.964844 9.535156 7.222656 L 13 10.6875 L 16.46875 7.222656 C 16.722656 6.964844 17.140625 6.964844 17.390625 7.222656 L 18.78125 8.605469 C 19.035156 8.863281 19.035156 9.277344 18.78125 9.535156 L 15.3125 13 L 18.78125 16.46875 C 19.03125 16.726563 19.03125 17.136719 18.78125 17.394531 Z"/></svg>`

const SEARCH_ICON_SVG = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.5 3C11.2239 3 12.8772 3.68482 14.0962 4.90381C15.3152 6.12279 16 7.77609 16 9.5C16 11.11 15.41 12.59 14.44 13.73L14.71 14H15.5L20.5 19L19 20.5L14 15.5V14.71L13.73 14.44C12.5504 15.4465 11.0506 15.9996 9.5 16C7.77609 16 6.12279 15.3152 4.90381 14.0962C3.68482 12.8772 3 11.2239 3 9.5C3 7.77609 3.68482 6.12279 4.90381 4.90381C6.12279 3.68482 7.77609 3 9.5 3ZM9.5 5C7 5 5 7 5 9.5C5 12 7 14 9.5 14C12 14 14 12 14 9.5C14 7 12 5 9.5 5Z" fill="black"/>`

const PLAIN_CHEVRON_UP_SVG = `<svg width="25" height="25" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.23966 11.7996C6.5432 12.0814 7.01775 12.0639 7.2996 11.7603L10 8.85221L12.7004 11.7603C12.9823 12.0639 13.4568 12.0814 13.7603 11.7996C14.0639 11.5177 14.0815 11.0432 13.7996 10.7397L10.5496 7.23966C10.4077 7.08683 10.2086 7 10 7C9.79145 7 9.59232 7.08683 9.45041 7.23966L6.20041 10.7397C5.91856 11.0432 5.93613 11.5177 6.23966 11.7996Z" fill="#4A4A4A"/>
</svg>`

var gbbUtils = {
    f: {}
}
window.gbbUtils = gbbUtils;
//console.log


/*
*fn(param1, param2) =>
*param1 is url of script that we suppose to load
*param2 is function that should be called after script is loaded
*/


gbbUtils.f.loadScript = function (a, b) {
    var c = document.createElement("script");
    c.type = "text/javascript";
    c.src = a;
    document.getElementsByTagName("head")[0].appendChild(c)
    c.onload = function () { b() };
};

/*
* we changed loadScript function - if else block for onload is removed as it was not making sense
*fn(param1) =>
*param1 - represents function that should be executed once jquery is loaded
*https://www.w3schools.com/jquery/jquery_noconflict.asp
*/

gbbUtils.f.loadJquery = function (b) {
    gbb.utility.debugConsole("Load JQuery");
    let flag = false;
    if ("undefined" === typeof jQuery || 3.1 > parseFloat(jQuery.fn.jquery)) {
        flag = true;
    }
    if ("undefined" != typeof jQuery && jQuery.post == undefined) {
        flag = true;
    }

    if (flag) {
        gbbUtils.f.loadScript("https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js", function () {
            gbbJquery = jQuery.noConflict(!0);
            b(gbbJquery)
        })
    } else {
        b(jQuery);
    }
};


var gbb = {
    debug: [],
    version: 1.2,
    state: {
        cachedProductData: new Map(),
        cachedProductDataGraphql: new Map(),
        bundleId: "",
        bundleName: "",
        activeBoxId: "",
        submitted: "",
        product_added: "",
        page_type: "",
        insertWrapperOnPage: [],
        cartData: undefined,
        isOverWriteBuyNowBtnTriggered: false,
        timer: undefined,
        freeGiftcardPopupModalTriggered: false,
        atleastOneProduct: {},
        pageHistory: [],
        greetingCardActiveImageSrc: "",
        navigationItems: [],
        currentPageId: "",
        giftBoxCartData: undefined,
        currentFilteredProducts: [], //products state of filteredProducts
        currentChooseGiftBoxProductsState: [],
        scrollPoisitionAfterPageChange: 70,
        gbbUrl: "gbb",
        addProductsFilters: {
            isFiltersActive: false,
            activatedFilters: [],
            allFilters: [],
            priceFilterActive: false,
            minPriceValue: "",
            maxPriceValue: ""
        },
        addProductsSortBy: {
            isSortByEnabled: false,
            sortByCategories: [],
            sortByValue: ""
        },
        setInfiniteScrollTrackerForProducts: true,
        navItemsViewPerPage: 5,
        // productsPerBatch : 300, //used in prefetch
        currentFlow: "",
        variantCustomProperties: {},
        storeCurrencySymbol: undefined,
        currentModalProductData: {},
        CONSTANT_DEBUG_FLAG: undefined,
        languageMode: "",
        giftMessageProductInActiveSession: [],
    },
    constants: {
        themesIds: {
            DAWN_THEME: 887,
            VENTURE_THEME: 775,
            EXPRESS_THEME: 885,
            CRAVE_THEME: 1363,
            SENSE_THEME: 1356,
            CRAFT_THEME: 1368,
        }
    },
    importExternalScript: async function (scriptName) {
        let scriptUrl = "";
        switch (scriptName) {
            case "date-flatpickr":
                scriptUrl = "https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.js"
                break;
            case "selfHosted-date-flatpickr":
                scriptUrl = "https://d3ks0ngva6go34.cloudfront.net/storefront/S3-flatpickr.min.js";
                break;
        }
        await new Promise(function (resolve, reject) {
            try {
                // document.body.appendChild(document.createElement('script')).src = url;
                const script = document.createElement('script');
                script.src = scriptUrl;
                console.time(`${scriptName}-onLoad`)
                // script.async = true;
                //attach a link tag for css
                // var link = document.createElement('link');
                // link.rel = 'stylesheet';
                // link.href = 'https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/material_blue.css';
                // document.head.appendChild(link);
                //delay the resolve by 1 second
                //resolve after it has been loaded
                script.onload = function () {
                    console.timeEnd(`${scriptName}-onLoad`)
                    gbb.utility.debugConsole(scriptName, "loaded");
                    gbb.utility.debugConsole("FlatPickrObj", flatpickr);
                    resolve();
                }
                document.body.appendChild(script);
            } catch (e) {
                gbb.utility.triggerSlackNotification(e);
                gbb.utility.debugConsole(scriptName, "error in importing", e);
                reject();
            }
        });
    },
    settings: {}, //object from function
    selectors: {},
    cartInterval: "",
    productinterval: "",
    f: {
        bootstrap: function (settings) {
            gbb.utility.debugConsole("bootstap?");
            gbb.f.initThemeCSS();
            gbb.f.globalListener(settings)
        },
        initThemeCSS: function () {
            // gbb.utility.debugConsole("initThemeCSS?", gbb.selectors.addToCart);
            let addToCartBtnEle = gbb.$(document).find(gbb.selectors.addToCart)
            let checkoutBtnEle = gbb.$(document).find(gbb.selectors.checkoutBtn)

            let buttonToOverRide = gbb.$(addToCartBtnEle).length > 0 ? addToCartBtnEle : checkoutBtnEle;

            if (gbb.settings.app.themeFontFamily == "" && gbb.$("body").length > 0) {
                gbb.settings.app.themeFontFamily = gbb.$("body").css("font-family");
                gbb.$(".gbbPageBody").css("font-family", gbb.settings.app.themeFontFamily);
            }

            if (gbb.settings.app.themeFontFamily && gbb.$("body").length > 0) {
                gbb.$(".gbbPageBody").css("font-family", gbb.settings.app.themeFontFamily);
            }
            //find the font color of the theme
            if (gbb.settings.app.themeFontColor == "" && gbb.$("p").length > 0) {
                gbb.settings.app.themeFontColor = gbb.$("p").css("color");
            }
            //theme background color
            if (gbb.settings.app.themeBackgroundColor == "" && gbb.$("body").length > 0) {
                gbb.settings.app.themeBackgroundColor = gbb.$("body").css("background-color");
            }
            if (gbb.settings.app.themeLabelFontColor == "" && gbb.$("label").length > 0) {
                gbb.settings.app.themeLabelFontColor = gbb.$("label").css("color");
            }
            // themeLabelFontFamily
            if (gbb.settings.app.themeLabelFontFamily == "" && gbb.$("label").length > 0) {
                gbb.settings.app.themeLabelFontFamily = gbb.$("label").css("font-family");
            }
            if (gbb.settings.app.themeButtonBackgroundColor == "" && gbb.$(buttonToOverRide).length > 0) {
                gbb.settings.app.themeButtonBackgroundColor = gbb.$(buttonToOverRide).css("background-color");
            }
            if (gbb.settings.app.themButtonTextColor == "" && gbb.$(buttonToOverRide).length > 0) {
                gbb.settings.app.themButtonTextColor = gbb.$(buttonToOverRide).css("color");
            }
            if (gbb.settings.app.themeButtonBorderColor == "" && gbb.$(buttonToOverRide).length > 0) {
                gbb.settings.app.themeButtonBorderColor = gbb.$(buttonToOverRide).css("border-color");
            }
            //box shadow
            if (gbb.settings.app.themeButtonBoxShadow == "" && gbb.$(buttonToOverRide).length > 0) {
                gbb.settings.app.themeButtonBoxShadow = gbb.$(buttonToOverRide).css("box-shadow");
            }
            // button font family
            if (gbb.settings.app.themeButtonFontFamily == "" && gbb.$(buttonToOverRide).length > 0) {
                gbb.settings.app.themeButtonFontFamily = gbb.$(buttonToOverRide).css("font-family");
            }
            if (gbb.settings.app.themeHeaderFontFamily == "" && gbb.$("h1").length > 0) {
                gbb.settings.app.themeHeaderFontFamily = gbb.$("h1").css("font-family");
            }
            if (gbb.settings.app.themeHeaderFontColor == "" && gbb.$("h1").length > 0) {
                gbb.settings.app.themeHeaderFontColor = gbb.$("h1").css("color");
            }

        },

        applyFontToProductPopupCard: function () {
            if (gbb.settings.app.themeFontFamily == "" && gbb.$("body").length > 0) {
                gbb.settings.app.themeFontFamily = gbb.$("body").css("font-family");
                gbb.$(".gbbProductVariantModalContainer").css("font-family", gbb.settings.app.themeFontFamily);
            }
            if (gbb.settings.app.themeFontFamily && gbb.$("body").length > 0) {
                gbb.$(".gbbProductVariantModalContainer").css("font-family", gbb.settings.app.themeFontFamily);
            }
        },
        applyFontToFiltersSidebar: function () {
            if (gbb.settings.app.themeFontFamily == "" && gbb.$("body").length > 0) {
                gbb.settings.app.themeFontFamily = gbb.$("body").css("font-family");
                gbb.$(".gbbProductsFiltersContainer").css("font-family", gbb.settings.app.themeFontFamily);
            }

            if (gbb.settings.app.themeFontFamily && gbb.$("body").length > 0) {
                gbb.$(".gbbProductsFiltersContainer").css("font-family", gbb.settings.app.themeFontFamily);
            }
        },
        applyFontToFooterCartPopup: function () {
            if (gbb.settings.app.themeFontFamily == "" && gbb.$("body").length > 0) {
                gbb.settings.app.themeFontFamily = gbb.$("body").css("font-family");
                gbb.$(".gbbCartProductsContainerModal").css("font-family", gbb.settings.app.themeFontFamily);
            }

            if (gbb.settings.app.themeFontFamily && gbb.$("body").length > 0) {
                gbb.$(".gbbCartProductsContainerModal").css("font-family", gbb.settings.app.themeFontFamily);
            }
        },
        applyFontToPreparingBundlePopup: function () {
            if (gbb.settings.app.themeFontFamily && gbb.$("body").length > 0) {
                gbb.$(".gbbPreparingBundleContainerModal").css("font-family", gbb.settings.app.themeFontFamily);
            }
        },
        applyFontToUnavailableProductsPopup: function () {
            if (gbb.settings.app.themeFontFamily && gbb.$("body").length > 0) {
                gbb.$(".gbbUnavailableProductsContainerModal").css("font-family", gbb.settings.app.themeFontFamily);
            }
        },
        getSettings: async function () {

            try {
                //promise

                //find the / next to apps from the url

                let url = window.location.href;
                let pathname = window.location.pathname;

                // extract the variable after apps in the url
                try {
                    if (url) {
                        let gbbUrl = url?.split("/apps/")[1];

                        //split it by the next /
                        gbbUrl = gbbUrl.split("/")[0];

                        if (pathname) {
                            //last ele of pathname
                            let eleArr = pathname.split("/");
                            if (eleArr.length > 0) {
                                let lastEle = eleArr[eleArr.length - 1];
                                gbb.state.bundleId = lastEle;
                            }
                        }


                        gbb.state.gbbUrl = gbbUrl;
                    }

                } catch (e) {
                    gbb.utility.debugError(e);
                }

                if (!gbb.state.bundleId) {
                    // lets read it from the query params
                    // from the query params, the key is going to be 
                    // easybundle=1;
                    //and gbbId = gbb or gbb-1 or gbb-2
                    let urlParams = new URLSearchParams(window.location.search);

                    let bundleId = urlParams.get('easybundle');
                    let gbbUrl = urlParams.get('gbbId') || "gbb"

                    if (bundleId && gbbUrl) {
                        gbb.state.bundleId = bundleId;
                        gbb.state.gbbUrl = gbbUrl
                    }

                }


                // gbb.utility.debugConsole("GET setting of giftlab pro fired")
                // return new Promise(function (resolve, reject) {
                //     //  fetch("https://gift101.pagekite.me/api/cartSettings/get?shopName=abhishek-devlopment-store.myshopify.com",{
                // 	// fetch("https://gbb104.pagekite.me/api/cartSettings/get?shopName=staging-testing-107.myshopify.com",{
                // 	// fetch("https://zurakite.pagekite.me/api/cartSettings/get?shopName=rafaths-dev-store.myshopify.com",

                //     // fetch(`apps/${gbbUrl}/getGlobalData`,{


                // })
                if (window.tmpCartSettings2) {
                    return window.tmpCartSettings2 //TBD
                } else {
                    gbb.utility.debugConsole("tmpCartSettings2 not found");
                    let promiseData = await new Promise((resolve, reject) => {

                        fetch(`/apps/${gbb.state.gbbUrl}/getGlobalData?bundleId=${gbb.state.bundleId}`, {
                            method: 'GET',
                        })
                            .then(response => response.json())
                            .then(success => {
                                if (success.responseCode === 200) {
                                    gbb.utility.debugConsole("success-data:", success.data);
                                    resolve(success.data);
                                } else {
                                    reject(new Error("Unexpected response code."));
                                }
                            })
                            .catch(error => {
                                gbb.utility.debugError(error);
                                reject(error);
                            });
                    });
                    return promiseData;
                }
            } catch (e) {
                gbb.utility.debugError(e);
            }


        },
        pageCustomizationInit: function (tmpCartSettings) {
            try {
                let pageCustomizationData = {
                    banners: {
                        landingPageImageSrc: tmpCartSettings.pageCustomizationData.banners.landingPageImageSrc || "https://d3ks0ngva6go34.cloudfront.net/public/banners/landing_page_banner.jpg",
                        pageBannerImageSrc: tmpCartSettings.pageCustomizationData.banners.pageBannerImageSrc || "https://d3ks0ngva6go34.cloudfront.net/public/banners/page_banner.png",
                        productReviewImageSrc: tmpCartSettings.pageCustomizationData.banners.productReviewImageSrc || "https://d3ks0ngva6go34.cloudfront.net/public/banners/review-page_banner.jpg",
                    },
                    colors: {
                        "primaryColor": tmpCartSettings.pageCustomizationData.colors.primaryColor,
                        "secondaryColor": tmpCartSettings.pageCustomizationData.colors.secondaryColor,
                        "textColor": tmpCartSettings.pageCustomizationData.colors.textColor,
                        "disabledColor": tmpCartSettings.pageCustomizationData.colors.disabledColor,
                        "productBox": tmpCartSettings.pageCustomizationData.colors.productBox,
                    },
                    primaryFont: tmpCartSettings.pageCustomizationData.primaryFont,
                    landingPage: {
                        landingPageTextColor: tmpCartSettings.pageCustomizationData.landingPage.landingPageTextColor,
                        landingPageButtonBgColor: tmpCartSettings.pageCustomizationData.landingPage.landingPageButtonBgColor,
                        landingPageButtonTextColor: tmpCartSettings.pageCustomizationData.landingPage.landingPageButtonTextColor,
                    },
                    cartFooter: {
                        cartFooterBgColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterBgColor,
                        cartFooterButtonsContainerBgColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterButtonsContainerBgColor,
                        cartFooterBorderRadius: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterBorderRadius,
                        cartFooterProductImageBorderRadius: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterProductImageBorderRadius,
                        cartFooterButtonsContainerBorderRadius: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterButtonsContainerBorderRadius,
                        cartFooterShowHidePrices: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterShowHidePrices == "Hide" ? "hidden" : "visible",
                        cartFooterTextColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterTextColor,
                        cartFooterStrikethroughPriceColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterDiscountedPriceColor,
                        cartFooterFinalPriceFontColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterFinalPriceFontColor,
                        cartFooterFinalPriceFontThickness: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterFinalPriceFontThickness,
                        cartFooterStrikethroughPriceFontThickness: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterStrikethroughPriceFontThickness,
                        cartFooterBackButtonColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterBackButtonColor,
                        cartFooterBackButtonTextColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterBackButtonTextColor,
                        cartFooterBackButtonBorderColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterBackButtonBorderColor,
                        cartFooterBackButtonBorderThickness: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterBackButtonBorderThickness,
                        cartFooterNextButtonTextColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterNextButtonTextColor,
                        cartFooterNextButtonColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterNextButtonColor,
                        cartFooterNextButtonBorderColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterNextButtonBorderColor,
                        cartFooterNextButtonBorderThickness: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterNextButtonBorderThickness,
                        cartFooterButtonsBorderRadius: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterButtonsBorderRadius,
                        cartFooterButtonsPadding: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterButtonsPadding,
                        cartFooterDiscountTextColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterDiscountTextColor,
                        cartFooterDiscountProgressBarEmptyColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterDiscountProgressBarEmptyColor,
                        cartFooterDiscountProgressBarFilledColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterDiscountProgressBarFilledColor,
                        cartFooterButtonsContainerBgColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterButtonsContainerBgColor,
                        cartFooterDiscountTextVisibility: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterDiscountTextVisibility == "Hide" ? "hidden" : "visible",
                        cartFooterTotalLabelColor: tmpCartSettings?.pageCustomizationData?.cartFooter?.cartFooterTotalLabelColor,
                    },
                    productCard: {
                        productCardBgColor: tmpCartSettings?.pageCustomizationData?.productCard?.productCardBgColor,
                        productCardBorderRadius: tmpCartSettings?.pageCustomizationData?.productCard?.cardBorderRadius,
                        productCardImageBorderRadius: tmpCartSettings?.pageCustomizationData?.productCard?.cardImageBorderRadius,
                        productCardImageFit: tmpCartSettings?.pageCustomizationData?.productCard?.productImageFit,
                        productCardPerRowXtraLargeScreen: tmpCartSettings?.pageCustomizationData?.productCard?.cardsPerRowXL,
                        productCardPerRowLargeScreen: tmpCartSettings?.pageCustomizationData?.productCard?.cardsPerRowL,
                        productCardTextColor: tmpCartSettings?.pageCustomizationData?.productCard?.productCardTextColor,
                        productCardTitleFontSize: tmpCartSettings?.pageCustomizationData?.productCard?.productTitleFontSize,
                        productCardTitleFontWeight: tmpCartSettings?.pageCustomizationData?.productCard?.productTitleFontWeight,
                        productCardFinalPriceVisibility: tmpCartSettings?.pageCustomizationData?.productCard?.productPriceVisibility == "Hide" ? "none" : "block",
                        productCardCompareAtPriceFontColor: tmpCartSettings?.pageCustomizationData?.productCard?.compareAtPriceColor,
                        productCardCompareAtPriceFontSize: tmpCartSettings?.pageCustomizationData?.productCard?.compareAtPriceFontSize,
                        productCardCompareAtPriceFontWeight: tmpCartSettings?.pageCustomizationData?.productCard?.compareAtPriceFontWeight,
                        productCardCompareAtPriceVisibility: tmpCartSettings?.pageCustomizationData?.productCard?.compareAtPriceVisibility == "Hide" ? "none" : "block",
                        productCardFinalPriceFontSize: tmpCartSettings?.pageCustomizationData?.productCard?.finalPriceFontSize,
                        productCardFinalPriceFontColor: tmpCartSettings?.pageCustomizationData?.productCard?.finalPriceFontColor,
                        productCardFinalPriceFontWeight: tmpCartSettings?.pageCustomizationData?.productCard?.finalPriceFontWeight,
                        productCardButtonColor: tmpCartSettings?.pageCustomizationData?.productCard?.productCardButtonColor,
                        productCardButtonTextColor: tmpCartSettings?.pageCustomizationData?.productCard?.productCardButtonTextColor,
                        productCardButtonBorderRadius: tmpCartSettings?.pageCustomizationData?.productCard?.buttonBorderRadius,
                        productCardAllowOnlyOneQuantity: !tmpCartSettings?.pageCustomizationData?.productCard?.allowOnlyOneQuantity ? "block" : "none",
                        productCardQuantitySelectorBgColor: tmpCartSettings?.pageCustomizationData?.productCard?.productCardQuantitySelectorBgColor,// btns wrapper color
                        productCardQuantitySelectorBtnsBgColor: tmpCartSettings?.pageCustomizationData?.productCard?.quantitySelectorBgColor, // btns color
                        productCardQuantitySelectorButtonTextColor: tmpCartSettings?.pageCustomizationData?.productCard?.quantitySelectorButtonTextColor,
                        productCardQuantitySelectorTextColor: tmpCartSettings?.pageCustomizationData?.productCard?.quantitySelectorTextColor,
                        productCardQuantitySelectorBorderRadius: tmpCartSettings?.pageCustomizationData?.productCard?.quantitySelectorButtonBorderRadius,
                    },
                    previewPage: {
                        bannerTextColor: tmpCartSettings?.pageCustomizationData?.productCard?.bannerTextColor,
                    },
                    navigationBanner: {
                        navigationBannerTitleColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationBannerTitleColor,
                        navigationBannerTextColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationBannerTextColor,
                        navigationBannerStepCompletionColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationBannerStepCompletionColor,
                        navigationBannerStepDoneColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationBannerStepDoneColor,
                        navigationBannerStepTextColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationBannerStepTextColor || "",
                        navigationBannerStepProgressBarFilledColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationBannerStepProgressBarFilledColor,
                        navigationBannerStepProgressBarEmptyColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationBannerStepProgressBarEmptyColor,
                        navigationBannerStepTextFontSize: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationBannerStepFontSize,
                        navigationBannerCheckColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationCheckColor,
                        navigationBannerStepCompletedBorderColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationBannerStepCompletedBorderColor,
                        navigationBannerStepCompletedBorderWidth: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationBannerStepCompletedBorderWidth,
                        navigationBannerStepIncompleteBgColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationBannerStepIncompleteBgColor,
                        navigationBannerStepIncompleteBorderColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationBannerStepIncompleteBorderColor,
                        navigationBannerStepIncompleteBorderWidth: tmpCartSettings?.pageCustomizationData?.navigationBanner?.navigationBannerStepIncompleteBorderWidth,
                        navigationBannerTabsActiveBgColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.tabsActiveBgColor,
                        navigationBannerTabsActiveTextColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.tabsActiveTextColor,
                        navigationBannerTabsInactiveBgColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.tabsInactiveBgColor,
                        navigationBannerTabsInactiveTextColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.tabsInactiveTextColor,
                        navigationBannerTabsBorderColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.tabsBorderColor,
                        navigationBannerTabsCornerRadius: tmpCartSettings?.pageCustomizationData?.navigationBanner?.tabsCornerRadius
                    },
                    summaryBlock: {
                        summaryBlockBgColor: tmpCartSettings.pageCustomizationData.summaryBlock.summaryBlockBgColor,
                        summaryBlockTextColor: tmpCartSettings.pageCustomizationData.summaryBlock.summaryBlockTextColor,
                        summaryBlockAddToCartButtonColor: tmpCartSettings.pageCustomizationData.summaryBlock.summaryBlockAddToCartButtonColor,
                        summaryBlockAddToCartButtonTextColor: tmpCartSettings.pageCustomizationData.summaryBlock.summaryBlockAddToCartButtonTextColor,
                        summaryBlockBackButtonColor: tmpCartSettings.pageCustomizationData.summaryBlock.summaryBlockBackButtonColor,
                        summaryBlockBackButtonTextColor: tmpCartSettings.pageCustomizationData.summaryBlock.summaryBlockBackButtonTextColor,
                    },
                    categoryBlock: {
                        categoryBgColor: tmpCartSettings.pageCustomizationData?.categoryBlock?.categoryBgColor,
                        tabActiveBgColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.tabsActiveBgColor || tmpCartSettings.pageCustomizationData?.categoryBlock?.tabActiveBgColor,
                        tabActiveTextColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.tabsActiveTextColor || tmpCartSettings.pageCustomizationData?.categoryBlock?.tabActiveTextColor,
                        tabInactiveBgColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.tabsInactiveBgColor || tmpCartSettings.pageCustomizationData?.categoryBlock?.tabInactiveBgColor,
                        tabInactiveTextColor: tmpCartSettings?.pageCustomizationData?.navigationBanner?.tabsInactiveTextColor || tmpCartSettings.pageCustomizationData?.categoryBlock?.tabInactiveTextColor,
                    },
                    quickSettings: {
                        isQuickSettingsEnabled: true,
                        colors: {
                            primaryColor: tmpCartSettings.pageCustomizationData?.quickSettings?.colors?.primaryColor,
                            buttonBgColor: tmpCartSettings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor,
                            buttonTextColor: tmpCartSettings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor,
                        }
                    },
                    generalSettings: {
                        conditionToast: {
                            conditionToastBgColor: tmpCartSettings.pageCustomizationData?.generalSettings?.conditionToastBgColor || tmpCartSettings.pageCustomizationData?.generalSettings?.conditionToast?.conditionToastBgColor,
                            conditionToastTextColor: tmpCartSettings.pageCustomizationData?.generalSettings?.conditionToastTextColor || tmpCartSettings.pageCustomizationData?.generalSettings?.conditionToast?.conditionToastTextColor,
                        },
                        scrollBar: {
                            scrollBarColor: tmpCartSettings.pageCustomizationData?.generalSettings?.scrollBarColor || tmpCartSettings.pageCustomizationData?.generalSettings?.scrollBar?.scrollBarColor || "black",
                        },
                        icon: {
                            iconTextColor: tmpCartSettings.pageCustomizationData?.generalSettings?.iconTextColor || tmpCartSettings.pageCustomizationData?.generalSettings?.icon?.iconTextColor || false,
                            iconBgColor: tmpCartSettings.pageCustomizationData?.generalSettings?.iconBgColor || tmpCartSettings.pageCustomizationData?.generalSettings?.icon?.iconBgColor || false,
                            iconColor: tmpCartSettings.pageCustomizationData?.generalSettings?.iconColor || tmpCartSettings.pageCustomizationData?.generalSettings?.icon?.iconColor || false
                        },
                        productPage: {
                            productPageTitleColor: tmpCartSettings.pageCustomizationData?.generalSettings?.productPageTitleColor || tmpCartSettings.pageCustomizationData?.generalSettings?.productPage?.productPageTitleColor || ""
                        },
                        bundle: {
                            bundleBgColor: tmpCartSettings.pageCustomizationData?.generalSettings?.bundleBgColor || tmpCartSettings.pageCustomizationData?.generalSettings?.bundle?.bundleBgColor || null,
                            applyNewPageCustomization: tmpCartSettings.pageCustomizationData?.generalSettings?.applyNewPageCustomization || false
                        }

                    },

                }
                return pageCustomizationData
            } catch (error) {
                gbb.utility.debugError("error in pageCustomizationInit", error);
            }
        },
        setSettings: function (tmpCartSettings) {

            tmpCartSettings = gbb.f.modifySettings(tmpCartSettings)

            var cart_settings = {
                pageCustomizationData: gbb.f.pageCustomizationInit(tmpCartSettings),
                giftwrap: {
                    isGiftWrapEnabled: tmpCartSettings.stepsConfigurationData?.personalizationData?.giftwrap?.isGiftWrapEnabled || false,
                    isGiftWrapEnabledOnPage: tmpCartSettings.stepsConfigurationData?.personalizationData?.giftwrap?.isGiftWrapEnabledOnPage || false,
                    productId: tmpCartSettings.stepsConfigurationData.personalizationData?.giftwrap?.giftwrapProduct?.productId || "",
                    productHandle: tmpCartSettings.stepsConfigurationData.personalizationData?.giftwrap?.giftwrapProduct?.handle || "",
                    productVariants: tmpCartSettings.stepsConfigurationData.personalizationData?.giftwrap?.giftwrapProduct?.variants || [],
                    giftWrapShopifyImgUrl: tmpCartSettings.stepsConfigurationData.personalizationData?.giftwrap?.giftwrapProduct?.images[0]?.src,
                },
                greetingCard: {
                    isGreetingCardEnabled: tmpCartSettings.stepsConfigurationData.personalizationData?.greetingCard?.isGreetingCardEnabled || false,
                    greetingCardProducts: tmpCartSettings.stepsConfigurationData.personalizationData?.greetingCard?.products || [],
                    productId: tmpCartSettings.stepsConfigurationData.personalizationData?.greetingCard?.greetingCardProduct?.productId || "",
                    productHandle: tmpCartSettings.stepsConfigurationData.personalizationData?.greetingCard?.greetingCardProduct?.handle || "",
                    productVariants: tmpCartSettings.stepsConfigurationData.personalizationData?.greetingCard?.greetingCardProduct?.variants || {},
                },
                giftMessage: tmpCartSettings.stepsConfigurationData.personalizationData?.giftMessage || {},
                customerUploads: tmpCartSettings.stepsConfigurationData.personalizationData?.customerUploads || {},
                videoMessage: tmpCartSettings.stepsConfigurationData.personalizationData?.giftMessage || {},
                giftAddons: tmpCartSettings.stepsConfigurationData.personalizationData?.giftAddons || {},
                scheduleDelivery: tmpCartSettings.stepsConfigurationData.personalizationData?.scheduleDelivery || {},
                addonProducts:gbb.gbbAddonProducts.f.addonProductsInit(tmpCartSettings),
                // deliveryScheduler: tmpCartSettings.stepsConfigurationData.personalizationData?.deliveryScheduler || {},

                stepsConfigurationData: tmpCartSettings.stepsConfigurationData || {},
                discountsData: tmpCartSettings.discountsData || {},
                //TODO: remove server url from here and also remove http in fetch call
                SERVER_URL: tmpCartSettings?.userData.SERVER_URL || "localhost:3001",
                app: {
                    disableApp: tmpCartSettings.userData.customSettings.disableApp || false,
                    disableSideCart: tmpCartSettings.userData.customSettings.disableSideCart || false,
                    refreshProductPageOnGiftWrap: tmpCartSettings.userData.customSettings.refreshProductPageOnGiftWrap || false,
                    addToCartBtnSelectors: tmpCartSettings.userData.customSettings.addToCartBtnSelectors || DEFAULT_addToCartBtnSelectorsApp4,
                    checkoutBtnSelectors: tmpCartSettings.userData.customSettings.checkoutBtnSelectors || DEFAULT_checkoutBtnSelectorsApp4,
                    quantityBtnSelectors: tmpCartSettings.userData.customSettings.quantityBtnSelectors || DEFAULT_quantityBtnSelectorsApp4,
                    sideCartSelectors: tmpCartSettings.userData.customSettings.sideCartSelectors || DEFAULT_sideCartSelectorsApp4,
                    themeBackgroundColor: tmpCartSettings.userData.customSettings.themeBackgroundColor || "",

                    //themeFontFamily: tmpCartSettings.userData.customSettings.themeFontFamily || "",
                    themeFontFamily: tmpCartSettings.pageCustomizationData.primaryFont || "",
                    themeFontColor: tmpCartSettings.userData.customSettings.themeFontColor || "",

                    themeButtonBackgroundColor: tmpCartSettings.userData.customSettings.themeButtonBackgroundColor || "",
                    themButtonTextColor: tmpCartSettings.userData.customSettings.themButtonTextColor || "",
                    themeButtonBorderColor: tmpCartSettings.userData.customSettings.themeButtonBorderColor || "",
                    themeButtonBoxShadow: tmpCartSettings.userData.customSettings.themeButtonBoxShadow || "",
                    //button font family
                    themeButtonFontFamily: tmpCartSettings.userData.customSettings.themeButtonFontFamily || "",

                    themeHeaderFontFamily: tmpCartSettings.userData.customSettings.themeHeaderFontFamily || "",
                    themeHeaderFontColor: tmpCartSettings.userData.customSettings.themeHeaderFontColor || "",

                    themeLabelFontColor: tmpCartSettings.userData.customSettings.themeLabelFontColor || "",
                    themeLabelFontFamily: tmpCartSettings.userData.customSettings.themeLabelFontFamily || "",

                    buyNowBtn: tmpCartSettings.userData.customSettings.buyNowBtn || DEFAULT_buyNowBtnApp4,
                    cartForm: tmpCartSettings.userData.customSettings.cartForm || DEFAULT_cartFormApp4,
                    addAfterAddTocartBtn: tmpCartSettings.userData.customSettings.addAfterAddTocartBtn || false,
                    addAftercheckoutBtn: tmpCartSettings.userData.customSettings.addAftercheckoutBtn || false,
                    customStyle: tmpCartSettings.userData.customSettings.customStyle || null,

                    scheduleDeliveryPickerSelector: tmpCartSettings.userData.customSettings.scheduleDeliveryPickerSelector || DEFAULT_scheduleDeliveryPickerSelector,

                    redirectUrlForCheckoutBtn: tmpCartSettings.userData?.customSettings?.redirectUrlForCheckoutBtn ? window.location.origin + tmpCartSettings.userData.customSettings.redirectUrlForCheckoutBtn : window.location.origin + "/cart/checkout",
                    redirectToScript: tmpCartSettings.userData?.customSettings?.redirectToScript ? tmpCartSettings.userData.customSettings.redirectToScript : "",
                    redirectToCheckoutEnabled: tmpCartSettings.userData?.customSettings?.redirectToCheckoutEnabled ? tmpCartSettings.userData.customSettings.redirectToCheckoutEnabled : false,
                    redirectToCartEnabled: tmpCartSettings.userData?.customSettings?.redirectToCartEnabled ? tmpCartSettings.userData.customSettings.redirectToCartEnabled : false,

                    loadingBgColor: tmpCartSettings.userData?.customSettings?.loadingBgColor ? tmpCartSettings.userData.customSettings.loadingBgColor : "#ffffff",
                    stackDiscounts: tmpCartSettings.userData?.customSettings?.stackDiscounts ? tmpCartSettings.userData.customSettings.stackDiscounts : false,
                    // isInfiniteScrollEnabled: tmpCartSettings.userData?.customSettings?.isInfiniteScrollEnabled ? tmpCartSettings.userData.customSettings.isInfiniteScrollEnabled : false,
                    isInfiniteScrollEnabled: true,
                    // conditionalLogicFilterOnFirstPageAswell: tmp
                    productHandlesAreTranslated: tmpCartSettings.userData?.customSettings?.productHandlesAreTranslated ? tmpCartSettings.userData.customSettings.productHandlesAreTranslated : false,
                    addGiftMessageToNote: tmpCartSettings.userData?.customSettings?.addGiftMessageToNote ? tmpCartSettings.userData.customSettings.addGiftMessageToNote : false,
                    addBoxQuantityToProperties: tmpCartSettings.userData?.customSettings?.addBoxQuantityToProperties ? tmpCartSettings.userData.customSettings.addBoxQuantityToProperties : false,
                    enableStoreFrontGQLAPI: localStorage?.getItem("enableSF") || tmpCartSettings.userData?.customSettings?.enableStoreFrontGQLAPI || false,
                    dynamicScriptForHTMLContent: tmpCartSettings.userData?.customSettings?.dynamicScriptForHTMLContent || "",
                    integrations: {
                        judgeme: {
                            isEnabled: tmpCartSettings.userData.customSettings?.integrations?.judgeme?.isEnabled || false,
                            public_token: tmpCartSettings.userData.customSettings?.integrations?.judgeme?.public_token || "",
                        }
                    },
                },
                bundleSettings: {
                    ...tmpCartSettings.userData.bundleSettings,
                    metafieldNameSpaceAndKeys: tmpCartSettings.userData.bundleSettings?.metafieldNameSpaceAndKeys || [],
                    conditionalLogicFilterOnFirstPageAswell: tmpCartSettings.userData.bundleSettings?.conditionalLogicFilterOnFirstPageAswell || false,
                    builderPageSeoData: tmpCartSettings.userData.bundleSettings?.builderPageSeoData || [],
                    removeUnUsedVariantImages: tmpCartSettings.userData?.bundleSettings?.removeUnUsedVariantImages ? tmpCartSettings.userData.bundleSettings.removeUnUsedVariantImages : false,
                    isGiftMessageVirtualProduct: tmpCartSettings.userData.bundleSettings?.isGiftMessageVirtualProduct || false,
                    isValidateInventoryEnabled: tmpCartSettings.userData.bundleSettings?.isValidateInventoryEnabled || false,
                    showCategoryNamesInLineItem: tmpCartSettings.userData.bundleSettings?.showCategoryNamesInLineItem || false
                },
                merchantInfo: tmpCartSettings.userData,
                languageData: tmpCartSettings.languageData,
                STOREFRONT_ACCESS_TOKEN: tmpCartSettings.userData.storefrontAccessToken,
                gbbKiteData: tmpCartSettings.gbbKiteData || null
            }



            gbb.settings = cart_settings
            gbb.state.bundleName = gbb.settings.stepsConfigurationData?.bundleName || ""
            // gbb.utility.debugConsole("settings assigned")
            gbb.f.initializeQtyIncrementDecrement()
        },
        initializeQtyIncrementDecrement: function () {
            try {
                const { stepsConfigurationData, bundleSettings } = gbb.settings || {};
                const state = gbb.gbbAddProductsPage.state;

                if (stepsConfigurationData && stepsConfigurationData.incrementProductQtyBy > 0 && stepsConfigurationData.decrementProductQtyBy > 0) {
                    state.incrementProductQtyBy = stepsConfigurationData.incrementProductQtyBy;
                    state.decrementProductQtyBy = stepsConfigurationData.decrementProductQtyBy;
                } else if (bundleSettings && bundleSettings.incrementProductQtyBy > 0 && bundleSettings.decrementProductQtyBy > 0) {
                    state.incrementProductQtyBy = bundleSettings.incrementProductQtyBy;
                    state.decrementProductQtyBy = bundleSettings.decrementProductQtyBy;
                }
            } catch (error) {
                gbb.utility.debugError("error in initializeQtyIncrementDecrement", error);
            }
        },
        prefetchData: async function () {
            // gbb.utility.debugConsole("prefetchData")
            console.time("prefetchData")
            gbb.settings.shopifyData = {};
            //fetch data from shopify which will use handle to fetch data
            const settings = gbb.settings;
            let greetingCardProductPromise, giftWrapProductPromise, giftMessagePromise, productsDataPromise, productsData1Promise, productsData2Promise, productsData3Promise, productsData4Promise, giftAddonsProductsPromise, multipleCategoriesPromise, defaultProductsDataPromise, addonProductsPromise;
            //greetingCard.greetingCardProduct -> isGreetingCardEnabled
            //fetch data from shopify for greeting card product which will be called only if isGreetingCardEnabled is true
            if (gbb.settings.greetingCard.isGreetingCardEnabled) {
                const products = gbb.settings.greetingCard.greetingCardProducts ? gbb.settings.greetingCard.greetingCardProducts : [];
                const listOfHandles = products.map(product => product.handle);
                let listOfProductIds = products.map(product => product.productId);
                let fetchOptions = { listOfProductIds }

                greetingCardProductPromise = gbb.utility.getProductsBulkForRelevantVariants(listOfHandles, products, fetchOptions);
            }

            if (gbb.settings.giftMessage.messageProduct?.isMessageProductEnabled) {
                giftMessagePromise = gbb.utility.getProductDataV2(settings.giftMessage.messageProduct?.product?.handle || settings.giftMessage?.messageProduct?.product?.productHandle)
            }


            // giftwrap.giftwrapProduct -> isGiftWrapEnabled

            if (gbb.settings.giftwrap.isGiftWrapEnabled) {
                giftWrapProductPromise = gbb.utility.getProductDataV2(settings.giftwrap.giftwrapProduct?.handle || settings.giftwrap.productHandle)
            }

            // giftAddons.addOnProducts[] -> isGiftAddonsEnabled




            if (gbb.settings?.giftAddons?.isGiftAddonsEnabled) {
                const products = gbb.settings.giftAddons.addOnProducts;
                const listOfHandles = products.map(product => product.handle);
                let listOfProductIds = products.map(product => product.productId);
                let fetchOptions = { listOfProductIds }

                giftAddonsProductsPromise = gbb.utility.getProductsBulkForRelevantVariants(listOfHandles, products, fetchOptions);
                //giftAddonsProductsPromise = gbb.utility.getProductsBulk(settings.giftAddons.addOnProducts.map(product => product.handle))
            }

            //insert here
            if (gbb.settings?.stepsConfigurationData?.defaultProductsData?.isDefaultProductsEnabled && gbb.settings?.stepsConfigurationData?.defaultProductsData?.products?.length > 0) {
                const products = gbb.settings?.stepsConfigurationData?.defaultProductsData?.products;
                const listOfHandles = products.map(product => product.handle);
                let listOfProductIds = products.map(product => product.productId);
                let fetchOptions = { listOfProductIds }

                defaultProductsDataPromise = gbb.utility.getProductsBulkForRelevantVariants(listOfHandles, products, fetchOptions);
            }

            let fetchsixtyProductsEachStep = []
            let fetchsixtyProductsEachStepByProductId = [];
            if (gbb.settings.stepsConfigurationData?.productsData1?.isProductsEnabled &&
                gbb.settings.stepsConfigurationData?.productsData1?.uniqueProductsData &&
                gbb.settings.stepsConfigurationData?.productsData1?.uniqueProductsData?.length > 0) {
                let uniqueProductsData = gbb.settings.stepsConfigurationData?.productsData1?.uniqueProductsData

                let fetchLimit = 50
                if (gbb.settings.stepsConfigurationData?.productsData1?.pageType == "MULTIPLE_CATEGORY") {
                    fetchLimit = 200
                }
                for (let i = 0; i < Math.min(uniqueProductsData.length, fetchLimit); i += 1) {
                    fetchsixtyProductsEachStep.push(uniqueProductsData[i].handle);
                    fetchsixtyProductsEachStepByProductId.push(uniqueProductsData[i].productId)
                }
            }

            if (gbb.settings.stepsConfigurationData?.productsData2?.isProductsEnabled &&
                gbb.settings.stepsConfigurationData?.productsData2?.uniqueProductsData &&
                gbb.settings.stepsConfigurationData?.productsData2?.uniqueProductsData?.length > 0) {
                let uniqueProductsData = gbb.settings.stepsConfigurationData?.productsData2?.uniqueProductsData
                let fetchLimit = 50
                if (gbb.settings.stepsConfigurationData?.productsData2?.pageType == "MULTIPLE_CATEGORY") {
                    fetchLimit = 200
                }
                for (let i = 0; i < Math.min(uniqueProductsData.length, fetchLimit); i += 1) {
                    fetchsixtyProductsEachStep.push(uniqueProductsData[i].handle);
                    fetchsixtyProductsEachStepByProductId.push(uniqueProductsData[i].productId)

                }
            }
            if (gbb.settings.stepsConfigurationData?.productsData3?.isProductsEnabled &&
                gbb.settings.stepsConfigurationData?.productsData3?.uniqueProductsData &&
                gbb.settings.stepsConfigurationData?.productsData3?.uniqueProductsData?.length > 0) {
                let uniqueProductsData = gbb.settings.stepsConfigurationData?.productsData3?.uniqueProductsData
                let fetchLimit = 50
                if (gbb.settings.stepsConfigurationData?.productsData3?.pageType == "MULTIPLE_CATEGORY") {
                    fetchLimit = 200
                }
                for (let i = 0; i < Math.min(uniqueProductsData.length, fetchLimit); i += 1) {
                    fetchsixtyProductsEachStep.push(uniqueProductsData[i].handle);
                    fetchsixtyProductsEachStepByProductId.push(uniqueProductsData[i].productId)
                }
            }
            if (gbb.settings.stepsConfigurationData?.productsData4?.isProductsEnabled &&
                gbb.settings.stepsConfigurationData?.productsData4?.uniqueProductsData &&
                gbb.settings.stepsConfigurationData?.productsData4?.uniqueProductsData?.length > 0) {
                let uniqueProductsData = gbb.settings.stepsConfigurationData?.productsData4?.uniqueProductsData
                let fetchLimit = 50
                if (gbb.settings.stepsConfigurationData?.productsData4?.pageType == "MULTIPLE_CATEGORY") {
                    fetchLimit = 200
                }
                for (let i = 0; i < Math.min(uniqueProductsData.length, fetchLimit); i += 1) {
                    fetchsixtyProductsEachStep.push(uniqueProductsData[i].handle);
                    fetchsixtyProductsEachStepByProductId.push(uniqueProductsData[i].productId)
                }
            }
            if (gbb.settings.stepsConfigurationData?.productsData5?.isProductsEnabled &&
                gbb.settings.stepsConfigurationData?.productsData5?.uniqueProductsData &&
                gbb.settings.stepsConfigurationData?.productsData5?.uniqueProductsData?.length > 0) {
                let uniqueProductsData = gbb.settings.stepsConfigurationData?.productsData5?.uniqueProductsData
                let fetchLimit = 50
                if (gbb.settings.stepsConfigurationData?.productsData5?.pageType == "MULTIPLE_CATEGORY") {
                    fetchLimit = 200
                }
                for (let i = 0; i < Math.min(uniqueProductsData.length, fetchLimit); i += 1) {
                    fetchsixtyProductsEachStep.push(uniqueProductsData[i].handle);
                    fetchsixtyProductsEachStepByProductId.push(uniqueProductsData[i].productId)

                }
            }
            if (gbb.settings.stepsConfigurationData?.productsData6?.isProductsEnabled &&
                gbb.settings.stepsConfigurationData?.productsData6?.uniqueProductsData &&
                gbb.settings.stepsConfigurationData?.productsData6?.uniqueProductsData?.length > 0) {
                let uniqueProductsData = gbb.settings.stepsConfigurationData?.productsData6?.uniqueProductsData
                let fetchLimit = 50
                if (gbb.settings.stepsConfigurationData?.productsData6?.pageType == "MULTIPLE_CATEGORY") {
                    fetchLimit = 200
                }
                for (let i = 0; i < Math.min(uniqueProductsData.length, fetchLimit); i += 1) {
                    fetchsixtyProductsEachStep.push(uniqueProductsData[i].handle);
                    fetchsixtyProductsEachStepByProductId.push(uniqueProductsData[i].productId)

                }
            }
            if (gbb.settings.stepsConfigurationData?.productsData7?.isProductsEnabled &&
                gbb.settings.stepsConfigurationData?.productsData7?.uniqueProductsData &&
                gbb.settings.stepsConfigurationData?.productsData7?.uniqueProductsData?.length > 0) {
                let uniqueProductsData = gbb.settings.stepsConfigurationData?.productsData7?.uniqueProductsData
                let fetchLimit = 50
                if (gbb.settings.stepsConfigurationData?.productsData7?.pageType == "MULTIPLE_CATEGORY") {
                    fetchLimit = 200
                }
                for (let i = 0; i < Math.min(uniqueProductsData.length, fetchLimit); i += 1) {
                    fetchsixtyProductsEachStep.push(uniqueProductsData[i].handle);
                    fetchsixtyProductsEachStepByProductId.push(uniqueProductsData[i].productId)

                }
            }
            if (gbb.settings.stepsConfigurationData?.productsData8?.isProductsEnabled &&
                gbb.settings.stepsConfigurationData?.productsData8?.uniqueProductsData &&
                gbb.settings.stepsConfigurationData?.productsData8?.uniqueProductsData?.length > 0) {
                let uniqueProductsData = gbb.settings.stepsConfigurationData?.productsData8?.uniqueProductsData
                let fetchLimit = 50
                if (gbb.settings.stepsConfigurationData?.productsData8?.pageType == "MULTIPLE_CATEGORY") {
                    fetchLimit = 200
                }
                for (let i = 0; i < Math.min(uniqueProductsData.length, fetchLimit); i += 1) {
                    fetchsixtyProductsEachStep.push(uniqueProductsData[i].handle);
                    fetchsixtyProductsEachStepByProductId.push(uniqueProductsData[i].productId)

                }
            }
            if (gbb.settings.stepsConfigurationData?.productsData9?.isProductsEnabled &&
                gbb.settings.stepsConfigurationData?.productsData9?.uniqueProductsData &&
                gbb.settings.stepsConfigurationData?.productsData9?.uniqueProductsData?.length > 0) {
                let uniqueProductsData = gbb.settings.stepsConfigurationData?.productsData9?.uniqueProductsData
                let fetchLimit = 50
                if (gbb.settings.stepsConfigurationData?.productsData9?.pageType == "MULTIPLE_CATEGORY") {
                    fetchLimit = 200
                }
                for (let i = 0; i < Math.min(uniqueProductsData.length, fetchLimit); i += 1) {
                    fetchsixtyProductsEachStep.push(uniqueProductsData[i].handle);
                    fetchsixtyProductsEachStepByProductId.push(uniqueProductsData[i].productId)

                }
            }

            if (gbb.settings.stepsConfigurationData?.productsData10?.isProductsEnabled &&
                gbb.settings.stepsConfigurationData?.productsData10?.uniqueProductsData &&
                gbb.settings.stepsConfigurationData?.productsData10?.uniqueProductsData?.length > 0) {
                let uniqueProductsData = gbb.settings.stepsConfigurationData?.productsData10?.uniqueProductsData
                let fetchLimit = 50
                if (gbb.settings.stepsConfigurationData?.productsData10?.pageType == "MULTIPLE_CATEGORY") {
                    fetchLimit = 200
                }
                for (let i = 0; i < Math.min(uniqueProductsData.length, fetchLimit); i += 1) {
                    fetchsixtyProductsEachStep.push(uniqueProductsData[i].handle);
                    fetchsixtyProductsEachStepByProductId.push(uniqueProductsData[i].productId)

                }
            }

            if (gbb.settings.stepsConfigurationData?.productsData11?.isProductsEnabled &&
                gbb.settings.stepsConfigurationData?.productsData11?.uniqueProductsData &&
                gbb.settings.stepsConfigurationData?.productsData11?.uniqueProductsData?.length > 0) {
                let uniqueProductsData = gbb.settings.stepsConfigurationData?.productsData11?.uniqueProductsData

                let fetchLimit = 50
                if (gbb.settings.stepsConfigurationData?.productsData11?.pageType == "MULTIPLE_CATEGORY") {
                    fetchLimit = 200
                }
                for (let i = 0; i < Math.min(uniqueProductsData.length, fetchLimit); i += 1) {
                    fetchsixtyProductsEachStep.push(uniqueProductsData[i].handle);
                    fetchsixtyProductsEachStepByProductId.push(uniqueProductsData[i].productId)

                }
            }
            if (gbb.settings.stepsConfigurationData?.productsData12?.isProductsEnabled &&
                gbb.settings.stepsConfigurationData?.productsData12?.uniqueProductsData &&
                gbb.settings.stepsConfigurationData?.productsData12?.uniqueProductsData?.length > 0) {
                let uniqueProductsData = gbb.settings.stepsConfigurationData?.productsData12?.uniqueProductsData
                let fetchLimit = 50
                if (gbb.settings.stepsConfigurationData?.productsData12?.pageType == "MULTIPLE_CATEGORY") {
                    fetchLimit = 200
                }
                for (let i = 0; i < Math.min(uniqueProductsData.length, fetchLimit); i += 1) {
                    fetchsixtyProductsEachStep.push(uniqueProductsData[i].handle);
                    fetchsixtyProductsEachStepByProductId.push(uniqueProductsData[i].productId)

                }
            }


            if (gbb.settings.app.enableStoreFrontGQLAPI) {
                // gbb.utility.getcachedProductDataForGraphql(fetchsixtyProductsEachStepByProductId);
            } else {
                gbb.utility.getcachedProductData(fetchsixtyProductsEachStep)
            }


            if (gbb.settings?.stepsConfigurationData?.multipleCategoriesData?.isMultipleCategoriesEnabled && gbb.settings?.stepsConfigurationData?.multipleCategoriesData?.categories) {
                gbb.settings.stepsConfigurationData.multipleCategoriesData.categories = Object.values(gbb.settings?.stepsConfigurationData?.multipleCategoriesData?.categories)

                for (let i = 0; i < gbb.settings?.stepsConfigurationData?.multipleCategoriesData?.categories.length; i++) {
                    const item = gbb.settings?.stepsConfigurationData?.multipleCategoriesData?.categories[i];
                    let products = item.products
                    let tempArr = [];
                    let additionalProducts = [];
                    let resObj = await gbb.utility.getProductsFromCollections(item.collectionsData);
                    if (resObj && resObj.length > 0) {
                        additionalProducts = resObj;
                    }
                    if (additionalProducts && additionalProducts.length > 0) {
                        products.push(...additionalProducts);
                    }
                    products = products.filter((product) => {
                        if (product) {
                            return product;
                        }
                    })
                    let listOfHandles = products.map(product => product.handle)
                    let listOfProductIds = products.map(product => product.productId)
                    let fetchOptions = { listOfProductIds }

                    tempArr.push(gbb.utility.getProductsBulkForRelevantVariants(listOfHandles, products, fetchOptions));

                    let allData = await Promise.all(tempArr)
                    allData = Object.values(allData[0]);

                    gbb.utility.setMapForVariantId(allData);


                    gbb.settings.stepsConfigurationData.multipleCategoriesData.categories[i].dataFromShopify = [
                        ...allData
                    ]
                }
            }

            // addon code changes - Dec '24 
            if (gbb.settings.addonProducts?.isEnabled) {
                let productHandlesArray = []
                let productIdsArray = []
                let products = []
                let tiersToMap = gbb.settings.addonProducts?.tiers || []
                for (let i = 0; i < tiersToMap.length; i++) {
                    let currentTier = tiersToMap[i]
                    let selectedAddonProducts = currentTier.selectedAddonProducts || []
                    selectedAddonProducts.forEach((addonProduct) => {
                        // making this extensive where we are avoiding duplicates
                        if (productHandlesArray.includes(addonProduct.handle)) {
                            //skip -
                            // continue the loop 
                            return
                        }
                        products.push(addonProduct)
                        productHandlesArray.push(addonProduct.handle)
                        productIdsArray.push(addonProduct.productId || addonProduct.id)
                    })
                }
                let fetchOptions = { listOfProductIds: productIdsArray }
                addonProductsPromise = gbb.utility.getProductsBulkForRelevantVariants(productHandlesArray, products, fetchOptions);//remove await 
            }

            let [greetingCardData, giftWrapData, giftMessageData,
                giftAddonsData, multipleCategoriesData, defaultProductsData, addonProductsData]
                =
                await Promise.all([greetingCardProductPromise, giftWrapProductPromise, giftMessagePromise, giftAddonsProductsPromise,
                    multipleCategoriesPromise, defaultProductsDataPromise, addonProductsPromise]);

            //assign data to global variable
            gbb.settings.shopifyData = {
                ...gbb.settings.shopifyData,
                greetingCardData: greetingCardData,
                giftWrapData: giftWrapData,
                giftMessageData: giftMessageData,
                giftAddonsData: giftAddonsData,
                multipleCategoriesData: gbb.settings?.stepsConfigurationData?.multipleCategoriesData,
                defaultProductsData: defaultProductsData,
                addonProductsData: addonProductsData
            }
            if (addonProductsData) {
                gbb.gbbAddonProducts.f.setPrefetchedAddonsData(addonProductsData)
                gbb.gbbAddonProducts.state.productsShopifyData = addonProductsData
                // gbb.utility.setMapForVariantId(addonProductsData);
                gbb.gbbAddonProducts.f.setMapForVariantId_addons(addonProductsData)
            }
            if (greetingCardData) {
                let extraInfo = {
                    shouldVariantTitleBeConvertedToProductTitle: false
                }
                gbb.utility.setMapForVariantId(greetingCardData, extraInfo);
            }

            if (giftWrapData) {
                let giftWrapDataObj = {};
                giftWrapDataObj[giftWrapData.handle] = giftWrapData;
                gbb.utility.setMapForVariantId(giftWrapDataObj);
            }

            if (giftMessageData) {
                //convert the giftMessageData to an object
                //with the key as the handle
                let giftMessageDataObj = {};
                giftMessageDataObj[giftMessageData.handle] = giftMessageData;
                gbb.utility.setMapForVariantId(giftMessageDataObj);
            }

            // if (giftAddonsData) {
            //     gbb.utility.setMapForVariantId(giftAddonsData);
            // }

            if (defaultProductsData) {
                gbb.utility.setMapForVariantId(defaultProductsData);
            }


            console.timeEnd("prefetchData")

        },
        setNavigationItems: function () {
            let navigationItems = [];
            if (gbb.settings?.stepsConfigurationData?.landingPageData?.isLandingPageEnabled) {
                navigationItems.push({
                    "id": "landingPage",
                    "rank": 1,
                    "text": "Landing Page",
                    "isActive": false,
                    "src": "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbLandingPage.init,
                    "isNavBarItem": false
                    // "showFn": glpro.glproGiftWrap.action.show,
                    // "hideFn": glpro.glproGiftWrap.action.hide,
                })
            }
            //only push this in router pages
            if (gbb.settings?.stepsConfigurationData?.productsData1?.isProductsEnabled) {
                let navigationItem = {
                    "id": "addProductsPage1",
                    "rank": 2,
                    "text": gbb.settings?.stepsConfigurationData?.productsData1?.productPageStepText || "",
                    "isActive": false,
                    "src": gbb.settings?.stepsConfigurationData.productsData1?.stepImage ? gbb.settings?.stepsConfigurationData.productsData1?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbAddProductsPage.initPage1,
                    "showFn": gbb.gbbAddProductsPage.action.showPage1,
                    "prefetchFn": gbb.gbbAddProductsPage.prefetchDataPage1,
                    "isNavBarItem": true,
                    "updatePageStatusFn": gbb.gbbAddProductsPage.updatePageStatus,
                }
                navigationItems.push(navigationItem)
            }
            if (gbb.settings?.stepsConfigurationData?.productsData2?.isProductsEnabled) {
                let navigationItem = {
                    "id": "addProductsPage2",
                    "rank": 3,
                    "text": gbb.settings?.stepsConfigurationData?.productsData2?.productPageStepText || "",
                    "isActive": false,
                    "src": gbb.settings?.stepsConfigurationData.productsData2?.stepImage ? gbb.settings?.stepsConfigurationData.productsData2?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbAddProductsPage.initPage2,
                    "prefetchFn": gbb.gbbAddProductsPage.prefetchDataPage2,
                    "intialFetchFn": gbb.gbbAddProductsPage.intialFetchForPage2,
                    "showFn": gbb.gbbAddProductsPage.action.showPage2,

                    "isNavBarItem": true,
                    "updatePageStatusFn": gbb.gbbAddProductsPage.updatePageStatus,
                    // "initFn": glpro.glproGiftWrap.init,
                    // "showFn": glpro.glproGiftWrap.action.show,
                    // "hideFn": glpro.glproGiftWrap.action.hide,
                }
                navigationItems.push(navigationItem)
            }
            // if (gbb.settings?.stepsConfigurationData?.multipleCategoriesData?.isMultipleCategoriesEnabled) {
            //     let navigationItem = {
            //         "id": "multipleCategoriesPage",
            //         "rank": 4,
            //         "text": gbb.settings?.stepsConfigurationData?.multipleCategoriesData?.multipleCategoriesStepText || "",
            //         "isActive": false,
            //         "src": gbb.settings.stepsConfigurationData.multipleCategoriesData?.stepImage ? gbb.settings?.stepsConfigurationData?.multipleCategoriesData?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
            //         "isCompleted": false,
            //         "initFn": gbb.gbbMultipleCategoriesPage.init,
            //         "isNavBarItem": true,
            //         "updatePageStatusFn": gbb.gbbMultipleCategoriesPage.updatePageStatus,
            //         // "initFn": glpro.glproGiftWrap.init,
            //         "showFn": gbb.gbbMultipleCategoriesPage.action.showMultipleCategoriesPage,
            //         // "hideFn": glpro.glproGiftWrap.action.hide,
            //     }
            //     navigationItems.push(navigationItem)
            // }
            if (gbb.settings?.stepsConfigurationData?.productsData3?.isProductsEnabled) {
                let navigationItem = {
                    "id": "addProductsPage3",
                    "rank": 5,
                    "text": gbb.settings?.stepsConfigurationData?.productsData3?.productPageStepText || "",
                    "isActive": false,
                    "src": gbb.settings?.stepsConfigurationData.productsData3?.stepImage ? gbb.settings?.stepsConfigurationData.productsData3?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbAddProductsPage.initPage3,
                    "prefetchFn": gbb.gbbAddProductsPage.prefetchDataPage3,
                    "intialFetchFn": gbb.gbbAddProductsPage.intialFetchForPage3,
                    "showFn": gbb.gbbAddProductsPage.action.showPage3,
                    "isNavBarItem": true,
                    "updatePageStatusFn": gbb.gbbAddProductsPage.updatePageStatus,
                    // "initFn": glpro.glproGiftWrap.init,
                    // "showFn": glpro.glproGiftWrap.action.show,
                    // "hideFn": glpro.glproGiftWrap.action.hide,
                }
                navigationItems.push(navigationItem)
            }
            if (gbb.settings?.stepsConfigurationData?.productsData4?.isProductsEnabled) {
                let navigationItem = {
                    "id": "addProductsPage4",
                    "rank": 6,
                    "text": gbb.settings?.stepsConfigurationData?.productsData4?.productPageStepText || "",
                    "isActive": false,
                    "src": gbb.settings?.stepsConfigurationData.productsData4?.stepImage ? gbb.settings?.stepsConfigurationData.productsData4?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbAddProductsPage.initPage4,
                    "showFn": gbb.gbbAddProductsPage.action.showPage4,
                    "prefetchFn": gbb.gbbAddProductsPage.prefetchDataPage4,
                    "intialFetchFn": gbb.gbbAddProductsPage.intialFetchForPage4,
                    "isNavBarItem": true,
                    "updatePageStatusFn": gbb.gbbAddProductsPage.updatePageStatus,
                    // "initFn": glpro.glproGiftWrap.init,
                    // "showFn": glpro.glproGiftWrap.action.show,
                    // "hideFn": glpro.glproGiftWrap.action.hide,
                }
                navigationItems.push(navigationItem)
            }

            if (gbb.settings?.stepsConfigurationData?.productsData5?.isProductsEnabled) {
                let navigationItem = {
                    "id": "addProductsPage5",
                    "rank": 7,
                    "text": gbb.settings?.stepsConfigurationData?.productsData5?.productPageStepText || "",
                    "isActive": false,
                    "src": gbb.settings?.stepsConfigurationData.productsData5?.stepImage ? gbb.settings?.stepsConfigurationData.productsData5?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbAddProductsPage.initPage5,
                    "showFn": gbb.gbbAddProductsPage.action.showPage5,
                    "isNavBarItem": true,
                    "updatePageStatusFn": gbb.gbbAddProductsPage.updatePageStatus,
                }
                navigationItems.push(navigationItem)
            }

            if (gbb.settings?.stepsConfigurationData?.productsData6?.isProductsEnabled) {
                let navigationItem = {
                    "id": "addProductsPage6",
                    "rank": 8,
                    "text": gbb.settings?.stepsConfigurationData?.productsData6?.productPageStepText || "",
                    "isActive": false,
                    "src": gbb.settings?.stepsConfigurationData.productsData6?.stepImage ? gbb.settings?.stepsConfigurationData.productsData6?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbAddProductsPage.initPage6,
                    "showFn": gbb.gbbAddProductsPage.action.showPage6,
                    "isNavBarItem": true,
                    "updatePageStatusFn": gbb.gbbAddProductsPage.updatePageStatus,
                }
                navigationItems.push(navigationItem)
            }

            if (gbb.settings?.stepsConfigurationData?.productsData7?.isProductsEnabled) {
                let navigationItem = {
                    "id": "addProductsPage7",
                    "rank": 9,
                    "text": gbb.settings?.stepsConfigurationData?.productsData7?.productPageStepText || "",
                    "isActive": false,
                    "src": gbb.settings?.stepsConfigurationData.productsData7?.stepImage ? gbb.settings?.stepsConfigurationData.productsData7?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbAddProductsPage.initPage7,
                    "showFn": gbb.gbbAddProductsPage.action.showPage7,
                    "isNavBarItem": true,
                    "updatePageStatusFn": gbb.gbbAddProductsPage.updatePageStatus,
                }
                navigationItems.push(navigationItem)
            }

            if (gbb.settings?.stepsConfigurationData?.productsData8?.isProductsEnabled) {
                let navigationItem = {
                    "id": "addProductsPage8",
                    "rank": 10,
                    "text": gbb.settings?.stepsConfigurationData?.productsData8?.productPageStepText || "",
                    "isActive": false,
                    "src": gbb.settings?.stepsConfigurationData.productsData8?.stepImage ? gbb.settings?.stepsConfigurationData.productsData8?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbAddProductsPage.initPage8,
                    "showFn": gbb.gbbAddProductsPage.action.showPage8,
                    "isNavBarItem": true,
                    "updatePageStatusFn": gbb.gbbAddProductsPage.updatePageStatus,
                }
                navigationItems.push(navigationItem)
            }

            if (gbb.settings?.stepsConfigurationData?.productsData9?.isProductsEnabled) {
                let navigationItem = {
                    "id": "addProductsPage9",
                    "rank": 11,
                    "text": gbb.settings?.stepsConfigurationData?.productsData9?.productPageStepText || "",
                    "isActive": false,
                    "src": gbb.settings?.stepsConfigurationData.productsData9?.stepImage ? gbb.settings?.stepsConfigurationData.productsData9?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbAddProductsPage.initPage9,
                    "showFn": gbb.gbbAddProductsPage.action.showPage9,
                    "isNavBarItem": true,
                    "updatePageStatusFn": gbb.gbbAddProductsPage.updatePageStatus,
                }
                navigationItems.push(navigationItem)
            }

            if (gbb.settings?.stepsConfigurationData?.productsData10?.isProductsEnabled) {
                let navigationItem = {
                    "id": "addProductsPage10",
                    "rank": 12,
                    "text": gbb.settings?.stepsConfigurationData?.productsData10?.productPageStepText || "",
                    "isActive": false,
                    "src": gbb.settings?.stepsConfigurationData.productsData10?.stepImage ? gbb.settings?.stepsConfigurationData.productsData10?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbAddProductsPage.initPage10,
                    "showFn": gbb.gbbAddProductsPage.action.showPage10,
                    "isNavBarItem": true,
                    "updatePageStatusFn": gbb.gbbAddProductsPage.updatePageStatus,
                }
                navigationItems.push(navigationItem)
            }

            if (gbb.settings?.stepsConfigurationData?.productsData11?.isProductsEnabled) {
                let navigationItem = {
                    "id": "addProductsPage11",
                    "rank": 13,
                    "text": gbb.settings?.stepsConfigurationData?.productsData11?.productPageStepText || "",
                    "isActive": false,
                    "src": gbb.settings?.stepsConfigurationData.productsData11?.stepImage ? gbb.settings?.stepsConfigurationData.productsData11?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbAddProductsPage.initPage11,
                    "showFn": gbb.gbbAddProductsPage.action.showPage11,
                    "isNavBarItem": true,
                    "updatePageStatusFn": gbb.gbbAddProductsPage.updatePageStatus,
                }
                navigationItems.push(navigationItem)
            }
            if (gbb.settings?.stepsConfigurationData?.productsData12?.isProductsEnabled) {
                let navigationItem = {
                    "id": "addProductsPage12",
                    "rank": 14,
                    "text": gbb.settings?.stepsConfigurationData?.productsData12?.productPageStepText || "",
                    "isActive": false,
                    "src": gbb.settings?.stepsConfigurationData.productsData12?.stepImage ? gbb.settings?.stepsConfigurationData.productsData12?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbAddProductsPage.initPage12,
                    "showFn": gbb.gbbAddProductsPage.action.showPage12,
                    "isNavBarItem": true,
                    "updatePageStatusFn": gbb.gbbAddProductsPage.updatePageStatus,
                }
                navigationItems.push(navigationItem)
            }

            if (gbb.settings?.stepsConfigurationData?.personalizationData?.isPersonalizationEnabled) {
                let navigationItem = {
                    "id": "personalizationPage",
                    "rank": 7,
                    "text": gbb.settings?.stepsConfigurationData?.personalizationData?.personalizeStepText,
                    "isActive": false,
                    "src": gbb.settings.stepsConfigurationData.personalizationData?.stepImage ? gbb.settings?.stepsConfigurationData?.personalizationData?.stepImage : "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbPersonalizePage.init,
                    "isNavBarItem": true,
                    "updatePageStatusFn": gbb.gbbPersonalizePage.updatePageStatus,
                    // "initFn": glpro.glproGiftWrap.init,
                    "showFn": gbb.gbbPersonalizePage.action.showPersonalizationPage,
                    // "hideFn": glpro.glproGiftWrap.action.hide,
                }
                navigationItems.push(navigationItem)
            }
            if (gbb.settings?.stepsConfigurationData?.summaryPageData?.isSummaryPageEnabled) {
                navigationItems.push({
                    "id": "reviewPage",
                    "rank": 8,
                    "text": "Review Page",
                    "isActive": false,
                    "src": "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/stepsconfV2.jpeg",
                    "isCompleted": false,
                    "initFn": gbb.gbbReviewPage.init,
                    "isNavBarItem": false
                    // "showFn": glpro.glproGiftWrap.action.show,
                    // "hideFn": glpro.glproGiftWrap.action.hide,
                })
            }
            //add more pages to routerPages
            // gbb.utility.debugConsole("navigationItems:", navigationItems);
            return navigationItems;
        },
        getNavItem: function (id) {
            let navigationItems = gbb.state.navigationItems;
            let navigationItem = navigationItems.filter(function (item) {
                return item.id === id;
            })
            return navigationItem[0];
        },
        getNextNavigationItem: function () {

            let navigationItems = gbb.state.navigationItems;
            let currentPageId = gbb.state.currentPageId;

            let currentPageItem = gbb.f.getNavItem(currentPageId);

            // find the index of the current navigation item
            let currentPageIndex = navigationItems.indexOf(currentPageItem);
            // gbb.utility.debugConsole(currentPageIndex);
            // get the next navigation item making sure its not the last one, if its then return null
            if (currentPageIndex === navigationItems.length - 1) {
                return null;
            }
            else {
                return navigationItems[currentPageIndex + 1];
            }
        },
        getPreviousNavigationItem: function () {

            let navigationItems = gbb.state.navigationItems;
            let currentPageId = gbb.state.currentPageId;

            let currentPageItem = gbb.f.getNavItem(currentPageId);

            // find the index of the current navigation item
            let currentPageIndex = navigationItems.indexOf(currentPageItem);
            // gbb.utility.debugConsole(currentPageIndex);
            if (currentPageIndex == 0) {
                return null;
            }
            return navigationItems[currentPageIndex - 1];
        },
        // Assuming stepsConfiguration has the required data
        cacheAllProductsData: async function () {
            try {
                let allProducts = [];
                let productPages = [
                    gbb.settings.stepsConfigurationData?.productsData1,
                    gbb.settings.stepsConfigurationData?.productsData2,
                    gbb.settings.stepsConfigurationData?.productsData3,
                    gbb.settings.stepsConfigurationData?.productsData4,
                    gbb.settings.stepsConfigurationData?.productsData5,
                    gbb.settings.stepsConfigurationData?.productsData6,
                    gbb.settings.stepsConfigurationData?.productsData7,
                    gbb.settings.stepsConfigurationData?.productsData8,
                    gbb.settings.stepsConfigurationData?.productsData9,
                    gbb.settings.stepsConfigurationData?.productsData10,
                    gbb.settings.stepsConfigurationData?.productsData11,
                    gbb.settings.stepsConfigurationData?.productsData12
                ];

                // Loop through all product data pages
                for (let i = 0; i < productPages.length; i++) {
                    const productsData = productPages[i];
                    if (productsData && productsData.isProductsEnabled && productsData.uniqueProductsData) {
                        // Get product handles and IDs
                        let productHandles = productsData.uniqueProductsData.map(product => product.handle);
                        let productIds = productsData.uniqueProductsData.map(product => product.productId);

                        // Fetch data for each product
                        for (let j = 0; j < productHandles.length; j++) {
                            let handle = productHandles[j];
                            let productId = productIds[j];

                            // Check if it's already in the cache
                            if (!gbb.state.cachedProductData.has(productId)) {
                                // Fetch product data using utility functions
                                let productData = await gbb.utility.getProductDataV2(handle);

                                // Cache the product data
                                gbb.state.cachedProductData.set(productId, productData);
                                allProducts.push(productData);
                            }
                        }
                    }
                }

                gbb.utility.debugConsole('All products have been fetched and cached:', gbb.state.cachedProductData);
            } catch (error) {
                console.error('Error while caching products data:', error);
            }
        },

        updateNavigationsItems: function (stepId, isStatusActive, isStepCompleted) {
            gbb.state.navigationItems.find((item) => {
                if (item.id == stepId) {
                    if (isStatusActive && isStatusActive == true) {
                        item.isActive = true;
                    } else {
                        item.isActive = false;
                    }
                    if (isStepCompleted && isStepCompleted == true) {
                        item.isCompleted = true;
                    } else {
                        item.isCompleted = false;
                    }
                }
            })
        },
        markPreviousNavigationItemsAsCompleted: function (currentNavItem) {
            let navigationItems = [...gbb.state.navigationItems];
            let currentPageId = currentNavItem.id;

            //split the navigation items into two arrays, one before the current page and one after

            let currentPageIndex = navigationItems.indexOf(currentNavItem);
            let navigationItemsBeforeCurrentPage = navigationItems.slice(0, currentPageIndex);
            let navigationItemsAfterCurrentPage = navigationItems.slice(currentPageIndex + 1, navigationItems.length);

            //mark all the navigation items before the current page as completed
            navigationItemsBeforeCurrentPage.forEach(function (item) {
                gbb.f.updateNavigationsItems(item.id, false, true);
            })
            //mark all the navigation items after the current page as not completed
            navigationItemsAfterCurrentPage.forEach(function (item) {
                gbb.f.updateNavigationsItems(item.id, false, false);
            })

            gbb.f.updateNavigationsItems(currentPageId, true, false);


        },
        getNavigationItemsToDisplay: function (startFromNavItemId) {
            // let navigationItems =JSON.parse(JSON.stringify(gbb.state.navigationItems));
            // gbb.utility.debugConsole("before: gbb.state.navigationItems.length:", gbb.state.navigationItems.length)
            let navigationItems = [...gbb.state.navigationItems];


            let blackListedNavigationItems = ["landingPage", "reviewPage"];

            navigationItems = navigationItems.filter(function (item) {
                return !blackListedNavigationItems.includes(item.id);
            })

            // startFromNavItemId = "landingPage" when user is on landing page
            // Q: why does getNavigationItemsToDisplay get fired at all when user is on landing page?

            // A: because we also display navigation items on landing page
            // so to solve this, we just set startFromNavItemId to the first navigation item

            if (startFromNavItemId == "landingPage") {
                startFromNavItemId = navigationItems[0].id;
            }
            gbb.state.navigationItemsToRender = navigationItems;

            // if screen is less than 768px, then change gbb.state.navItemsViewPerPage to 4
            if (window.innerWidth < 768) {
                gbb.state.navItemsViewPerPage = 4
            }

            let navItem = gbb.f.getNavItem(startFromNavItemId);

            // find the index of the current navigation item
            let navItemIndex = gbb.state.navigationItemsToRender.indexOf(navItem);

            let startIndex = navItemIndex;
            if (startIndex + gbb.state.navItemsViewPerPage > navigationItems.length) {
                startIndex = navigationItems.length - gbb.state.navItemsViewPerPage;
                if (startIndex < 0) {
                    startIndex = 0;
                }
            }

            let endIndex = Math.min(startIndex + gbb.state.navItemsViewPerPage, navigationItems.length);
            let navigationItemsToDisplay = navigationItems.slice(startIndex, endIndex);


            return navigationItemsToDisplay;

        },
        insertDiscountProgressBar: async function () {

            gbb.state.giftBoxCartData = await gbb.utility.getGiftBoxProductsFromCart()


            //check if gbbDiscountProgressBar is enabled
            if (gbb.settings.discountsData.isDiscountEnabled) {
                //check if element exists
                if (gbb.$('.gbbDiscountComponent').length == 0) {
                    gbb.gbbDiscountComponent.init(gbb.settings)
                }
                //update the discount progress bar relative to the current cartTotal
                gbb.gbbDiscountComponent.f.updateCurrentDiscountRule();
            }
        },
        renderTagsPillsHTML: function (product, noteAttribute, category) {
            try {
                const tagsArray = product.tags;

                // const pillHTML 
                const userObjectForTagsAndPills = gbb.state.tagsPillsData || [];
                let tagsAndPillHTMLContainer = gbb.$("<div>").addClass("gbbTagsAndPillHTMLContainer")
                if (userObjectForTagsAndPills && userObjectForTagsAndPills.length < 1) {
                    return "";
                } else if (userObjectForTagsAndPills && userObjectForTagsAndPills.length > 0) {
                    for (let i = 0; i < userObjectForTagsAndPills.length; i++) {
                        const item = userObjectForTagsAndPills[i];
                        const currentKey = item.tagKey;
                        let tagsAndPillHTML = gbb.$("<div>").addClass("gbbTagsAndPillHTML")
                        const currentValueHtml = item.tagValueHTML;
                        // item.tagText
                        if (tagsArray.includes(currentKey)) {
                            tagsAndPillHTML.html(currentValueHtml);
                            tagsAndPillHTMLContainer.append(tagsAndPillHTML);
                        }
                    }
                }
                return tagsAndPillHTMLContainer;

            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        setSelectors: function () {
            let settings = gbb.settings
            gbb.selectors = {
                addToCart: settings.app.addToCartBtnSelectors,
                checkoutBtn: settings.app.checkoutBtnSelectors,
                sideCartSelectors: settings.app.sideCartSelectors,
                buyNowBtn: settings.app.buyNowBtn,
                cartForm: settings.app.cartForm,
                productPageWrapperV2: '.gbbProductPageWrapperV2',
                cartPageWrapperV2: '.gbbCartPageWrapperV2',
                quantityBtnSelectors: settings.app.quantityBtnSelectors,
                scheduleDeliveryPickerSelector: settings.app.scheduleDeliveryPickerSelector,
            }
        },
        setDefaultThemeStyles: function () {
            try {
                DEFAULT_BODY_OVERFLOW_VALUE = gbb.$('body').css('overflow-y');
                return;
            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        setCustomStyling: function () {
            let customStyle = gbb.settings.app.customStyle
            if (customStyle) {
                var styleSheet = document.createElement("style")
                styleSheet.innerText = customStyle
                document.body.appendChild(styleSheet)

            }
        },
        getPageType: function () {
            var pageType = "";
            if (window.location.pathname.includes("/cart") && !window.location.pathname.includes("/products")) {
                pageType = "cart";
            } else if (window.location.pathname.includes("/products")) {
                pageType = "product";
            } else if (window.location.pathname.includes("/collections")) {
                pageType = "COLLECTION";
            } else if (window.location.pathname.includes("/")) {
                pageType = "HOME";
            } else if ("undefined" != typeof Shopify && "undefined" != typeof Shopify.Checkout) {
                pageType = "CHECKOUT";
            } else {
                pageType = "PAGE_NOT_FOUND";
            }
            return pageType;
        },
        getProductPageHandle: function () {
            if ("product" === gbb.state.page_type && shopifyLiquidValuesApp4.product.handle) {
                // let pattern = /(?<=\\/products\\/)((?!\\?|\\$).)+/g
                // if(window && window.location && window.location.href){
                //     return window.location.href.match(pattern)[0]
                // }
                return shopifyLiquidValuesApp4.product.handle
            }
            return "undefined"
        },
        applyButtonCSS: function (element) {

            //apply gbb.settings.app.themButtonTextColor themeButtonBackgroundColor themeButtonBorderColor to the button
            if (gbb.settings.app.themButtonTextColor != "") {
                element.css("color", gbb.settings.app.themButtonTextColor);
            }
            if (gbb.settings.app.themeButtonBackgroundColor != "") {
                element.css("background-color", gbb.settings.app.themeButtonBackgroundColor);
            }
            if (gbb.settings.app.themeButtonBorderColor != "") {
                element.css("border", "1px solid")
                element.css("border-color", gbb.settings.app.themeButtonBorderColor);
            }
            // box shadow
            if (gbb.settings.app.themeButtonBoxShadow != "") {
                element.css("box-shadow", gbb.settings.app.themeButtonBoxShadow);
            }
            //themeButtonFontFamily
            if (gbb.settings.app.themeButtonFontFamily != "") {
                element.css("font-family", gbb.settings.app.themeButtonFontFamily);
            }


        },
        resetButtonCSS: function (element) {
            //reset the button css
            element.css("color", "");
            element.css("background-color", "");
            element.css("border", "");
            element.css("border-color", "");
            element.css("box-shadow", "");
        },
        applyHeaderCSS: function (element) {
            //apply gbb.settings.app.themeFontFamily themeFontColor to the header
            if (gbb.settings.app.themeHeaderFontFamily != "") {
                element.css("font-family", gbb.settings.app.themeHeaderFontFamily);
            }
            if (gbb.settings.app.themeHeaderFontColor != "") {
                element.css("color", gbb.settings.app.themeHeaderFontColor);
            }
        },
        applyLabelCSS: function (element) {
            //apply gbb.settings.app.themeLabelFontColor to the label
            if (gbb.settings.app.themeLabelFontColor != "") {
                element.css("color", gbb.settings.app.themeLabelFontColor);
            }
            if (gbb.settings.app.themeLabelFontFamily != "") {
                element.css("font-family", "inherit");
            }
        },
        applyBackgroundColorCss: function (element) {

        },
        applyTextColorCss: function (element) {

        },
        applyPrimaryColorCss: function (element) {
            element.css("background", gbb.settings.pageCustomizationData.colors.primaryColor);
        },
        applySecondaryColorCss: function (element) {
            element.css("background", gbb.settings.pageCustomizationData.colors.secondaryColor);
        },
        applyTextColorCss: function (element) {
            element.css("color", gbb.settings.pageCustomizationData.colors.textColor);
        },
        applyDisabledColorCss: function (element) {
            element.css("color", gbb.settings.pageCustomizationData.colors.disabledColor);
        },
        applyActiveImageStyle: function (element) {
            element.css("border", `2px solid ${gbb.settings?.pageCustomizationData?.productCard.productCardButtonColor}`)
        },
        removeActiveImageStyle: function (element) {
            element.css("border", "none")
        },
        applySelectedVariantStyle: function (element) {
            element.css("background", gbb.settings?.pageCustomizationData?.productCard.productCardButtonColor);
            element.css("color", gbb.settings.pageCustomizationData.productCard.productCardButtonTextColor)
        },
        removeSelectedVariantStyle: function (element) {
            element.css("background", "#f1f2f3")
            element.css("color", "#000000")
        },
        getSelectedVariant: function () {
            if ("product" === gbb.state.page_type) {
                if (ShopifyAnalytics && ShopifyAnalytics.meta && ShopifyAnalytics.meta.selectedVariantId) {
                    return ShopifyAnalytics.meta.selectedVariantId
                }
                if (document.querySelector('[name="id"]') && document.querySelector('[name="id"]').value) {
                    return document.querySelector('[name="id"]').value
                }
                return undefined
            }
        },
        getElements: function (settings) {
            return {
                gbbHTMLWrapperParent: gbb.$(gbb.$.parseHTML('<div class="gbbHTMLWrapper"></div>')),
                gbbHeaderWrapperParent: gbb.$(gbb.$.parseHTML('<div class="gbbHeaderWrapper"></div>')),
                gbbBodyWrapperParent: gbb.$(gbb.$.parseHTML('<div class="gbbBodyWrapper"></div>')),
                //change this for sidebar position
                gbbFooterWrapperParent: gbb.$(gbb.$.parseHTML('<div class="gbbFooterWrapper"></div>')),

                addToCartBtn: gbb.$(document).find(gbb.selectors.addToCart),
                addToCartButtonCloned: undefined,
                checkoutBtn: gbb.$(document).find(gbb.selectors.checkoutBtn),
                cartForm: gbb.$(document).find(gbb.selectors.cartForm),
                productPageWrapperV2: gbb.$(gbb.$.parseHTML('<div class="gbbPageWrapper gbbProductPageWrapperV2"> <div class="gbbGiftOptionsPageEleWrapper"></div>  <div class="gbbLandingPageWrapper"></div><div class="gwmGiftMessageWrapper"></div> </div>')),
                cartPageWrapperV2: gbb.$(gbb.$.parseHTML('<div class="gbbPageWrapper gbbCartPageWrapperV2"> <div class="gbbCartGiftOptionsPageEleWrapper"></div><div class="gwmCartGiftMsgAndWrapWrapper"></div><div class="gwmCartGiftMessageWrapper"></div></div>')),
                buyNowBtn: gbb.$(document).find(gbb.selectors.buyNowBtn)
            }
        },
        renderNavigationHTML: function (parentHTML, noteAttribute, navigationItems) {
            let navigationHTML = gbb.$("<div>").addClass("gbbNavigationItemsContainer");


            let navigationArrowsContainer = gbb.$("<div>").addClass("gbbNavigationArrowsContainer");
            // let navigationItems = gbb.gbbModal.setNavigationItems();
            // let navigationItems = gbb.state.navigationItems;

            // navigationItems = gbb.f.getNextFiveNavigationItems(navigationItems);


            let stepsCount = 0;
            navigationItems = navigationItems.filter((element) => {
                if (element.isNavBarItem && element.isNavBarItem == true) {
                    stepsCount++;
                    return element;
                }
            })

            let navigationItemHTML = gbb.$("<div>").addClass("gbbNavigationItem");
            //run a for loop with each navigation item with the following properties text, onclick function, isActive

            if (stepsCount == 1) {
                return;
            } else {
                if (parentHTML && stepsCount == 2) {
                    if (noteAttribute == "landingPage") {
                        parentHTML.css("margin", "0% 15%");
                    } else {
                        parentHTML.css("margin", "0% 0%");
                    }

                    if (window.innerWidth > 600) {
                        if (noteAttribute != "landingPage") {
                            parentHTML.css("margin", "0% 0%");
                        }

                    }
                }
                for (let i = 0; i < navigationItems.length; i++) {
                    let navigationItemContainer = navigationItemHTML.clone();
                    let _navigationImageContainer = gbb.$("<div>").addClass("gbbNavigationStepImgContainer");

                    let _navigationImage = gbb.$("<img>").addClass("gbbNavigationImage");
                    let item = navigationItems[i];
                    if (stepsCount == 2 && item.id != "personalizationPage") {
                        // _navigationImageContainer.css("justify-self", "start");
                    }

                    if (item.isActive) {
                        let borderWidth = gbb.settings.pageCustomizationData.navigationBanner.navigationBannerStepCompletedBorderWidth || "4px";
                        _navigationImageContainer.addClass("gbbNavigationStepImgContainerActive");
                        _navigationImageContainer.css("border", `${borderWidth} solid ${gbb.settings.pageCustomizationData.navigationBanner.navigationBannerStepCompletionColor}`);
                    } else {
                        _navigationImageContainer.removeClass("gbbNavigationStepImgContainerActive");
                    }

                    if (item.isCompleted) {
                        let divToBeInserted;
                        // gbb.settings.pageCustomizationData.customImage = "https://gift-box-builder-app4.s3.us-east-2.amazonaws.com/public/icons/Deafult+Image.png"
                        if (gbb.settings.merchantInfo?.customSettings?.navCompletedImage) {
                            let tickMarkImg = gbb.$("<img>").addClass("gbbtickMarkImg").addClass("gbbNavigationImage")
                            tickMarkImg.attr("src", gbb.settings.merchantInfo?.customSettings?.navCompletedImage);
                            divToBeInserted = tickMarkImg;
                        } else {
                            let tickMarkDiv = gbb.$("<div>").addClass("gbbtickMark");

                            tickMarkDiv.append(`<svg width="30" height="30" viewBox="0 0 74 74" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M29.4459 54.1897C29.0348 54.1897 28.6494 54.1249 28.2897 53.9954C27.93 53.868 27.5959 53.6501 27.2876 53.3417L14.0293 40.0834C13.464 39.5181 13.1937 38.7853 13.2183 37.885C13.2451 36.9867 13.5411 36.2549 14.1063 35.6896C14.6716 35.1244 15.3911 34.8417 16.2647 34.8417C17.1383 34.8417 17.8577 35.1244 18.423 35.6896L29.4459 46.7126L55.5772 20.5813C56.1425 20.016 56.8753 19.7334 57.7756 19.7334C58.6739 19.7334 59.4057 20.016 59.9709 20.5813C60.5362 21.1466 60.8188 21.8784 60.8188 22.7766C60.8188 23.677 60.5362 24.4098 59.9709 24.9751L31.6043 53.3417C31.2959 53.6501 30.9619 53.868 30.6022 53.9954C30.2425 54.1249 29.857 54.1897 29.4459 54.1897Z" fill=${gbb.settings.pageCustomizationData.navigationBanner.navigationBannerStepDoneColor || "#ffffff"} ></svg>`);
                            let tickMarkPseudo = gbb.$("<div>").addClass("gbbtickMarkPseudo");

                            tickMarkDiv.css("border", "none");

                            tickMarkPseudo.css("background-color", gbb.settings.pageCustomizationData.navigationBanner.navigationBannerStepDoneColor || "#ffffff");
                            //tickMarkDiv.addClass("gbbtickMarkPseudo");

                            _navigationImageContainer.css("border", "none");

                            _navigationImageContainer.css("background-color", gbb.settings.pageCustomizationData.navigationBanner.navigationBannerStepCompletionColor);
                            divToBeInserted = tickMarkDiv;
                        }
                        _navigationImageContainer.html(divToBeInserted);
                        //item.src = "https://d3ks0ngva6go34.cloudfront.net/public/stepsconfiguration/step_completed.png"
                    } else {
                        _navigationImage.attr("src", item.src);
                        _navigationImageContainer.append(_navigationImage);
                    }
                    let _navigationTitleContainer = gbb.$("<div>").addClass("gbbNavigationTitleContainer");
                    let _navigationTitle = gbb.$("<p>").addClass("gbbNavigationTitle");
                    // _navigationTitle.css("color", gbb.settings.pageCustomizationData?.navigationBanner?.navigationBannerTextColor);

                    navigationItemContainer.attr("id", item.id);

                    //TODO: allowNavigationClick flag to be added in the future
                    if (true || gbb.settings.stepsConfigurationData.allowNavigationClick) {
                        navigationItemContainer.on("click", item.showFn)
                    }

                    _navigationTitle.text(item.text || "");
                    _navigationTitle.css("color", gbb.settings.pageCustomizationData?.navigationBanner?.navigationBannerStepTextColor || "black");


                    _navigationTitleContainer.append(_navigationTitle);
                    navigationItemContainer.append(_navigationImageContainer);
                    navigationItemContainer.append(_navigationTitleContainer);

                    // navigationItemContainer.append()
                    navigationHTML.append(navigationItemContainer);
                }

                // gbb.utility.debugConsole("navigationItems", navigationItems)

                let currentNavigationItemIndex = gbb.state.navigationItemsToRender.findIndex((item) => {
                    return item.id == navigationItems[0].id
                })

                // gbb.utility.debugConsole("currentNavigationItemIndex", currentNavigationItemIndex);

                if (currentNavigationItemIndex > -1) {

                    let previousNavigationItemsButton = gbb.$("<div>").addClass("gbbPreviousNavigationItemsButton")
                    previousNavigationItemsButton.append(CONSTANT_ARROW_SVG);
                    previousNavigationItemsButton.find("g").css("fill", gbb.settings.pageCustomizationData?.generalSettings?.icon?.iconTextColor || "black");

                    previousNavigationItemsButton.css("background", gbb.settings.pageCustomizationData?.generalSettings?.icon?.iconBgColor || "white");

                    let currentIndex = currentNavigationItemIndex

                    let nextStartIndex = Math.max(currentIndex - gbb.state.navItemsViewPerPage, 0);

                    let previousItem = gbb.state.navigationItemsToRender[nextStartIndex];

                    //now fetch the previous 5 items if they exist
                    previousNavigationItemsButton.on("click", () => {
                        const navItems = gbb.f.getNavigationItemsToDisplay(previousItem.id)
                        // gbb.utility.debugConsole(navItems);
                        gbb.$(".gbbNavigationItemsContainer").replaceWith(gbb.f.renderNavigationHTML("", gbb.state.currentPageId, navItems));
                    })

                    if (gbb.state.navigationItemsToRender.length > gbb.state.navItemsViewPerPage) {
                        navigationHTML.append(previousNavigationItemsButton);
                    }

                }

                if (currentNavigationItemIndex < gbb.state.navigationItemsToRender.length - 1) {
                    let nextNavigationItemsButton = gbb.$("<div>").addClass("gbbNextNavigationItemsButton")
                    nextNavigationItemsButton.append(CONSTANT_ARROW_SVG);
                    nextNavigationItemsButton.find("g").css("fill", gbb.settings.pageCustomizationData?.generalSettings?.icon?.iconTextColor || "black");
                    nextNavigationItemsButton.css("background", gbb.settings.pageCustomizationData?.generalSettings?.icon?.iconBgColor || "white");

                    let currentIndex = currentNavigationItemIndex

                    let nextIndex = currentIndex + gbb.state.navItemsViewPerPage;

                    if (nextIndex > gbb.state.navigationItemsToRender.length - 1) {
                        nextIndex = gbb.state.navigationItemsToRender.length - 1;
                    }

                    let nextItem = gbb.state.navigationItemsToRender[nextIndex];


                    nextNavigationItemsButton.on("click", () => {
                        const navItems = gbb.f.getNavigationItemsToDisplay(nextItem.id)
                        // gbb.utility.debugConsole("next navItems are",navItems);
                        gbb.$(".gbbNavigationItemsContainer").replaceWith(gbb.f.renderNavigationHTML("", gbb.state.currentPageId, navItems));
                    })

                    if (gbb.state.navigationItemsToRender.length > gbb.state.navItemsViewPerPage) {
                        navigationHTML.append(nextNavigationItemsButton);
                    }

                }


                if (navigationItems.length > 0 && gbb.$('.gbbProductsCardLayoutV2').length > 0) {
                    // render steps progress bar
                    setTimeout(() => {
                        gbb.$('.gbbNavigationItemsContainer').css('::before', {
                            'content': 'none'
                        })
                        let stepsProgressBarHTML = gbb.f.renderStepsProgressBar()

                        //calculate the width for progressbar
                        let navItems = gbb.$('.gbbNavigationItem');

                        let startColumn = navItems.first();
                        let endColumn = navItems.last();

                        let startCenter = startColumn.offset().left + startColumn.width() / 2;
                        let endCenter = endColumn.offset().left + endColumn.width() / 2;

                        let progressBarWidth = endCenter - startCenter;
                        stepsProgressBarHTML.css('width', progressBarWidth);
                        // ================================================ //

                        // calculate the filled progressbar width
                        // 1st step to the last step completed 
                        let activeStepIndex = 0
                        let lastCompletedStepIndex = 0
                        for (let i = 0; i < navigationItems.length; i++) {
                            let step = navigationItems[i]
                            if (step.isNavBarItem && step.isActive) {
                                activeStepIndex = i;
                            }
                            if (step.isNavBarItem && step.isCompleted) {
                                lastCompletedStepIndex = i;
                            }
                        }
                        if (activeStepIndex == 0 && lastCompletedStepIndex != 0) {
                            activeStepIndex = lastCompletedStepIndex;
                        }// when you have more than navItemsViewPerPage navItems 
                        /*
                        for eg : you have 10 steps 
                        so in step navigations we will have pagination // TO BE DONE @mufadal
                         */
                        let lastCompletedStep = navItems.eq(activeStepIndex);
                        let lastCompletedStepCenter = lastCompletedStep.offset().left + lastCompletedStep.width() / 2;

                        let filledProgressBarWidth = lastCompletedStepCenter - startCenter;
                        stepsProgressBarHTML.find('.gbbStepsProgressBarFilled').css('width', filledProgressBarWidth);

                        navigationHTML.append(stepsProgressBarHTML)
                    }, 100)
                }
                // navigationHTML.append(navigationArrowsContainer);
                //navigationHTML.append(navigationImages);
                return navigationHTML;
            }
        },
        renderStepsProgressBar: function (parentHTML, noteAttribute, navigationItems) {
            let stepsProgressBarHTML = gbb.$("<div>").addClass("gbbStepsProgressBarContainer");
            let stepsProgressBar = gbb.$("<div>").addClass("gbbStepsProgressBar");
            stepsProgressBar.css('background', gbb.settings.pageCustomizationData.navigationBanner.navigationBannerStepProgressBarEmptyColor || '#eeeeee')
            let stepsProgressBarFilled = gbb.$("<div>").addClass("gbbStepsProgressBarFilled");
            stepsProgressBarFilled.css('background', gbb.settings.pageCustomizationData.navigationBanner.navigationBannerStepProgressBarFilledColor || '#1E1E1E')
            stepsProgressBar.append(stepsProgressBarFilled)
            stepsProgressBarHTML.append(stepsProgressBar);
            return stepsProgressBarHTML;
        },
        addParamsToUrl: function (key, value) {
            // get the navigation item and attach it to the url params
            let urlParams = new URLSearchParams(window.location.search);
            urlParams.set(key, value);
            window.history.replaceState({}, "", `${window.location.pathname}?${urlParams.toString()}`);
        },
        getParamValueFromUrl: function (key) {
            // get the navigation item from the url params
            let urlParams = new URLSearchParams(window.location.search);
            let value = urlParams.get(key);
            // gbb.utility.debugConsole("getParamValueFromUrl:", value);
            return value;
        },


        processAdditionalLogicAsPerUseCase: function () {
            try {
                // check localStorage for extraInfoFromLinkDummyProductPage
                let extraInfoFromLinkDummyProductPage = sessionStorage.getItem("extraInfoFromLinkDummyProductPage");
                let linkProductSetting = gbb.settings.stepsConfigurationData.useLinkProductAsDefaultProduct;

                if (typeof linkProductSetting == "undefined") {
                    //this is a fallback because we have customer who have
                    // this flag on user level but not bundle level
                    linkProductSetting = true;
                }

                if (linkProductSetting == false) {
                    //should we also clear the sessionStorage here?
                    sessionStorage.removeItem("extraInfoFromLinkDummyProductPage");
                    return;
                }
                if (extraInfoFromLinkDummyProductPage) {
                    extraInfoFromLinkDummyProductPage = JSON.parse(extraInfoFromLinkDummyProductPage);
                    if (extraInfoFromLinkDummyProductPage?.addDummyProductToDefaultProducts == true) {
                        // add the dummy product to the default products
                        let dummyProductsData = extraInfoFromLinkDummyProductPage?.dummyProductsData.length > 0 ? extraInfoFromLinkDummyProductPage?.dummyProductsData : null;
                        for (let i = 0; i < dummyProductsData?.length; i++) {
                            let dummyProduct = dummyProductsData[i];
                            if (dummyProduct) {
                                let defaultProductsData = gbb.settings.stepsConfigurationData.defaultProductsData || { products: [], isDefaultProductsEnabled: false };
                                defaultProductsData.products.push(dummyProduct);
                                defaultProductsData.isDefaultProductsEnabled = true;
                                gbb.settings.stepsConfigurationData.defaultProductsData = defaultProductsData;
                            }
                        }
                    }
                }
            } catch (e) {
                gbb.utility.debugConsole("error in processAdditionalLogicAsPerUseCase:", e)
            }
        },

        renderFiltersSearchSortHeaderHTML: function (noteAttribute) {
            let gbbFiltersSearchSortHeader = gbb.$("<div>").addClass("gbbFiltersSearchSortHeader");

            let gbbFiltersMainButtonWrapper = gbb.$("<div>").addClass("gbbFiltersMainButtonWrapper");
            let gbbFiltersCheckboxLabel = gbb.$("<div>").addClass("gbbFiltersCheckboxLabel");

            let activatedFiltersCount = gbb.utility.getActivatedFilters(noteAttribute).length > 0 ? " ( " + gbb.utility.getActivatedFilters(noteAttribute).length + " )" : ""
            gbbFiltersCheckboxLabel.text((gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.general?.filtersLabel) || "Filters1") + activatedFiltersCount);

            let gbbFiltersDropDownButton = gbb.$("<div>").addClass("gbbFiltersDropDownButton");
            // gbbFiltersDropDownButton.css("background", gbb.settings.pageCustomizationData?.generalSettings?.icon?.iconBgColor || "white");
            gbbFiltersDropDownButton.css("color", gbb.settings.pageCustomizationData?.generalSettings?.icon?.iconTextColor || "#000000");

            // gbbFiltersDropDownButton.append(`<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
            //         width="auto" height="30px" viewBox="0 0 512.000000 512.000000"
            //         preserveAspectRatio="xMidYMid meet">
            //        <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
            //        fill=${gbb.settings.pageCustomizationData.quickSettings.colors.primaryColor || "#000000"} stroke="none">
            //        <path d="M893 4335 c-154 -42 -300 -175 -349 -318 l-16 -46 -221 -3 c-213 -3
            //        -223 -4 -254 -26 -67 -48 -67 -156 0 -204 31 -22 41 -23 254 -26 l221 -3 16
            //        -46 c22 -65 68 -133 129 -190 162 -154 382 -186 586 -87 101 49 223 193 251
            //        294 l6 25 1760 5 1759 5 32 23 c67 48 67 156 0 204 l-32 23 -1759 5 -1760 5
            //        -6 25 c-28 101 -150 245 -251 294 -115 56 -253 71 -366 41z m232 -260 c45 -18
            //        92 -62 123 -114 23 -39 27 -57 27 -121 0 -64 -4 -82 -27 -121 -32 -54 -78 -96
            //        -128 -117 -45 -19 -145 -19 -191 1 -92 38 -159 137 -159 237 0 87 39 156 123
            //        220 49 37 161 44 232 15z"/>
            //        <path d="M3976 3059 c-156 -37 -327 -194 -365 -338 l-7 -26 -1760 -5 -1759 -5
            //        -32 -23 c-67 -48 -67 -156 0 -204 l32 -23 1759 -5 1760 -5 6 -25 c28 -101 150
            //        -245 251 -294 155 -75 323 -75 471 0 99 50 209 175 244 277 l16 46 221 3 c213
            //        3 223 4 254 26 67 48 67 156 0 204 -31 22 -41 23 -254 26 l-221 3 -16 46 c-50
            //        145 -196 277 -353 318 -62 16 -186 18 -247 4z m220 -264 c49 -20 105 -76 130
            //        -130 60 -128 -3 -287 -135 -342 -46 -20 -146 -20 -191 -1 -84 35 -148 121
            //        -157 210 -20 194 172 337 353 263z"/>
            //        <path d="M2433 1775 c-144 -39 -267 -139 -328 -266 -19 -41 -35 -79 -35 -86 0
            //        -10 -201 -13 -992 -15 l-993 -3 -32 -23 c-67 -48 -67 -156 0 -204 l32 -23 993
            //        -3 c791 -2 992 -5 992 -15 0 -7 16 -45 35 -86 148 -309 575 -377 818 -128 54
            //        54 127 178 127 214 0 10 201 13 993 15 l992 3 32 23 c67 48 67 156 0 204 l-32
            //        23 -992 3 c-792 2 -993 5 -993 15 0 7 -16 46 -35 86 -101 210 -356 326 -582
            //        266z m247 -273 c179 -89 178 -354 -3 -446 -153 -78 -330 6 -366 174 -28 131
            //        53 260 187 296 60 17 113 10 182 -24z"/>
            //        </g>
            //        </svg>`);
            gbbFiltersDropDownButton.append(`<svg width="20" height="19" viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 5.58863H15.2086V3.47401H0V5.58863ZM17.9738 0C17.2102 0 16.5912 0.676247 16.5912 1.51044V7.5522C16.5912 8.3864 17.2102 9.06264 17.9738 9.06264C18.7374 9.06264 19.3564 8.3864 19.3564 7.5522V1.51044C19.3564 0.676247 18.7374 0 17.9738 0ZM9.67822 12.5367V10.5731C9.67822 9.73889 9.05921 9.06264 8.29562 9.06264C7.53203 9.06264 6.91301 9.73889 6.91301 10.5731V16.6148C6.91301 17.449 7.53203 18.1253 8.29562 18.1253C9.05921 18.1253 9.67822 17.449 9.67822 16.6148V14.6513H19.3564V12.5367H9.67822ZM0 14.6513H5.53041V12.5367H0V14.6513Z" fill="#1E1E1E"}/>
                    </svg>`)
            gbbFiltersMainButtonWrapper.append(gbbFiltersDropDownButton);
            gbbFiltersMainButtonWrapper.append(gbbFiltersCheckboxLabel);

            gbbFiltersMainButtonWrapper.on("click", () => {
                gbb.utility.toggleFiltersSideBar(noteAttribute);
                if (gbb.utility.getFiltersState(noteAttribute)) {
                    // let gbbFiltersSideBarContainer = gbb.$("<div>").addClass("gbbFiltersSideBarContainer").addClass("gbbFiltersSideBarContainerSlideIn");
                    // gbbFiltersSideBarContainer.append(gbb.f.renderFiltersSideBarHTML(noteAttribute));
                    // gbb.$(".gbbPageBody").append(gbbFiltersSideBarContainer);
                    gbb.$("body").append(gbb.f.renderFiltersSideBarHTML(noteAttribute));
                    gbb.f.applyFontToFiltersSidebar();
                } else {
                    gbb.$("body").find(".gbbFiltersSideBarContainer").remove()
                }
            })

            let gbbSearchBarMainWrapper = gbb.$("<div>").addClass("gbbSearchBarMainWrapper");


            let gbbSortByMainWrapper = gbb.$("<div>").addClass("gbbSortByMainWrapper");
            gbbSortByMainWrapper.text("Sort By");

            let filtersInfo = gbb.utility.getFiltersInfo(noteAttribute)
            if (filtersInfo?.isFiltersEnabled && filtersInfo?.categories?.length > 0) {
                gbbFiltersSearchSortHeader.append(gbbFiltersMainButtonWrapper);
            }
            //gbbFiltersSearchSortHeader.append(gbbSearchBarMainWrapper);
            // gbbFiltersSearchSortHeader.append(gbb.f.renderSortByHTML(noteAttribute));
            if (gbb.gbbAddProductsPage?.state?.filterBySearch?.isSearchEnabled) {
                gbbFiltersSearchSortHeader.append(gbb.f.renderSearchBoxHTML(noteAttribute));
            }
            return gbbFiltersSearchSortHeader;
        },
        renderSortByHTML: function (noteAttribute) {
            const gbbSortByDropDownContainer = gbb.$("<div>").addClass("gbbSortByDropDownContainer");
            const gbbSortByDropDownSelect = gbb.$("<select>").addClass("gbbSortByDropDownSelect");

            let sortBy = gbb.utility.getSortByValues(noteAttribute);
            if (!sortBy.isSortByEnabled) {
                return;
            }
            let sortByCategories = [];
            Object.keys(sortBy?.sortByCategories).forEach((element) => {
                sortByCategories.push(sortBy?.sortByCategories[element])
            });



            sortByCategories?.forEach((category, index) => {
                if (index == 0) {
                    let optionEle = gbb.$("<option>").attr("value", "featured")
                        .text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.sortBy.featured) || "Featured");
                    gbbSortByDropDownSelect.append(optionEle);
                }
                if (category.id != "priceHighToLow" && category.id != "priceLowToHigh" && category.isEnabled) {
                    let optionEle = gbb.$("<option>").attr("value", category.id)
                        .text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.sortBy[category.id])); //add code for multi language here
                    //choose this value as default if value found sortBy.sortByValue
                    if (category.id === sortBy?.sortByValue) {
                        optionEle.attr("selected", "selected");
                    }

                    gbbSortByDropDownSelect.append(optionEle);

                }
            });
            gbbSortByDropDownSelect.change(async (event) => {
                gbb.utility.setSortByValues(noteAttribute, event.target.value);
                let products = await gbb.utility.getFilteredSortedProductsData(noteAttribute);
            })
            gbbSortByDropDownContainer.append(gbbSortByDropDownSelect);
            return gbbSortByDropDownContainer;
        },
        renderSearchBoxHTML: function (noteAttribute) {
            try {
                let gbbSearchBarMainWrapper = gbb.$("<div>").addClass("gbbSearchBarMainWrapper");
                let gbbSearchBarInput = gbb.$("<input>").addClass("gbbSearchBarInput").attr("type", "text").attr("placeholder", gbb.utility.renderLanguageValue(gbb.settings.languageData.general.searchLabel) || 'Search1').attr('value', gbb.gbbAddProductsPage.state?.filterBySearch?.searchQuery?.searchText || '');
                let gbbSearchBarIcon = gbb.$("<div>").addClass("gbbSearchBarIcon");
                gbbSearchBarIcon.append(SEARCH_ICON_SVG)
                gbbSearchBarMainWrapper.append(gbbSearchBarIcon);
                gbbSearchBarMainWrapper.append(gbbSearchBarInput);
                gbbSearchBarInput.on("input", async (event) => {
                    let searchedValue = event.target.value
                    let searchedProducts = await gbb.gbbAddProductsPage.f.handleSearchBundleInput(searchedValue, noteAttribute);
                    let activeCategory = gbb.gbbMultipleCategoriesPage.state.currentCategoryId;
                    await gbb.gbbAddProductsPage.f.renderProductsCardContainer(searchedProducts, noteAttribute, 'searchProductsFlow', activeCategory)
                })
                return gbbSearchBarMainWrapper;
            } catch (error) {
                gbb.utility.debugConsole("error in renderSearchBoxHTML", error)
            }
        },
        renderFiltersSideBarHTML: function (noteAttribute) {
            //contains entire filter sidebar
            let gbbProductsFiltersMainContainer = gbb.$("<div>").addClass("gbbProductsFiltersMainContainer");
            let gbbProductsFiltersContainer = gbb.$("<div>").addClass("gbbProductsFiltersContainer");

            let gbbProductsFiltersContainerHeader = gbb.$("<div>").addClass("gbbProductsFiltersContainerHeader");
            let gbbProductsFiltersContainerHeaderLabels = gbb.$("<div>").addClass("gbbProductsFiltersContainerHeaderLabels");

            let gbbProductsFiltersContainerLabel = gbb.$("<div>").addClass("gbbProductsFiltersContainerLabel");
            gbbProductsFiltersContainerLabel.text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.general?.filtersLabel) || "Filters1");
            let gbbProductsFiltersClearLabel = gbb.$("<div>").addClass("gbbProductsFiltersClearLabel");
            gbbProductsFiltersClearLabel.text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.general?.clearSelection) || "Clear Selection1");

            gbbProductsFiltersClearLabel.on("click", async (event) => {
                gbb.gbbAddProductsPage.f.resetSearchTextValue()
                gbb.utility.clearAllFilters(noteAttribute);

                let filteredProducts = await gbb.utility.getFilteredSortedProductsData(noteAttribute)
                // currentPageHTML.html(gbb.f.renderProductsHTML(filteredProducts, noteAttribute))
                gbb.utility.toggleFiltersSideBar(noteAttribute);
                setTimeout(() => {
                    gbbProductsFiltersContainer.addClass("gbbFiltersSideBarContainerSlideOut")
                    gbb.$("body").find(".gbbProductsFiltersMainContainer").remove()
                }, 500)
            })
            const gbbFilterModalClose = gbb.$("<div>").addClass("gbbFilterModalClose");
            gbbFilterModalClose.text("+");
            gbbFilterModalClose.on("click", () => {
                gbbProductsFiltersContainer.addClass("gbbFiltersSideBarContainerSlideOut")
                gbb.utility.toggleFiltersSideBar(noteAttribute);
                gbb.$("body").find(".gbbProductsFiltersMainContainer").remove()
            })

            gbbProductsFiltersMainContainer.on('click', function (event) {
                if (!gbb.$(event.target).closest(gbbProductsFiltersContainer).length) {
                    gbbProductsFiltersContainer.addClass("gbbFiltersSideBarContainerSlideOut")
                    gbb.utility.toggleFiltersSideBar(noteAttribute);
                    gbb.$("body").find(".gbbProductsFiltersMainContainer").remove()
                }
            });

            gbbProductsFiltersContainerHeaderLabels.append(gbbProductsFiltersContainerLabel);
            gbbProductsFiltersContainerHeaderLabels.append(gbbProductsFiltersClearLabel);

            gbbProductsFiltersContainerHeader.append(gbbProductsFiltersContainerHeaderLabels);
            gbbProductsFiltersContainerHeader.append(gbbFilterModalClose);
            gbbProductsFiltersContainer.append(gbbProductsFiltersContainerHeader);
            //contains one particular filter
            let gbbFiltersInfo = gbb.utility.getFiltersInfo(noteAttribute);
            //TODO
            // if(!gbbFiltersInfo.isFiltersEnabled) {
            //     return;
            // }
            if (gbbFiltersInfo.categories == 0) {
                let gbbProductsNoFilters = gbb.$("<div>").addClass("gbbProductsNoFilters");
                gbbProductsNoFilters.text("No filters have been added");
                gbbProductsFiltersContainer.append(gbbProductsNoFilters);
                gbbProductsFiltersMainContainer.append(gbbProductsFiltersContainer);
                return gbbProductsFiltersMainContainer;
            }
            gbbFiltersInfo.categories.forEach((filterCategory, index) => {

                let isFilterTagsVisible = gbb.utility.getActivatedCategoriesForFilters(noteAttribute, filterCategory);

                let gbbFilterContainer = gbb.$("<div>").attr("data-gbbFilterContainer", index).addClass("gbbFilterContainer");
                let gbbFiltersDropDownWrapper = gbb.$("<div>").attr("data-gbbFiltersDropDownWrapper", index).attr("data-role", "collapsible")
                    .addClass("gbbFiltersDropDownWrapper")
                    .addClass("gbbFiltersDropDownWrapper" + index);
                let gbbFilterLabel = gbb.$("<div>").attr("data-gbbFilterLabel", index).addClass("gbbFilterLabel").text(filterCategory.title);
                let gbbFilterDropDownButton = gbb.$("<img>").attr("data-gbbFilterDropDownButton", index).addClass("gbbFilterDropDownButton").addClass("gbbFilterDropDownButton" + index);
                gbbFilterDropDownButton.attr("src", CONSTANT_IMAGES_DROPDOWN_BUTTON);

                gbbFiltersDropDownWrapper.append(gbbFilterLabel);
                gbbFiltersDropDownWrapper.append(gbbFilterDropDownButton);

                gbbFilterContainer.append(gbbFiltersDropDownWrapper);
                if (filterCategory.type == "price") {
                    return;
                    let showPriceFilter = true;
                    gbbFilterDropDownButton.css("transform", "rotate(360deg)");
                    let gbbFilterPriceContainer = gbb.$("<div>").addClass("gbbFilterPriceContainer");
                    let gbbPriceFieldContainer = gbb.$("<div>").addClass("gbbPriceFieldContainer");
                    let gbbPriceFieldLower = gbb.$("<input>")
                        .addClass("gbbPriceFieldLower")
                        .attr("type", "range")
                        .attr("min", filterCategory.minValue)
                        .attr("max", filterCategory.maxValue)
                        .attr("value", gbb.utility.getPriceFilterValues(noteAttribute)?.minValue);


                    let gbbPriceFieldUpper = gbb.$("<input>")
                        .addClass("gbbPriceFieldUpper")
                        .attr("type", "range")
                        .attr("min", filterCategory.minValue)
                        .attr("max", filterCategory.maxValue)
                        .attr("value", gbb.utility.getPriceFilterValues(noteAttribute)?.maxValue);

                    let lowerVal = parseInt(gbbPriceFieldLower[0].value);
                    let upperVal = parseInt(gbbPriceFieldUpper[0].value);


                    gbbPriceFieldContainer.append(gbbPriceFieldLower);
                    gbbPriceFieldContainer.append(gbbPriceFieldUpper);

                    let gbbPriceTextWrap = gbb.$("<div>").addClass("gbbPriceTextWrap");

                    let gbbPriceWrap1 = gbb.$("<div>").addClass("gbbPriceWrap1");
                    //let gbbPriceWrap1Input = gbb.$("<input>").addClass("gbbPriceWrap1Input");
                    gbb.utility.debugConsole("here ar price:", gbb.utility.getPriceFilterValues(noteAttribute)?.minValue)
                    let gbbPriceWrap1Label = gbb.$("<div>").addClass("gbbPriceWrap1Label").text(gbb.utility.getCurrencySymbol() + " " + gbb.utility.getPriceFilterValues(noteAttribute)?.minValue);
                    //gbbPriceWrap1.append(gbbPriceWrap1Input);
                    gbbPriceWrap1.append(gbbPriceWrap1Label);

                    let gbbPriceWrap2 = gbb.$("<div>").addClass("gbbPriceWrap2");
                    //let gbbPriceWrap2Input = gbb.$("<input>").addClass("gbbPriceWrap2Input");
                    let gbbPriceWrap2Label = gbb.$("<div>").addClass("gbbPriceWrap2Label").text(gbb.utility.getCurrencySymbol() + " " + gbb.utility.getPriceFilterValues(noteAttribute)?.maxValue);
                    //gbbPriceWrap2.append(gbbPriceWrap2Input);
                    gbbPriceWrap2.append(gbbPriceWrap2Label);

                    gbbPriceTextWrap.append(gbbPriceWrap1);
                    gbbPriceTextWrap.append(gbbPriceWrap2);

                    gbbPriceFieldLower.on("input", (event) => {
                        lowerVal = parseInt(gbbPriceFieldLower[0].value);
                        upperVal = parseInt(gbbPriceFieldUpper[0].value);
                        if (lowerVal >= upperVal - 4) {
                            gbbPriceFieldUpper[0].value = lowerVal + 4;
                            if (upperVal == gbbPriceFieldUpper[0].max) {
                                gbbPriceFieldLower[0].value = parseInt(gbbPriceFieldUpper[0].max) - 4;
                            }
                        }
                        if (filterCategory?.minValue == lowerVal
                            && filterCategory?.maxValue == upperVal) {
                            gbb.utility.setActivatePriceFilters(noteAttribute, false);
                        } else {
                            gbb.utility.setActivatePriceFilters(noteAttribute, true);
                        }
                        gbbPriceWrap1Label.text(gbb.utility.getCurrencySymbol() + " " + event.target.value);
                        gbbPriceWrap2Label.text(gbb.utility.getCurrencySymbol() + " " + upperVal);
                        gbb.utility.setPriceFilterValues(noteAttribute, lowerVal, upperVal);
                    })

                    gbbPriceFieldLower.mouseup((event) => {
                        let filteredProducts = gbb.utility.getFilteredSortedProductsData(noteAttribute)
                        gbb.utility.toggleFiltersSideBar(noteAttribute);
                        setTimeout(() => {
                            gbb.$("body").find(".gbbProductsFiltersMainContainer").remove()
                        }, 500)
                    })

                    gbbPriceFieldUpper.on("input", (event) => {
                        lowerVal = parseInt(gbbPriceFieldLower[0].value);
                        upperVal = parseInt(gbbPriceFieldUpper[0].value);
                        if (upperVal < lowerVal + 4) {
                            gbbPriceFieldLower[0].value = upperVal - 4;
                            if (lowerVal == gbbPriceFieldLower[0].min) {
                                gbbPriceFieldUpper[0].value = 4;
                            }
                        }

                        if (filterCategory?.minValue == lowerVal && filterCategory?.maxValue == upperVal) {
                            gbb.utility.setActivatePriceFilters(noteAttribute, false);
                        } else {
                            gbb.utility.setActivatePriceFilters(noteAttribute, true);
                        }

                        gbbPriceWrap2Label.text(gbb.utility.getCurrencySymbol() + " " + event.target.value);
                        gbbPriceWrap1Label.text(gbb.utility.getCurrencySymbol() + " " + lowerVal);

                        gbb.utility.setPriceFilterValues(noteAttribute, lowerVal, upperVal);
                    })

                    gbbPriceFieldUpper.mouseup((event) => {
                        let filteredProducts = gbb.utility.getFilteredSortedProductsData(noteAttribute)
                        gbb.utility.toggleFiltersSideBar(noteAttribute);
                        setTimeout(() => {
                            gbb.$("body").find(".gbbProductsFiltersMainContainer").remove()
                        }, 500)
                    })


                    gbbFiltersDropDownWrapper.on("click", () => {
                        if (!showPriceFilter) {
                            gbb.$(".gbbFilterDropDownButton" + index).css("transform", "rotate(360deg)");
                            gbbFilterPriceContainer.show();
                        } else {
                            gbb.$(".gbbFilterDropDownButton" + index).css("transform", "rotate(180deg)");
                            gbbFilterPriceContainer.hide();
                        }
                        showPriceFilter = !showPriceFilter
                    })

                    gbbFilterPriceContainer.append(gbbPriceFieldContainer);
                    gbbFilterPriceContainer.append(gbbPriceTextWrap);

                    gbbFilterContainer.append(gbbFilterPriceContainer);
                    // if(isFilterTagsVisible) {
                    //     gbbFilterPriceContainer.show();
                    // } else {
                    //     gbbFilterPriceContainer.hide();
                    // }
                    // gbbFiltersDropDownWrapper.on("click",()=>{
                    //     if(isFilterTagsVisible) {
                    //         gbb.$(".gbbFilterDropDownButton"+index).css("transform", "rotate(180deg)");
                    //         gbbFilterTagsContainer.hide();
                    //     } else {
                    //         gbb.$(".gbbFilterDropDownButton"+index).css("transform", "rotate(360deg)");
                    //         gbbFilterTagsContainer.show();
                    //     }
                    //     isFilterTagsVisible = !isFilterTagsVisible;
                    // })

                } else {
                    let gbbFilterTagsContainer = gbb.$("<div>").addClass("gbbFilterTagsContainer").addClass("gbbFilterTagsContainer" + index);

                    filterCategory.tags.forEach((tag, tagIndex) => {
                        //add event listener to tagcontainer
                        let gbbProductsFilterTagContainer = gbb.$("<div>").addClass("gbbProductsFilterTagContainer");
                        let gbbProductsFilterTagCheckbox = gbb.$("<input>").addClass("gbbProductsFilterTagCheckbox").attr("type", "checkbox").attr("val", tag.value);
                        if (gbb.utility.getActivatedFilters(noteAttribute).findIndex(e => e.label == tag.label) != -1) {
                            gbbProductsFilterTagCheckbox.prop("checked", true);
                        }
                        const filterClicked = async () => {
                            gbb.gbbAddProductsPage.f.resetSearchTextValue()
                            if (gbb.utility.getActivatedFilters(noteAttribute).findIndex(e => e.label == tag.label) == -1) {
                                gbb.utility.setActivatedFilters(tag, noteAttribute, "add", filterCategory);
                            } else {
                                gbb.utility.setActivatedFilters(tag, noteAttribute, "remove", filterCategory);
                            }
                            // @ashfaq
                            let filteredProducts = await gbb.utility.getFilteredSortedProductsData(noteAttribute)

                            gbb.utility.toggleFiltersSideBar(noteAttribute);
                            // setTimeout(() => {
                            //     gbb.$("body").find(".gbbProductsFiltersMainContainer").remove()
                            // }, 500)
                        }
                        gbbProductsFilterTagCheckbox.on("click", (event) => {
                            // event.preventDefault();
                            // event.stopPropagation();
                            filterClicked()
                        })

                        let gbbProductsFilterTagLabel = gbb.$("<div>").addClass("gbbProductsFilterTagLabel").text(tag.label);

                        gbbProductsFilterTagLabel.on("click", (event) => {
                            event.preventDefault();
                            event.stopPropagation();
                            if (gbbProductsFilterTagCheckbox.prop("checked")) {
                                gbbProductsFilterTagCheckbox.prop("checked", false);
                            } else {
                                gbbProductsFilterTagCheckbox.prop("checked", true);
                            }
                            filterClicked()
                        })
                        gbbProductsFilterTagContainer.append(gbbProductsFilterTagCheckbox);
                        gbbProductsFilterTagContainer.append(gbbProductsFilterTagLabel);

                        gbbFilterTagsContainer.append(gbbProductsFilterTagContainer);
                    })

                    if (isFilterTagsVisible) {
                        gbbFilterTagsContainer.show();
                    } else {
                        gbbFilterTagsContainer.hide();
                    }
                    gbbFiltersDropDownWrapper.on("click", () => {
                        if (isFilterTagsVisible) {
                            gbb.$(".gbbFilterDropDownButton" + index).css("transform", "rotate(180deg)");
                            gbbFilterTagsContainer.hide();
                        } else {
                            gbb.$(".gbbFilterDropDownButton" + index).css("transform", "rotate(360deg)");
                            gbbFilterTagsContainer.show();
                        }
                        isFilterTagsVisible = !isFilterTagsVisible;
                    })
                    gbbFilterContainer.append(gbbFilterTagsContainer);
                }
                gbbProductsFiltersContainer.append(gbbFilterContainer);
            })
            gbbProductsFiltersMainContainer.append(gbbProductsFiltersContainer);
            return gbbProductsFiltersMainContainer;
        },
        renderProductsHTML: function (products, noteAttribute, category) {

            // products 
            products = JSON.parse(JSON.stringify(products))
            // products?.variants?.length>1 ?alert("multiple variants")
            const isPurchaseTypeSubscription = gbb.gbbSubscriptionProductsPage.f.checkIfPurchaseTypeIsSubscription()
            const gbbProductsContainer = gbb.$("<div>").addClass("gbbProductsContainer");
            const gbbProductsLabel = gbb.$("<p>").addClass("gbbProductsLabel");
            let gbbProductsItemsContainer = gbb.$("<div>").addClass("gbbProductsItemsContainer");
            const gbbProductsItemsArray = [];
            let addProductsPageArr = ADDPRODUCT_PAGES_LIST
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                gbbProductsLabel.text(gbb.utility.renderLanguageValue(gbb.settings.languageData.productPage.selectProductsLabel));
            } else if (noteAttribute == "reviewPage") {
                gbbProductsLabel.text(gbb.utility.renderLanguageValue(gbb.settings.languageData.reviewPage.addOnsLabel));
            }
            if (!products || products.length == 0) {
                if (noteAttribute == "reviewPage") { //no need to show no products label when on review page
                    return;
                }
                // else {
                //     const gbbProductsNotAvailable = gbb.$("<p>").addClass("gbbProductsNotAvailable");
                //     gbbProductsNotAvailable.text(gbb.utility.renderLanguageValue(gbb.settings.languageData.general.noProductsAvailable));

                //     //replace gbbProductsNotAvailable class if available
                //     if (gbb.$(".gbbProductsNotAvailable").length > 0) {
                //         gbb.$(".gbbProductsNotAvailable").replaceWith(gbbProductsNotAvailable);
                //     } else {
                //         gbbProductsItemsContainer.append(gbbProductsNotAvailable);
                //     }
                //     return gbbProductsContainer;
                // }  not in use @mufadal
            } else {
                // gbb.utility.debugConsole("Products here is", products)
                //  gbbProductsItemsContainer = gbb.$("<div>").addClass("gbbProductsItemsContainer");
                products = products?.filter((product) => {
                    return product.available == true;
                });

                products.forEach((product, index) => {
                    let currentProductPersonalization = gbb.utility.getCurrentProductPersonalization(product);
                    let doesThisProductHavePersonalization = currentProductPersonalization.isProductPersonalizationEnabled || false;

                    if (doesThisProductHavePersonalization) {
                        product.renderChooseOptionsButton_forcefully = true;
                    }


                    const gbbProductItem = gbb.$("<div>").addClass("gbbProductItem").clone();
                    gbbProductItem.css("background", gbb.settings.pageCustomizationData.productCard.productCardBgColor);
                    gbbProductItem.css("color", gbb.settings.pageCustomizationData.productCard.productCardTextColor);


                    const gbbProductTextContainer = gbb.$("<div>").addClass("gbbProductTextContainer");

                    const gbbProductDynamicContentContainer = gbb.$("<div>").addClass("gbbProductDynamicContentContainer");

                    gbbProductDynamicContentContainer.html(gbb.gbbAddProductsPage.f.renderProductDynamicContent(product,'PRODUCT_CARD'));

                    const gbbProductItemTitle = gbb.$("<div>").addClass("gbbProductItemTitle").css("cursor", "pointer");
                    const gbbProductActionContainer = gbb.$("<div>").addClass("gbbProductActionContainer");
                    const gbbProductReadMore = gbb.$("<div>").addClass("gbbProductReadMore").text("Read More >>");
                    const gbbProductItemPricesContainer = gbb.$("<div>").addClass("gbbProductItemPricesContainer");
                    const gbbProductItemPrice = gbb.$("<div>").addClass("gbbProductItemPrice");
                    const gbbProductItemCompareAtPrice = gbb.$("<div>").addClass("gbbProductItemCompareAtPrice");
                    const gbbProductButtonWrapper = gbb.$("<div>").addClass("gbbProductButtonWrapper");
                    // const gbbProductButton = gbb.$("<button>").addClass("gbbProductAddButton");
                    const gbbProductButton = gbb.$("<div>").addClass("gbbProductAddButton");

                    const gbbProductImageContainer = gbb.$("<div>").addClass("gbbProductImageContainer")
                    const gbbProductImage = gbb.$("<img>").addClass("gbbProductImage");
                    const gbbProductItemOverLay = gbb.$("<div>").addClass("gbbProductItemOverLay");
                    const gbbOverLayIconContainer = gbb.$("<div>").addClass("gbbOverLayIconContainer");

                    gbbProductItem.attr("productId", product?.id)
                    let firstvariantid = product.variants.length > 0 ? product?.variants[0]?.id : "";
                    gbbProductItem.attr("firstvariantid", firstvariantid);
                    if (product.customProductAttribute) {
                        gbbProductItem.attr('custom-product-attribute', product.customProductAttribute)
                    }
                    // gbb.utility.debugConsole("product details array", product.title, index)

                    for (let i = 0; i < product.images.length; i++) {
                        let image = product.images[i];
                        if (!image) {
                            continue;
                        }
                        if (image) {
                            gbbProductImageContainer.append(gbb.$("<img>").addClass('gbbProductImageContainerImg' + i).addClass("gbbProductImageContainerImg").addClass("gbbFade"))
                            gbbProductImageContainer.find('.gbbProductImageContainerImg' + i).attr('src', image).css('display', 'none')
                        }
                        if (i == 0) {
                            gbbProductImageContainer.find('.gbbProductImageContainerImg' + i).css('display', 'block').on("click", () => {
                                gbb.utility.debugConsole("triggering showProductVariantsModal from image click", product.title)
                                event.preventDefault();
                                event.stopPropagation();
                                gbb.f.showProductVariantsModal(product, gbbProductButton, noteAttribute, category)
                            })
                        }
                        if (image) {
                            break;
                        }
                    }
                    //push an anchor tag
                    if (product.images.length > 1) {
                        //let gbbProductSliderNavigatior = gbb.$("<div>").addClass('gbbProductSliderNavigatior')
                        gbbProductImageContainer.append(gbb.$("<a>").addClass('gbbPrevImage'))
                        gbbProductImageContainer.find('.gbbPrevImage').html("&#10094;");
                        //add an onclick event to the anchor tag
                        gbbProductImageContainer.append(gbb.$("<a>").addClass('gbbNextImage'))
                        gbbProductImageContainer.find('.gbbNextImage').html("&#10095;");

                        gbbProductImageContainer.find('.gbbPrevImage').click(function () {
                            gbb.utility.slider.plusSlides(gbbProductImageContainer, 1)
                        })
                        gbbProductImageContainer.find('.gbbNextImage').click(function () {
                            gbb.utility.slider.minusSlides(gbbProductImageContainer, 1)
                        })
                        //gbbProductImageContainer.append(gbbProductImageContainer);
                        //hide the arrows
                        gbbProductImageContainer.find('.gbbPrevImage').css("display", "none");
                        gbbProductImageContainer.find('.gbbNextImage').css("display", "none");
                    }

                    gbbProductImageContainer.append(gbb.f.renderTagsPillsHTML(product, noteAttribute, category));
                    gbbProductItem.append(gbbProductImageContainer);

                    // gbbProductItem.append(gbb.f.renderTagsPillsHTML(product, noteAttribute, category));


                    gbbProductItemTitle.on("click", () => {
                        gbb.f.showProductVariantsModal(product, gbbProductButton, noteAttribute, category)
                    })

                    gbbProductItemOverLay.on("click", () => {
                        gbb.f.showProductVariantsModal(product, gbbProductButton, noteAttribute, category)
                    })





                    // gbbProductReadMore.on("click",()=>{
                    //     gbb.f.showProductVariantsModal(product, gbbProductButton, noteAttribute, category)
                    // })
                    //gbbProductButton.css("background", gbb.settings.pageCustomizationData.productCard.productCardButtonColor);
                    //gbbProductButton.css("color", gbb.settings.pageCustomizationData.productCard.productCardButtonTextColor);

                   

                    let _productPrice = product.price
                    let _compareAtPrice = product.compare_at_price
                    if (isPurchaseTypeSubscription) {
                        _productPrice = gbb.gbbSubscriptionProductsPage.f.getSubscriptionPriceByVariantId(product.variants[0].id);
                        _compareAtPrice = product.price
                    }
                    if (gbb.settings?.merchantInfo?.bundleSettings?.showCompareAtPrice == true && _compareAtPrice && (isPurchaseTypeSubscription || _compareAtPrice > product.price)) {
                        gbbProductItemCompareAtPrice.text(gbb.utility.formatPrice(_compareAtPrice));
                    }
                    gbbProductItemPrice.text(gbb.utility.formatPrice(_productPrice));
                    gbbProductItemPricesContainer.append(gbbProductItemCompareAtPrice);
                    gbbProductItemPricesContainer.append(gbbProductItemPrice);

                    if (product.variants?.length == 1 && product.available == true && product.renderChooseOptionsButton_forcefully != true) {
                        let argsObj = {
                            variantId: product.variants[0].id,
                            productData: product,
                        }
                        let uniqueItemKey = gbb.utility.getUniqueIdForVariant(argsObj);
                        // const isItemInCart = gbb.utility.checkIfItemPresentInGiftBoxCart(product.variants[0].id);
                        // gbb.utility.debugConsole("isItemInCart:", isItemInCart);
                        let data = {
                            productData: product,
                            variant: product.variants[0],
                            // _boxProduct: product?.properties["_boxProduct"],
                            // _Category: product?.properties["_Category"]
                        }
                        const isItemInCart = gbb.utility.checkIfItemPresentInGiftBoxCart(data?.variant?.id, { uniqueItemKey });
                        let typeOfProduct = "singleVariant";
                        //price of the first variant
                        let price = product.variants[0].price;
                        let compareAtPrice = product.variants[0]?.compare_at_price || null
                        compareAtPrice = compareAtPrice > price ? compareAtPrice : null;

                        if (isPurchaseTypeSubscription) {
                            price = gbb.gbbSubscriptionProductsPage.f.getSubscriptionPriceByVariantId(product.variants[0].id);
                            compareAtPrice = product.variants[0].price
                        }
                        if (gbb?.settings?.merchantInfo?.bundleSettings?.showCompareAtPrice && compareAtPrice && (isPurchaseTypeSubscription || compareAtPrice > 0)) {
                            gbbProductItemCompareAtPrice.text(gbb.utility.formatPrice(compareAtPrice));
                        } else if (!compareAtPrice) {
                            gbbProductItemCompareAtPrice.text("");
                        }

                        
                        gbbProductItemPrice.text(gbb.utility.formatPrice(price));
                        if (isItemInCart) {
                            //activate quantity button
                            gbb.utility.activateQuantityButtons(gbbProductButton, data, noteAttribute, typeOfProduct, category);
                        } else {
                            gbb.utility.activateAddButton(gbbProductButton, data, noteAttribute, typeOfProduct, category);
                        }
                    } else if (product.renderChooseOptionsButton_forcefully == true || product.variants?.length > 1 && product.available == true) {
                        let variantProduct = gbb.utility.getTheVariantProductPresentInCart(product);
                        let data = {
                            productData: product,
                            variant: variantProduct
                        }
                        let typeOfProduct = "multipleVariants";
                        if (variantProduct && Object.keys(variantProduct).length > 0) {
                            let variantPrice = variantProduct.price
                            if (isPurchaseTypeSubscription) {
                                variantPrice = gbb.gbbSubscriptionProductsPage.f.getSubscriptionPriceByVariantId(variantProduct.id);
                            }
                            gbb.utility.activateQuantityButtons(gbbProductButton, data, noteAttribute, typeOfProduct, category);
                            gbbProductItemPrice.text(gbb.utility.formatPrice(variantPrice));
                        } else {
                            gbb.utility.activateAddButton(gbbProductButton, data, noteAttribute, typeOfProduct, category);
                        }

                    } else {
                    }

                    // if(product.variants.length == 1 ){
                    //     // gbbProductItemTitle.text(`${product.variants[0].title} (${product?.options[0]?.name})`);
                    //     gbbProductItemTitle.text(`${product.variants[0].title}`);
                    // }else{
                    //     gbbProductItemTitle.text(product.title);
                    // }
                    let gbbProductTitleOnly = gbb.$("<div>").addClass("gbbProductTitleOnly").text(product.title)
                    let gbbVariantTitle = gbb.$("<div>").addClass("gbbVariantTitle").text(product?.variantName);
                    let divsForTitle = [];
                    divsForTitle.push(gbbProductTitleOnly);
                    divsForTitle.push(gbbVariantTitle);

                    gbbProductItemOverLay.append(gbbOverLayIconContainer)
                    // gbbProductItemTitle.text(product.title);
                    gbbProductItemTitle.html(divsForTitle);

                    gbbProductTextContainer.append(gbbProductItemTitle);
                    gbbProductButtonWrapper.append(gbbProductButton);
                    gbbProductActionContainer.append(gbbProductItemPricesContainer);
                    gbbProductActionContainer.append(gbbProductButtonWrapper);
                    gbbProductImageContainer.append(gbbProductItemOverLay);

                    gbbProductItem.append(gbbProductTextContainer);
                    if (gbb.settings?.app?.integrations?.judgeme?.isEnabled) {
                        let starsHTML = gbb.gbbIntegrations?.judgeme?.f?.getStarsHTMLByProductId(product.id);
                        if (starsHTML) {
                            let reviewStarsContainer = gbb.$("<div>").addClass("gbbReviewStarsContainer");
                            let reviewStars = gbb.$("<div>").addClass("gbbReviewStars");
                            reviewStars.html(starsHTML);
                            reviewStarsContainer.append(reviewStars);
                            let appendTo = gbb.$('.gbbProductsCardLayoutV2').length > 0 ? gbbProductItem : gbbProductTextContainer;
                            appendTo.append(reviewStarsContainer);
                        }
                    }
                    if (gbb.settings.bundleSettings?.metafieldNameSpaceAndKeys.length > 0 || gbb.settings.app?.dynamicScriptForHTMLContent) {
                        gbbProductItem.append(gbbProductDynamicContentContainer)
                    }
                    gbbProductItem.append(gbbProductActionContainer);
                    // gbbProductItem.append(gbbProductReadMore);

                    if (isPurchaseTypeSubscription && gbb.gbbSubscriptionProductsPage.state.showDiscountOnProductCards) {
                        const discountRibbon = gbb.gbbSubscriptionProductsPage.f.prepareSubscriptionProductDiscountRibbonUI(product.variants[0])
                        if (discountRibbon) {
                            gbbProductItem.append(discountRibbon)
                        }
                    }
                    if (gbb.state.currentPageId == "personalizationPage" && gbb.gbbAddonProducts.state.isEnabled) {
                        let {type,value,discountText:addonsDiscountRibbonContent} = gbb.gbbAddonProducts.f.prepareDiscountRibbonContentForProductAddons()
                        if (addonsDiscountRibbonContent) {
                            let isFreeProduct = value == 100 // in future for discountType based on amount calculate product price and discounted price for calculatng isFreeProduct
                            if (isFreeProduct) {
                                gbbProductItem.attr("free-addon-product",true)
                            }
                            let ribbonUIOptions = {
                                ribbonContent: addonsDiscountRibbonContent,
                                ribbonClassName: "gbbAddonDiscountRibbon",
                            }
                            let addonDiscountsRibbonHTML = gbb.utility.prepareProductCardRibbonUI(ribbonUIOptions)
                            gbbProductItem.append(addonDiscountsRibbonHTML)
                        }
                    }
                    gbbProductsItemsContainer.append(gbbProductItem);
                    gbbProductsItemsArray.push(gbbProductItem);
                })


                //in gbbProductItemsArray, just figure out the -15 index and loadMoreIndicator as the tag
                let totalNumberOfItemsInArray = gbbProductsItemsArray.length;
                let loadMoreIndicatorItem;

                //attach loadMoreIndicator in the 70% of the array
                if (totalNumberOfItemsInArray > 0) {
                    let indexToAttachLoadMoreIndicator = Math.floor(totalNumberOfItemsInArray * 0.7);
                    loadMoreIndicatorItem = gbbProductsItemsArray[indexToAttachLoadMoreIndicator];
                    //add the data attribute to the loadMoreIndicatorItem
                    loadMoreIndicatorItem.attr("data-load-more-indicator-status", "active");
                }

                //gbbProductsContainer.append(gbbProductsLabel);
                // gbbProductsContainer.append(gbbProductsItemsContainer);
                // gbb.gbbAddProductsPage.f.hideExcessProducts(gbbProductsContainer);
                return gbbProductsItemsArray;
                // return gbbProductsItemsContainer;
            }
        },

        renderFooterButtons: function (noteAttribute, gbbFooterNextButton, renderNewTemplateDesign = false) {

            const gbbFooterButtonsWrapper = gbb.$("<div>").addClass("gbbFooterButtonsWrapper");
            if (renderNewTemplateDesign || gbb.f.getPreviousNavigationItem()) {
                // const gbbFooterBackButton = gbb.$("<button>").addClass("gbbFooterBackButton");
                const gbbFooterBackButton = gbb.$("<div>").addClass("gbbFooterBackButton");
                gbbFooterBackButton.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData.general.backButtonText));
                gbbFooterBackButton.css("background", gbb.settings.pageCustomizationData.cartFooter.cartFooterBackButtonColor);
                gbbFooterBackButton.css("color", gbb.settings.pageCustomizationData.cartFooter.cartFooterBackButtonTextColor);
                if (renderNewTemplateDesign && !gbb.f.getPreviousNavigationItem()) {
                    //disable the button
                    gbbFooterBackButton.addClass("gbbDisabled");
                }
                gbbFooterBackButton.on("click", function () {
                    gbb.utility.renderTemporaryLoadingSpinner("show")
                    gbb.giftboxbuilderPage.action.onPrevNavigationBYOB();
                    //add the gbbDisabled class to button
                    gbb.utility.disableElement(gbbFooterBackButton, 1000);
                    gbb.gbbBrowser.emitCustomEvent({
                        eventName: "gbb-back-button-click",
                        attachEventTo: gbbFooterBackButton[0]
                    })
                })
                gbbFooterButtonsWrapper.append(gbbFooterBackButton);
            }
            if (renderNewTemplateDesign) {
                gbbFooterButtonsWrapper.append(gbb.f.renderFooterTotalContainer());
            }
            // const gbbFooterNextButton = gbb.$("<button>").addClass("gbbFooterNextButton");
            //gbbFooterNextButton = gbb.$("<div>").addClass("gbbFooterNextButton");
            gbbFooterNextButton.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData.general.nextButtonText));
            gbbFooterNextButton.css("background", gbb.settings.pageCustomizationData.cartFooter.cartFooterNextButtonColor);
            gbbFooterNextButton.css("color", gbb.settings.pageCustomizationData.cartFooter.cartFooterNextButtonTextColor);
            gbbFooterNextButton.on("click", async function () {
                await gbb.utility.checkConditionsAndProceedToNextPage(noteAttribute, gbbFooterNextButton);
                gbb.gbbBrowser.emitCustomEvent({
                    eventName: "gbb-next-button-click",
                    attachEventTo: gbbFooterNextButton[0]
                })
            })
            gbbFooterButtonsWrapper.append(gbbFooterNextButton);
            return gbbFooterButtonsWrapper;
        },

        renderCartProductsFooterHTMLForMobile: function (noteAttribute, gbbProductsFooterHTML, gbbPageFooterHTML, updateFooterFlow) {
            let renderAddonsMessaging  = gbb.gbbAddonProducts.f.checkIfAddonsMessagingNeeded()
            let renderNewTemplateDesign = gbb.$('.gbbProductsCardLayoutV2').length > 0
            let renderProductSlotsFooter = gbb.settings.stepsConfigurationData?.isProductSlotsEnabled && gbb.gbbAddProductsPage?.state?.isEveryConditionHaveTypeQuantity;
            const isPurchaseTypeSubscription = gbb.gbbSubscriptionProductsPage.f.checkIfPurchaseTypeIsSubscription()

            gbbProductsFooterHTML.css("grid-template-columns", "1fr");
            gbbProductsFooterHTML.addClass("gbbProductsFooterHTMLForMobile")
            let _boxData = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage();
            let products = _boxData?.items || [];
            let gbbViewProductsLabelAndTotalContainer = gbb.$("<div>").addClass("gbbViewProductsLabelAndTotalContainer");

            const gbbFooterTotalContainer = gbb.f.renderFooterTotalContainer();

            let gbbViewCartProductsLink = gbb.$("<div>").addClass("gbbViewCartProductsLink");
            gbbViewCartProductsLink.text(gbb?.settings?.languageData?.general?.viewCartProductsLabel?.value || "View Selected Products");
            gbbViewCartProductsLink.append(" ").append(`(${_boxData.item_count})`)
            gbbViewCartProductsLink.on("click", () => {
                gbb.f.renderCartProductsModal(noteAttribute);
            })

            gbbViewProductsLabelAndTotalContainer.append(gbbViewCartProductsLink);
            gbbViewProductsLabelAndTotalContainer.append(gbbFooterTotalContainer);

            let gbbFooterNextButton = gbb.$("<div>").addClass("gbbFooterNextButton");
            const gbbFooterButtonsWrapper = gbb.f.renderFooterButtons(noteAttribute, gbbFooterNextButton, renderNewTemplateDesign);
            let gbbFooterButtonsContainer = gbb.$(`<div>`).addClass('gbbFooterButtonsContainer')
            const gbbFooterProductsContainer = gbb.$("<div>").addClass("gbbFooterProductsContainer");
            if (renderNewTemplateDesign) {
                if (products.length == 0) {
                    gbb.$('body').css("overflow-y", DEFAULT_BODY_OVERFLOW_VALUE)
                    gbb.gbbAddProductsPage.state.showBoxProductsInFooter = false;
                }// reset drawer values
                products.forEach((product) => {
                    const gbbFooterProductContainer = gbb.$("<div>").addClass("gbbFooterProductContainer");
                    // gbb.utility.debugConsole("product:", product)
                    //attach a data attriute to the product container
                    gbbFooterProductContainer.attr("productId", product?.product_id);
                    gbbFooterProductContainer.attr("variantId", product?.variant_id)

                    gbbFooterProductContainer.attr("_boxProduct", product?.properties["_boxProduct"]);
                    gbbFooterProductContainer.attr("_Category", product?.properties["_Category"]);

                    let argsObj = {
                        variantId: product.variant_id,
                        productData: product,
                    }


                    let uniqueGbbItemKey = gbb.utility.getUniqueIdForVariant(argsObj)
                    gbbFooterProductContainer.attr("_uniqueGbbItemKey", uniqueGbbItemKey);




                    const gbbFooterProductImageContainer = gbb.$("<div>").addClass("gbbFooterProductImageContainer");
                    const gbbFooterProductImage = gbb.$("<img>").addClass("gbbFooterProductImage");
                    gbbFooterProductImage.attr("src", product.image);
                    const gbbFooterProductTextContainer = gbb.$("<div>").addClass("gbbFooterProductTextContainer");
                    const gbbFooterProductTitle = gbb.$("<div>").addClass("gbbFooterProductTitle");
                    const gbbFooterProductQtyPriceContainer = gbb.$("<div>").addClass("gbbFooterProductQtyPriceContainer");
                    const gbbFooterProductPrice = gbb.$("<div>").addClass("gbbFooterProductPrice");
                    const gbbFooterProductQuantity = gbb.$("<div>").addClass("gbbFooterProductQuantity");


                    //a button to remove the product from the cart
                    const gbbFooterProductRemoveButton = gbb.$("<div>").addClass("gbbFooterProductRemoveButton");
                    // x icon for the remove button
                    const gbbFooterProductRemoveButtonIcon = gbb.$("<div>").addClass("gbbFooterProductRemoveButtonIcon");


                    // gbbFooterProductRemoveButtonIcon.css("color", gbb.settings.pageCustomizationData?.generalSettings?.icon?.iconTextColor);
                    // gbbFooterProductRemoveButton.css("background", gbb.settings.pageCustomizationData?.generalSettings?.icon?.iconBgColor)
                    gbbFooterProductRemoveButtonIcon.append(CONSTANT_CLOSE_ICON_SVG);
                    gbbFooterProductRemoveButton.append(gbbFooterProductRemoveButtonIcon)
                    gbbFooterProductRemoveButton.on("click", async () => {
                        //    await gbb.f.removeProductFromCart({id: product.variant_id});
                        let variant = {
                            id: product.variant_id,
                            _boxProduct: product?.properties["_boxProduct"],
                            _Category: product?.properties["_Category"],
                            _uniqueGbbItemKey: uniqueGbbItemKey
                            // _uniqueGbbItemKey : gbbFooterProductContainer.attr("_uniqueGbbItemKey")
                        }
                        if (gbb.settings.giftMessage.messageProduct && gbb.settings.giftMessage.messageProduct.product && gbb.settings.giftMessage.messageProduct.product.variants) {
                            const variantIdForMessage = gbb.settings.giftMessage.messageProduct.product.variants[0].id;
                            if (variantIdForMessage == product.variant_id) {
                                gbb.gbbPersonalizePage.state.customerUploadsResponse = {};
                            }
                        }
                        await gbb.utility.removeFromCart({ variant: variant });
                        gbb.gbbAddProductsPage.f.updateProductCard(product.product_id, variant.id);
                        gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML(noteAttribute, { flow: "updateFooterWithoutAppending" }));
                    })

                    gbbFooterProductTitle.text(product.title);
                    let _productPrice = product.price
                    if (isPurchaseTypeSubscription) {
                        _productPrice = gbb.gbbSubscriptionProductsPage.f.getSubscriptionPriceByVariantId(product?.variant_id);
                    }
                    gbbFooterProductPrice.text(gbb.utility.formatPrice(_productPrice));
                    gbbFooterProductQuantity.text("x" + product.quantity);
                    gbbFooterProductImageContainer.append(gbbFooterProductImage);

                    gbbFooterProductTextContainer.append(gbbFooterProductTitle);
                    gbbFooterProductQtyPriceContainer.append(gbbFooterProductPrice);
                    gbbFooterProductQtyPriceContainer.append(gbbFooterProductQuantity);
                    gbbFooterProductTextContainer.append(gbbFooterProductQtyPriceContainer);

                    let pageIdTheProductWasAddedFrom = product?.properties["_boxProduct"]
                    // @ashfaq append commented
                    if (gbb.utility.checkIfRemoveButtonShouldBeAppended(product?.variant_id, pageIdTheProductWasAddedFrom)) {
                        gbbFooterProductContainer.append(gbbFooterProductRemoveButton);
                    }

                    gbbFooterProductContainer.append(gbbFooterProductImageContainer);
                    gbbFooterProductContainer.append(gbbFooterProductTextContainer);
                    gbbFooterProductsContainer.append(gbbFooterProductContainer);
                })
                let displayValue = gbb.gbbAddProductsPage.state.showBoxProductsInFooter ? 'grid' : 'none'
                gbbFooterButtonsContainer.css("background", gbb.settings.pageCustomizationData?.cartFooter?.cartFooterButtonsContainerBgColor || '#f6f6f6')
                gbbFooterButtonsContainer.append(gbbFooterButtonsWrapper);
                gbbFooterProductsContainer.css('display', displayValue)
                gbbProductsFooterHTML.append(gbbFooterProductsContainer);
                if (gbbPageFooterHTML.find('.gbbDiscountFooterHTML').length <= 0) {
                    gbbPageFooterHTML.append(gbb.gbbAddProductsPage.f.renderShowBoxProductsInFooterHTML())
                } // if discount is not enable then will show selected products
            }
            else if (products.length > 0) {
                gbbProductsFooterHTML.append(gbbViewProductsLabelAndTotalContainer);
            }
            let footerButtonsContainerForMobile = renderNewTemplateDesign ? gbbFooterButtonsContainer : gbbFooterButtonsWrapper
            if (renderProductSlotsFooter) {
                let gbbSlotFooterProductsContainer = gbb.f.renderProductSlotsFooterHTML(noteAttribute);
                let isDrawerOpen = gbb.gbbAddProductsPage?.state?.showBoxProductsInFooter || false
                if (isDrawerOpen) {
                    gbbSlotFooterProductsContainer.css("display", "none")
                }

                if (updateFooterFlow == "updateFooterWithoutAppending" && gbb.$(".gbbSlotFooterProductsContainerWrapper").length > 0) {
                    if (!isDrawerOpen && products?.length == 0 && !gbb.$(".gbbSlotFooterProductsContainer").is(":visible")) {
                        gbb.$(".gbbSlotFooterProductsContainerWrapper").slideDown(100)
                    }
                    let productsContainer = gbbSlotFooterProductsContainer.find(".gbbSlotFooterProductContainer")
                    gbb.$(".gbbSlotFooterProductsContainer").html(productsContainer)
                    gbb.$(".gbbFooterProductsContainer").replaceWith(gbbFooterProductsContainer)
                    gbb.gbbAddProductsPage.f.autoScrollSlots()
                    gbb.$(".gbbFooterButtonsWrapper").replaceWith(gbbFooterButtonsWrapper)
                    gbb.$(".gbbCartIconWithQuantityContainer").html(gbb.gbbAddProductsPage.f.renderCartIconWithQuantityHTML())
                    let gbbPageFooterHTML = gbb.$(".gbbPageFooterHTML")
                    if (renderAddonsMessaging || gbb.settings?.discountsData?.isDiscountEnabled && gbb.settings?.discountsData?.isShowDiscountsEnabled && gbb.settings?.discountsData?.rules?.length > 0) {
                        let discountFooterHTML = gbb.gbbDiscountComponent.f.discountStatusFooterHTML()
                        discountFooterHTML.find(".gbbDiscountMessageContainer").on("click", gbb.gbbAddProductsPage.f.toggleBoxProductsDisplayFooter)
                        gbb.$(".gbbDiscountFooterHTML").html(discountFooterHTML)
                    }
                    // gbbPageFooterHTML.find(".gbbDiscountMessageContainer").on("click", gbb.gbbAddProductsPage.f.toggleBoxProductsDisplayFooter)
                    return gbbPageFooterHTML
                } else {
                    gbbProductsFooterHTML.append(gbbSlotFooterProductsContainer);
                }
            }
            gbbProductsFooterHTML.append(footerButtonsContainerForMobile);
            gbbPageFooterHTML.append(gbbProductsFooterHTML);
            if (renderNewTemplateDesign) {
                let gbbCartIconWithQuantityContainer = gbb.gbbAddProductsPage.f.renderCartIconWithQuantityHTML()

                gbbCartIconWithQuantityContainer.click(gbb.gbbAddProductsPage.f.toggleBoxProductsDisplayFooter)

                gbbPageFooterHTML.append(gbbCartIconWithQuantityContainer)
                gbbPageFooterHTML.find(".gbbDiscountMessageContainer").on("click", gbb.gbbAddProductsPage.f.toggleBoxProductsDisplayFooter)
            }
            if (gbb.utility.checkIfBrandingShouldBeVisible()) {
                gbbPageFooterHTML.append(gbb.utility.renderPoweredByLabel());
            }
            return gbbPageFooterHTML;
        },
        renderFooterTotalContainer: function () {
            const gbbFooterTotalContainer = gbb.$("<div>").addClass("gbbFooterTotalContainer");
            let totalLabelTextColor = gbb.settings.pageCustomizationData.cartFooter.cartFooterTotalLabelColor || gbb.settings.pageCustomizationData.cartFooter.cartFooterTextColor;
            const gbbFooterTotalLabel = gbb.$("<div>").addClass("gbbFooterTotalLabel").css("color", totalLabelTextColor)
            const gbbFooterTotalValueContainer = gbb.$("<div>").addClass("gbbFooterTotalValueContainer").css("color", gbb.settings.pageCustomizationData?.cartFooter?.cartFooterTextColor)

            // const gbbFooterOriginalTotalValue = gbb.$("<div>").addClass("gbbFooterOriginalTotalValue").css("color", "#625f5f");
            const gbbFooterOriginalTotalValue = gbb.$("<div>").addClass("gbbFooterOriginalTotalValue").addClass("gbbFooterOriginalTotalValue")
            gbbFooterTotalLabel.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData.reviewPage.totalLabel) || "Total");
            gbbFooterOriginalTotalValue.append(gbb.utility.getGiftBoxProductsTotalWithCurrency());

            const gbbFooterDiscountedTotalValue = gbb.$("<div>");
            let finalPriceFontColor = gbb.settings.pageCustomizationData?.cartFooter?.cartFooterFinalPriceFontColor || gbb.settings.pageCustomizationData?.cartFooter?.cartFooterTextColor;
            if (gbb.settings?.discountsData?.isDiscountEnabled && gbb.settings?.discountsData?.isShowDiscountsEnabled) {
                gbbFooterDiscountedTotalValue.addClass("gbbFooterDiscountedTotalValue").css("color", finalPriceFontColor)
            } else {
                gbbFooterDiscountedTotalValue.addClass("gbbFooterTotalValue").css("color", finalPriceFontColor)
            }
            gbbFooterTotalLabel.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData.reviewPage.totalLabel) || "Total");

            let originalTotal = gbb.state.giftBoxCartData
            // originalTotal = parseInt(originalTotal.total_price / 100);
            originalTotal = parseFloat(originalTotal.total_price / 100);

            let discountedTotal = gbb.utility.getGiftBoxProductsDiscountedTotal();
            let formattedDiscountedPrice = gbb.utility.getGiftBoxProductsTotalWithCurrency();

            if (gbb.settings?.discountsData?.isDiscountEnabled && gbb.settings?.discountsData?.isShowDiscountsEnabled && gbb.utility.getGiftBoxProductsDiscountedTotal() != originalTotal) {
                discountedTotal = gbb.utility.getGiftBoxProductsDiscountedTotal();
                // formattedDiscountedPrice = gbb.utility.getCurrencySymbol() + "" + parseFloat(discountedTotal).toFixed(2);
                let discountedTotalInShopifyFormat = discountedTotal * 100;
                formattedDiscountedPrice = gbb.utility.formatPrice(discountedTotalInShopifyFormat)
                gbbFooterTotalValueContainer.append(gbbFooterOriginalTotalValue);
            }
            gbbFooterDiscountedTotalValue.append(formattedDiscountedPrice);

            gbbFooterTotalValueContainer.append(gbbFooterDiscountedTotalValue)

            gbbFooterTotalContainer.append(gbbFooterTotalLabel);
            gbbFooterTotalContainer.append(gbbFooterTotalValueContainer);
            return gbbFooterTotalContainer;
        },
        renderProductSlotsFooterHTML: function (noteAttribute) {
            try {
                let gbbSlotFooterProductsContainerWrapper = gbb.$("<div>").addClass("gbbSlotFooterProductsContainerWrapper");
                let gbbSlotFooterProductsContainer = gbb.$("<div>").addClass("gbbSlotFooterProductsContainer");
                let totalNoOfSlotsRequired = gbb.gbbAddProductsPage?.state?.totalProductSlotsRequired || 0;
                let boxData = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage();
                let boxProducts = boxData?.items || [];
                boxProducts.forEach((product) => {
                    let gbbSlotFooterProductContainer = gbb.$("<div>").addClass("gbbSlotFooterProductContainer");
                    gbbSlotFooterProductContainer.attr("productId", product?.product_id);
                    gbbSlotFooterProductContainer.attr("variantId", product?.variant_id)

                    gbbSlotFooterProductContainer.attr("_boxProduct", product?.properties["_boxProduct"]);
                    gbbSlotFooterProductContainer.attr("_Category", product?.properties["_Category"]);

                    let argsObj = {
                        variantId: product.variant_id,
                        productData: product,
                    }

                    let uniqueGbbItemKey = gbb.utility.getUniqueIdForVariant(argsObj)
                    gbbSlotFooterProductContainer.attr("_uniqueGbbItemKey", uniqueGbbItemKey);

                    const gbbSlotFooterProductImageContainer = gbb.$("<div>").addClass("gbbSlotFooterProductImageContainer");
                    const gbbSlotFooterProductImage = gbb.$("<img>").addClass("gbbSlotFooterProductImage");
                    gbbSlotFooterProductImage.attr("src", product.image);

                    //a button to remove the product from the cart
                    const gbbSlotFooterProductRemoveButton = gbb.$("<div>").addClass("gbbSlotFooterProductRemoveButton");
                    // x icon for the remove button
                    const gbbSlotFooterProductRemoveButtonIcon = gbb.$("<div>").addClass("gbbSlotFooterProductRemoveButtonIcon");

                    const gbbSlotFooterProductQuantity = gbb.$("<div>").addClass("gbbSlotFooterProductQuantity");
                    gbbSlotFooterProductQuantity.text("x" + product.quantity);
                    gbbSlotFooterProductRemoveButtonIcon.append(CONSTANT_CLOSE_ICON_SVG);
                    gbbSlotFooterProductRemoveButton.append(gbbSlotFooterProductRemoveButtonIcon)
                    gbbSlotFooterProductRemoveButton.on("click", async () => {
                        //    await gbb.f.removeProductFromCart({id: product.variant_id});
                        let variant = {
                            id: product.variant_id,
                            _boxProduct: product?.properties["_boxProduct"],
                            _Category: product?.properties["_Category"],
                            _uniqueGbbItemKey: uniqueGbbItemKey
                            // _uniqueGbbItemKey : gbbSlotFooterProductContainer.attr("_uniqueGbbItemKey")
                        }
                        if (gbb.settings.giftMessage.messageProduct && gbb.settings.giftMessage.messageProduct.product && gbb.settings.giftMessage.messageProduct.product.variants) {
                            const variantIdForMessage = gbb.settings.giftMessage.messageProduct.product.variants[0].id;
                            if (variantIdForMessage == product.variant_id) {
                                gbb.gbbPersonalizePage.state.customerUploadsResponse = {};
                            }
                        }
                        await gbb.utility.removeFromCart({ variant: variant });
                        gbb.gbbAddProductsPage.f.updateProductCard(product.product_id, variant.id);
                        gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML(noteAttribute, { flow: "updateFooterWithoutAppending" }));
                    })

                    gbbSlotFooterProductImageContainer.append(gbbSlotFooterProductImage);

                    let pageIdTheProductWasAddedFrom = product?.properties["_boxProduct"]
                    if (gbb.utility.checkIfRemoveButtonShouldBeAppended(product?.variant_id, pageIdTheProductWasAddedFrom)) {
                        gbbSlotFooterProductContainer.append(gbbSlotFooterProductRemoveButton);
                    }

                    gbbSlotFooterProductContainer.append(gbbSlotFooterProductImageContainer);
                    if (product.quantity > 1) {
                        gbbSlotFooterProductContainer.append(gbbSlotFooterProductQuantity);
                    }
                    gbbSlotFooterProductsContainer.append(gbbSlotFooterProductContainer);
                })

                // render empty slots 
                let totalItemCount = boxData?.item_count || 0;
                for (let startIdx = totalItemCount; startIdx < totalNoOfSlotsRequired; startIdx++) {
                    let gbbSlotFooterProductContainer = gbb.$("<div>").addClass("gbbSlotFooterProductContainer");
                    gbbSlotFooterProductContainer.addClass("gbbSlotFooterProductContainerEmpty");
                    gbbSlotFooterProductContainer.text(`${startIdx + 1}`);
                    gbbSlotFooterProductsContainer.append(gbbSlotFooterProductContainer);
                }
                gbbSlotFooterProductsContainerWrapper.append(gbbSlotFooterProductsContainer);
                return gbbSlotFooterProductsContainerWrapper;
            } catch (error) {
                gbb.utility.debugConsole("error in renderProductSlotsFooterHTML:", error);
            }
        },
        renderCartProductsFooterHTML: function (noteAttribute, options) {
            try {
                let updateFooterFlow = options?.flow
                let renderProductSlotsFooter = gbb.settings.stepsConfigurationData?.isProductSlotsEnabled && gbb.gbbAddProductsPage?.state?.isEveryConditionHaveTypeQuantity;
                const isPurchaseTypeSubscription = gbb.gbbSubscriptionProductsPage.f.checkIfPurchaseTypeIsSubscription()
                const renderAddonsMessaging = gbb.gbbAddonProducts.f.checkIfAddonsMessagingNeeded()
                const renderNewTemplateDesign = gbb.$('.gbbProductsCardLayoutV2').length > 0
                //gbb.state.cartData = await gbb.utility.getCart();
                let gbbPageFooterHTML = gbb.$("<div>").addClass("gbbPageFooterHTML");

                let gbbBoxIdContainer = gbb.$("<div>").addClass("gbbPageFooterHTML");
                //gbbBoxIdContainer.text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.reviewPage?.boxNumberLabel) || "Box Number:").append(gbb.state?.activeBoxId?.split("box")[1]|| 1);
                //gbbPageFooterHTML.append(gbbBoxIdContainer);

                let gbbProductsFooterHTML;
                gbbProductsFooterHTML = gbb.$("<div>").addClass("gbbProductsFooterHTML");

                gbbProductsFooterHTML.css("background", gbb.settings.pageCustomizationData.cartFooter.cartFooterBgColor)
                gbbProductsFooterHTML.css("color", gbb.settings.pageCustomizationData.cartFooter.cartFooterTextColor)

                if (renderAddonsMessaging || gbb.settings?.discountsData?.isDiscountEnabled && gbb.settings?.discountsData?.isShowDiscountsEnabled && gbb.settings?.discountsData?.rules?.length > 0) {
                    gbbPageFooterHTML.append(gbb.gbbDiscountComponent.f.discountStatusFooterHTML())
                }

                if (window.innerWidth < 600) {
                    return gbb.f.renderCartProductsFooterHTMLForMobile(noteAttribute, gbbProductsFooterHTML, gbbPageFooterHTML, updateFooterFlow);
                }
                const gbbFooterProductsContainer = gbb.$("<div>").addClass("gbbFooterProductsContainer");
                let gbbFooterTotalContainer = gbb.$("<div>");
                let products = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage();
                products = products?.items || [];
                // products = products?.item_count
                products.forEach((product) => {
                    const gbbFooterProductContainer = gbb.$("<div>").addClass("gbbFooterProductContainer");
                    // gbb.utility.debugConsole("product:", product)
                    //attach a data attriute to the product container
                    gbbFooterProductContainer.attr("productId", product?.product_id);
                    gbbFooterProductContainer.attr("variantId", product?.variant_id)

                    gbbFooterProductContainer.attr("_boxProduct", product?.properties["_boxProduct"]);
                    gbbFooterProductContainer.attr("_Category", product?.properties["_Category"]);

                    let argsObj = {
                        variantId: product.variant_id,
                        productData: product,
                    }


                    let uniqueGbbItemKey = gbb.utility.getUniqueIdForVariant(argsObj)
                    gbbFooterProductContainer.attr("_uniqueGbbItemKey", uniqueGbbItemKey);




                    const gbbFooterProductImageContainer = gbb.$("<div>").addClass("gbbFooterProductImageContainer");
                    const gbbFooterProductImage = gbb.$("<img>").addClass("gbbFooterProductImage");
                    gbbFooterProductImage.attr("src", product.image);
                    const gbbFooterProductTextContainer = gbb.$("<div>").addClass("gbbFooterProductTextContainer");
                    const gbbFooterProductTitle = gbb.$("<div>").addClass("gbbFooterProductTitle");
                    const gbbFooterProductQtyPriceContainer = gbb.$("<div>").addClass("gbbFooterProductQtyPriceContainer");
                    const gbbFooterProductPrice = gbb.$("<div>").addClass("gbbFooterProductPrice");
                    const gbbFooterProductQuantity = gbb.$("<div>").addClass("gbbFooterProductQuantity");


                    //a button to remove the product from the cart
                    const gbbFooterProductRemoveButton = gbb.$("<div>").addClass("gbbFooterProductRemoveButton");
                    // x icon for the remove button
                    const gbbFooterProductRemoveButtonIcon = gbb.$("<div>").addClass("gbbFooterProductRemoveButtonIcon");


                    // gbbFooterProductRemoveButtonIcon.css("color", gbb.settings.pageCustomizationData?.generalSettings?.icon?.iconTextColor);
                    // gbbFooterProductRemoveButton.css("background", gbb.settings.pageCustomizationData?.generalSettings?.icon?.iconBgColor)
                    gbbFooterProductRemoveButtonIcon.append(CONSTANT_CLOSE_ICON_SVG);
                    gbbFooterProductRemoveButton.append(gbbFooterProductRemoveButtonIcon)
                    gbbFooterProductRemoveButton.on("click", async () => {
                        //    await gbb.f.removeProductFromCart({id: product.variant_id});
                        let variant = {
                            id: product.variant_id,
                            _boxProduct: product?.properties["_boxProduct"],
                            _Category: product?.properties["_Category"],
                            _uniqueGbbItemKey: uniqueGbbItemKey
                            // _uniqueGbbItemKey : gbbFooterProductContainer.attr("_uniqueGbbItemKey")
                        }
                        if (gbb.settings.giftMessage.messageProduct && gbb.settings.giftMessage.messageProduct.product && gbb.settings.giftMessage.messageProduct.product.variants) {
                            const variantIdForMessage = gbb.settings.giftMessage.messageProduct.product.variants[0].id;
                            if (variantIdForMessage == product.variant_id) {
                                gbb.gbbPersonalizePage.state.customerUploadsResponse = {};
                            }
                        }
                        await gbb.utility.removeFromCart({ variant: variant });
                        gbb.gbbAddProductsPage.f.updateProductCard(product.product_id, variant.id);
                        gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML(noteAttribute, { flow: "updateFooterWithoutAppending" }));
                    })

                    gbbFooterProductTitle.text(product.title);
                    let _productPrice = product.price;
                    if (isPurchaseTypeSubscription) {
                        _productPrice = gbb.gbbSubscriptionProductsPage.f.getSubscriptionPriceByVariantId(product?.variant_id)
                    }
                    gbbFooterProductPrice.text(gbb.utility.formatPrice(_productPrice));
                    gbbFooterProductQuantity.text("x" + product.quantity);
                    gbbFooterProductImageContainer.append(gbbFooterProductImage);

                    gbbFooterProductTextContainer.append(gbbFooterProductTitle);
                    gbbFooterProductQtyPriceContainer.append(gbbFooterProductPrice);
                    gbbFooterProductQtyPriceContainer.append(gbbFooterProductQuantity);
                    gbbFooterProductTextContainer.append(gbbFooterProductQtyPriceContainer);

                    let pageIdTheProductWasAddedFrom = product?.properties["_boxProduct"]
                    // @ashfaq append commented
                    if (gbb.utility.checkIfRemoveButtonShouldBeAppended(product?.variant_id, pageIdTheProductWasAddedFrom)) {
                        gbbFooterProductContainer.append(gbbFooterProductRemoveButton);
                    }

                    gbbFooterProductContainer.append(gbbFooterProductImageContainer);
                    gbbFooterProductContainer.append(gbbFooterProductTextContainer);
                    gbbFooterProductsContainer.append(gbbFooterProductContainer);
                })
                let gbbFooterNextButton = gbb.$("<div>").addClass("gbbFooterNextButton");
                const gbbFooterButtonsWrapper = gbb.f.renderFooterButtons(noteAttribute, gbbFooterNextButton, renderNewTemplateDesign); // passing renderNewTemplateDesign to change the layout of footer vuttons

                if (renderNewTemplateDesign) {
                    // let displayValue = gbb.gbbAddProductsPage.state.showBoxProductsInFooter ? 'grid' : 'none'
                    // gbbFooterProductsContainer.css('display', displayValue)
                    // for every re-render we checking do we need to keep the secion open or closed
                    gbbFooterTotalContainer.addClass('gbbFooterButtonsContainer')
                    gbbFooterTotalContainer.css("background", gbb.settings.pageCustomizationData?.cartFooter?.cartFooterButtonsContainerBgColor || '#f6f6f6')
                    // gbbFooterProductsContainer.on("wheel", (event) => {
                    //     event.preventDefault();
                    //     // Detecting the direction of the scroll
                    //     if (event.originalEvent.deltaY < 0) {
                    //         // Scrolling up
                    //         gbb.$(".gbbFooterProductsContainer").scrollLeft(gbb.$(".gbbFooterProductsContainer").scrollLeft() - 50); // Scroll left
                    //     } else {
                    //         // Scrolling down
                    //         gbb.$(".gbbFooterProductsContainer").scrollLeft(gbb.$(".gbbFooterProductsContainer").scrollLeft() + 50); // Scroll right
                    //     }
                    // }) TBD @mufadal
                }
                if (products.length > 0) {
                    if (!renderProductSlotsFooter) {
                        gbbProductsFooterHTML.append(gbbFooterProductsContainer);
                    }
                    if (!renderNewTemplateDesign) {
                        gbbFooterTotalContainer.html(gbb.f.renderFooterTotalContainer())
                    }
                    // In new template design we dont need total price there we have this in renderFooterButtons
                    if (false && renderNewTemplateDesign && gbbPageFooterHTML.find('.gbbDiscountFooterHTML').length <= 0) {
                        gbbPageFooterHTML.append(gbb.gbbAddProductsPage.f.renderShowBoxProductsInFooterHTML())
                    } // if discount is not enable then will show selected products
                } else {
                    gbbProductsFooterHTML.css("grid-template-columns", "1fr");
                    !renderNewTemplateDesign && gbbFooterButtonsWrapper.css("grid-template-columns", "auto 1fr auto");
                    // changing layout for new template design
                    gbbFooterNextButton.css("grid-column", "3/3");
                }

                if (renderProductSlotsFooter) {
                    let productSlotsFooter = gbb.f.renderProductSlotsFooterHTML(noteAttribute)
                    if (updateFooterFlow == "updateFooterWithoutAppending" && gbb.$(".gbbSlotFooterProductsContainerWrapper").length > 0) {
                        let productsContainer = productSlotsFooter.find(".gbbSlotFooterProductContainer")
                        gbb.$(".gbbSlotFooterProductsContainer").html(productsContainer)
                        gbb.$(".gbbFooterButtonsWrapper").replaceWith(gbbFooterButtonsWrapper)
                        gbb.gbbAddProductsPage.f.autoScrollSlots()
                        gbb.$(".gbbCartIconWithQuantityContainer").replaceWith(gbb.gbbAddProductsPage.f.renderCartIconWithQuantityHTML())

                        let gbbPageFooterHTML = gbb.$(".gbbPageFooterHTML")
                        if (renderAddonsMessaging || gbb.settings?.discountsData?.isDiscountEnabled && gbb.settings?.discountsData?.isShowDiscountsEnabled && gbb.settings?.discountsData?.rules?.length > 0) {
                            // remove existing discountfooter and append new one 

                            gbb.$(".gbbDiscountFooterHTML").html(gbb.gbbDiscountComponent.f.discountStatusFooterHTML())
                        }
                        return gbbPageFooterHTML
                    } else {
                        gbbProductsFooterHTML.append(productSlotsFooter)
                    }
                }
                gbbFooterTotalContainer.append(gbbFooterButtonsWrapper);
                gbbProductsFooterHTML.append(gbbFooterTotalContainer);
                gbbPageFooterHTML.append(gbbProductsFooterHTML);
                if (renderNewTemplateDesign) {
                    gbbPageFooterHTML.append(gbb.gbbAddProductsPage.f.renderCartIconWithQuantityHTML())
                }
                if (gbb.utility.checkIfBrandingShouldBeVisible()) {
                    gbbPageFooterHTML.append(gbb.utility.renderPoweredByLabel());
                }
                return gbbPageFooterHTML;
            } catch (error) {
                gbb.utility.debugConsole("error in renderCartProductsFooterHTML", error);
            }
        },
        renderCartProductsModal: function (noteAttribute) {
            const gbbCartProductsMainContainer = gbb.$("<div>").addClass("gbbCartProductsMainContainer");
            const gbbCartProductsContainerModal = gbb.$("<div>").addClass("gbbCartProductsContainerModal");

            const gbbCartProductsContainerHeader = gbb.$("<div>").addClass("gbbCartProductsContainerHeader");
            const gbbCartProductsContainerHeaderLabel = gbb.$("<div>").addClass("gbbCartProductsContainerHeaderLabel").text(gbb.settings?.languageData?.general?.selectedProductsLabel?.value || "Selected Products");
            const gbbCartProductsModalClose = gbb.$("<div>").addClass("gbbCartProductsModalClose");
            gbbCartProductsModalClose.text("+");
            gbbCartProductsModalClose.on("click", () => {
                gbb.$("body").find(".gbbCartProductsMainContainer").remove()
                gbb.$("body").css("overflow-y", DEFAULT_BODY_OVERFLOW_VALUE);
            })

            const gbbCartProductsContainerBody = gbb.$("<div>").addClass("gbbCartProductsContainerBody");

            const gbbCartModalProductsContainer = gbb.$("<div>").addClass("gbbCartModalProductsContainer");
            let products = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage();
            products = products?.items || [];
            products.forEach((product) => {
                const gbbCartModalProductContainer = gbb.$("<div>").addClass("gbbCartModalProductContainer");
                //attach a data attriute to the product container
                gbbCartModalProductContainer.attr("productId", product?.product_id);
                gbbCartModalProductContainer.attr("variantId", product?.variant_id)

                const gbbCartProductImageContainer = gbb.$("<div>").addClass("gbbCartProductImageContainer");
                const gbbCartModalProductImage = gbb.$("<img>").addClass("gbbCartModalProductImage");
                gbbCartModalProductImage.attr("src", product.image);
                const gbbCartModalProductTextContainer = gbb.$("<div>").addClass("gbbCartModalProductTextContainer");

                const gbbCartModalProductTitleContainer = gbb.$("<div>").addClass("gbbCartModalProductTitleContainer");
                const gbbCartModalProductTitle = gbb.$("<div>").addClass("gbbCartModalProductTitle");
                const gbbCartModalProductQuantity = gbb.$("<div>").addClass("gbbCartModalProductQuantity");

                const gbbCartModalProductPriceQtyContainer = gbb.$("<div>").addClass("gbbCartModalProductPriceQtyContainer");
                const gbbCartModalProductPrice = gbb.$("<div>").addClass("gbbCartModalProductPrice");
                //a button to remove the product from the cart
                const gbbCartModalProductRemoveButton = gbb.$("<div>").addClass("gbbCartModalProductRemoveButton");
                // x icon for the remove button
                const gbbCartModalProductRemoveButtonIcon = gbb.$("<div>").addClass("gbbCartModalProductRemoveButtonIcon");

                gbbCartModalProductRemoveButtonIcon.append(CONSTANT_CLOSE_ICON_SVG);


                gbbCartModalProductRemoveButton.append(gbbCartModalProductRemoveButtonIcon)


                gbbCartModalProductRemoveButton.on("click", async () => {
                    //    await gbb.f.removeProductFromCart({id: product.variant_id});
                    let variant = {
                        id: product.variant_id,
                        _boxProduct: product?.properties["_boxProduct"],
                        _Category: product?.properties["_Category"],
                        _uniqueGbbItemKey: gbb.utility.getUniqueIdForVariant({ productData: product })
                    }
                    await gbb.utility.removeFromCart({ variant: variant });
                    gbb.gbbAddProductsPage.f.updateProductCard(product.product_id, variant.id);
                    gbb.$(".gbbCartProductsMainContainer").replaceWith(gbb.f.renderCartProductsModal(noteAttribute));
                    gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML(noteAttribute, { flow: "updateFooterWithoutAppending" }));
                })

                gbbCartModalProductTitle.text(product.title);
                gbbCartModalProductPrice.text(gbb.utility.formatPrice(product.price));
                gbbCartModalProductQuantity.text("x" + product.quantity);
                gbbCartProductImageContainer.append(gbbCartModalProductImage);

                gbbCartModalProductTitleContainer.append(gbbCartModalProductTitle);
                //gbbCartModalProductTitleContainer.append(gbbCartModalProductQuantity);

                gbbCartModalProductTextContainer.append(gbbCartModalProductTitleContainer);
                gbbCartModalProductPriceQtyContainer.append(gbbCartModalProductQuantity);
                gbbCartModalProductPriceQtyContainer.append(gbbCartModalProductPrice);
                gbbCartModalProductTextContainer.append(gbbCartModalProductPriceQtyContainer);

                let pageIdTheProductWasAddedFrom = product?.properties["_boxProduct"]

                // @ashfaq append commented
                if (gbb.utility.checkIfRemoveButtonShouldBeAppended(product?.variant_id, pageIdTheProductWasAddedFrom)) {
                    gbbCartModalProductContainer.append(gbbCartModalProductRemoveButton);
                }

                gbbCartModalProductContainer.append(gbbCartProductImageContainer);
                gbbCartModalProductContainer.append(gbbCartModalProductTextContainer);
                gbbCartModalProductsContainer.append(gbbCartModalProductContainer);
            })

            gbbCartProductsContainerHeader.append(gbbCartProductsContainerHeaderLabel);
            gbbCartProductsContainerHeader.append(gbbCartProductsModalClose);

            gbbCartProductsContainerBody.append(gbbCartModalProductsContainer);

            const gbbModalTotalContainer = gbb.f.renderFooterTotalContainer();
            gbbModalTotalContainer.addClass("gbbModalTotalContainer");

            gbbCartProductsContainerModal.append(gbbCartProductsContainerHeader);
            gbbCartProductsContainerModal.append(gbbCartProductsContainerBody);
            gbbCartProductsContainerModal.append(gbbModalTotalContainer);

            gbbCartProductsMainContainer.append(gbbCartProductsContainerModal);
            gbb.$("body").append(gbbCartProductsMainContainer);
            gbb.$("body").css("overflow-y", "hidden");
            gbb.utility.debugConsole("dummy commit");
            gbb.f.applyFontToFooterCartPopup();
        },
        showProductVariantsModal: async function (product, buttonEle, noteAttribute, category) {
            let selectedVariantsCombination = {};
            gbb.state.currentModalProductData = product || {};
            let addProductsPageArr = ADDPRODUCT_PAGES_LIST
            const isPurchaseTypeSubscription = gbb.gbbSubscriptionProductsPage.f.checkIfPurchaseTypeIsSubscription()


            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            //gbb.$(".gbbHTMLWrapper").addClass('gbbDisabled');
            let currentProductPersonalization = gbb.utility.getCurrentProductPersonalization(product);
            let doesThisProductHavePersonalization = currentProductPersonalization.isProductPersonalizationEnabled || false;
            let isValidateInventoryEnabled = gbb.settings?.bundleSettings?.isValidateInventoryEnabled || false;
            let allowQuantityInput = gbb.settings?.bundleSettings?.allowQuantityInput || false;
            let incrementProductQtyBy = gbb.gbbAddProductsPage.state.incrementProductQtyBy || 1
            let decrementProductQtyBy = gbb.gbbAddProductsPage.state.decrementProductQtyBy || 1




            const gbbProductVariantModalMainContainer = gbb.$("<div>").addClass("gbbProductVariantModalMainContainer");
            if (gbb.$('.gbbProductsCardLayoutV2').length > 0) {
                gbbProductVariantModalMainContainer.addClass("gbbProductVariantModalLayoutV2");
            }
            if (gbb.$(".gbbNewPageCustomization").length > 0) {
                gbbProductVariantModalMainContainer.addClass("gbbNewPageCustomization");
            }
            const gbbProductVariantModalContainer = gbb.$("<div>").addClass("gbbProductVariantModalContainer");

            // gbbProductVariantModalContainer.addClass
            const gbbProductVariantModalContentContainer = gbb.$("<div>").addClass("gbbProductVariantModalContentContainer");

            gbbProductVariantModalContainer.attr("productId", product?.id);

            // gbbProductVariantModalContainer.attr("")
            let firstvariantid = product.variants.length > 0 ? product?.variants[0]?.id : "";
            gbbProductVariantModalContainer.attr("firstvariantid", firstvariantid);


            const gbbProductVariantModalBodyContainer = gbb.$("<div>").addClass("gbbProductVariantModalBodyContainer");


            const gbbProductVariantModalImageTitleContainer = gbb.$("<div>").addClass("gbbProductVariantModalImageTitleContainer");
            const gbbProductVariantModalDetailsContainer = gbb.$("<div>").addClass("gbbProductVariantModalDetailsContainer");

            const gbbProductVariantModalHeader = gbb.$("<div>").addClass("gbbProductVariantModalHeader");
            const gbbProductVariantModalClose = gbb.$("<div>").addClass("gbbProductVariantModalClose");
            gbbProductVariantModalClose.text("+");

            gbbProductVariantModalClose.on("click", (event) => {
                gbb.utility.closeVariantsModal()
            })
            //add product image and description here
            const gbbProductTextContainer = gbb.$("<div>").addClass("gbbProductCardTextContainer");
            const gbbProductItemTitle = gbb.$("<div>").addClass("gbbProductItemTitle");
            const gbbProductItemPricesContainer = gbb.$("<div>").addClass("gbbProductItemPricesContainer");
            const gbbProductItemCompareAtPrice = gbb.$("<div>").addClass("gbbProductItemCompareAtPrice");
            const gbbProductItemPrice = gbb.$("<div>").addClass("gbbProductItemPrice");

            if (product.compare_at_price && product.compare_at_price > product.price) {
                gbbProductItemCompareAtPrice.text(gbb.utility.formatPrice(product.compare_at_price));
            }
            gbbProductItemPrice.text(gbb.utility.formatPrice(product.price));
            if (product.variants?.length == 1 && product.available == true) {
                let variantPrice = product.variants[0].price;
                let variantCompareAtPrice = product.variants[0].compare_at_price
                if (isPurchaseTypeSubscription) {
                    variantCompareAtPrice = product.variants[0].price;
                    variantPrice = gbb.gbbSubscriptionProductsPage.f.getSubscriptionPriceByVariantId(product.variants[0].id)
                }
                gbbProductItemPrice.text(gbb.utility.formatPrice(variantPrice));
                if (variantCompareAtPrice) {
                    gbbProductItemCompareAtPrice.text(gbb.utility.formatPrice(variantCompareAtPrice));
                }
            }
            else if (product.variants?.length > 1 && product.available == true) {
                let variantPrice = product.variants[0].price;
                let variantCompareAtPrice = product.variants[0].compare_at_price
                if (isPurchaseTypeSubscription) {
                    variantCompareAtPrice = product.variants[0].price
                    variantPrice = gbb.gbbSubscriptionProductsPage.f.getSubscriptionPriceByVariantId(product.variants[0].id)
                }
                gbbProductItemPrice.text(gbb.utility.formatPrice(variantPrice));
                if (isPurchaseTypeSubscription || variantCompareAtPrice > product.variants[0].price) {
                    gbbProductItemCompareAtPrice.text(gbb.utility.formatPrice(variantCompareAtPrice));
                }
            }
            // else if (product.variants?.length > 1 && product.available == true) {
            //     gbbProductItemPrice.text(gbb.utility.formatPrice(product.price));
            //     if(product.compare_at_price  && product.compare_at_price > product.price){
            //         gbbProductItemCompareAtPrice.text(gbb.utility.formatPrice(product.compare_at_price));
            //     }
            // }

            const gbbProductDescriptionContainer = gbb.$("<div>").addClass("gbbProductDescriptionContainer");
            const gbbProductDescriptionText = gbb.$("<div>").addClass("gbbProductDescriptionText");

            const gbbProductDynamicContentContainer = gbb.$("<div>").addClass("gbbProductDynamicContentContainer");
            gbbProductDynamicContentContainer.html(gbb.gbbAddProductsPage.f.renderProductDynamicContent(product,'PRODUCT_VARIANTS_MODAL'));


            let description = product?.descriptionHtml?.toString() || product?.description?.toString() || "";  //?.replace(/<[^>]+>/g, '') || ""; //used to remove all HTML tags from a string
            description = description.replace(/\\n/g, "<br>");
            description = gbb.utility.removeIframeTagsFromHtml(description);
            description = gbb.utility.adjustImageTagsInProductDescriptionHtml(description);
            gbbProductDescriptionText.html(description);
            gbbProductDescriptionContainer.append(gbbProductDescriptionText);

            const gbbProductImageContainer = gbb.$("<div>").addClass("gbbProductImageContainer");
            const gbbProductAllImagesContainer = gbb.$("<div>").addClass("gbbProductAllImagesContainer");
            const gbbProductImage = gbb.$("<img>").addClass("gbbProductImage");
            let defaultMedia = {
                src: "https://db07ji0eqime4.cloudfront.net/redeemPage/giftcard/default-no-logo.jpg",
                media_type: "image",
                id: 3656456476
            }
            product.media = product.media ? product.media : [defaultMedia];
            for (let i = 0; i < product.media.length; i++) {
                let media = product.media[i];
                if (!media || !media.src) {
                    continue;
                }
                if (media.src) {
                    gbbProductImageContainer.append(gbb.$("<img>").addClass('gbbProductImageContainerImg' + i).addClass("gbbProductImageContainerImg").addClass("gbbFade"))
                    gbbProductImageContainer.find('.gbbProductImageContainerImg' + i).attr('src', media.src).css('display', 'none')
                }
                if (i == 0) {
                    gbbProductImageContainer.find('.gbbProductImageContainerImg' + i).css('display', 'block')
                }
            }
            //push an anchor tag
            if (product.media.length > 1) {
                //let gbbProductSliderNavigatior = gbb.$("<div>").addClass('gbbProductSliderNavigatior')
                gbbProductImageContainer.append(gbb.$("<a>").addClass('gbbPrevImage'))
                gbbProductImageContainer.find('.gbbPrevImage').html("&#10094;");
                //add an onclick event to the anchor tag
                gbbProductImageContainer.append(gbb.$("<a>").addClass('gbbNextImage'))
                gbbProductImageContainer.find('.gbbNextImage').html("&#10095;");

                gbbProductImageContainer.find('.gbbPrevImage').click(function (event) {
                    event.stopPropagation();
                    event.preventDefault();
                    gbb.utility.slider.minusSlides(gbbProductImageContainer, 1)

                    let prevActiveImage = gbbProductAllImagesContainer.find(".gbbActiveImage")
                    gbb.f.removeActiveImageStyle(prevActiveImage)
                    prevActiveImage.removeClass("gbbActiveImage")

                    let activeImage = gbbProductAllImagesContainer.find(`[imageIndex = ${gbb.utility.slider.state.slideIndex - 1}]`)
                    activeImage.addClass("gbbActiveImage")
                    gbb.f.applyActiveImageStyle(activeImage)
                })
                gbbProductImageContainer.find('.gbbNextImage').click(function (event) {
                    event.stopPropagation();
                    event.preventDefault();
                    gbb.utility.slider.plusSlides(gbbProductImageContainer, 1)

                    gbb.f.removeActiveImageStyle(gbbProductAllImagesContainer.find(".gbbActiveImage"))
                    gbbProductAllImagesContainer.find(".gbbActiveImage").removeClass("gbbActiveImage")

                    let activeImage = gbbProductAllImagesContainer.find(`[imageIndex = ${gbb.utility.slider.state.slideIndex - 1}]`)
                    activeImage.addClass("gbbActiveImage")
                    gbb.f.applyActiveImageStyle(activeImage)
                })
                //gbbProductImageContainer.append(gbbProductImageContainer);
            }

            for (let i = 0; i < product.media.length; i++) {
                let media = product.media[i];
                if (!media || !media.src) {
                    continue;
                }
                if (media.src) {
                    let gbbProductTabImageContainer = gbb.$("<div>").addClass("gbbProductTabImageContainer");
                    gbbProductTabImageContainer.append(gbb.$("<img>")
                        .attr('src', media.src)
                        .attr('imageIndex', i)
                        .attr('mediaId', media.id)
                        .addClass('gbbProducTabImage'))
                    gbbProductTabImageContainer.on("click", (event) => {
                        event.stopPropagation()
                        event.preventDefault()
                        gbb.f.removeActiveImageStyle(gbbProductAllImagesContainer.find(".gbbActiveImage"))
                        gbbProductAllImagesContainer.find(".gbbActiveImage").removeClass("gbbActiveImage")

                        gbbProductTabImageContainer.addClass("gbbActiveImage");
                        let changedVariantDiv = gbbProductAllImagesContainer.find(`[mediaId=${media.id}]`);
                        // let changedVariantDivIndex = parseInt(changedVariantDiv.attr("imageIndex"))
                        let changedVariantDivIndex = parseInt(changedVariantDiv?.parent()?.index())
                        changedVariantDivIndex += 1;

                        gbb.f.applyActiveImageStyle(gbbProductTabImageContainer)
                        gbb.utility.slider.state.slideIndex = changedVariantDivIndex;
                        gbb.utility.slider.showSlides(gbbProductImageContainer, gbb.utility.slider.state.slideIndex)
                    })
                    gbbProductAllImagesContainer.append(gbbProductTabImageContainer)
                }
            }
            let productFormDiv = null;
            if (doesThisProductHavePersonalization) {
                gbbProductVariantModalContainer.addClass("gbbProductVariantModalContainerWithPersonalization");
                productFormDiv = gbb.gbbProductFormStep.f.prepareFormToBeRenderedHTML(currentProductPersonalization, product);
            }


            if (gbb?.settings?.merchantInfo?.bundleSettings?.showCompareAtPrice) {
                gbbProductItemPricesContainer.append(gbbProductItemCompareAtPrice);
            }
            gbbProductItemPricesContainer.append(gbbProductItemPrice);

            // gbbProductItemTitle.text(product.title);
            if (product.variants.length == 1 && gbb.gbbAddProductsPage.state.displayVariantsAsIndividualProducts) {
                // gbbProductItemTitle.text(`${product.variants[0].title} (${product?.options[0]?.name})`);
                gbbProductItemTitle.text(`${product.variants[0].title}`);

            } else {
                gbbProductItemTitle.text(product.title);
            }
            gbbProductTextContainer.append(gbbProductItemTitle);
            if (gbb.settings?.app?.integrations?.judgeme?.isEnabled) {
                let starsHTML = gbb.gbbIntegrations?.judgeme?.f?.getStarsHTMLByProductId(product.id);
                if (starsHTML) {
                    let reviewStarsContainer = gbb.$("<div>").addClass("gbbReviewStarsContainer");
                    let reviewStars = gbb.$("<div>").addClass("gbbReviewStars");
                    reviewStars.html(starsHTML);
                    reviewStarsContainer.append(reviewStars);
                    gbbProductTextContainer.append(reviewStarsContainer);
                }
            }
            gbbProductTextContainer.append(gbbProductItemPricesContainer);
            if (isValidateInventoryEnabled) {
                let gbbVariantInventoryContainer = gbb.$("<div>").addClass("gbbVariantInventoryContainer");
                let activeVariantInfo = gbb.utility.checkIfSelectedVariantCombinationIsAvailable(product, selectedVariantsCombination);
                let totalInventory = activeVariantInfo[0]?.quantityAvailable || 0;
                let inventoryText = gbb.$("<div>").addClass("gbbInventoryText");
                inventoryText.text((`${totalInventory} ${gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.general?.inventoryInStockText) || "in Stock1"}`));
                if (totalInventory > 0) {
                    gbbVariantInventoryContainer.append(inventoryText);
                    gbbProductTextContainer.append(gbbVariantInventoryContainer);
                }
            }
            gbbProductTextContainer.append(gbbProductDescriptionContainer);
            // if (gbb.settings.bundleSettings?.metafieldNameSpaceAndKeys.length > 0) {
            //     gbbProductTextContainer.append(gbbProductDynamicContentContainer);
            // }
            if (gbb.settings.bundleSettings?.metafieldNameSpaceAndKeys.length > 0 || gbb.settings.app?.dynamicScriptForHTMLContent) {
                gbbProductTextContainer.append(gbbProductDynamicContentContainer)
            }


            gbbProductAllImagesContainer.find(`[imageIndex = ${0}]`).addClass("gbbActiveImage")
            gbb.f.applyActiveImageStyle(gbbProductAllImagesContainer.find(`[imageIndex = ${0}]`))
            gbbProductVariantModalImageTitleContainer.append(gbbProductImageContainer);
            // gbbProductVariantModalImageTitleContainer.append(gbbProductAllImagesContainer); // HEREr
            gbbProductVariantModalHeader.append(gbbProductVariantModalClose)
            gbbProductVariantModalContentContainer.append(gbbProductVariantModalHeader);

            gbbProductVariantModalDetailsContainer.append(gbbProductTextContainer);


            if (false && gbbProductVariantModalMainContainer.hasClass("gbbProductVariantModalLayoutV2")) {
                const imageSliderContainer = gbb.$("<div>").addClass("gbbImageSliderContainer");
                const prevBtnContainer = gbb.$("<div>").addClass("gbbPrevBtnContainer");
                const nextBtnContainer = gbb.$("<div>").addClass("gbbNextBtnContainer");
                const prevBtn = gbb.$("<div>").addClass("gbbPrevBtn").html("&#x25B2;");
                const nextBtn = gbb.$("<div>").addClass("gbbNextBtn").html("&#x25BC;");
                prevBtnContainer.append(prevBtn);
                nextBtnContainer.append(nextBtn);
                imageSliderContainer.append(prevBtnContainer);
                imageSliderContainer.append(gbbProductAllImagesContainer);
                imageSliderContainer.append(nextBtnContainer);
                gbbProductVariantModalBodyContainer.append(imageSliderContainer)
                gbbProductVariantModalBodyContainer.append(gbbProductVariantModalImageTitleContainer);
            } else {
                gbbProductVariantModalImageTitleContainer.append(gbbProductAllImagesContainer);
                gbbProductVariantModalBodyContainer.append(gbbProductVariantModalImageTitleContainer);
            }

            let variantQuantity = incrementProductQtyBy;

            let gbbProductQuantityHTMLContainer = gbb.$("<div>").addClass("gbbProductQuantityHTMLContainer");
            let gbbProductQuantityHTML = gbb.$("<div>").addClass("gbbProductQuantityHTML");

            let gbbProductQuantityHeading = gbb.$("<div>").addClass("gbbProductQuantityHeading")
            let productCardPageCustomization = gbb.settings.pageCustomizationData?.productCard
            let buttonTextColor = productCardPageCustomization.productCardQuantitySelectorButtonTextColor || productCardPageCustomization.productCardButtonTextColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor
            // let gbbProductQuantityAddButton = gbb.$("<button>").addClass("gbbProductQuantityAddButton")
            let gbbProductQuantityAddButton = gbb.$("<div>").addClass("gbbProductQuantityAddButton")
                // .css("background", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                // .css("color", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor);
                .css("background", gbb.settings.pageCustomizationData?.productCard?.productCardButtonColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                .css("color", productCardPageCustomization.productCardButtonTextColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor);
            // let gbbProductQuantityRemoveButton = gbb.$("<button>").addClass("gbbProductQuantityRemoveButton")

            let gbbProductQuantityRemoveButton = gbb.$("<div>").addClass("gbbProductQuantityRemoveButton")
                // .css("background", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                // .css("color", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor);
                .css("background", gbb.settings.pageCustomizationData?.productCard?.productCardButtonColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                .css("color", productCardPageCustomization.productCardButtonTextColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor);
            let gbbProductQuantityLabel = gbb.$("<div>").addClass("gbbProductQuantityLabel");

            let gbbProductQuantityInput = gbb.$("<input>").addClass("gbbProductQuantityInput").attr("type", "number").attr("min", 0);

            gbbProductQuantityAddButton.append(gbb.$("<div>").addClass("gbbProductQuantityAddButtonWrapper").html("+"));
            gbbProductQuantityRemoveButton.append(gbb.$("<div>").addClass("gbbProductQuantityRemoveButtonWrapper").html("-"));

            gbbProductQuantityAddButton.on("click", async (event) => {
                variantQuantity += incrementProductQtyBy;
                gbbProductQuantityLabel.text(variantQuantity);
                gbbProductQuantityInput.val(variantQuantity);
                if (isValidateInventoryEnabled) {
                    let validationOptions = {
                        product: product,
                        selectedVariantsCombination: selectedVariantsCombination,
                        variantQuantity: variantQuantity + incrementProductQtyBy,
                        gbbProductQuantityAddButton: gbbProductQuantityAddButton
                    }
                    gbb.utility.validateProductQuantityAddButton(validationOptions);
                }
            })

            gbbProductQuantityRemoveButton.on("click", async (event) => {
                if (variantQuantity > 0) {
                    variantQuantity -= decrementProductQtyBy;
                    variantQuantity = variantQuantity < 0 ? 0 : variantQuantity;
                    gbbProductQuantityLabel.text(variantQuantity);
                    gbbProductQuantityInput.val(variantQuantity);
                    if (isValidateInventoryEnabled) {
                        let validationOptions = {
                            product: product,
                            selectedVariantsCombination: selectedVariantsCombination,
                            variantQuantity: variantQuantity + incrementProductQtyBy,
                            gbbProductQuantityAddButton: gbbProductQuantityAddButton
                        }
                        gbb.utility.validateProductQuantityAddButton(validationOptions);
                    }
                }
            })

            gbbProductQuantityInput.on("change", (event) => {
                let value = parseInt(event.target.value);
                if (value < 0) {
                    value = 0;
                }
                variantQuantity = value;
                gbbProductQuantityLabel.text(variantQuantity);
                gbbProductQuantityInput.val(variantQuantity);
            })

            gbbProductQuantityLabel.text(variantQuantity);
            gbbProductQuantityInput.val(variantQuantity);

            gbbProductQuantityHeading.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData.general.quantity) || "Quantity");

            gbbProductQuantityHTML.append(gbbProductQuantityRemoveButton)

            if (allowQuantityInput) {
                gbbProductQuantityHTML.append(gbbProductQuantityInput);
            } else {

                gbbProductQuantityHTML.append(gbbProductQuantityLabel);
            }

            gbbProductQuantityHTML.append(gbbProductQuantityAddButton);

            gbbProductQuantityHTMLContainer.append(gbbProductQuantityHeading);
            gbbProductQuantityHTMLContainer.append(gbbProductQuantityHTML);
            gbbProductVariantModalDetailsContainer.append(gbbProductQuantityHTMLContainer)

            const gbbProductActionContainer = gbb.$("<div>").addClass("gbbProductCardActionContainer");
            const gbbProductButtonWrapper = gbb.$("<div>").addClass("gbbProductButtonWrapper").html("  ");
            if (product.variants?.length == 1 && product.available == true && product.renderChooseOptionsButton_forcefully != true) {

                if (product.options.length > 0 && product.options[0].name && product.variants[0]?.options?.length > 0) {
                    let options = product.options 
                    options.forEach((option, index) => {
                        selectedVariantsCombination[option.name] = product.variants[0]?.options[index]
                        gbb.utility.debugConsole(selectedVariantsCombination)
                    })
                } 

                // const gbbProductButton = gbb.$("<button>").addClass("gbbProductAddButton");
                const gbbProductButton = gbb.$("<div>").addClass("gbbProductVariantAddButton")
                    // .css("background", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                    // .css("color", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor);
                    .css("background", gbb.settings.pageCustomizationData?.productCard?.productCardButtonColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                    .css("color", gbb.settings.pageCustomizationData?.productCard?.productCardButtonTextColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor);

                if (addProductsPageArr.includes(noteAttribute)) {
                    gbbProductButton.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData.general.addToBoxButtonText));
                } else {
                    gbbProductButton.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData.general.addButtonText));
                }

                let argsObj = {
                    productData: product,
                    variantId: product.variants[0].id,
                }

                let uniqueItemKey = gbb.utility.getUniqueIdForVariant(argsObj);

                const isItemInCart = gbb.utility.checkIfItemPresentInGiftBoxCart(product.variants[0].id, { uniqueItemKey });

                // const isItemInCart = gbb.utility.checkIfItemPresentInGiftBoxCart(product.variants[0].id);
                let data = {
                    productData: product,
                    variant: product.variants[0]
                }
                gbbProductButton.on("click", async () => {
                    gbbProductButton.addClass("gbbDisabled");
                    setTimeout(function () {
                        gbbProductButton.prop('disabled', false);
                        gbbProductButton.removeClass("gbbDisabled");
                    }, 500);
                    // { productAmount, category, productQuantity}
                    // data?.variant?.price, category, variantQuantity
                    let options = {
                        productAmount: data?.variant?.price,
                        category: category,
                        productQuantity: variantQuantity,
                        productWeight: data?.variant?.weight,
                        productVariantData: data?.variant
                    }
                    let condition = await gbb.utility.checkStepConditions(noteAttribute, options);

                    let formValidationForProduct = gbb.gbbProductFormStep.f.checkFormValidationForProduct(product);
                    if (!formValidationForProduct) {
                        gbb.gbbProductFormStep.f.displayRequiredFieldMessage();
                        return;
                    } else if (formValidationForProduct) {
                        gbb.utility.addPersonalizationDataToProductProperties();
                    }

                    let typeOfProduct = "singleVariant";
                    if (gbb.settings?.bundleSettings?.isValidateInventoryEnabled && !gbb.utility.allowATCBasedOnProductInventory(data?.variant?.id, variantQuantity)) {
                        gbb.utility.closeVariantsModal()
                        gbb.f.renderConditionNotificationToast((gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.general?.inventoryLimitReachedText) || "No More Stock1"))
                        return
                    }
                    if (condition.isConditionMet) {
                        if (isItemInCart && isItemInCart.quantity) {
                            variantQuantity += isItemInCart.quantity
                        }
                        data.qty = variantQuantity;
                        try {
                            let _noteAttribute = product?.customProductAttribute || noteAttribute
                            await gbb.utility.addToCart(data, _noteAttribute, category);
                            await gbb.utility.getGiftBoxProductsFromCart();
                        } catch (e) {
                            // gbb.utility.debugConsole("error generated is", e);
                        }
                        gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML(noteAttribute, { flow: "updateFooterWithoutAppending" }));
                        // gbb.gbbAddProductsPage.f.autoScrollSlotsBasedOnATC("addToCart")
                        if (noteAttribute == "reviewPage") {
                            gbb.gbbReviewPage.init(gbb.settings, "SUMMARY_PAGE");
                        }

                        let newProductItemHTML = gbb.f.renderProductsHTML([product], noteAttribute, category);
                        // gbb.$(".gbbPageBody").find(`[productId='${product.id}']`).replaceWith(newProductItemHTML);
                        let productCardRef = gbb.$(".gbbProductsContainer").find(`[productId='${product.id}']`);
                        // productCard = find the product that has firstvariantid as variantId
                        if (productCardRef.length > 1) {
                            productCardRef = gbb.$(".gbbProductsContainer").find(`[firstvariantid='${product.variants[0].id}']`);

                            //the below code works but is commented because of 
                            // - we dont use filter a lot, especially in case of jquery objects.
                            // - the above code is more readable, understandable and also faster (surprisingly)
                            // @ashfaq benchmarked it
                            // productCardRef = productCardRef.filter(`[firstvariantid='${product.variants[0].id}']`);
                        }

                        productCardRef.replaceWith(newProductItemHTML);

                        gbb.utility.closeVariantsModal()
                        //TODO: handleAutoNextStep
                        await gbb.gbbAddProductsPage.f.handleAutoNextStep();
                    } else {
                        gbb.utility.closeVariantsModal()
                    }
                })

                //gbbProductButtonWrapper.append(gbbProductButton);
                gbbProductActionContainer.append(gbbProductButtonWrapper);
                gbbProductActionContainer.append(gbbProductButton);
                let isThisNewDesign = gbbProductVariantModalMainContainer.hasClass("gbbProductVariantModalLayoutV2")
                if (isThisNewDesign) {
                    gbbProductVariantModalDetailsContainer.append(gbbProductActionContainer)
                }
                gbbProductVariantModalBodyContainer.append(gbbProductVariantModalDetailsContainer);
                gbbProductVariantModalContentContainer.append(gbbProductVariantModalBodyContainer);
                if (isThisNewDesign != true) { // repeating this if block logic coz both have different placements
                    gbbProductVariantModalContentContainer.append(gbbProductActionContainer);
                }
                if (window.innerWidth < 600) {
                    gbbProductVariantModalContentContainer.append(gbbProductDescriptionContainer);
                }

            } else {
                const gbbProductVariantNotAvailableWarning = gbb.$("<div>").addClass("gbbProductVariantNotAvailableWarning");
                // const gbbProductVariantAddButton = gbb.$("<button>").addClass("gbbProductVariantAddButton")
                const gbbProductVariantAddButton = gbb
                    .$("<div>")
                    .addClass("gbbProductVariantAddButton")
                    // .css("background", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                    // .css("color", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor);
                    .css("background", gbb.settings?.pageCustomizationData.productCard?.productCardButtonColor || gbb.settings.pageCustomizationData.quickSettings.colors.buttonBgColor)
                    .css("color", gbb.settings?.pageCustomizationData.productCard?.productCardButtonTextColor || gbb.settings.pageCustomizationData.quickSettings.colors.buttonTextColor);

                if (addProductsPageArr.includes(noteAttribute)) {
                    gbbProductVariantAddButton.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData.general.addToBoxButtonText));
                } else {
                    gbbProductVariantAddButton.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData.general.addButtonText));
                }

                gbbProductVariantAddButton.on("click", (event) => {
                    gbbProductVariantAddButton.addClass("gbbDisabled");
                    setTimeout(function () {
                        gbbProductVariantAddButton.prop("disabled", false);
                        gbbProductVariantAddButton.removeClass("gbbDisabled");
                    }, 500);
                    gbb.utility.addVariantProductToCart(gbbProductVariantNotAvailableWarning, product, selectedVariantsCombination, noteAttribute, buttonEle, category, variantQuantity);

                });

                gbbProductVariantNotAvailableWarning.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.general?.combinationNotAvailable));

                const gbbProductVariantOptionsContainer = gbb.$("<div>").addClass("gbbProductVariantOptionsContainer");
                gbbProductVariantOptionsContainer.append(gbbProductVariantNotAvailableWarning);

                if (gbb?.settings?.merchantInfo?.customSettings?.showOnlyAdminSelectedVariants) {
                    product.options = gbb.utility.returnOnlyAdminSelectedVariantOptions(product);
                }

                product.options?.forEach((option, index) => {
                    let name = option?.name || "";
                    let nameToCompare = name.replace(new RegExp("'", "g"), "");
                    const gbbProductVariantOptionContainer = gbb.$("<div>").addClass("gbbProductVariantOptionContainer").attr("optionId", nameToCompare);
                    const gbbProductVariantOptionLabel = gbb.$("<div>").addClass("gbbProductVariantOptionLabel");
                    gbbProductVariantOptionLabel.text(option.name);
                    gbbProductVariantOptionContainer.append(gbbProductVariantOptionLabel);
                    const gbbProductVariantOptionValuesContainer = gbb.$("<div>").addClass("gbbProductVariantOptionValuesContainer");

                    //set initial selection to the options of first variant product
                    selectedVariantsCombination[option.name] = product.variants[0].options[index];

                    option.values?.forEach((value, index) => {
                        let valueToCompare = value.replace(new RegExp("'", "g"), "");
                        // const gbbProductVariantOptionValue = gbb.$("<button>")
                        const gbbProductVariantOptionValue = gbb.$("<div>").addClass("gbbProductVariantOptionValue").attr("optionValueId", valueToCompare);
                        //.css("background",gbb.settings.pageCustomizationData?.quickSettings?.colors?.primaryColor)
                        //gbbProductVariantOptionValue.attr("optionValueId"+ value)
                        gbbProductVariantOptionValue.text(value);
                        if (option.values.length == 1 && value == "Default Title") {
                            gbbProductVariantOptionContainer.addClass("gbbProductVariantOptionContainerHidden");
                        }

                        gbbProductVariantOptionValuesContainer.append(gbbProductVariantOptionValue);

                        gbbProductVariantOptionValue.on("click", (event) => {
                            event.preventDefault();
                            let activeVariant = gbbProductVariantOptionContainer.find(".gbbActiveVariant");
                            gbb.f.removeSelectedVariantStyle(activeVariant);
                            activeVariant.removeClass("gbbActiveVariant");

                            gbbProductVariantOptionValue.addClass("gbbActiveVariant");
                            gbb.f.applySelectedVariantStyle(gbbProductVariantOptionValue);
                            selectedVariantsCombination[option.name] = value;

                            if (isValidateInventoryEnabled) {
                                gbb.utility.validateATCAndVariantQuantityAddButton({ product, selectedVariantsCombination, variantQuantity, gbbProductQuantityAddButton, gbbProductVariantModalContainer })
                                let activeVariantInfo = gbb.utility.checkIfSelectedVariantCombinationIsAvailable(product, selectedVariantsCombination);
                                let totalInventory = activeVariantInfo[0]?.quantityAvailable || 0;
                                if (totalInventory > 0) {
                                    gbb.$(".gbbVariantInventoryContainer").show();
                                    gbb.$(".gbbInventoryText").text((`${totalInventory} ${gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.general?.inventoryInStockText) || "in Stock1"}`));
                                } else {
                                    gbb.$(".gbbVariantInventoryContainer").hide();
                                }
                            }

                            gbb.utility.handleVariantSelection(
                                gbbProductVariantNotAvailableWarning,
                                product,
                                selectedVariantsCombination,
                                gbbProductVariantAddButton,
                                gbbProductAllImagesContainer,
                                gbbProductImageContainer
                            );
                        });
                    });

                    gbbProductVariantOptionContainer.append(gbbProductVariantOptionValuesContainer);
                    gbbProductVariantOptionsContainer.append(gbbProductVariantOptionContainer);

                    let valueToCompare = product.variants[0].options[index];
                    valueToCompare = valueToCompare.replace(new RegExp("'", "g"), "");

                    let activeVariant = gbbProductVariantOptionsContainer.find(`[optionId='${nameToCompare}']`).find(`[optionValueId='${valueToCompare}']`);
                    activeVariant.addClass("gbbActiveVariant");
                    gbb.f.applySelectedVariantStyle(activeVariant);
                });
                gbbProductActionContainer.append(gbbProductButtonWrapper);
                gbbProductActionContainer.append(gbbProductVariantAddButton);

                let isThisNewDesign = gbbProductVariantModalMainContainer.hasClass("gbbProductVariantModalLayoutV2")
                gbbProductVariantModalDetailsContainer.append(gbbProductVariantOptionsContainer);
                if (isThisNewDesign) {
                    gbbProductVariantModalDetailsContainer.append(gbbProductActionContainer)
                }
                gbbProductVariantModalBodyContainer.append(gbbProductVariantModalDetailsContainer);
                gbbProductVariantModalContentContainer.append(gbbProductVariantModalBodyContainer);




                if (isThisNewDesign != true) { // repeating this block coz both conditions have different placements in the design structure
                    gbbProductVariantModalContentContainer.append(gbbProductActionContainer);
                }
                if (window.innerWidth < 600) {
                    gbbProductVariantModalContentContainer.append(gbbProductDescriptionContainer);
                }
            }

            if (window.innerWidth < 600) {
                gbbProductButtonWrapper.css("display", "none");
                gbbProductActionContainer.css("grid-template-columns", "1fr")
            }

            if (productFormDiv) {
                gbbProductVariantModalDetailsContainer.append(productFormDiv);
            }

            if (isValidateInventoryEnabled) {
                gbb.utility.validateATCAndVariantQuantityAddButton({ product, selectedVariantsCombination, variantQuantity, gbbProductQuantityAddButton, gbbProductVariantModalContainer })
            }
            gbbProductVariantModalContainer.append(gbbProductVariantModalContentContainer);
            gbbProductVariantModalMainContainer.append(gbbProductVariantModalContainer);
            gbb.$("body").append(gbbProductVariantModalMainContainer);
            gbb.$("body").css("overflow-y", "hidden");
            gbb.f.applyFontToProductPopupCard();
            gbb.gbbBrowser.emitCustomEvent({
                eventName: "gbb-variants-modal-open",
            })
        },
        renderConditionNotificationToast: function (conditionMessage, categoryTitle) {
            const gbbConditionNotificationToastMainContainer = gbb.$("<div>").addClass("gbbConditionNotificationToastMainContainer");
            const gbbConditionNotificationToast = gbb.$("<div>").addClass("gbbConditionNotificationToast");
            const gbbConditionNotificationMessage = gbb.$("<div>").addClass("gbbConditionNotificationMessage");
            const gbbConditionNotificationClose = gbb.$("<div>").addClass("gbbConditionNotificationClose");
            gbbConditionNotificationClose.text("+")
            gbbConditionNotificationClose.on("click", () => {
                gbb.$(".gbbPageFooterHTML").find(".gbbConditionNotificationToast").remove()
            })
            if (categoryTitle) {
                conditionMessage = categoryTitle + " : " + conditionMessage
            }
            gbbConditionNotificationMessage.text(conditionMessage);
            gbbConditionNotificationToast.css("background", gbb.settings?.pageCustomizationData?.generalSettings?.conditionToast?.conditionToastBgColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)

            gbbConditionNotificationToast.css("color", gbb.settings?.pageCustomizationData?.generalSettings?.conditionToast?.conditionToastTextColor || "#ffffff")
            gbbConditionNotificationClose.css("color", gbb.settings?.pageCustomizationData?.generalSettings?.conditionToast?.conditionToastTextColor || "#ffffff")

            gbbConditionNotificationToast.append(gbbConditionNotificationMessage);
            gbbConditionNotificationToast.append(gbbConditionNotificationClose);

            //gbbConditionNotificationToastMainContainer.append(gbbConditionNotificationToast);
            gbb.$(".gbbPageFooterHTML").append(gbbConditionNotificationToast);
            setTimeout(() => {
                gbb.$(".gbbPageFooterHTML").find(".gbbConditionNotificationToast").remove()
            }, 6000)
        },

        getVisibilityMaps: function (data, cartData) {
            try {
                let visibilityMaps = {};

                const updateVisibility = (mapKey, type, id, value) => {
                    if (!visibilityMaps[mapKey][type]) {
                        visibilityMaps[mapKey][type] = {};
                    }
                    visibilityMaps[mapKey][type][id] = {
                        ...visibilityMaps[mapKey][type][id],
                        visibility: value
                    };
                };

                data.rules.forEach((rule, index) => {
                    const ruleKey = `r${index + 1}`; // Dynamic rule key (e.g., r1, r2, ...)
                    visibilityMaps[ruleKey] = {};

                    const actionType = rule.action.actionType; // "hide" or "show"
                    const isHideRule = actionType === "hide";

                    const conditionOperator = "OR" || "AND";

                    let cartProductIds = cartData.items.map((item) => String(item.product_id));
                    let cartTags = cartData.items.flatMap((item) => item.productTags || []);

                    let cartVariantTitles = cartData.items.flatMap((item) => item.options);


                    // Apply the rule to the specified products or tags
                    rule.trigger.selectionValues.forEach((selection) => {

                        // strip gid and stuff productId if exists;
                        if (selection.id && !selection.productId) {
                            selection.productId = selection.id.split("gid://shopify/Product/")[1];
                        }


                        let isVariantTitlePartOfCart = cartVariantTitles.filter(item => item.includes(selection.value)).length > 0;
                        let isAnyOfTheSelectionInCart = isVariantTitlePartOfCart || cartProductIds.includes(selection.productId) || cartTags.includes(selection.value);

                        if (conditionOperator == "AND" && !isAnyOfTheSelectionInCart) {
                            visibilityMaps[ruleKey] = {};
                            return;
                        }

                        if (conditionOperator == "OR" && !isAnyOfTheSelectionInCart) {
                            return;
                        }

                        let isActionBasedOnTag = rule.action.selectionType === "productTags";
                        let isActionBasedOnProduct = rule.action.selectionType === "products";
                        let isActionBasedOnVariantTitle = rule.action.selectionType === "variantTitle";
                        // Apply actions based on the rule
                        rule.action.selectionValues.forEach((actionSelection) => {
                            const visibilityValue = isHideRule ? -1 : 1;

                            if (actionSelection.id && !actionSelection.productId) {
                                actionSelection.productId = actionSelection.id.split("gid://shopify/Product/")[1];
                            }

                            if (isActionBasedOnTag) {
                                updateVisibility(ruleKey, 'tags', actionSelection.value, visibilityValue);
                            } else if (isActionBasedOnProduct) {
                                updateVisibility(ruleKey, 'products', actionSelection.productId, visibilityValue);
                            } else if (isActionBasedOnVariantTitle) {
                                updateVisibility(ruleKey, 'variantTitle', actionSelection.value, visibilityValue);
                            }
                        });
                    });
                });

                return visibilityMaps;
            } catch (error) {
                gbb.utility.debugConsole("error in getVisibilityMaps", error);
            }
        },

        applyVisibilityRulesToProducts: function (uniqueProductsByIds, visibilityMapsData, extraOptions) {
            try {
                let isPageTypeMultiCategory = extraOptions?.pageType == "MULTI_CATEGORY"

                let onlyShownProductIds = [];
                let onlyShownVariantIds = [];
                let productShownByRuleKey = {};
                let productHiddenByRuleKey = {};

                Object.keys(visibilityMapsData).forEach((ruleKey) => {
                    let rule = visibilityMapsData[ruleKey];

                    // Apply product visibility rules
                    Object.keys(rule.products || {}).forEach((productId) => {
                        let visibility = rule.products[productId].visibility;
                        if (visibility === 1) {
                            onlyShownProductIds.push(productId);
                        } else if (visibility === -1 && uniqueProductsByIds[productId]) {
                            uniqueProductsByIds[productId].available = false; // Hide the product
                            // product.available = false; // Hide the product based on tag
                            // product.available = false; // Hide the product based on tag
                        }
                    });

                    // Apply tag visibility rules
                    Object.keys(rule.tags || {}).forEach((tag) => {
                        let visibility = rule.tags[tag].visibility;
                        Object.values(uniqueProductsByIds).forEach((product) => {
                            if (product.tags && product.tags.includes(tag)) {
                                // If the product has the tag
                                if (visibility === 1 && !onlyShownProductIds.includes(product.productId)) {
                                    onlyShownProductIds.push(product.productId);
                                } else if (visibility === -1) {
                                    product.available = false; // Hide the product based on tag
                                }
                            } else {
                                // If the product doesn't have the tag
                                if (visibility === 1) {
                                    // Visibility is 1, but the product doesn't have the tag - ensure it's visible
                                    product.available = false; // Make sure the product is available
                                } else if (visibility === -1) {
                                    // Visibility is -1, but the product doesn't have the tag - hide the product
                                    // product.available = true; // Hide the product since the tag isn't present
                                }
                            }
                        });
                    });


                    // Step 1: Apply visibility rules and populate productVisibilityByRuleKey
                    Object.keys(rule.variantTitle || {}).forEach((itemTitle) => {
                        let visibility = rule.variantTitle[itemTitle].visibility;

                        Object.keys(uniqueProductsByIds).forEach((productId) => {
                            let product = uniqueProductsByIds[productId];
                            let onlyVariantsVisibleForThisProduct = [];

                            if (visibility === 1) {
                                if (!productShownByRuleKey[ruleKey]) productShownByRuleKey[ruleKey] = {};
                            } else if (visibility === -1) {
                                if (!productHiddenByRuleKey[ruleKey]) productHiddenByRuleKey[ruleKey] = {};
                            }

                            if (product.variants && product.variants.length > 0) {
                                product.variants.forEach((variant) => {
                                    let variantTitleOptionArray = variant.variantTitle?.split(" / ") || [];

                                    // Match rule logic (AND/OR)
                                    let matchResults = Object.keys(rule.variantTitle).map((ruleItemTitle) => {
                                        return variantTitleOptionArray.some((variantTitle) => ruleItemTitle.trim().toLowerCase() === variantTitle.trim().toLowerCase());
                                    });

                                    let operationType = "AND";
                                    let checkIfMatchFound;

                                    if (operationType === "AND") {
                                        checkIfMatchFound = matchResults.every((result) => result === true);
                                    } else if (operationType === "OR") {
                                        checkIfMatchFound = matchResults.some((result) => result === true);
                                    }

                                    // Apply visibility based on match results
                                    if (checkIfMatchFound) {
                                        if (visibility === 1) {
                                            productShownByRuleKey[ruleKey][productId] = productShownByRuleKey[ruleKey][productId] || { productId: productId, variants: [] };
                                            productShownByRuleKey[ruleKey][productId].variants.push(variant.variantId);
                                        } else if (visibility === -1) {
                                            productHiddenByRuleKey[ruleKey][productId] = productHiddenByRuleKey[ruleKey][productId] || { productId: productId, variants: [] };
                                            productHiddenByRuleKey[ruleKey][productId].variants.push(variant.variantId);
                                        }
                                    }
                                });
                            }
                        });
                    });

                });


                // Step 2: Update uniqueProductsByIds based on merged results
                let finalShownProducts = {};
                let validProductsToShowFromUniqueProducts;
                // Merge all productShownByRuleKey entries
                Object.keys(productShownByRuleKey).forEach((ruleKey) => {
                    Object.assign(finalShownProducts, productShownByRuleKey[ruleKey]);
                });

                // Apply visibility from the merged shown products
                Object.keys(finalShownProducts).forEach((productId) => {
                    let visibilityData = finalShownProducts[productId];
                    let product = uniqueProductsByIds[productId];

                    if (product) {
                        product.variants = product.variants.filter((variant) => visibilityData.variants.includes(variant.variantId));
                        product.available = product.variants.length > 0;
                    }
                });

                // Apply hidden rules
                Object.keys(productHiddenByRuleKey).forEach((ruleKey) => {
                    Object.keys(productHiddenByRuleKey[ruleKey]).forEach((productId) => {
                        if (uniqueProductsByIds[productId]) {
                            // Remove the variants that should be hidden based on the visibilityData
                            uniqueProductsByIds[productId].variants = uniqueProductsByIds[productId].variants.filter((variant) => {
                                if (productHiddenByRuleKey[ruleKey][productId].variants.includes(variant.variantId)) {
                                    return false; // Remove this variant
                                } else {
                                    variant.available = true; // Keep this variant and mark it as available
                                    return true;
                                }
                            });

                            // If all variants are hidden, mark the product as unavailable
                            if (uniqueProductsByIds[productId].variants && uniqueProductsByIds[productId].variants.length > 0) {
                                let allVariantsAreHidden = uniqueProductsByIds[productId].variants.every((variant) => variant.available === false);
                                if (allVariantsAreHidden) {
                                    uniqueProductsByIds[productId].available = false;
                                }
                            } else {
                                uniqueProductsByIds[productId].available = false; // If no variants remain, mark the product as unavailable
                            }
                        }
                    });
                });


                // Collect product IDs and variant IDs that are set to be shown
                let productIdsToBeShown = Object.keys(uniqueProductsByIds).filter((productId) => uniqueProductsByIds[productId].available);




                onlyShownVariantIds = productIdsToBeShown.reduce((variantIds, productId) => {
                    let product = uniqueProductsByIds[productId];
                    variantIds.push(...product.variants.map((variant) => variant.variantId));
                    return variantIds;
                }, []);

                // Final result
                return { onlyShownProductIds, uniqueProductsByIds, onlyShownVariantIds };

                // The final result
                //   return { onlyShownProductIds, uniqueProductsByIds, onlyShownVariantIds };
            } catch (error) {
                gbb.utility.debugConsole("error applyVisibilityRulesToProducts", error);
            }

        },


        filterOutBasedOnConditionalLogic: function (allProducts) {
            try {
                let cartData = gbb.state.giftBoxCartData;
                let conditionalLogic = gbb.settings.stepsConfigurationData?.conditionalLogic;

                if (!conditionalLogic || !conditionalLogic.isEnabled || conditionalLogic.rules.length < 1) {
                    return allProducts;
                }

                let visibilityMapsData = gbb.f.getVisibilityMaps(conditionalLogic, cartData);

                let uniqueProducts = JSON.parse(JSON.stringify(allProducts));
                let uniqueProductsByIds = gbb.utility.convertArrayToObject(uniqueProducts, "productId");


                let applyVisibilityRulesResult = gbb.f.applyVisibilityRulesToProducts(uniqueProductsByIds, visibilityMapsData);

                // let { onlyShownProductIds, uniqueProductsByIds: updatedProductsByIds } = 
                let onlyShownProductIds = applyVisibilityRulesResult.onlyShownProductIds || [];
                let onlyShownVariantIds = applyVisibilityRulesResult.onlyShownVariantIds || [];
                uniqueProductsByIds = applyVisibilityRulesResult.uniqueProductsByIds


                let resultFilteredArrayOfUniqueProducts;
                if (onlyShownProductIds.length > 0) {
                    resultFilteredArrayOfUniqueProducts = onlyShownProductIds.map(itemId => uniqueProductsByIds[itemId]);
                } else {
                    resultFilteredArrayOfUniqueProducts = Object.values(uniqueProductsByIds).filter(product => product.available !== false);
                }

                // clean undefined and null values
                resultFilteredArrayOfUniqueProducts = resultFilteredArrayOfUniqueProducts.filter(item => item);

                if (resultFilteredArrayOfUniqueProducts.length < 1) {
                    return allProducts;
                }


                return resultFilteredArrayOfUniqueProducts;

            } catch (err) {
                gbb.utility.debugConsole("error came", err);
                return allProducts;
            }
        },


        filterOutBasedOnConditionalLogic_MultipleCategories: function (allCategories) {
            try {
                let cartData = gbb.state.giftBoxCartData;
                let conditionalLogic = gbb.settings.stepsConfigurationData?.conditionalLogic;

                if (!conditionalLogic.isEnabled || conditionalLogic.rules.length < 1) {
                    return allCategories;
                }

                let visibilityMapsData = gbb.f.getVisibilityMaps(conditionalLogic, cartData);

                Object.keys(allCategories).forEach(categoryKey => {
                    let category = allCategories[categoryKey];
                    let uniqueProducts = category.uniqueProductsData;
                    let uniqueProductsByIds = gbb.utility.convertArrayToObject(uniqueProducts, "productId");

                    let extraOptions = {
                        pageType: "MULTIPLE_CATEGORY"
                    }
                    let applyVisibilityRulesResult = gbb.f.applyVisibilityRulesToProducts(uniqueProductsByIds, visibilityMapsData, extraOptions);
                    // applyVisibilityRulesResult = gbb.f.applyVisibilityRulesToVariants(uniqueProductsByIds, visibilityMapsData);
                    let onlyShownProductIds = applyVisibilityRulesResult.onlyShownProductIds || [];
                    uniqueProductsByIds = applyVisibilityRulesResult.uniqueProductsByIds
                    let onlyShownVariantIds = applyVisibilityRulesResult.onlyShownVariantIds || [];


                    let tempValue;
                    if (onlyShownProductIds.length > 0 || onlyShownVariantIds.length > 0) {
                        tempValue = onlyShownProductIds.map(productId => uniqueProductsByIds[productId])
                        // .filter(product => product && product.available !== false);
                    }
                    //  else if (onlyShownProductIds.length < 1 && onlyShownVariantIds.length < 1) {
                    //     tempValue = [];
                    // }
                    else {
                        tempValue = Object.values(uniqueProductsByIds).filter(product => product && product.available !== false);
                    }

                    // when the end result will contain no product, we will just return all the data
                    // earlier we used to return all the data. now we dont
                    tempValue = tempValue.filter(item => item);
                    if (tempValue.length > 0) {
                        category.uniqueProductsData = tempValue;
                    } else {

                        category.categoryVisibility = {
                            hide: true,
                            "reason": "NO_PRODUCTS_MEET_CONDITION_LOGIC"
                        }

                    }

                });

                // just before returning check 
                // if all the categories have category.categoryVisibility.hide as true
                // if at least one of them has not hide as true 
                //then just delete all the others
                let allCategoriesVisibilityHidden = Object.values(allCategories).map((category) => {
                    return category.categoryVisibility?.hide || false
                });

                // allCategoriesVisibility =   if 
                if (allCategoriesVisibilityHidden.includes(false)) {
                    // allCategories = allCategories.filter((category)=>{
                    //     return category.categoryVisibility?.hide == false
                    // })
                    Object.keys(allCategories).forEach((categoryKey) => {
                        if (allCategories[categoryKey].categoryVisibility?.hide == true) {
                            delete allCategories[categoryKey]
                        }
                    })
                }


                return allCategories;
            } catch (err) {
                console.error("Error occurred:", err);
                return allCategories;
            }
        },




        filterOutBasedOnConditionalLogic2: function (allProducts) {
            try {
                let cartData = gbb.state.giftBoxCartData;

                let conditionalLogic = gbb.settings.stepsConfigurationData?.conditionalLogic;


                if (!conditionalLogic.isEnabled || conditionalLogic.length < 1) {
                    return allProducts;
                }



                let visibilityMapsData = gbb.f.getVisibilityMaps(conditionalLogic, cartData);

                let visibilityMapForProducts = visibilityMapsData.visibilityMapForProducts;
                let visibilityMapForTags = visibilityMapsData.visibilityMapForTags



                let uniqueProducts = JSON.parse(JSON.stringify(allProducts));


                let rulesVisibilityArrayForProducts = gbb.utility.convertObjectToArray(visibilityMapForProducts);
                let rulesVisibilityArrayForTags = gbb.utility.convertObjectToArray(visibilityMapForTags);

                let uniqueProductsByIds = gbb.utility.convertArrayToObject(uniqueProducts, "productId");

                let onlyShownProducts = [];




                let resultFilteredArrayOfUniqueProducts = [];

                for (let i = 0; i < rulesVisibilityArrayForProducts.length; i++) {
                    let rule = rulesVisibilityArrayForProducts[i];

                    // if we find 1;
                    Object.keys(rule).forEach(item => {
                        if (rule[item] == 1) {
                            onlyShownProducts.push(item)
                        }

                        if (rule[item] == -1 && uniqueProductsByIds[item]) {
                            // hide the product
                            uniqueProductsByIds[item]["available"] = false
                            // uniqueProductsById
                        }
                    });
                }


                for (let i = 0; i < rulesVisibilityArrayForTags.length; i++) {
                    let rule = rulesVisibilityArrayForTags[i];


                    Object.keys(rule).forEach(item => {
                        let isInternalOperator = "OR";
                        let currentMatchedItems;
                        if (isInternalOperator == "OR") {
                            currentMatchedItems = uniqueProducts.filter((product) => {
                                if (product.tags.includes(item)) {
                                    return product;
                                }

                            })
                        } else if (isInternalOperator == "AND") {
                            //  write an operator similar to above but with AND
                            let currentMatchedItems = uniqueProducts.filter((product) => {
                                // if every 
                                // rule is an object so we cant use includes



                            })

                        }

                        // clean currentMatchedItems to not return undefined


                        if (rule[item] == 1) {
                            currentMatchedItems.forEach((product) => {
                                if (product?.productId) {
                                    onlyShownProducts.push(product?.productId)
                                }
                            })
                        }

                        if (rule[item] == -1) {
                            // hide the product
                            // find the detail in uniqueProductsByIds and set available to false
                            let findSameTagValue = uniqueProducts.find((product) => {
                                return product.tags.includes(item)
                            })

                            if (findSameTagValue && uniqueProductsByIds[findSameTagValue.productId]) {
                                uniqueProductsByIds[findSameTagValue.productId]["available"] = false
                            }
                        }
                    });

                }

                if (onlyShownProducts.length > 0) {
                    let onlyShownProductsData = onlyShownProducts.map((item) => {
                        return uniqueProductsByIds[item]
                    });

                    // return onlyShownProductsData;
                    resultFilteredArrayOfUniqueProducts = onlyShownProductsData;
                } else {
                    Object.keys(uniqueProductsByIds).forEach(item => {
                        if (uniqueProductsByIds[item]["available"] == false) {
                            delete uniqueProductsByIds[item]
                        }
                    });

                    let uniqueProductsArray = gbb.utility.convertObjectToArray(uniqueProductsByIds);
                    // return uniqueProductsArray
                    resultFilteredArrayOfUniqueProducts = uniqueProductsArray
                }


                return resultFilteredArrayOfUniqueProducts;

            } catch (err) {
                gbb.utility.debugConsole("error came", err)
                return allProducts;
            }
        },
        filterOutBasedOnConditionalLogic_MultipleCategories2: function (allCategories) {
            try {
                let cartData = gbb.state.giftBoxCartData;
                let conditionalLogic = gbb.settings.stepsConfigurationData?.conditionalLogic;

                // let allCategories = gbb.gbbAddProductsPage.state.productPageData.categories;
                if (!conditionalLogic.isEnabled || conditionalLogic.length < 1) {
                    return allCategories;
                }

                let visibilityMapsData = gbb.f.getVisibilityMaps(conditionalLogic, cartData);

                let visibilityMapForProducts = visibilityMapsData.visibilityMapForProducts;
                let visibilityMapForTags = visibilityMapsData.visibilityMapForTags;

                Object.keys(allCategories).forEach(categoryKey => {
                    let category = allCategories[categoryKey];
                    let uniqueProducts = category.uniqueProductsData;

                    let uniqueProductsByIds = gbb.utility.convertArrayToObject(uniqueProducts, "productId");

                    let rulesVisibilityArrayForProducts = gbb.utility.convertObjectToArray(visibilityMapForProducts);
                    let rulesVisibilityArrayForTags = gbb.utility.convertObjectToArray(visibilityMapForTags);

                    let onlyShownProducts = [];

                    rulesVisibilityArrayForProducts.forEach(rule => {
                        Object.keys(rule).forEach(productId => {
                            if (rule[productId] == 1 && uniqueProductsByIds[productId]) {
                                onlyShownProducts.push(productId);
                            } else if (rule[productId] == -1 && uniqueProductsByIds[productId]) {
                                uniqueProductsByIds[productId]["available"] = false;
                            }
                        });
                    });

                    for (let i = 0; i < rulesVisibilityArrayForTags.length; i++) {
                        let rule = rulesVisibilityArrayForTags[i];

                        let operator = "OR";
                        let currentMatchedItems;
                        if (operator == "OR") {
                            Object.keys(rule).forEach(item => {
                                currentMatchedItems = uniqueProducts.filter((product) => {
                                    if (product.tags.includes(item)) {
                                        return product;
                                    }
                                })



                                // clean currentMatchedItems to not return undefined


                                if (rule[item] == 1) {
                                    currentMatchedItems.forEach((product) => {
                                        if (product?.productId) {
                                            onlyShownProducts.push(product?.productId)
                                        }
                                    })
                                }

                                if (rule[item] == -1) {
                                    // hide the product
                                    // find the detail in uniqueProductsByIds and set available to false
                                    let findSameTagValue = uniqueProducts.find((product) => {
                                        return product.tags.includes(item)
                                    })

                                    if (findSameTagValue && uniqueProductsByIds[findSameTagValue.productId]) {
                                        uniqueProductsByIds[findSameTagValue.productId]["available"] = false
                                    }
                                }
                            });
                        } else {
                            let isMatchedItemForEveryRule;




                        }

                    }

                    let categoryUniqueProductsData;
                    if (onlyShownProducts.length > 0) {
                        category.uniqueProductsData = onlyShownProducts.map(productId => uniqueProductsByIds[productId]).filter(product => product.available !== false);
                    } else {
                        category.uniqueProductsData = Object.values(uniqueProductsByIds).filter(product => product.available !== false);

                    }
                });

                return allCategories;
            } catch (err) {
                console.error("Error occurred:", err);
                // It seems there's a missing definition for allCategories here in the catch block. Assuming it should return an empty object or similar fallback.
                return {}; // or perhaps return the input unmodified or as best fits your error handling strategy
            }
        },
        convertCamelCaseToKebabCase: function (str) {
            try {
                return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();

            } catch (error) {
                gbb.utility.debugError("error in convertCamelCaseToKebabCase", error);
            }
        },
        setCustomDesignConfigurationValues: function () {
            try {
                let root = document.documentElement;
                let pageCustomizationData = gbb.settings.pageCustomizationData || {}
                const keysToMap = ["productCard", "navigationBanner", "cartFooter"]
                keysToMap.forEach((key) => {
                    let currentKey = pageCustomizationData[key] || {}
                    Object.keys(currentKey).forEach((key) => {
                        let value = currentKey[key];
                        if (value) {
                            let _key = gbb.f.convertCamelCaseToKebabCase(key);
                            root.style.setProperty(`--gbb-${_key}`, value);
                        }

                    })
                })

            } catch (error) {
                gbb.utility.debugConsole("error in setCustomDesignConfigurationValues", error);
            }
        },
        initialize: async function (jQuery) {
            //renderLandingPage(); ->

            //show a loading screen
            gbb.$(".gbbPageFooterHTML").html("<div class='gbbLoadingScreen'><div class='gbbLoadingScreenSpinner'>    </div></div>");
            gbb.$(".gbbLoadingScreen").css("background", gbb?.settings?.app?.loadingBgColor);
            //TODO uncomment
            let tmpCartSettings = await gbb.f.getSettings();
            // tmpCartSettings = gbb.f.modifySettings(tmpCartSettings);
            gbb.f.setSettings(tmpCartSettings)
            gbb.f.setCustomDesignConfigurationValues();
            gbb.f.setSelectors()
            gbb.f.setDefaultThemeStyles();
            // gbb.f.setCustomStyling()
            // gbb.state.page_type = gbb.f.getPageType();
            gbb.elements = gbb.f.getElements(gbb.settings);
            // if ("" === gbb.state.page_type) return false;
            gbb.utility.setLanguageLocale();
            gbb.utility.gbbMultiLangOverrider();
            return gbb.f.bootstrap(gbb.settings);
        },
        globalListener: async function (settings) {
            let isIntervalActive = false
            //if app is disabled reurn
            if (settings?.app?.disableApp) {
                return "<div>App is unavailable</div>"
            } else {
                //gbb.gbbPage.init();
                // initialization will call get settings
                // and therefore we will have the data globally
                //
                gbb.state.cartData = await gbb.utility.getCart()

                // gbb.gbbMainPage.init();
                // gbb.gbbFooter.init();
                // gbb.utility.debugConsole(gbb.settings.languageData);

                gbb.giftboxbuilderPage.init();
            }
        },

        modifySettings: function (settings) {
            try {
                let currentBundleTemplate = settings.stepsConfigurationData.bundleDesignTemplate;

                //    let oldSettings = JSON.parse(JSON.stringify(settings))

                if (currentBundleTemplate && settings.pageCustomizationData?.templateLevelConfig) {
                    settings.pageCustomizationData = settings.pageCustomizationData?.templateLevelConfig[currentBundleTemplate] || settings.pageCustomizationData
                }



                return settings;
            } catch (e) {
                gbb.utility.debugConsole("error in modifySettings", e)
                return settings;
            }
        },
    },
    utility: {
        getcachedProductData: async function (fetchsixtyProductsEachStep) {
            // convert map to array 
            // let cachedProductData = Array.from(gbb.state.cachedProductData.entries());
            // call getProductDataV2 data in batch of 20
            setTimeout(async () => {
                // gbb.utility.debugConsole("getcachedProductData")
                while (fetchsixtyProductsEachStep.length > 0) {
                    let batch = fetchsixtyProductsEachStep.splice(0, 20)
                    let apiCalls = []
                    for (let i = 0; i < batch.length; i++) {
                        apiCalls.push(gbb.utility.getProductDataV2(batch[i]))
                    }
                    await Promise.all(apiCalls)
                }
            },
                1000)

        },
        getcachedProductDataForGraphql: async function (fetchsixtyProductsEachStep) {
            if (gbb.settings.merchantInfo.storefrontAccessToken) {

                // fetchsixtyProductsEachStep.forEach(item=> {
                //     item = "gid://Product/"+ item
                // });

                for (let i = 0; i < fetchsixtyProductsEachStep.length; i++) {
                    let item = fetchsixtyProductsEachStep[i];
                    fetchsixtyProductsEachStep[i] = "gid://shopify/Product/" + item
                    // "gid://shopify/Product/9170602688797"
                }

                let graphQLProductsData = [];

                setTimeout(async () => {
                    // gbb.utility.debugConsole("getcachedProductData")
                    while (fetchsixtyProductsEachStep.length > 0) {
                        let batch = fetchsixtyProductsEachStep.splice(0, 20)
                        // let starttime = 
                        // console.time("fetch-1");
                        let graphQLFetchedData = await gbb.graphQlUtility.getProductsDataByIds(fetchsixtyProductsEachStep.splice(0, 20))
                        graphQLProductsData.push(...graphQLFetchedData)
                        // console.timeEnd("fetch-1")

                        // let apiCalls = []
                        // for (let i = 0; i < batch.length; i++) {
                        //     // apiCalls.push(gbb.utility.getProductDataV2(batch[i]))
                        //     apiCalls.push(gbb.graphQlUtility.getProductsDataByIds(batch[i]))
                        // }
                        // console.time("fetch-2-sync");
                        // await Promise.all(apiCalls)
                        // console.timeEnd("fetch-2-sync");



                    }

                },
                    1000)
            }
            // convert map to array 
            // let cachedProductData = Array.from(gbb.state.cachedProductData.entries());
            // call getProductDataV2 data in batch of 20

        },
        getDynamicDiscountCode: async function () {
            // gbb.utility.getCartDataAfterDiscount()
            // gbb.utility.debugConsole('dyamic called')


            // if kite integration is enabeld then also retyrn early

            let discountData = gbb.settings.discountsData || {}
            if (discountData?.discountMode == 'PRODUCT_SPECIFIC_DISCOUNT' && discountsData?.isKiteIntegrationEnabled) {
                //no need to compute code, just send it back early
                return
            }
            

            if (!gbb.gbbDiscountComponent.state.isAtleastOneDiscountActive) {
                return;
            }

            // let cartData = gbb.gbbDiscountComponent.f.discountEligibleCartData();
            // const bundleQuantity = cartData.bundleQuantity;

            // let cartData = gbb.state.giftBoxCartData;
            // const productIdsPresentInCart = cartData?.items?.map((item) => {
            //     return item?.product_id
            // })


            let bundleDataObj = gbb.utility.calculateCartDiscount();

            const productIdsPresentInCart = bundleDataObj?.cartProductListForDiscounts.map(item => parseInt(item))
            const variantIdsPresentInCart = bundleDataObj?.cartVariantListForDiscounts.map(item => parseInt(item))
            let VariantListPricePresentInCart = bundleDataObj?.cartVarientPriceListForDiscounts;

            let activeCurrencyRate = gbb.utility.getActiveCurrencyRate();
            // let cartTotalAmount = bundleDataObj.cartTotalAmount;
            let cartSubtotalAmount = bundleDataObj.cartSubTotal;

            VariantListPricePresentInCart = VariantListPricePresentInCart.map((price) => {
                return price / parseFloat(activeCurrencyRate)
            })



            let cartValue = cartSubtotalAmount / 100;
            let convertCartValueToStoreCurrencyValue = cartValue / activeCurrencyRate

            let cartDiscount = bundleDataObj.cartDiscount / parseFloat(activeCurrencyRate)
            let cartTotalQty = bundleDataObj.cartTotalQty;
            let discountAmountToBeApplied = cartDiscount / 100;

            if (discountAmountToBeApplied > 0 == false) {
                // gbb.utility.debugConsole("discountAmountToBeApplied is 0")
                return;
            }

            let discountsPerBoxWithCorrectedPrices = {}
            for (let i = 0; i < Object.keys(bundleDataObj?.discountsPerBox).length; i++) {
                let _boxKey = Object.keys(bundleDataObj.discountsPerBox)[i];
                let _boxValue = JSON.parse(JSON.stringify(bundleDataObj.discountsPerBox[_boxKey]));
                _boxValue.boxDiscount = (_boxValue.boxDiscount / 100) / activeCurrencyRate
                _boxValue.boxSubTotal = (_boxValue.boxSubTotal / 100) / activeCurrencyRate
                _boxValue.boxTotalAmount = (_boxValue.boxTotalAmount / 100) / activeCurrencyRate

                discountsPerBoxWithCorrectedPrices[_boxKey] = _boxValue;
            }


            let bodyToBePassed = {
                type: "quantity",
                currency: activeCurrencyRate,
                cartValue: convertCartValueToStoreCurrencyValue,
                bundleId: gbb.state.bundleId,
                discountsPerBox: discountsPerBoxWithCorrectedPrices,
                cartQuantity: cartTotalQty,
                productIds: productIdsPresentInCart,
                variantIds: variantIdsPresentInCart,
                productHandles: bundleDataObj?.cartProductHandlesForDiscounts,
                variantListPrice: VariantListPricePresentInCart,
                discountValue: discountAmountToBeApplied,
                discountCodePrefix: gbb.gbbDiscountComponent.state.discountCodePrefix,
                deviceDetails: navigator && navigator.userAgent ? navigator.userAgent : "Couldnt find device details"
            }

            if (gbb.settings.discountsData.discountMode === "FIXED_BUNDLE_PRICE") {
                bodyToBePassed["type"] = "quantity"
            }
            else if (gbb.gbbDiscountComponent.state.currentDiscountRule?.type === "quantity") {
                bodyToBePassed["type"] = gbb.gbbDiscountComponent.state.currentDiscountRule.type
            } else if (gbb.gbbDiscountComponent.state.currentDiscountRule?.type === "amount") {
                bodyToBePassed["type"] = gbb.gbbDiscountComponent.state.currentDiscountRule.type
            } else {
                bodyToBePassed["type"] = "amount"
            }

            let endPoint = "/dynamicDiscountCodeV2";
            const subscriptionPlanExists = gbb.gbbReviewPage.f.checkIfSubscriptionPlanExists();
            if (subscriptionPlanExists && gbb.gbbBrowser.getSubscriptionType() == "saveSubscription") {
                bodyToBePassed["enableRecurringDiscounts"] = gbb.settings?.stepsConfigurationData?.enableRecurringDiscounts || false;
                bodyToBePassed["subscriptionDiscount"] = true;
                endPoint = "/dynamicDiscountCodeV2"
            }
            const isPurchaseTypeSubscription = gbb.gbbSubscriptionProductsPage.f.checkIfPurchaseTypeIsSubscription()
            if (isPurchaseTypeSubscription) {
                bodyToBePassed["enableRecurringDiscounts"] = gbb.settings?.stepsConfigurationData?.enableRecurringDiscounts || false;
                bodyToBePassed["subscriptionDiscount"] = true;
                endPoint = "/dynamicDiscountCodeV2"
            }
            await fetch("/apps/" + gbb.state.gbbUrl + `${endPoint}?bundleId=${gbb.state.bundleId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(bodyToBePassed)
            }).then((response) => {
                return response.json();
            }).then((data) => {
                if (data) {
                    gbb.utility.debugConsole("discount code", data.data.code);
                    gbb.gbbDiscountComponent.state.discountCode = data.data.code;
                }
            }).catch((error) => {
                gbb.utility.debugConsole(error);
            });
        },
        setCachedGraphqlData: function (data) {
            try {
                // TODO: graphql or REST
                // cachedProductDataGraphql or cachedProductData..... confused
                let cachedProductData = gbb.state.cachedProductDataGraphql;

                for (let i = 0; i < data.length; i++) {
                    let item = data[i];
                    let productId = item?.id;
                    let productData = item;
                    cachedProductData.set(productId, productData)
                }
            } catch (e) {
                gbb.utility.debugConsole("error in setCachedGraphqlData", e)
            }
        },
        getLocale: function () {
            if (window.Shopify && window.Shopify.locale) {
                return window.Shopify.locale
            } else {
                return "en"
            }
        },
        getCountry: function () {
            if (window.Shopify && window.Shopify.country) {
                return Shopify.country
            }
        },
        setLanguageLocale: function () {
            let locale = gbb.utility.getLocale()
            gbb.state.languageMode = gbb.settings.languageData.languageMode
            if (gbb.settings.languageData && gbb.settings.languageData.languageMode == "SINGLE") {
                locale = "en"
            }

            if (!gbb.settings.languageData[locale]) {
                locale = "en"
            }
            gbb.settings.languageData = gbb.settings.languageData[locale]
        },
        getNavItem: function (id) {
            let navigationItems = gbb.state.navigationItems;
            let navigationItem = navigationItems.filter(function (item) {
                return item.id === id;
            })
            return navigationItem[0];
        },
        disableElement: function (element, timeInMs) {
            //use this function to disable element for a specific time,
            // most likely to prevent double click
            element.prop("disabled", true);
            element.addClass("gbbDisabled");
            if (timeInMs >= 0) {
                setTimeout(function () {
                    element.prop("disabled", false);
                    element.removeClass("gbbDisabled");
                }, timeInMs);
            }
        },
        getNextNavigationItem: function () {

            let navigationItems = gbb.gbbModal.state.navigationItems;
            let currentNavigationId = gbb.gbbModal.state.currentNavigationId;

            let currentNavigationItem = gbb.gbbModal.f.getNavItem(currentNavigationId);

            // find the index of the current navigation item
            let currentNavigationIndex = navigationItems.indexOf(currentNavigationItem);
            // gbb.utility.debugConsole(currentNavigationIndex);
            // get the next navigation item making sure its not the last one, if its then return null
            if (currentNavigationIndex === navigationItems.length - 1) {
                return null;
            }
            else {
                return navigationItems[currentNavigationIndex + 1];
            }
        },
        isNavElementLast: function (id) {
            // if it is last then return null
            let navigationItems = gbb.gbbModal.state.navigationItems;
            let currentNavigationId = id;

            //check if the passed id is the last one
            let currentNavigationItem = gbb.gbbModal.f.getNavItem(currentNavigationId);
            let currentNavigationIndex = navigationItems.indexOf(currentNavigationItem);
            if (currentNavigationIndex === navigationItems.length - 1) {
                return true;
            }
            else {
                return false;
            }
        },
        getDate: function (date) {
            let d = new Date(date);
            let month = "" + (d.getMonth() + 1);
            let day = "" + d.getDate();
            let year = d.getFullYear();

            if (month.length < 2) month = "0" + month;
            if (day.length < 2) day = "0" + day;

            return [year, month, day].join("-");
        },
        addToCart: async function ({ variant, parent, qty = 1 }, noteAttribute, category = undefined, defaultProduct = undefined) {
            try {
                if (qty == 0) {
                    return
                }
                let data = {
                    updates: { [variant.id]: qty },
                    attributes: {
                        [variant.id]: noteAttribute,
                    }
                }

                if (category && category != "") {
                    data.attributes.category = category
                    data.attributes.categoryName = gbb.gbbAddProductsPage?.state?.productPageData?.categories[category].title || category
                }

                if (defaultProduct && defaultProduct != "") {
                    data.attributes.defaultProduct = true
                }


                // if properties and variant ids are the same then just add their quantities respective



                await gbb.utility.updateCartV2(data)
                if (false && gbb.$(".gbbProductsCardLayoutV2").length > 0) {
                    let isCurrentPageExhausedATCFooterAnimation = gbb?.gbbAddProductsPage?.state?.pagesWhichHaveExhaustedATCFooterAnimation?.includes(gbb?.state?.currentPageId);
                    //true replace true with actual toggle key when implemented from admin
                    let isATCAnimationEnabled = gbb?.gbbAddProductsPage?.state?.isAnimateFooterOnATCEnabled
                    let isAddingFirstProductToCart = gbb?.state?.giftBoxCartData?.items?.length == 1 && gbb?.state?.giftBoxCartData?.items[0]?.quantity == 1
                    if (isATCAnimationEnabled && (isAddingFirstProductToCart || !isCurrentPageExhausedATCFooterAnimation)) {
                        let currentPageId = gbb?.state?.currentPageId;
                        setTimeout(() => {
                            let isFooterOpen = gbb?.gbbAddProductsPage?.state?.showBoxProductsInFooter || false
                            if (!isFooterOpen) {
                                gbb.gbbAddProductsPage.f.toggleBoxProductsDisplayFooter()
                                !isCurrentPageExhausedATCFooterAnimation && gbb?.gbbAddProductsPage?.state?.pagesWhichHaveExhaustedATCFooterAnimation?.push(currentPageId)
                                setTimeout(() => gbb.gbbAddProductsPage.f.toggleBoxProductsDisplayFooter(), 3000)
                            }
                        }, 100)// doing this cause once file is loaded then will can get smooth animation without setTimeout its rendering the open footer direct
                    }
                }
            } catch (error) {
                gbb.utility.debugError("gbb-utility-addToCart");
                gbb.utility.debugError(error);
                return false
            }
        },
        updateCart: async function (data) {
            try {
                let result = await gbb.$.ajax({
                    type: "POST",
                    url: "/cart/update.js",
                    data: data,
                    dataType: "json",
                });
                return result
            } catch (error) {
                gbb.utility.debugError("gbb-utility-updateCart");
                gbb.utility.debugError(error);
                return false
            }
        },
        updateCartV2: async function (data, noteAttribute) {
            try {

                let variantId = Object.keys(data.updates)[0];

                let quantity = data.updates[variantId];

                let originForVariantDetails = data.attributes[variantId] == "addonProduct" ? "addonProducts" :null
                let productItem = gbb.utility.getVariantDetailsFromCurrentProductsDataSet(variantId, originForVariantDetails) || {};

                if (productItem && productItem != "undefined") {
                }
                else {
                    // gbb.utility.debugConsole("variantId is undefined");
                    // return;
                }

                let result;
                //in data.attributes we get key value pair, but we only need the value
                let attributes = data?.attributes || {}
                // let additionalProperties = {}
                let _properties = {
                    "_boxProduct": data?.attributes[variantId],
                    // "_Bundle ID": gbb.state.bundleId,
                    "Bundle": gbb.settings?.stepsConfigurationData?.bundleName || "",
                    "Box ID": gbb.state?.activeBoxId?.split("box")[1] || 1,

                    "_uniqueGbbItemKey": data?.additionalInfo?._uniqueGbbItemKey || gbb.utility.getUniqueIdForVariant({ variantId, attributes: data.attributes }),
                    ...gbb.state.variantCustomProperties
                }
                if (data?.attributes[variantId] == 'addonProduct') { 
                    _properties["_addon_product"] = true;
                    // _properties["_addon_offer_id"] = gbb.gbbAddonProducts.state.offerId
                }
                //this is for storing the  category name on multiple categories step
                if (data?.attributes.category) {
                    _properties["_Category"] = data?.attributes.category;
                    _properties["_CategoryName"] = data?.attributes.categoryName;
                }

                if (data?.attributes.defaultProduct) {
                    _properties["_DefaultProduct"] = "Yes";
                }

                if (data?.attributes[variantId] == "giftMessage") {
                    let msgAttributes = gbb.utility.prepareMsgAttributesForCart();
                    if (msgAttributes.message) {
                        _properties["Message"] = msgAttributes.message
                    }

                    if (msgAttributes.recipientName) {
                        _properties["Recipient Name"] = msgAttributes.recipientName
                    }

                    if (msgAttributes.senderName) {
                        _properties["Sender Name"] = msgAttributes.senderName
                    }

                    if (msgAttributes.email) {
                        _properties["Recipient Email"] = msgAttributes.email
                    }
                    if (msgAttributes._videoMsgId) {
                        _properties["_videoMsgId"] = msgAttributes._videoMsgId
                        _properties["Video Recorded"] = msgAttributes._videoMsgId ? "yes" : "";
                    }
                    if (msgAttributes._gbbEmailDeliveryDate) {
                        _properties["_gbbEmailDeliveryDate"] = msgAttributes._gbbEmailDeliveryDate;
                    }
                    if (msgAttributes._gbbEmailDeliveryOption) {
                        _properties["_gbbEmailDeliveryOption"] = msgAttributes._gbbEmailDeliveryOption;
                    }

                    // if(msgAttributes.customerUploads){
                    //     _properties["Customer Uploads"] = msgAttributes.customerUploads;
                    // }

                    if (msgAttributes.customerUploads) {
                        //use spread operator and add the customerUploads property to the _properties object
                        _properties = { ..._properties, ...msgAttributes.customerUploads }
                    }

                }
                let argsObj = {
                    properties: _properties,
                    variantId: variantId,
                }

                let uniqueItemKey = _properties?._uniqueGbbItemKey || gbb.utility.getUniqueIdForVariant(argsObj);
                const item = gbb.utility.checkIfItemPresentInGiftBoxCart(variantId, { uniqueItemKey });

                if (item) {
                    // if item is present in cart then update the qty using the change attribute method
                    let _data = {
                        id: item.key || item.id,
                        quantity: quantity,
                        properties: {
                            ...item.properties,
                            ..._properties
                        }
                    }
                    result = await gbb.utility.changeCart(_data);
                }
                else {
                    // if item is not present in cart then add it using the add attribute method
                    let _data = {
                        id: variantId,
                        quantity: quantity,
                        properties: _properties
                    }
                    if (_data.quantity != 0) {
                        gbb.gbbBrowser.addItemToCartSessionStorage({ ..._data, ...productItem });
                    }
                }

                gbb.state.giftBoxCartData = await gbb.utility.getGiftBoxProductsFromCart()
                gbb.gbbDiscountComponent.f.updateCurrentDiscountRule();
                gbb.gbbAddonProducts.f.calculateEligibleAddonProductsTier()
                gbb.gbbBrowser.emitCustomEvent({
                    eventName: "gbb-cart-update",
                    detail: {
                        variantId: variantId,
                        // quantity: item - quantity,
                    }
                })
                return result
            } catch (error) {
                gbb.utility.debugError("gbb-utility-updateCartV2");
                gbb.utility.debugError(error);
                return false
            }
        },
        changeCart: async function (data) {
            try {
                return gbb.gbbBrowser.updateCartItemQuantityAndProperty(data.id, data.quantity, data.properties);
                let result = await gbb.$.ajax({
                    type: "POST",
                    url: "/cart/change.js",
                    data: data,
                    dataType: "json",
                });
                return true
            } catch (error) {
                gbb.utility.debugError("gbb-utility-changeCart");
                gbb.utility.debugError(error);
                return false
            }
        },
        getAttributValueFromCart: function (attributeName) {
            if (gbb.state.giftBoxCartData && gbb.state.giftBoxCartData.attributes && gbb.state.giftBoxCartData.attributes[attributeName] && gbb.state.giftBoxCartData.attributes[attributeName] != "") {
                return gbb.state.giftBoxCartData.attributes[attributeName]
            } else {
                return null
            }
        },
        getProductsInDefaultView: function () {
            return gbb.gbbAddProductsPage.state.uniqueProductsData;
        },
        getCurrencySymbolByCode: function (code) {
            try {
                let merchantCurrencies = gbb?.settings?.merchantInfo?.multipleCurrenciesInfo;
                if (merchantCurrencies.hasOwnProperty(code)) {
                    return merchantCurrencies[code]?.symbol;
                }
                return "";
            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        setStoreCurrenyStateFromCart: async function () {
            try {
                if (gbb.state.storeCurrencySymbol) {
                    return;
                } else {
                    if (window && window.Shopify && window.Shopify.currency && window.Shopify.currency.active) {
                        gbb.state.storeCurrencySymbol = gbb.utility.getCurrencySymbol();
                    } else {
                        let _shopifyCartData = await gbb.shopifyUtility.getCart();
                        gbb.state.storeCurrencySymbol = gbb.utility.getCurrencySymbolByCode(_shopifyCartData?.currency);
                    }
                }
            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        formatPrice: function (price) {
            if (window && window.Shopify && window.Shopify.currency && window.Shopify.currency.active) {
                //find the currency symbol from  gbb.settings.merchantInfo.multipleCurrencies[window.Shopify.currency.active] get the symbol
                let currencySymbol = gbb.utility.getCurrencySymbol();
                return currencySymbol + "" + parseFloat(price / 100).toFixed(2)
            } else {
                return gbb.state.storeCurrencySymbol + "" + parseFloat(price / 100).toFixed(2)
            }
        },
        formatPriceWithoutSymbol: function (price) {
            if (window && window.Shopify && window.Shopify.currency && window.Shopify.currency.active) {
                //find the currency symbol from  gbb.settings.merchantInfo.multipleCurrencies[window.Shopify.currency.active] get the symbol
                return parseFloat(price / 100).toFixed(2)
            } else {
                return parseFloat(price / 100).toFixed(2)
            }
        },

        //calculate cartDiscount uses getCartDataFromSessionStorage, gets the entire data.
        //then we loop on boxes object and inside each object we use
        //we have discountValue as a variable stored in it,
        // depending on the discountMode we will calculate the discount we have to offer
        //we will multiply the discountValue by boxQuantity and also multiply the quantity of each product by boxQuantity
        // the values returned are cartSubTotal: - 1900
        // cartDiscount: - 520
        // cartTotalAmount - 1380
        // cartTotalqty -
        // cartProductListForDiscounts: []
        calculateCartDiscount: function (cartData) {
            if (!cartData) {
                cartData = gbb.gbbBrowser.getCartDataFromSessionStorage({ forSubscription: true });
            }
            // let cartData = gbb.gbbBrowser.getCartDataFromSessionStorage();

            //all the prices in this function are in shopify formats. 
            //.i.e. 100 = 1.00

            let cartSubTotal = 0;
            let cartDiscount = 0;
            let cartTotalAmount = 0;
            let cartTotalQty = 0;
            let cartBlacklistedItemsTotal = 0;
            let cartProductListForDiscounts = [];
            let cartProductHandlesForDiscounts = [];
            let cartVariantListForDiscounts = [];
            let cartVarientPriceListForDiscounts = [];
            let discountMode = gbb.settings.discountsData.discountMode
            let discountsPerBox = {}

            if (gbb.settings.discountsData.isKiteDiscountMessagingEnabled){
                discountMode = gbb.settings.discountsData.kiteDiscountMessaging.discountMode;
            }

            if (cartData && cartData.boxes) {
                Object.keys(cartData.boxes).forEach((item) => {
                    let box = cartData.boxes[item];
                    box = gbb.gbbDiscountComponent.f.discountEligibleCartData(box);
                    //let discountValue = gbb.gbbDiscountComponent.state.currentDiscountRule[box.boxId]?.discountValue || box.discountValue;
                    let discountValue = gbb.gbbDiscountComponent.state.currentDiscountRule[box.boxId]?.discountValue;
                    discountValue = parseFloat(discountValue);
                    let discountValueIsNumber = !isNaN(discountValue) && typeof discountValue == "number";

                    if (discountValueIsNumber && discountMode == "FIXED" || discountMode == "FIXED_BUNDLE_PRICE") {
                        discountValue = parseFloat(discountValue) * 100;
                        let activeCurrencyRate = gbb.utility.getActiveCurrencyRate();
                        discountValue = discountValue * activeCurrencyRate;
                    }


                    let boxQuantity = box.boxQuantity;
                    let boxItemCount = box.item_count;
                    let boxPrice = box.total_price;
                    let boxDiscount = 0;
                    let boxTotalAmount = box.total_price * boxQuantity;
                    let boxTotalQty = box.boxQuantity;

                    let boxProductList = [];
                    let boxProductHandleList = [];
                    let boxVariantList = [];
                    let boxVarientPriceList = [];
                    //check if discountValue in not Nan, or undefinded, or null, check the type of discountValue
                    if (discountValueIsNumber) {
                        if (discountMode == "FIXED") {
                            boxDiscount = discountValue * boxQuantity;
                            boxTotalAmount = ((boxPrice * boxQuantity) - boxDiscount)
                            boxTotalQty = boxQuantity;
                        } else if (discountMode == "PERCENTAGE") {
                            boxDiscount = ((boxPrice * discountValue) / 100) * boxQuantity;
                            boxTotalAmount = ((boxPrice * boxQuantity) - boxDiscount);
                            boxTotalQty = boxQuantity;
                        } else if (discountMode == "FIXED_BUNDLE_PRICE") {
                            boxDiscount = (boxPrice - discountValue) * boxQuantity;

                            //this is written because a floating point error came
                            // boxPrice = 3980
                            // discountValue =3979.9999995
                            if (boxDiscount > 0.0001) {
                                boxDiscount = boxDiscount;
                            } else {
                                boxDiscount = 0;
                            }

                            boxTotalAmount = discountValue * boxQuantity;
                            boxTotalQty = boxQuantity;
                        }
                    }
                    cartSubTotal += boxPrice * boxQuantity;
                    cartDiscount += boxDiscount;
                    cartTotalAmount += boxTotalAmount;
                    cartTotalQty += (boxTotalQty * boxItemCount);


                    if (isNaN(box.blackListedItemsTotalPrice)) {
                        box.blackListedItemsTotalPrice = 0;
                    }

                    cartBlacklistedItemsTotal += box.blackListedItemsTotalPrice;
                    discountsPerBox[box.boxId] = {
                        boxDiscount: boxDiscount,
                        boxSubTotal: boxPrice * boxQuantity,
                        boxTotalAmount: boxTotalAmount,
                        boxTotalQty: boxTotalQty * boxItemCount,
                        boxQuantity: boxQuantity,
                        blackListedItemsTotalPrice: box.blackListedItemsTotalPrice,
                    }
                    // boxProductList = box.products.map((product) => 
                    //push the product.id in the boxProductList
                    box.items.forEach((product) => {
                        if (product.price > 0) {
                            boxProductHandleList.push(product.productHandle)
                            boxProductList.push(product.product_id)
                        }
                    })
                    box.items.forEach((product) => {
                        if (product.price > 0) {
                            boxVariantList.push(product.id)
                            boxVarientPriceList.push(product.price / 100)
                        }
                    })
                    cartProductListForDiscounts.push(boxProductList)
                    cartProductHandlesForDiscounts.push(boxProductHandleList)
                    cartVariantListForDiscounts.push(boxVariantList)
                    cartVarientPriceListForDiscounts.push(boxVarientPriceList)
                })
            }

            //if either of the number is not a number, then return 0
            if (isNaN(cartSubTotal)) {
                cartSubTotal = 0;
            }
            if (isNaN(cartDiscount)) {
                cartDiscount = 0;
            }
            if (isNaN(cartTotalAmount)) {
                cartTotalAmount = 0;
            }
            if (isNaN(cartTotalQty)) {
                cartTotalQty = 0;
            }
            if (isNaN(cartBlacklistedItemsTotal)) {
                cartBlacklistedItemsTotal = 0;
            }


            return {
                cartSubTotal: cartSubTotal,
                cartBlacklistedItemsTotal: cartBlacklistedItemsTotal,
                cartDiscount: cartDiscount,
                cartTotalAmount: cartTotalAmount,
                cartTotalQty: cartTotalQty,
                cartProductListForDiscounts: cartProductListForDiscounts.flat(),
                cartProductHandlesForDiscounts: cartProductHandlesForDiscounts.flat(),
                cartVariantListForDiscounts: cartVariantListForDiscounts.flat(),
                cartVarientPriceListForDiscounts: cartVarientPriceListForDiscounts.flat(),
                discountsPerBox: discountsPerBox,
            }
        },
        removeUnUsedVariantImages: function (product) {
            try {
                const usedMediaIds = new Set();
                product.variants.forEach(variant => {
                    if (variant.featured_media) {
                        usedMediaIds.add(variant.featured_media.id);
                    }
                });

                let allMediasSortedByAltKey = gbb.utility.convertArrayToObjectWithArrays(product.media, "alt");



                // this issue arises whe we find that 
                // not all variants have an image associated with it
                // in that case, all images are product base images
                if (usedMediaIds.size < 1) {
                    return product;
                }

                product.media = product.media.filter(media => usedMediaIds.has(media.id));


                // use the alt key present in the media object to get the media object from allMediasSortedByAltKey
                // and then push it to product.media

                let filteredMedia = JSON.parse(JSON.stringify(product.media));

                filteredMedia.forEach(media => {
                    if (!media.alt){
                        media.alt = media?.id;
                    }
                    let _media = allMediasSortedByAltKey[media.alt];

                    if (_media) {
                        if (_media.length) {
                            product.media.push(..._media);
                        }
                    }
                });

                // sort media by position
                product.media.sort((a, b) => a.position - b.position);
                //  remove duplicates after sorting
                product.media = product.media.filter((media, index, self) =>
                    index === self.findIndex((t) => (
                        t.id === media.id
                    ))
                )



                const usedImageUrls = new Set(product.media.map(media => media.src));

                product.images = product.images.filter(imageUrl => {
                    const httpsImageUrl = imageUrl.startsWith('//') ? 'https:' + imageUrl : imageUrl;
                    return usedImageUrls.has(httpsImageUrl);
                });


                return product;
            } catch (error) {
                gbb.utility.debugConsole("error in removeUnUsedVariantImages", error)
            }
        },

        shiftFirstVariantMedia_toFirstIndexInMediaObj: function (product) {
            try {
                product = JSON.parse(JSON.stringify(product));
                if (product.variants.length > 0) {
                    let firstVariant = product.variants[0];
                    if (firstVariant.featured_media) {
                        let featuredMedia = firstVariant.featured_media;
                        let featuredMediaIndex = product.media.findIndex(media => media.id == featuredMedia.id);
                        if (featuredMediaIndex > -1) {
                            let featuredMedia = product.media.splice(featuredMediaIndex, 1);
                            product.media.unshift(featuredMedia[0]);
                        }
                    }
                }
                return product;
            } catch (error) {
                gbb.utility.debugConsole("error in shiftFirstVariantMedia_toFirstIndexInMediaObj", error)
            }
        },


        getProductData_AfterRemovingUnavailableVariantsAndOptions: function (product) {
            try {
                let productData = JSON.parse(JSON.stringify(product));
                productData.variants = productData?.variants?.filter(variant => variant.available);

                productData.options = productData.options.map(option => {
                    // For each option, filter the values that are included
                    //  in at least one of the variant
                    let values = option.values.filter(value => {
                        for (let variant of productData.variants) {
                            // If the variant's options include the value, 
                            // return true to include it in the filter
                            if (variant.options.includes(value)) {
                                return true;
                            }
                        }
                        // If the value is not found in any variant's options,
                        // return false to exclude it from the filter
                        return false;
                    });

                    // Return the new option object, spreading the previous option 
                    //properties and replacing the 'values' with the filtered ones
                    return {
                        ...option,
                        values
                    };
                })

                //check if productData.variants and productData.options are the same as product.variants and product.options
                //if yes, then return productData : with a removedVariantsAndOptions flag
                if (productData.variants.length != product.variants.length || productData.options.length != product.options.length) {
                    // productData.removedVariantsAndOptions = true;
                    productData.renderChooseOptionsButton_forcefully = true;
                } else {
                    productData.renderChooseOptionsButton_forcefully = false;
                }

                // productData.price = productData.variants[0].price || productData.price
                if (productData.variants && productData.variants.length > 0) {
                    productData.price = productData.variants[0].price || productData.price
                    productData.compare_at_price = productData.variants[0].compare_at_price || productData.compare_at_price
                }

                return productData;
            } catch (error) {
                gbb.utility.debugConsole("error in getProductData_AfterRemovingUnavailableVariantsAndOptions", error)
            }
        },
        getCurrencySymbol: function () {
            if (window && window.Shopify && window.Shopify.currency && window.Shopify.currency.active) {
                let symbol = gbb.settings.merchantInfo.multipleCurrenciesInfo[window.Shopify.currency.active]?.symbol || Shopify.currency.active;
                return symbol;
            } else {
                return gbb.state.storeCurrencySymbol;
            }
        },
        getStoreCurrencySymbol: function () {
            return gbb.settings.merchantInfo.currencyInfo.symbol;
        },

        getProductDataV2: function (productName, options) {
            try {
                let languageValue = window?.Shopify?.routes?.root ? window.Shopify.routes.root : "/"
                return new Promise(async (res, rej) => {
                    if (gbb.state.cachedProductData.has(productName)) {
                        res(gbb.state.cachedProductData.get(productName));
                    } else {
                        let productHandlesAreTranslated = gbb.settings.app.productHandlesAreTranslated || false;
                        let flowForFetch;

                        if (productHandlesAreTranslated && options?.dontRetry != true) {
                            flowForFetch = "HANDLE_TRANSLATED_HANDLES";
                        } else {
                            flowForFetch = "FETCH_DEFAULT_HANDLES";
                        }

                        if (flowForFetch === "FETCH_DEFAULT_HANDLES") {
                            gbb.$.getJSON(languageValue + "products/" + productName + ".js", function (product) {
                                product = gbb.gbbKite.f.modifyProductDataWithDiscountedPrice(product);
                                gbb.state.cachedProductData.set(productName, product);
                                res(product);
                            }).fail(function () {
                                gbb.utility.debugConsole("fail-productName: ", productName);
                                gbb.state.cachedProductData.set(productName, false);
                                res(false);
                            });
                        } else if (flowForFetch === "HANDLE_TRANSLATED_HANDLES") {
                            let _updated = await gbb.utility.getProductDataForTranslatedHandles(productName, languageValue);
                            res(_updated);
                        }
                    }
                });

                return result;
            } catch (error) {
                gbb.utility.debugError("gbb-utility-getProductDataV2");
                gbb.utility.debugError(error);
                return false
            }
        },
            getProductDataForTranslatedHandles: function (productName, languageValue) {
            return new Promise((res, rej) => {
                fetch(languageValue + "products/" + productName)
                    .then(async (response) => {
                        if (!response.ok) throw new Error("Network response was not ok");
                        gbb.utility.debugConsole("Final URL:", response.url); // Log the final redirected URL
                        // response.url = response.url.trim().endsWith("/") ? response.url.slice(0, -1) : response.url;
                        let urlReturned = response.url;

                        // Remove the last character if it is a '/'
                        if (urlReturned[urlReturned.length - 1] === "/") {
                            urlReturned = urlReturned.substring(0, urlReturned.length - 1);
                        }
                        gbb.utility.debugConsole("urlReturned", urlReturned);

                        // Extract the last path segment and get the string before the first '.'
                        let newHandle = urlReturned.split("/").pop().split(".")[0];

                        // console.log("newHandle", newHandle);
                        gbb.utility.debugConsole("newHandle", newHandle);

                        // now call productDataV2 with the final url
                        return await gbb.utility.getProductDataV2(newHandle, { dontRetry: true });
                    })
                    .then(product => {
                        gbb.utility.debugConsole("Product Data:", product);
                        res(product); // resolve the outer promise with the product data
                    })
                    .catch(error => {
                        gbb.utility.debugConsole("fail", error);
                        res(false);
                        // rej(error); // reject the outer promise with the error
                    });
            });
        },
        renderTemporaryLoadingSpinner: function (loaderState) {

            // gbb.$(".gbbPageBody").append(gbb.$("<div>").addClass("gbbEmptyDivWithMaxHeight"));

            //loaderState = "show" => show loader
            //loaderState = "hide" => hide loader
            //loaderState = (empty params) => toggle loader with a timeout 700ms.
            //check switch case for more render details
            if (!loaderState) {
                loaderState = "autoToggle"
            }

            let defaultLoadingGif = "https://gift-box-builder-app4.s3.us-east-2.amazonaws.com/storefront/loading-gif.gif";

            // "https://c.tenor.com/n4w0VzWFbtgAAAAC/loading.gif"

            let loadingGif = gbb.settings.merchantInfo?.customSettings?.loadingGif || "";

            if (loadingGif) {
                defaultLoadingGif = loadingGif;
            }

            let loadingScreenDiv = gbb.$("<div>").addClass("gbbLoadingScreen").css("background", gbb?.settings?.app?.loadingBgColor);
            // let loadingScreenDiv =  gbb.$("<img>").addClass("gbbLoadingScreenSpinner").attr("src",defaultLoadingGif );
            // let loadingScreenSpinner = gbb.$("<div>").addClass("gbbLoadingScreenSpinner");

            // let loadingSpinnerGIF = gbb.$("<img>").attr("src", gbb.utility.getAssetUrl("loading.gif"));
            let loadingSpinnerGIF = gbb.$("<img>").addClass("gbbLoadingSpinnerGIF").attr("src", defaultLoadingGif);




            // loadingScreenDiv.append(loadingScreenSpinner);
            loadingScreenDiv.append(loadingSpinnerGIF);
            // loadingScreenDiv.append(loadingSkeleon);
            switch (loaderState) {
                case "show":
                    if (gbb.$(".gbbLoadingScreen").length < 1) {
                        gbb.$(".gbbPageBody").append(loadingScreenDiv);
                        gbb.$("body").addClass("gbbHideScrollBar");
                    }
                    break;
                case "hide":
                    if (gbb.$(".gbbLoadingScreen").length > 0) {
                        setTimeout(function () {
                            gbb.$(".gbbLoadingScreen").remove();
                            gbb.$("body").removeClass("gbbHideScrollBar");
                        }, 500)


                    }
                    break;
                case "autoToggle":
                    if (gbb.$(".gbbLoadingScreen").length > 0) {
                        return
                    }
                    else {
                        gbb.$(".gbbPageBody").append(loadingScreenDiv);
                    }
                    setTimeout(function () {
                        gbb.$(".gbbLoadingScreen").remove();
                    }, 700)
                    break;
                    return;
            }
        },
        getProductsBulk: async function (listOfHandles) {
            try {
                // fire an api call for each product and store it corresponding to its handle/title
                let promises = []
                for (let i = 0; i < listOfHandles.length; i++) {
                    promises.push(gbb.utility.getProductDataV2(listOfHandles[i]))
                }
                let data = await Promise.all(promises)
                //return the data but in for of array of object which title as key

                let result = {}
                for (let i = 0; i < data.length; i++) {
                    result[data[i].handle] = data[i]
                }
                return result;
            } catch (error) {
                gbb.utility.debugError("gbb-utility-getProductsBulk");
                gbb.utility.debugError(error);
                return false
            }
        },
        getProductsBulkForRelevantVariants: async function (listOfHandles, productsData, options) {
            try {
                // fire an api call for each product and store it corresponding to its handle/title



                let promises = [], idsOfVariants = [];
                for (let i = 0; i < productsData.length; i++) {
                    idsOfVariants?.push(productsData[i]?.variants?.map(variant => variant.variantId))
                }

                idsOfVariants = idsOfVariants?.flat()

                let data;

                if (gbb.settings.app.enableStoreFrontGQLAPI) {
                    data = await gbb.graphQlUtility.getProductsDataByIds(options.listOfProductIds)
                    // promises.push(await gbb.graphQlUtility.getProductsDataByIds(options.listOfProductIds))
                } else {

                    for (let i = 0; i < listOfHandles.length; i++) {

                        // TODO: SF API Check
                        // if(storeFrontapi token pres)
                        // 
                        // {
                        // if ( false && options && options.listOfProductIds){

                        promises.push(gbb.utility.getProductDataV2(listOfHandles[i]))


                        // }

                    }
                    data = await Promise.all(promises)
                }


                //remove the data element which are false
                data = data.filter(element => element)

                //return the data but in for of array of object which title as key
                let result = {}
                for (let i = 0; i < data.length; i++) {
                    //getproductdata based on data[i].id
                    let productdata = productsData.find((item) => item.productId == data[i].id)
                    data[i] = gbb.utility.getProductData_AfterRemovingUnavailableVariantsAndOptions(data[i]);

                    let hasTheUserSelectedOnlyOneVariant = productdata?.variants?.length == 1 ? true : false;
                    if (hasTheUserSelectedOnlyOneVariant) {
                        data[i].renderChooseOptionsButton_forcefully = false;
                    }




                    if (productdata && productdata.variants) {
                        let variants = data[i].variants?.filter(variant => idsOfVariants.includes(String(variant.id)));
                        data[i].variants = variants;


                        if (data[i].variants.length < 1) {
                            continue;
                        }

                        data[i].price = data[i].variants[0]?.price || data[i].price
                        data[i].compare_at_price = data[i].variants[0]?.compare_at_price || data[i].compare_at_price



                        if (gbb.settings.bundleSettings.removeUnUsedVariantImages) {
                            data[i] = gbb.utility.removeUnUsedVariantImages(data[i])
                        }

                        result[data[i].handle] = {
                            ...data[i],
                            variants,
                            requiredQuantity: productdata?.requiredQuantity ? productdata?.requiredQuantity : null //used in case of default products only
                        };
                    } else {
                        let variants = data[i].variants
                        data[i].variants = variants;
                        if (gbb.settings.bundleSettings.removeUnUsedVariantImages) {
                            data[i] = gbb.utility.removeUnUsedVariantImages(data[i])
                        }


                        result[data[i].handle] = {
                            ...data[i],
                            variants,
                            requiredQuantity: productdata?.requiredQuantity ? productdata?.requiredQuantity : null
                        }

                    }

                }
                return result;
            } catch (error) {
                gbb.utility.debugError("gbb-utility-getProductsBulkForRelevantVariants");
                gbb.utility.debugError(error);
                return false
            }
        },
        getProductsFromCollections: function (data) {
            try {
                let resObj = []
                for (let i = 0; i < data.length; i++) {
                    let collection = data[i]
                    if (collection && collection.productList.length > 0) {
                        resObj.push(...collection.productList)
                    }

                }
                return resObj
            } catch (error) {
                gbb.utility.debugError("gbb-utility-getProductsFromCollections");
                gbb.utility.debugError(error);
                return false
            }
        },
        removeFromCartBulk: async function (variantIdList, noteAttribute) {
            try {

                // run a for loop to create promises to remove
                // items from the cart in bulk
                for (let i = 0; i < variantIdList.length; i++) {
                    let variant = { id: variantIdList[i] }
                    await gbb.utility.removeFromCart({ variant }, noteAttribute);
                }
                // wait for all promises to resolve
                return true;
            }
            catch (error) {
                gbb.utility.debugError("gbb-utility-removeFromCartBulk");
                gbb.utility.debugError(error);
                return false
            }
        },
        addToCartV2: function (data) {
            try {
                return new Promise((res, rej) => {
                    gbb.$.post('/cart/add.js', data)
                        .done(function () { gbb.utility.debugConsole("success-/cart/add.js': "); res(true) })
                        .fail(function () { gbb.utility.debugConsole("fail-/cart/add.js"); res(false) })
                })
                return result;
            } catch (error) {
                gbb.utility.debugError("gbb-utility-addToCartV2");
                gbb.utility.debugError(error);
                return false
            }
        },
        clearCart: function (data) {
            try {
                return new Promise((res, rej) => {
                    gbb.$.post('/cart/clear.js', data)
                        .done(function () { gbb.utility.debugConsole("success-/cart/clear.js': "); res(true) })
                        .fail(function () { gbb.utility.debugConsole("fail-/cart/clear.js"); res(false) })
                })
                return result;
            } catch (error) {
                gbb.utility.debugError("gbb-utility-clearCart");
                gbb.utility.debugError(error);
                return false
            }
        },
        getCart: async function (data) {
            try {
                const subscriptionPlanExists = gbb.gbbReviewPage.f.checkIfSubscriptionPlanExists();
                if (subscriptionPlanExists && gbb.gbbBrowser?.getSubscriptionType() == "saveSubscription") {
                    return gbb.gbbBrowser.getCartDataForSubscription();
                }
                return gbb.gbbBrowser.getCartDataFromSessionStorage();
                let result = await gbb.$.ajax({
                    type: "GET",
                    url: "/cart.js",
                    dataType: "json",
                });
                return result
            } catch (error) {
                gbb.utility.debugError("gbb-utility-getCart");
                gbb.utility.debugError(error);
                return false
            }
        },

        getGiftBoxProductsFromCart: async function (data) {
            try {
                let data = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage(gbb.state.activeBoxId); //change it to -> getRelevantBoxDataFromSessionStorage
                gbb.state.giftBoxCartData = data
                gbb.gbbDiscountComponent.f.updateCurrentDiscountRule();
                return data

            } catch (error) {
                gbb.utility.debugError("gbb-utility-getCart");
                gbb.utility.debugError(error);
                return false
            }
        },
        getGiftBoxProductsTotalWithCurrency: function (data) {
            try {
                //getGiftBoxProductsFromCart
                // gbb.state.giftBoxCartData = await gbb.utility.getGiftBoxProductsFromCart()
                data = gbb.state.giftBoxCartData
                // if(data.currency){
                // return gbb.utility.getCurrencySymbol() + "" + parseFloat(data.total_price / 100).toFixed(2)
                return gbb.utility.formatPrice(data.total_price)
                // }else{
                // if(Shopify && Shopify.currency && Shopify.currency.active){
                //     return "0.0"+ " " +Shopify.currency.active
                // }else{
                //     return "0.0"
                // }

                // }
            } catch (error) {
                gbb.utility.debugError("gbb-utility-getCart");
                gbb.utility.debugError(error);
                return "0.0"
            }
        },
        getGiftBoxProductsDiscountedTotal: function (boxId) {
            try {
                if (!boxId) {
                    boxId = gbb.state.activeBoxId || "box1";
                }
                let allDiscountsData = gbb.utility.calculateCartDiscount();
                let currentBoxDiscountData = allDiscountsData?.discountsPerBox[boxId];

                if (!currentBoxDiscountData) {
                    return "0.0";
                }

                let discountedTotal = currentBoxDiscountData.boxTotalAmount + currentBoxDiscountData.blackListedItemsTotalPrice || 0;
                discountedTotal = discountedTotal / currentBoxDiscountData.boxQuantity;
                //    let discountedTotal =
                //    return parseInt(discountedTotal / 100);
                //@ashfaq
                return parseFloat(discountedTotal / 100);
            } catch (error) {
                gbb.utility.debugError("gbb-utility-getCart");
                gbb.utility.debugError(error);
                return "0.0"
            }
        },
        getGiftBoxProductsTotalWithCurrency_multipliedByBundleQuantity: function (data) {
            try {
                data = gbb.gbbBrowser.getCartDataFromSessionStorage()
                // data.bundleQuantity = data.bundleQuantity || 1
                return gbb.utility.getCurrencySymbol() + "" + parseFloat(data.total_price * data.bundleQuantity / 100).toFixed(2)
            } catch (error) {
                gbb.utility.debugError("gbb-utility-getCart");
                gbb.utility.debugError(error);
                return "0.0"
            }
        },
        convertArrayToObject: function (array, key) {
            try {
                let obj = {};
                for (let i = 0; i < array.length; i++) {
                    obj[array[i][key]] = array[i];
                }
                return obj;
            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        convertArrayToObjectWithArrays: function (array, key) {
            try {
                let obj = {};
                for (let i = 0; i < array.length; i++) {
                    if (!obj[array[i][key]]) {
                        obj[array[i][key]] = [];
                    }
                    obj[array[i][key]].push(array[i]);
                }
                return obj;
            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        getCartTotalQuantity: async function () {
            try {
                let total = 0
                let cartData = await gbb.$.ajax({
                    type: "GET",
                    url: "/cart.js",
                    dataType: "json",
                });
                for (var item of cartData['items']) {
                    total += item["quantity"]
                }
                return total
            } catch (error) {
                gbb.utility.debugError("gbb-utility-getCart");
                gbb.utility.debugError(error);
                return false
            }
        },
        getProductQuantityFromCart: async function ({ variant, parent }) {
            let item = gbb.utility.checkIfItemPresentInGiftBoxCart(variant.id);
            if (!item) {
                return gbb.gbbAddProductsPage.state.incrementProductQtyBy;
            } else {
                return item.quantity;
            }
        },
        checkIfItemPresentInCart: function (searchedVariantId) {
            if (gbb.state.cartData && gbb.state.cartData.items && gbb.state.cartData.items.length && gbb.state.cartData.items.length > 0) {
                for (let i = 0; i < gbb.state.cartData.items.length; i++) {
                    let item = gbb.state.cartData.items[i]
                    if (item && item.variant_id && item.variant_id == searchedVariantId) {
                        return item
                    }
                }
                return false
            } else {
                return false
            }
        },
        checkIfItemPresentInGiftBoxCart: function (searchedVariantId, options) {

            const boxProductValuesInPersonalizationPage = ["giftWrap", "giftMessage", "greetingCard","addonProduct"];

            let uniqueItemKey
            if (options) {
                uniqueItemKey = options.uniqueItemKey
            }

            if (gbb.state.giftBoxCartData && gbb.state.giftBoxCartData.items && gbb.state.giftBoxCartData.items.length && gbb.state.giftBoxCartData.items.length > 0) {

                if (uniqueItemKey) {
                    for (let i = 0; i < gbb.state.giftBoxCartData.items.length; i++) {
                        let item = gbb.state.giftBoxCartData.items[i]
                        if (item && item.properties && item.properties["_uniqueGbbItemKey"] && item.properties["_uniqueGbbItemKey"] == uniqueItemKey) {
                            return item
                        }
                    }

                }

                for (let i = 0; i < gbb.state.giftBoxCartData.items.length; i++) {
                    let item = gbb.state.giftBoxCartData.items[i]
                    let findingByVariantId = item && item.variant_id && item.variant_id == searchedVariantId;
                    let findingByLineItemKey = item && item.key && item.key.includes(searchedVariantId);
                    let isProductAddedFromThisPage = item.properties["_boxProduct"] == gbb.state.currentPageId;

                    let isProductFromThisCategory;
                    if (item.properties["_Category"]) {
                        // isProductFromThisCategory
                        isProductFromThisCategory = item.properties["_Category"] == gbb.gbbMultipleCategoriesPage.state.currentCategoryId;
                        if (isProductFromThisCategory) {
                            isProductAddedFromThisPage = true;
                        } else {
                            isProductAddedFromThisPage = false
                        }
                    }

                    // if boxProduct is giftWrap/giftmessage and "greetingCard" then check if gbb.state.currentPageId personalizationPage

                    if (gbb.state.currentPageId == "personalizationPage") {
                        // Check if the _boxProduct is one of the boxProductValuesInPersonalizationPage
                        if (boxProductValuesInPersonalizationPage.includes(item.properties["_boxProduct"])) {
                            isProductAddedFromThisPage = true;
                        }
                    }


                    if (isProductAddedFromThisPage) {
                        if (findingByVariantId || findingByLineItemKey) {
                            return item
                        }
                    }
                }
                return false
            } else {
                return false
            }
        },
        getUniqueIdForVariant: function ({ productData, variantId, attributes }) {
            try {

                let uniqueId
                if (!variantId) {
                    variantId = String(productData.variant_id);
                }

                uniqueId = variantId;


                if (attributes && Object.keys(attributes)) {
                    // uniqueId = concat attributes._Category
                    attributes.pageId = attributes[variantId];
                    if (attributes.pageId) {
                        uniqueId = uniqueId + "_" + "pageId:" + attributes.pageId;
                    }

                    if (attributes.category) {
                        uniqueId = uniqueId + "_" + "categoryId:" + attributes.category;
                    }

                } else if (productData && productData.properties) {
                    if (productData.properties["_boxProduct"]) {
                        uniqueId = uniqueId + "_" + "pageId:" + productData.properties["_boxProduct"];
                    }

                    if (productData.properties["_Category"]) {
                        uniqueId = uniqueId + "_" + "categoryId:" + productData.properties["_Category"];
                    }
                } else {
                    if (gbb.state.currentPageId) {
                        uniqueId = uniqueId + "_" + "pageId:" + gbb.state.currentPageId;
                    }

                    if (gbb.gbbMultipleCategoriesPage.state.currentCategoryId) {
                        uniqueId = uniqueId + "_" + "categoryId:" + gbb.gbbMultipleCategoriesPage.state.currentCategoryId;
                    }
                }

                return uniqueId;

                // _properties["_uniqueGbbItemKey"] + "_" + data?.attributes.category;

            } catch (e) {
                gbb.utility.debugConsole(e);
            }
        },
        checkIfProductPresentInCart: function (searchedProductId) {
            if (gbb.state.cartData && gbb.state.cartData.items && gbb.state.cartData.items.length && gbb.state.cartData.items.length > 0) {
                for (let i = 0; i < gbb.state.cartData.items.length; i++) {
                    // gbb.utility.debugConsole("cjeckIfProductPresentInCart: ", gbb.state.cartData.items[i])
                    let item = gbb.state.cartData.items[i]
                    if (item && item.id && item.id == searchedProductId) {
                        return item
                    }
                }

                return false
            } else {
                return false
            }
        },
        checkIfGiftOptionsInCart: async function () {
            let isGiftWrapPresent = false, isGreetingPresent = false, isGiftNotePresent = false, iseDeliveryPresent = false, isGiftAddonPresent = false


            let giftWrapVariants = [], greetingCardVariants = [], giftAddonVariants = []
            if (gbb.settings && gbb.settings.giftwrap && gbb.settings.giftwrap.isGiftWrapEnabled && gbb.settings.giftwrap.productVariants) {
                gbb.settings.giftwrap.productVariants?.forEach(item => giftWrapVariants.push(item.id))
            }

            if (gbb.settings && gbb.settings.greetingCard && gbb.settings.greetingCard.isGreetingCardEnabled && gbb.settings.greetingCard.productVariants) {
                gbb.settings.greetingCard.productVariants.forEach(item => greetingCardVariants.push(item.id))
            }

            if (gbb.settings && gbb.settings.giftAddons && gbb.settings.giftAddons.isGiftAddonsEnabled && gbb.settings.giftAddons.addOnProducts && gbb.settings.giftAddons.addOnProducts.length && gbb.settings.giftAddons.addOnProducts.length > 0) {
                for (let i = 0; i < gbb.settings.giftAddons.addOnProducts.length; i++) {
                    let addOnProduct = gbb.settings.giftAddons.addOnProducts[i]
                    addOnProduct.variants?.forEach(item => giftAddonVariants.push(parseInt(item.variantId)))
                }
            }

            if (gbb.state.cartData && gbb.state.cartData.attributes) {
                if (gbb.state.cartData.attributes.gbbGiftMessage) {
                    return true
                }

                if (gbb.state.cartData.attributes.gbbScheduleDelivery) {
                    return true
                }
            }

            if (gbb.state.cartData && gbb.state.cartData.items && gbb.state.cartData.items.length && gbb.state.cartData.items.length > 0) {
                for (let i = 0; i < gbb.state.cartData.items.length; i++) {
                    let item = gbb.state.cartData.items[i]
                    if (item && item.variant_id && item.variant_id) {

                        if (giftWrapVariants.includes(item.variant_id)) {
                            isGiftWrapPresent = true
                        }
                        if (greetingCardVariants.includes(item.variant_id)) {
                            isGreetingPresent = true
                        }
                        if (giftAddonVariants.includes(item.variant_id)) {
                            isGiftAddonPresent = true
                        }
                    }
                }

                if (isGiftWrapPresent || isGreetingPresent || isGiftNotePresent || iseDeliveryPresent || isGiftAddonPresent) {
                    return true
                } else {
                    return false
                }

            } else {
                return false
            }



        },
        convertObjectToArray: function (obj) {
            let arr = []
            for (let key in obj) {
                arr.push(obj[key])
            }
            return arr
        },
        getNoteFromCart: function () {

            if (gbb && gbb.state && gbb.state.giftBoxCartData) {
                // return
                const messageProduct = gbb.state.giftBoxCartData.items.find(item => item.id == gbb.settings.shopifyData?.giftMessageData?.variants[0]?.id);
                if (messageProduct) {
                    return messageProduct.properties["Message"]
                }
            }

        },
        getAttributValueFromMessageItem: function (attributeName) {
            if (gbb && gbb.state && gbb.state.giftBoxCartData && gbb.settings.shopifyData?.giftMessageData && gbb.settings.shopifyData?.giftMessageData?.variants && gbb.settings.shopifyData?.giftMessageData?.variants[0]?.id) {
                // return
                const messageProduct = gbb.state.giftBoxCartData.items.find(item => item.id == gbb.settings.shopifyData?.giftMessageData?.variants[0]?.id);
                if (messageProduct) {
                    return messageProduct.properties[attributeName]
                }
            } else {
                return null
            }
        },
        isCartTotalMoreThan: async function (value) {
            gbb.state.cartData = await gbb.utility.getCart()

            if (gbb.state.cartData && gbb.state.cartData.total_price && ((gbb.state.cartData.total_price) / 100 >= parseFloat(value))) {
                gbb.utility.debugConsole("isCartTotalMoreThan: ", gbb.state.cartData.total_price)
                return true
            } else {
                return false
            }
        },
        isCartEmpty: function () {
            if (gbb.state.cartData && gbb.state.cartData.items.length <= 0) {
                return true;

            } else {
                return false
            }
        },
        setMapForVariantId: function (productsObj, extraInfo) {
            try {
                let data = gbb.utility.productDetailsWith_VariantId_Or_ProductIdAsKey(productsObj, extraInfo)
                gbb.state.currentProductsDataSetForVariants = { ...gbb.state.currentProductsDataSetForVariants, ...data };
            }
            catch (e) {
                gbb.utility.debugError("setMapForVariantId", e)
            }

        },

        cloneAddToCartBtn: function () {
        },
        overWriteBuyNowBtn: function () {

            let buyNowBtnEle = gbb.$(document).find(gbb.selectors.buyNowBtn)

            if (buyNowBtnEle && buyNowBtnEle.length > 0 && gbb.$(document).find(".gbb-overwrite-buy-now-btn").length == 0) {
                buyNowBtnEle.show()
                buyNowBtnEle.unbind().unbind("click").off().off("click");
                newBuyNowBtnEle = buyNowBtnEle.clone()
                buyNowBtnEle.after(newBuyNowBtnEle)
                buyNowBtnEle.hide()
                newBuyNowBtnEle.addClass("gbb-overwrite-buy-now-btn")


                newBuyNowBtnEle.on("click", function (event) {
                    event.preventDefault();
                    event.stopPropagation();
                    gbb.$(this).attr("disabled", true);
                    newBuyNowBtnEle.text("loading checkout...");
                    setTimeout(() => { gbb.$(this).attr("disabled", false) }, 3000)
                    addToCartBtnEle = gbb.$(document).find(gbb.selectors.addToCart)
                    sideCartEle = gbb.$(document).find(gbb.selectors.sideCartSelectors)

                    // gbb.$(document).find("body").addClass("loadingCheckoutPage")
                    // gbb.$(document).find("body").text("loading checkout...")

                    if (sideCartEle && sideCartEle.length > 0) {
                        sideCartEle.css("display", "none")
                    }

                    if (addToCartBtnEle && addToCartBtnEle.length > 0) {
                        addToCartBtnEle.trigger("click")
                    }
                    setTimeout(() => {
                        window.location.href = window.location.origin + "/cart/checkout"
                    }, 1000)

                })

            }
        },
        overWriteCheckoutBtn: function () {

            let checkoutBtnEle = gbb.$(document).find(gbb.selectors.checkoutBtnEle)
            if (checkoutBtnEle && checkoutBtnEle.length > 0 && gbb.$(document).find(".gbb-overwrite-checkout-btn").length == 0) {
                checkoutBtnEle.show()
                checkoutBtnEle.unbind().unbind("click").off().off("click");
                let newcheckoutBtnEle = checkoutBtnEle.clone()
                checkoutBtnEle.after(newcheckoutBtnEle)
                checkoutBtnEle.hide()
                newcheckoutBtnEle.addClass("gbb-overwrite-buy-now-btn")


                newcheckoutBtnEle.on("click", function (event) {
                    event.preventDefault();
                    event.stopPropagation();
                    gbb.$(this).attr("disabled", true);
                    newcheckoutBtnEle.text("loading checkout...");
                    setTimeout(() => { gbb.$(this).attr("disabled", false) }, 3000)
                    addToCartBtnEle = gbb.$(document).find(gbb.selectors.addToCart)
                    sideCartEle = gbb.$(document).find(gbb.selectors.sideCartSelectors)

                    // gbb.$(document).find("body").addClass("loadingCheckoutPage")
                    // gbb.$(document).find("body").text("loading checkout...")

                    if (sideCartEle && sideCartEle.length > 0) {
                        sideCartEle.css("display", "none")
                    }

                    if (addToCartBtnEle && addToCartBtnEle.length > 0) {
                        addToCartBtnEle.trigger("click")
                    }
                    setTimeout(() => {
                        let properties = gbbExt.state.cartData.properties;
                        window.location.href = window.location.origin + "/cart/checkout"
                    }, 1000)

                })

            }
        },
        emailValidation: function (emailString) {
            var atSymbol = emailString.indexOf("@");
            if (atSymbol < 1) return false;

            var dot = emailString.lastIndexOf(".");
            if (dot <= atSymbol + 2) return false;

            // check that the dot is not at the end
            if (dot === emailString.length - 1) return false;

            return true;
        },
        renderLanguageValue: function (parent) {
            if (parent) {
                return parent.value;
            }
            return;
        },
        slider: {
            state: {
                slideIndex: 1,
            },
            plusSlides: function (selector, n) {
                this.showSlides(selector, this.state.slideIndex += n);
            },
            //minusSlides
            minusSlides: function (selector, n) {
                this.showSlides(selector, this.state.slideIndex -= n);
            },
            showSlides: function (selector, n) {
                var i;
                var slides = selector.find(".gbbProductImageContainerImg"); //takes the entire container so has refernce to all the images inside that container
                if (slides && slides.length) {
                    //     slides = JSON.parse(slides);
                    // }


                    if (n > slides.length) { this.state.slideIndex = 1 }
                    if (n < 1) { this.state.slideIndex = slides.length }
                    for (i = 0; i < slides.length; i++) {
                        slides[i].style.display = "none";
                    }
                    slides[this.state.slideIndex - 1].style.display = "block";
                    //   plusSlides(1)
                }
                // setTimeout(function () { plusSlides(n + 1) }, 2000);
            },
        },
        getAllFilterTagsForProducts: (products, noteAttribute) => {
            let filterTags = []

            products.forEach((element) => {
                let productTags = element.tags ? element.tags : []
                productTags.forEach((tag) => {
                    if (!filterTags.includes(tag)) {
                        filterTags.push(tag);
                    }
                })
            })
            return filterTags;
        },
        getFiltersInAndCondition: ({ allFiltersValue, productTagsSet, product }) => {
            let isAndProductAdded = false;
            let productCollectionNames = product.collectionNames ? product.collectionNames : [];
            for (let i = 0; i < allFiltersValue.length; i++) {
                let filterValue = allFiltersValue[i];
                if (productTagsSet.has(filterValue) || productCollectionNames.includes(filterValue)) {
                    isAndProductAdded = true;
                } else {
                    isAndProductAdded = false;
                    break;
                }
            }
            return isAndProductAdded;
        },

        getFiltersInOrCondition: ({ filters, product, productTagsSet, productTagsString }) => {
            let isProductAdded = false;
            for (let i = 0; i < filters.length; i++) {
                let filter = filters[i];
                for (let j = 0; j < filter.rules.length; j++) {
                    let rule = filter.rules[j];
                    let isThisFilterForCollections = rule.type == "collectionTag" ? true : false;
                    if (isThisFilterForCollections) {
                        if (rule.operatorType == "isEqualTo" || rule.operatorType == "contains") {
                            let selectedCollectionName = rule.tagValue;
                            if (product.collectionNames && product.collectionNames.includes(selectedCollectionName)) {
                                isProductAdded = true;
                                break;
                            }
                        }
                    } else {
                        if (rule.operatorType == "isEqualTo") {
                            if (productTagsSet.has(rule.tagValue)) {
                                isProductAdded = true;
                                break;
                            }
                        } else if (rule.operatorType == "contains") {
                            if (productTagsString.includes(rule.tagValue)) {
                                isProductAdded = true;
                                break;
                            }
                        }
                    }
                }
                if (isProductAdded) {
                    break;
                }
            }
            return isProductAdded;
        },
        getFilteredSortedProductsData: async (noteAttribute, origin) => {
            let products = gbb.utility.getSortedProducts(noteAttribute);
            gbb.state.setInfiniteScrollTrackerForProducts = true;
            let filters = gbb.utility.getActivatedFilters(noteAttribute);
            let filteredProducts = [];
            let minValue = gbb.utility.getPriceFilterValues(noteAttribute).minValue;
            let maxValue = gbb.utility.getPriceFilterValues(noteAttribute).maxValue;
            let filtersInfo = gbb.utility.getFiltersInfo(noteAttribute);


            let filterBasedOnFilterIdOperator = filtersInfo?.filterRuleAcrossCategory;
            let result = [];
            let allFiltersValue = [];
            let totalProducts = [];
            // let uniqueFilterIds = [];
            let filterIdsMap = {};
            filters.forEach((filter) => {

                if (filterIdsMap[filter.filterId]) {
                    filterIdsMap[filter.filterId].push(filter);
                } else {
                    filterIdsMap[filter.filterId] = [filter];
                }


                filter.rules.forEach((rule) => {
                    if (true || rule.type === "productTag") {
                        allFiltersValue.push(rule.tagValue);
                    }
                });

            });
            let filterIdsKeys = Object.keys(filterIdsMap);
            let allEligibleFilters = [];
            let productsToBeFutherFiltered = null;
            filterIdsKeys.forEach((filterIdKey) => {
                productsToBeFutherFiltered = productsToBeFutherFiltered ? productsToBeFutherFiltered : products;
                let filters = filterIdsMap[filterIdKey];
                if (filterBasedOnFilterIdOperator == "OR") {
                    // if (filters.length > 0) {
                    //     allEligibleFilters.push(...filters)
                    // }
                    totalProducts = [...totalProducts, ...calculateProductsToBeFiltered({ allEligibleFilters: filters })];
                    // allEligibleFilters = [...allEligibleFilters,...filters]   
                } else if (filterBasedOnFilterIdOperator == "AND") {
                    allEligibleFilters = [...filters]
                    // when it is and, then we will have to call the calculateProductsToBeFiltered function with the same existing products again and again
                    // so we will have to store the products in a variable and then pass it to the function
                    // productsToBeFutherFiltered
                    productsToBeFutherFiltered = calculateProductsToBeFiltered({ allEligibleFilters, productsToBeFutherFiltered });
                }
            });

            if (filterBasedOnFilterIdOperator == "OR") {
                totalProducts = [...new Set(totalProducts)];
            } else {
                // totalProducts = [...calculateProductsToBeFiltered(allEligibleFilters)];
                // productsToBeFutherFiltered is not iteratable error

                totalProducts = productsToBeFutherFiltered?.length > 0 ? [...productsToBeFutherFiltered] : []
            }

            function calculateProductsToBeFiltered(options) {
                filteredProducts = [];


                if (filtersInfo?.filterRuleAcrossCategory == "OR") {
                    allFiltersValue = [];
                    let filterArr = options.allEligibleFilters;
                    filterArr.forEach((filter) =>
                        filter.rules.forEach((rule) => {
                            if (true || rule.type === "productTag") {
                                allFiltersValue.push(rule.tagValue);
                            }
                        })
                    );
                }

                if (filtersInfo?.filterRuleAcrossCategory == "AND") {
                    let filterArr = options.allEligibleFilters;
                    let productsToBeFutherFiltered = options.productsToBeFutherFiltered;
                    products = productsToBeFutherFiltered;
                    filters = filterArr;
                }



                if (filters.length == 0) {
                    filteredProducts = gbb.utility.getSortedProducts(noteAttribute);
                } else {
                    products.forEach((product) => {
                        let productTags = product.tags;
                        let productTagsSet = new Set(productTags);
                        let productTagsString = productTags.toString();
                        let filterConditionRule = filtersInfo?.filterRule ? filtersInfo.filterRule : "OR";

                        switch (filterConditionRule) {
                            case "AND":
                                let isProductToBeAddedForAnd = false;
                                isProductToBeAddedForAnd = gbb.utility.getFiltersInAndCondition({ allFiltersValue, productTagsSet, product });
                                if (isProductToBeAddedForAnd) {
                                    filteredProducts.push(product);
                                }
                                break;
                            case "OR":
                                let isProductToBeAdded = false;
                                isProductToBeAdded = gbb.utility.getFiltersInOrCondition({ filters, product, productTagsSet, productTagsString });
                                if (isProductToBeAdded) {
                                    filteredProducts.push(product);
                                }
                                break;

                            default:
                                break;
                        }
                    });
                }

                if (minValue && maxValue) {
                    filteredProducts.forEach((product) => {
                        let productPrice = gbb.utility.formatPriceWithoutSymbol(product.price);
                        productPrice = parseFloat(productPrice);
                        if (productPrice >= minValue && productPrice <= maxValue) {
                            result.push(product);
                        }
                    });
                    filteredProducts = result;
                }
                return filteredProducts;
            };

            if (filters.length == 0) {
                totalProducts = gbb.utility.getSortedProducts(noteAttribute);
            }

            // gbb.gbbAddProductsPage.f.renderProductsCardContainer(filteredProducts, noteAttribute);
            if (!origin || origin != 'searchProductsFlow') {
                let activeCategoryId = gbb.gbbMultipleCategoriesPage.state.currentCategoryId;
                await gbb.gbbAddProductsPage.f.renderProductsCardContainer(totalProducts, noteAttribute, "filtersFlow", activeCategoryId);
            }
            // return filteredProducts;
            return totalProducts;
        },

        OldgetFilteredSortedProductsData: (noteAttribute) => {
            let products = gbb.utility.getSortedProducts(noteAttribute);
            let filters = gbb.utility.getActivatedFilters(noteAttribute);
            let filteredProducts = [];
            let minValue = gbb.utility.getPriceFilterValues(noteAttribute).minValue;
            let maxValue = gbb.utility.getPriceFilterValues(noteAttribute).maxValue;
            let result = [];
            let allFiltersValue = [];
            filters.forEach((filter) => {
                filter.rules.forEach((rule) => {
                    if (true || rule.type === "productTag") {
                        allFiltersValue.push(rule.tagValue);
                    }
                });
            });
            if (filters.length == 0) {
                filteredProducts = products;
            } else {
                products.forEach((product) => {
                    let productTags = product.tags;
                    let productTagsSet = new Set(productTags);
                    let productTagsString = productTags.toString();


                    // now check that product.tags[] contains all the values in allFiltersValue
                    let isAndProductAdded = false;
                    for (let i = 0; i < allFiltersValue.length; i++) {
                        let filterValue = allFiltersValue[i];
                        if (productTagsSet.has(filterValue)) {
                            isAndProductAdded = true;
                        } else {
                            isAndProductAdded = false;
                            break;
                        }
                    }

                    if (isAndProductAdded) {
                        filteredProducts.push(product);
                    }

                    //below part in another function

                    for (i = 0; i < filters.length; i++) {
                        let filter = filters[i];
                        filter
                        let isProductAdded = false;
                        for (let j = 0; j < filter.rules.length; j++) {
                            let rule = filter.rules[j];
                            let isThisFilterForCollections = rule.type == "collectionTag" ? true : false;
                            if (isThisFilterForCollections) {
                                if (rule.operatorType == "isEqualTo" || rule.operatorType == "contains") {
                                    // if product.collectionName == rule.tagValue
                                    let selectedCollectionName = rule.tagValue;
                                    if (product.collectionNames && product.collectionNames.includes(selectedCollectionName)) {
                                        filteredProducts.push(product);
                                        isProductAdded = true;
                                        break;
                                    }
                                    // if(product.collectionIds && product.collectionIds.includes(rule.tagValue)){
                                    //     filteredProducts.push(product);
                                    //     isProductAdded = true;
                                    //     break;
                                    // }
                                }
                            } else if (!isThisFilterForCollections) {
                                if (rule.operatorType == "isEqualTo") {
                                    if (productTagsSet.has(rule.tagValue)) {
                                        filteredProducts.push(product);
                                        isProductAdded = true;
                                        break;
                                    }
                                } else if (rule.operatorType == "contains") {
                                    if (productTagsString.includes(rule.tagValue)) {
                                        filteredProducts.push(product);
                                        isProductAdded = true;
                                        break;
                                    }
                                }
                            }
                        }
                        if (isProductAdded) {
                            break;
                        }

                    }
                })
            }
            if (minValue && maxValue) {
                filteredProducts?.forEach((product) => {
                    let productPrice = gbb.utility.formatPriceWithoutSymbol(product.price)
                    productPrice = parseFloat(productPrice);
                    if (productPrice >= minValue && productPrice <= maxValue) {
                        result.push(product);
                    }
                })
                filteredProducts = result;
            }
            //let filterAndSortedData = apply filter on sorteduniqueProductsData
            //RenderProductCartcontainer(filterAndSortedData)
            gbb.gbbAddProductsPage.f.renderProductsCardContainer(filteredProducts, noteAttribute)
            return filteredProducts;
        },
        clearAllFilters: (noteAttribute) => {
            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            if (addProductsPageArr.includes(noteAttribute)) {
                gbb.state.addProductsFilters.isFiltersActive = false;
                gbb.state.addProductsFilters.activatedFilters = [];
            }
        },

        checkIfSelectedVariantCombinationIsAvailable: function (product, selectedVariantsCombination) {
            try{

            
            let availableVariant = [];
            let productVariants = product?.variants;

            // Helper function to check if all selected variants are in options
            function allSelectedVariantsAreInOptions(selectedVariants, options) {
                return selectedVariants.every(value => options.includes(value));
            }

            // Helper function to check if there are no extra options outside the selected variants
            function noExtraOptionsInVariantOptions(selectedVariants, options) {
                return options.every(option => selectedVariants.includes(option));
            }

            // Extract the selected values from the combination object
            const selectedValues = Object.values(selectedVariantsCombination);

            for (let index = 0; index < productVariants.length; index++) {
                let variantOptions = productVariants[index]['options'] ? productVariants[index]['options'] : [];

                // Check if both conditions are met
                let isAllselectedVariantsAreInOptions = allSelectedVariantsAreInOptions(selectedValues, variantOptions)
                let isNoExtraOptionsInVariantOptions = noExtraOptionsInVariantOptions(selectedValues, variantOptions); 
                if (selectedValues?.length <=0) { // for the first 
                    isNoExtraOptionsInVariantOptions = true
                }
                const isVariantPresent = 
                    isAllselectedVariantsAreInOptions &&
                    isNoExtraOptionsInVariantOptions

                if (isVariantPresent && productVariants[index]['available'] == true) {
                    availableVariant.push(productVariants[index]);
                    break;
                }
            }
            return availableVariant;
            }catch(e){
                gbb.utility.debugConsole("error in e",e)
            }
        },
        checkIfSelectedVariantCombinationIsAvailableV2: function (product, selectedVariantsCombination) {
            let isVariantPresent = false;
            let availableVariant = [];
            let productVariants = product?.variants; // [black/sage,sage/sage]- [sage/sage] -> [black/sage]
            for (let index = 0; index < productVariants.length; index++) {
                let variantOptions = productVariants[index]['options'] ? productVariants[index]['options'] : [];
                isVariantPresent = Object.keys(selectedVariantsCombination).every((element, index) => {
                    // sage -> 
                    return variantOptions.includes(selectedVariantsCombination[element]);
                })
                if (isVariantPresent && productVariants[index]['available'] == true) {
                    availableVariant.push(productVariants[index]);
                    break;
                }
            }
            return availableVariant;
        },
        removeFromCart: async function ({ variant, parent, qty = 0 }, noteAttribute, category) {


            let data = { updates: { [variant.id]: qty }, attributes: { [variant.id]: noteAttribute } }

            data.additionalInfo = { ...variant }


            if (category && category != "") {
                data.attributes.category = category
            }
            await gbb.utility.updateCartV2(data)
            gbb.state.giftBoxCartData = await gbb.utility.getGiftBoxProductsFromCart()
            gbb.gbbDiscountComponent.f.updateCurrentDiscountRule();

        },
        activateAddButton: function (buttonEle, data, noteAttribute, typeOfProduct, category) {
            let incrementProductQtyBy = gbb.gbbAddProductsPage.state.incrementProductQtyBy || 1;
            buttonEle.css("background", gbb.settings.pageCustomizationData.productCard.productCardButtonColor);
            buttonEle.css("color", gbb.settings.pageCustomizationData.productCard.productCardButtonTextColor);
            const isMultipleVariants = (typeOfProduct == "multipleVariants" ? true : false);

            let addProductsPageArr = ADDPRODUCT_PAGES_LIST
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                if (isMultipleVariants) {
                    buttonEle.text(gbb.utility.renderLanguageValue(gbb.settings.languageData.general.chooseOptionsButtonText) || "Choose Options1");
                }
                else {
                    buttonEle.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.general?.addToBoxButtonText) || "Add To Box1");
                }
            } else if (noteAttribute == "reviewPage") {
                if (isMultipleVariants) {
                    buttonEle.text(gbb.utility.renderLanguageValue(gbb.settings.languageData.general.chooseOptionsButtonText) || "Choose Options1");
                }
                else {
                    buttonEle.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.general?.addButtonText) || "Add1");
                }
            } else {
                if (isMultipleVariants) {
                    buttonEle.text(gbb.utility.renderLanguageValue(gbb.settings.languageData.general.chooseOptionsButtonText) || "Choose Options1");
                }
                else {
                    buttonEle.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.general?.addToCartButtonText) || "Add To Cart1");
                }
            }
            //buttonEle.removeClass("gbbProductRemoveButton")
            buttonEle.off("click")
            buttonEle.on("click", async function (event) {
                // buttonEle.prop('disabled', true);
                // buttonEle.addClass("gbbDisabled");
                // setTimeout(function () {
                //     gbb.utility.debugConsole("after timeeout")
                //     buttonEle.prop('disabled', false);
                //     buttonEle.removeClass("gbbDisabled");
                // }, 500);
                gbb.utility.debugConsole("add button clicked")
                //activate quantity buttons
                //TODO
                if (!event) {
                    return
                }
                // window.event11 = event;
                buttonEle = gbb.$(event.currentTarget);
                if (typeOfProduct == "multipleVariants") {
                    gbb.f.showProductVariantsModal(data.productData, buttonEle, noteAttribute, category)
                    return;
                } else {
                    let options = {
                        productAmount: data?.variant?.price,
                        category: category,
                        productWeight: data?.variant?.weight,
                        productVariantData: data?.variant,
                        productQuantity: incrementProductQtyBy,
                    }
                    if (gbb.settings?.bundleSettings?.isValidateInventoryEnabled && !gbb.utility.allowATCBasedOnProductInventory(data?.variant?.id, incrementProductQtyBy)) {
                        gbb.f.renderConditionNotificationToast((gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.general?.inventoryLimitReachedText) || "No More Stock1"))
                        return
                    }
                    let condition = await gbb.utility.checkStepConditions(noteAttribute, options);
                    if (condition.isConditionMet) {
                        if (!data.qty || data.qty == 0) {
                            data.qty = incrementProductQtyBy;
                        }
                        //TODO: migration addButtonLoadingText
                        // buttonEle.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.general?.addButtonLoadingText) || "Adding...");
                        gbb.utility.activateQuantityButtons(buttonEle, data, noteAttribute, typeOfProduct, category);
                        try {
                            let _noteAttribute = data?.productData?.customProductAttribute || noteAttribute
                            await gbb.utility.addToCart(data, _noteAttribute, category);
                            await gbb.utility.getGiftBoxProductsFromCart();
                        } catch (e) {
                            gbb.utility.debugConsole("error generated is", e);
                        }



                        await gbb.gbbAddProductsPage.f.handleAutoNextStep();


                        gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML(noteAttribute, { flow: "updateFooterWithoutAppending" }));
                        // gbb.gbbAddProductsPage.f.autoScrollSlotsBasedOnATC("addToCart")
                        gbb.utility.showAddedToCartText(buttonEle);
                        if (noteAttribute == "reviewPage") {
                            gbb.gbbReviewPage.init(gbb.settings, "SUMMARY_PAGE");
                        }
                    }
                }
            })
        },
        activateQuantityButtons: async function (buttonEle, data, noteAttribute, typeOfProduct, category) {
            let allowQuantityInput = gbb.settings?.bundleSettings?.allowQuantityInput || false;
            let incrementProductQtyBy = gbb.gbbAddProductsPage.state.incrementProductQtyBy || 1;
            let decrementProductQtyBy = gbb.gbbAddProductsPage.state.decrementProductQtyBy || 1;
            let gbbProductQuantityHTML = gbb.$("<div>").addClass("gbbProductQuantityHTML");
            if (gbb.$('.gbbProductsCardLayoutV2').length > 0) {
                gbbProductQuantityHTML.css("background", gbb.settings.pageCustomizationData?.productCard?.productCardQuantitySelectorBgColor)
            }
            // let gbbProductQuantityAddButton = gbb.$("<button>").addClass("gbbProductQuantityAddButton")
            let productCardPageCustomization = gbb.settings.pageCustomizationData?.productCard
            let buttonTextColor = productCardPageCustomization.productCardQuantitySelectorButtonTextColor || productCardPageCustomization.productCardButtonTextColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor
            let gbbProductQuantityAddButton = gbb.$("<div>").addClass("gbbProductQuantityAddButton")
                // .css("background", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                // .css("color", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor);
                .css("background", gbb.settings.pageCustomizationData?.productCard?.productCardButtonColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                .css("color", productCardPageCustomization.productCardButtonTextColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor);
            // let gbbProductQuantityRemoveButton = gbb.$("<button>").addClass("gbbProductQuantityRemoveButton")
            let gbbProductQuantityRemoveButton = gbb.$("<div>").addClass("gbbProductQuantityRemoveButton")
                // .css("background", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                // .css("color", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor);
                .css("background", gbb.settings.pageCustomizationData?.productCard?.productCardButtonColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                .css("color", productCardPageCustomization.productCardButtonTextColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor);
            let gbbProductQuantityLabel = gbb.$("<div>").addClass("gbbProductQuantityLabel");

            let gbbProductQuantityInput = gbb.$("<input>").addClass("gbbProductQuantityInput").attr("type", "number").attr("min", 0);

            let currentQuantity = await gbb.utility.getProductQuantityFromCart(data);

            gbbProductQuantityAddButton.append(gbb.$("<div>").addClass("gbbProductQuantityAddButtonWrapper").html("+"));
            gbbProductQuantityRemoveButton.append(gbb.$("<div>").addClass("gbbProductQuantityRemoveButtonWrapper").html("-"));
            gbbProductQuantityLabel.text(currentQuantity);
            gbbProductQuantityInput.val(currentQuantity);

            // add data attribute to gbbProductQuantityInputContainer of previous qty currentQty
            gbbProductQuantityInput.attr("data-previous-qty", currentQuantity);

            const gbbProductQuantityAddButtonFunction = async (event) => {
                let options = {
                    productAmount: data?.variant?.price,
                    category: category,
                    productWeight: data?.variant?.weight,
                    productVariantData: data?.variant,
                    productQuantity: incrementProductQtyBy
                }
                let product = data.productData;
                let formValidationForProduct = gbb.gbbProductFormStep.f.checkFormValidationForProduct(product);
                if (!formValidationForProduct) {
                    gbb.gbbProductFormStep.f.displayRequiredFieldMessage();
                    return;
                } else if (formValidationForProduct) {
                    gbb.utility.addPersonalizationDataToProductProperties();
                }
                if (gbb.settings?.bundleSettings?.isValidateInventoryEnabled && !gbb.utility.allowATCBasedOnProductInventory(data?.variant?.id, incrementProductQtyBy)) {
                    gbb.f.renderConditionNotificationToast((gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.general?.inventoryLimitReachedText) || "No More Stock1"))
                    return
                }
                let condition = await gbb.utility.checkStepConditions(noteAttribute, options);
                // CHECK_INVENTORY
                if (condition.isConditionMet) {
                    currentQuantity += incrementProductQtyBy;
                    data.qty = currentQuantity
                    gbbProductQuantityHTML = gbb.$(event.currentTarget.parentElement)
                    gbbProductQuantityLabel = gbbProductQuantityHTML.find(".gbbProductQuantityLabel");
                    gbbProductQuantityLabel.text(currentQuantity);
                    gbbProductQuantityInput.val(currentQuantity);
                    gbbProductQuantityInput.attr("data-previous-qty", currentQuantity);
                    // gbb.utility.disableElement(gbbProductQuantityAddButton);
                    let _noteAttribute = product?.customProductAttribute || noteAttribute
                    await gbb.utility.addToCart(data, _noteAttribute, category);
                    await gbb.utility.getGiftBoxProductsFromCart()
                    // gbb.utility.disableElement(gbbProductQuantityAddButton,0);


                    await gbb.gbbAddProductsPage.f.handleAutoNextStep();

                    gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML(noteAttribute, { flow: "updateFooterWithoutAppending" }));
                    // gbb.gbbAddProductsPage.f.autoScrollSlotsBasedOnATC("addToCart")
                    gbb.utility.showAddedToCartText(buttonEle);
                    if (noteAttribute == "reviewPage") {
                        gbb.gbbReviewPage.init(gbb.settings, "SUMMARY_PAGE");
                    }
                }
            }

            const gbbProductQuantitySubstractButtonFunction = async (event) => {

                if (!event) {
                    return
                } else {
                    // window.event1 = event;
                }
                gbbProductQuantityRemoveButton.prop('disabled', true);
                //add a disabled class
                gbbProductQuantityRemoveButton.addClass("gbbDisabled");

                if (currentQuantity <= 0 || currentQuantity <= decrementProductQtyBy) {
                    currentQuantity = 0
                } else {
                    currentQuantity -= decrementProductQtyBy;
                }

                data.qty = currentQuantity
                let _noteAttribute = data.productData.customProductAttribute || noteAttribute
                await gbb.utility.removeFromCart(data, _noteAttribute, category);
                gbbProductQuantityRemoveButton.prop('disabled', false);
                gbbProductQuantityRemoveButton.removeClass("gbbDisabled");
                // let addButtonEle = gbb.$("<button>").addClass("gbbProductAddButton");
                let addButtonEle = gbb.$("<div>").addClass("gbbProductAddButton");
                // window.gbbProductQuantityHTML = gbbProductQuantityHTML;
                gbbProductQuantityHTML = gbb.$(event.currentTarget.parentElement)
                if (currentQuantity <= 0) {
                    gbbProductQuantityHTML.replaceWith(addButtonEle);
                    gbbProductQuantityInput.val(0);
                    gbbProductQuantityInput.attr("data-previous-qty", currentQuantity);
                    gbb.utility.activateAddButton(addButtonEle, data, noteAttribute, typeOfProduct, category)
                } else {
                    gbbProductQuantityLabel = gbbProductQuantityHTML.find(".gbbProductQuantityLabel");
                    gbbProductQuantityLabel.text(currentQuantity);
                    gbbProductQuantityInput.val(currentQuantity);
                    gbbProductQuantityInput.attr("data-previous-qty", currentQuantity);
                }
                await gbb.utility.getGiftBoxProductsFromCart()
                gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML(noteAttribute, { flow: "updateFooterWithoutAppending" }));
                // gbb.gbbAddProductsPage.f.autoScrollSlotsBasedOnATC("removeFromCart")

                if (noteAttribute == "reviewPage") {
                    gbb.gbbReviewPage.init(gbb.settings, "SUMMARY_PAGE");
                }
            }

            gbbProductQuantityAddButton.on("click", async (event) => {
                //get current quantity -> do +1 and update cart
                gbb.utility.debugConsole("add button clicked")
                gbbProductQuantityAddButtonFunction(event);
            })

            gbbProductQuantityInput.on("change", async (event) => {
                let previousValue = parseInt(gbbProductQuantityInput.attr("data-previous-qty"));
                let currentValue = parseInt(gbbProductQuantityInput.val());

                let differenceInValues = currentValue - previousValue;
                if (differenceInValues > 0) {
                    for (let i = 0; i < differenceInValues; i++) {
                        await gbbProductQuantityAddButtonFunction(event);
                    }
                } else if (differenceInValues < 0) {
                    for (let i = 0; i < Math.abs(differenceInValues); i++) {
                        await gbbProductQuantitySubstractButtonFunction(event);
                    }
                }

            })

            // gbbProductQuantityInput.on("input", async (event) => {
            //     let previousValue = parseInt(gbbProductQuantityInput.attr("data-previous-qty"));
            //     let currentValue = parseInt(gbbProductQuantityInput.val());

            //     let differenceInValues = currentValue - previousValue;
            //     if (differenceInValues > 0) {
            //         for (let i = 0; i < differenceInValues; i++) {
            //             await gbbProductQuantityAddButtonFunction(event);
            //         }
            //     } else if (differenceInValues < 0) {
            //         for (let i = 0; i < Math.abs(differenceInValues); i++) {
            //             await gbbProductQuantitySubstractButtonFunction(event);
            //         }
            //     }

            //     // Update the previous value to the current value

            // });


            gbbProductQuantityRemoveButton.on("click", async (event) => {
                //get current quantity ->  do -1 and update cart
                //if quantity becomes zero after previous step
                //activate add button
                await gbbProductQuantitySubstractButtonFunction(event);

                //disable button after on click for 500ms
                // let btnElements = {gbbProductQuantityRemoveButton, gbbProductQuantityLabel, gbbProductQuantityHTML};
                // let dataToBePassedToActivateAddButton = {data, noteAttribute, category, typeOfProduct};
                // gbb.utility.handleQuantityRemoveButton(btnElements, dataToBePassedToActivateAddButton);
            })


            gbbProductQuantityHTML.append(gbbProductQuantityRemoveButton)

            if (allowQuantityInput) {
                gbbProductQuantityHTML.append(gbbProductQuantityInput);
            } else {
                gbbProductQuantityHTML.append(gbbProductQuantityLabel);
            }

            gbbProductQuantityHTML.append(gbbProductQuantityAddButton);

            buttonEle.replaceWith(gbbProductQuantityHTML);
        },
        handleQuantityRemoveButton: async function (btnElements, dataToBePassedToActivateAddButton) {
            let { gbbProductQuantityRemoveButton, gbbProductQuantityLabel, gbbProductQuantityHTML } = btnElements;
            let { data, noteAttribute, category, typeOfProduct } = dataToBePassedToActivateAddButton;
            gbbProductQuantityRemoveButton.prop('disabled', true);
            //add a disabled class
            gbbProductQuantityRemoveButton.addClass("gbbDisabled");
            currentQuantity -= 1;
            data.qty = currentQuantity
            await gbb.utility.removeFromCart(data, noteAttribute);
            gbbProductQuantityRemoveButton.prop('disabled', false);
            gbbProductQuantityRemoveButton.removeClass("gbbDisabled");
            // let addButtonEle = gbb.$("<button>").addClass("gbbProductAddButton");
            let addButtonEle = gbb.$("<div>").addClass("gbbProductAddButton");
            if (currentQuantity <= 0) {
                gbbProductQuantityHTML.replaceWith(addButtonEle);
                gbb.utility.activateAddButton(addButtonEle, data, noteAttribute, typeOfProduct, category)
            } else {
                gbbProductQuantityLabel.text(currentQuantity);
            }
            await gbb.utility.getGiftBoxProductsFromCart()
            gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML(noteAttribute, { flow: "updateFooterWithoutAppending" }));
            if (noteAttribute == "reviewPage") {
                gbb.gbbReviewPage.init(gbb.settings, "SUMMARY_PAGE");
            }
        },
        activateSoldOutButton: function (buttonEle, data, noteAttribute) {
            let { variant, parent } = data;
            buttonEle.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.general?.soldOut) || "Sold Out")
            buttonEle.addClass("gbbProductSoldOutButton")
            buttonEle.off("click")
        },
        handleVariantSelection: function (warningElement, product, selectedVariantsCombination, productButtonElement, gbbProductAllImagesContainer, gbbProductImageContainer) {
            try {
                let availableVariant = gbb.utility.checkIfSelectedVariantCombinationIsAvailable(product, selectedVariantsCombination);
                const isPurchaseTypeSubscription = gbb.gbbSubscriptionProductsPage.f.checkIfPurchaseTypeIsSubscription()

                const modalRef = gbb.$(".gbbProductVariantModalContainer")
                if (availableVariant.length == 0) {
                    productButtonElement.addClass('gbbDisabled');
                    warningElement.css('display', 'block');

                    //select the image
                } else {
                    productButtonElement.removeClass('gbbDisabled');
                    warningElement.css('display', 'none');
                    modalRef.find(".gbbProductItemCompareAtPrice").text("");
                    if (availableVariant[0]?.compare_at_price && availableVariant[0]?.compare_at_price > availableVariant[0]?.price) {
                        modalRef.find(".gbbProductItemCompareAtPrice").text(gbb.utility.formatPrice(availableVariant[0]?.compare_at_price));
                    }
                    let productPrice = availableVariant[0]?.price
                    if (isPurchaseTypeSubscription) {
                        productPrice = gbb.gbbSubscriptionProductsPage.f.getSubscriptionPriceByVariantId(availableVariant[0]?.id)
                    }
                    modalRef.find(".gbbProductItemPrice").text(gbb.utility.formatPrice(productPrice));
                    //if the image is not already selected
                    let mediaId;
                    if (availableVariant[0].featured_media && availableVariant[0].featured_media?.id) {
                        mediaId = availableVariant[0].featured_media.id;
                        //find the active class image and check it's media id
                        let activeImage = gbbProductAllImagesContainer.find(".gbbActiveImage");
                        let activeImageIndex = activeImage.attr("imageIndex");
                        let activeImageMediaId = activeImage.attr("mediaId");

                        //find the div of the new variant through mediaId and then assign it slide index
                        let changedVariantDiv = gbbProductAllImagesContainer.find(`[mediaId=${mediaId}]`);
                        // let changedVariantDivIndex = parseInt(changedVariantDiv.attr("imageIndex"))
                        let changedVariantDivIndex = parseInt(changedVariantDiv?.parent()?.index())
                        changedVariantDivIndex += 1;

                        if (activeImageMediaId != mediaId && gbb.utility.slider.state.slideIndex != changedVariantDivIndex) {

                            gbb.utility.slider.state.slideIndex = changedVariantDivIndex//current changes image index;
                            // gbb.utility.slider.state.slideIndex = activeImageIndex//current changes image index;
                            gbb.utility.slider.showSlides(gbbProductImageContainer, gbb.utility.slider.state.slideIndex)
                            // gbb.utility.slider.showSlides(gbbProductImageContainer, gbb.utility.slider.state.slideIndex)

                            gbb.f.removeActiveImageStyle(gbbProductAllImagesContainer.find(".gbbActiveImage"))
                            gbbProductAllImagesContainer.find(".gbbActiveImage").removeClass("gbbActiveImage")

                            gbb.f.applyActiveImageStyle(gbbProductAllImagesContainer.find(`[mediaId=${mediaId}]`))
                            gbbProductAllImagesContainer.find(`[mediaId=${mediaId}]`).addClass("gbbActiveImage")
                        }
                    }
                }
            } catch (error) {
                gbb.utility.debugConsole("Error in handleVariantSelection", error)
            }
        },
        addPersonalizationDataToProductProperties: function (product) {

            let formSubmissionObj = JSON.parse(JSON.stringify(gbb.gbbProductFormStep.state.formSubmissionData));
            let resultKeyValuePair = {};
            let formSubmissionObjKeys = Object.keys(formSubmissionObj);
            //iterate and just copy the values
            formSubmissionObjKeys.forEach((key) => {
                if (formSubmissionObj[key].value) {
                    resultKeyValuePair[key] = formSubmissionObj[key].value;
                }
            });
            let productPersonalizationMetaData = formSubmissionObj;
            gbb.state.variantCustomProperties = { ...gbb.state.variantCustomProperties, ...resultKeyValuePair, productPersonalizationMetaData };

        },
        addVariantProductToCart: async function (warningElement, product, selectedVariantsCombination, noteAttribute, buttonEle, category, quantity = 1) {
            let availableVariant = gbb.utility.checkIfSelectedVariantCombinationIsAvailable(product, selectedVariantsCombination);
            if (availableVariant.length == 0) {
                warningElement.css('display', 'block');
            } else {
                let data = {
                    productData: product,
                    variant: availableVariant[0]
                }
                warningElement.css('display', 'none');
                let productData = data.productData;
                let uniqueItemKey = gbb.utility.getUniqueIdForVariant({ productData, variantId: data?.variant?.id })
                const isItemInCart = gbb.utility.checkIfItemPresentInGiftBoxCart(data?.variant?.id, { uniqueItemKey });
                // if (isItemInCart && isItemInCart.quantity) {
                //     quantity += isItemInCart.quantity
                //     data.qty = quantity
                // } else {
                //     data.qty = quantity
                // }
                let options = {
                    productAmount: data?.variant?.price,
                    category: category,
                    productQuantity: quantity,
                    productWeight: data?.variant?.weight,
                    productVariantData: data?.variant

                }
                if (gbb.settings?.bundleSettings?.isValidateInventoryEnabled && !gbb.utility.allowATCBasedOnProductInventory(data?.variant?.id, quantity)) {
                    // gbb.utility.closeVariantsModal()
                    gbb.f.renderConditionNotificationToast((gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.general?.inventoryLimitReachedText) || "No More Stock1"))
                    return
                }
                let condition = await gbb.utility.checkStepConditions(noteAttribute, options);
                let formValidationForProduct = gbb.gbbProductFormStep.f.checkFormValidationForProduct(product);
                if (!formValidationForProduct) {
                    gbb.gbbProductFormStep.f.displayRequiredFieldMessage();
                    return;
                } else if (formValidationForProduct) {
                    gbb.utility.addPersonalizationDataToProductProperties();
                }

                if (condition.isConditionMet) {
                    if (isItemInCart && isItemInCart.quantity) {
                        quantity += isItemInCart.quantity
                    }
                    data.qty = quantity;
                    let _noteAttribute = product?.customProductAttribute || noteAttribute
                    await gbb.utility.addToCart(data, _noteAttribute, category)
                    let newProductItemHTML = gbb.f.renderProductsHTML([product], noteAttribute, category);
                    // gbb.$(".gbbPageBody").find(`[productId='${product.id}']`).replaceWith(newProductItemHTML);
                    let productCardRef = gbb.$(".gbbProductsContainer").find(`[productId='${product.id}']`);

                    if (productCardRef.length > 1) {
                        productCardRef = gbb.$(".gbbProductsContainer").find(`[firstvariantid='${data.variant.id}']`);
                    }
                    productCardRef.replaceWith(newProductItemHTML);

                    // if (condition.isConditionMet) {
                    //     gbb.utility.debugConsole("condition is met")
                    //     console.log("conditions", condition.conditions);
                    //     debugger
                    //     let argOptions = {
                    //         // conditions : condition.conditions,
                    //         condition: condition
                    //         // categoryId: category,
                    //         // pageType,
                    //     };
                    // }

                    await gbb.gbbAddProductsPage.f.handleAutoNextStep();



                    //gbb.utility.activateQuantityButtons(buttonEle, data, noteAttribute, "multipleVariants", category)
                    //buttonEle.addClass("gbbProductRemoveButton")
                    gbb.utility.closeVariantsModal()
                    gbb.$(".gbbHTMLWrapper").removeClass('gbbDisabled');
                    gbb.utility.showAddedToCartText(buttonEle);
                    await gbb.utility.getGiftBoxProductsFromCart()
                    gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML(noteAttribute, { flow: "updateFooterWithoutAppending" }));
                    if (noteAttribute == "reviewPage") {
                        gbb.gbbReviewPage.init(gbb.settings, "SUMMARY_PAGE");
                    }



                } else {
                    gbb.utility.closeVariantsModal()
                }
            }
        },
        activateAFilter: function () {
        },
        removeAFilter: function () {

        },
        getTheVariantProductPresentInCart: function (product) {
            let variantPresent;
            let productVariants = product.variants;
            for (let index = 0; index < productVariants.length; index++) {
                variantPresent = gbb.utility.checkIfItemPresentInGiftBoxCart(productVariants[index].id);
                if (variantPresent) {
                    return variantPresent;
                }
            }
            // product.variants.forEach((variant) => {
            //     variantPresent = gbb.utility.checkIfItemPresentInGiftBoxCart(variant.id);
            //     if(variantPresent) {
            //         return variantPresent;
            //     }
            // })
            return false;
        },
        showAddedToCartText: function (buttonEle) {
            // add a new element next to the buttonEle and show the text
            let addedToCartText = gbb.$("<div>").addClass("gbbAddedToCartText").text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.general?.addedText) || "Added")
            buttonEle.after(addedToCartText)
            setTimeout(function () {
                addedToCartText.remove();
            }, 2000)
        },
        getCurrentPageSelectedProducts: function (noteAttribute) {
            let products = [];

            let addProductsPageArr = ADDPRODUCT_PAGES_LIST
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                // products = gbb.state.currentFilteredProducts[keyAttribute];
                products = gbb.state.currentFilteredProducts;
            } else {
                products = [];
            }

            return products;
        },
        setProductsToOriginalState: function (noteAttribute) {
            let tempProductsArr = [];

            let addProductsPageArr = ADDPRODUCT_PAGES_LIST
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            let data;
            if (noteAttribute == "addProductsPage1") {
                data = gbb.settings.stepsConfigurationData.productsData1.uniqueProductsData;
            } else if (noteAttribute == "addProductsPage2") {
                data = gbb.settings.stepsConfigurationData.productsData2.uniqueProductsData;
            } else if (noteAttribute == "addProductsPage3") {
                data = gbb.settings.stepsConfigurationData.productsData3.uniqueProductsData;
            } else if (noteAttribute == "addProductsPage4") {
                data = gbb.settings.stepsConfigurationData.productsData4.uniqueProductsData;
            } else if (noteAttribute == "addProductsPage5") {
                data = gbb.settings.stepsConfigurationData.productsData5.uniqueProductsData;
            } else if (noteAttribute == "addProductsPage6") {
                data = gbb.settings.stepsConfigurationData.productsData6.uniqueProductsData;
            } else if (noteAttribute == "addProductsPage7") {
                data = gbb.settings.stepsConfigurationData.productsData7.uniqueProductsData;
            } else if (noteAttribute == "addProductsPage8") {
                data = gbb.settings.stepsConfigurationData.productsData8.uniqueProductsData;
            } else if (noteAttribute == "addProductsPage9") {
                data = gbb.settings.stepsConfigurationData.productsData9.uniqueProductsData;
            } else if (noteAttribute == "addProductsPage10") {
                data = gbb.settings.stepsConfigurationData.productsData10.uniqueProductsData;
            } else if (noteAttribute == "addProductsPage11") {
                data = gbb.settings.stepsConfigurationData.productsData11.uniqueProductsData;
            } else if (noteAttribute == "addProductsPage12") {
                data = gbb.settings.stepsConfigurationData.productsData12.uniqueProductsData;
            }
            if (data) {
                Object.keys(data).forEach((product) => {
                    tempProductsArr.push(data[product])
                });
            }
            gbb.state.currentFilteredProducts = tempProductsArr;
            return tempProductsArr;
        },
        getOriginalStateProducts: function (noteAttribute) {
            let tempProductsArr = [];

            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                let data = gbb.settings.shopifyData[keyAttribute]
                if (data) {
                    Object.keys(data).forEach((product) => {
                        tempProductsArr.push(data[product])
                    });
                }
            }
            return tempProductsArr;
        },
        initializeFiltersInfo: function (productPageKey) {
            gbb.state.addProductsFilters.isFiltersEnabledByAdmin = gbb.settings.stepsConfigurationData[productPageKey].filterTypes?.isFiltersEnabled || false
            let categories = Object.values(gbb.settings.stepsConfigurationData[productPageKey].filterTypes?.categories || {});
            gbb.state.addProductsFilters.allFilters = categories || [];
            categories?.forEach((category) => {
                if (category.type == "price") {
                    gbb.state.addProductsFilters.minPriceValue = category.minValue;
                    gbb.state.addProductsFilters.maxPriceValue = category.maxValue;
                }
            })

        },
        getFiltersInfo: function (noteAttribute) {
            let filtersInfo = {
                isFiltersEnabled: false,
                categories: {},
                filterRule: "OR",
                filterRuleAcrossCategory: "OR"
            };


            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                filtersInfo.isFiltersEnabled = gbb.settings.stepsConfigurationData[keyAttribute]?.filterTypes?.isFiltersEnabled;
                filtersInfo.filterRule = gbb.settings.stepsConfigurationData[keyAttribute]?.filterTypes?.filterRule || "OR";
                filtersInfo.filterRuleAcrossCategory = gbb.settings.stepsConfigurationData[keyAttribute]?.filterTypes?.filterRuleAcrossCategory || filtersInfo.filterRule;
                filtersInfo.categories = gbb.state.addProductsFilters.allFilters;
            }

            return filtersInfo;
        },
        setPriceFilterValues: function (noteAttribute, minValue, maxValue) {


            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                gbb.state.addProductsFilters.minPriceValue = minValue;
                gbb.state.addProductsFilters.maxPriceValue = maxValue;
            }


            return;
        },
        getPriceFilterValues: function (noteAttribute) {
            let values = {};


            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                values.minValue = gbb.state.addProductsFilters.minPriceValue;
                values.maxValue = gbb.state.addProductsFilters.maxPriceValue;
            }
            return values;
        },
        toggleFiltersSideBar: function (noteAttribute) {


            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                gbb.state.addProductsFilters.isFiltersActive = !gbb.state.addProductsFilters.isFiltersActive
            }

            return;
        },
        getFiltersState: function (noteAttribute) {
            let isActive = false;

            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                isActive = gbb.state.addProductsFilters.isFiltersActive
            }
            return isActive;
        },
        setActivatedFilters: function (filterTag, noteAttribute, operation, category) {

            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey;
            if (category) {
                filterTag.category = category
                filterTag.filterId = category?.filterId || "123"
            }
            if (addProductsPageArr.includes(noteAttribute)) {
                let activatedFilters = gbb.state.addProductsFilters.activatedFilters;
                if (operation == "add") {
                    if (activatedFilters.findIndex(e => e.label == filterTag.label) == -1) {
                        activatedFilters.push(filterTag);
                    }
                } else {
                    activatedFilters = activatedFilters.filter((element) => {
                        return element.label != filterTag.label
                    })
                }
                gbb.state.addProductsFilters.activatedFilters = activatedFilters;

            }
        },
        setActivatePriceFilters: function (noteAttribute, value) {

            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                gbb.state.addProductsFilters.priceFilterActive = value;
            }
            return;
        },
        getIsPriceFilterActive: function (noteAttribute) {
            let isPriceFilterActive = false;


            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                isPriceFilterActive = gbb.state.addProductsFilters.priceFilterActive
            }
            return isPriceFilterActive;
        },
        getActivatedFilters: function (noteAttribute) {
            let activatedFilters = [];

            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                activatedFilters = gbb.state.addProductsFilters.activatedFilters
            }

            return activatedFilters;
        },
        getActivatedCategoriesForFilters: function (noteAttribute, filterCategory) {
            try {
                let activatedFilters = gbb.utility.getActivatedFilters(noteAttribute);
                for (let i = 0; i < activatedFilters.length; i++) {
                    let activatedFilter = activatedFilters[i];
                    if (activatedFilter?.category && activatedFilter.category == filterCategory) {
                        return true;
                    }
                }
                return false;
            } catch (err) {
                gbb.utility.debugConsole(err + "inside getActivatedCategoryForFilters");
            }

        },
        getCurrentPageHTML: function (noteAttribute) {
            let currentPageHTML = "";
            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                currentPageHTML = gbb.$(".gbbPageBody").find(".gbbAddProductsContainerHTML");
            }

            return currentPageHTML;
        },
        setSortByValues: function (noteAttribute, sortByValue) {


            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                gbb.state.addProductsSortBy.isSortByEnabled = gbb.settings.stepsConfigurationData[keyAttribute].sortBy?.isSortByEnabled || false;
                gbb.state.addProductsSortBy.sortByCategories = gbb.settings.stepsConfigurationData[keyAttribute].sortBy?.categories || [];
                gbb.state.addProductsSortBy.sortByValue = sortByValue || "";
            }



            return;
        },
        getSortByValues: function (noteAttribute) {
            let sortBy = {};

            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
            if (addProductsPageArr.includes(noteAttribute)) {
                sortBy.isSortByEnabled = gbb.state.addProductsSortBy?.isSortByEnabled || false;
                sortBy.sortByCategories = gbb.state.addProductsSortBy?.sortByCategories || [];
                sortBy.sortByValue = gbb.state.addProductsSortBy?.sortByValue || "";
            }

            return sortBy;
        },
        sortAscending: function (arr, key) {
            return arr.sort(function (a, b) {
                var x = a[key];
                var y = b[key];

                if (typeof x == "string") {
                    x = ("" + x).toLowerCase();
                }
                if (typeof y == "string") {
                    y = ("" + y).toLowerCase();
                }

                return ((x < y) ? -1 : ((x > y) ? 1 : 0));
            });
        },
        sortDescending: function (arr, key) {
            return arr.sort(function (a, b) {
                var x = a[key];
                var y = b[key];

                if (typeof x == "string") {
                    x = ("" + x).toLowerCase();
                }
                if (typeof y == "string") {
                    y = ("" + y).toLowerCase();
                }

                return ((x > y) ? -1 : ((x < y) ? 1 : 0));
            });
        },
        getSortedProducts: function (noteAttribute) {
            let result = gbb.utility.getSortByValues(noteAttribute);
            let activeCategoryId = gbb.gbbMultipleCategoriesPage.state.currentCategoryId;
            let totalProducts = []
            if (activeCategoryId) { // changing filter search DB for multicategory -> to get only the products of the active category
                totalProducts = gbb.gbbAddProductsPage.state.productPageData.categories[activeCategoryId].uniqueProductsData
            }
            else {
                totalProducts = gbb.gbbAddProductsPage.state.uniqueProductsData;
            }
            // let products = JSON.parse(JSON.stringify(gbb.gbbAddProductsPage.state.uniqueProductsData));
            let products = JSON.parse(JSON.stringify(totalProducts));


            if (result?.isSortByEnabled) {
                if (result.sortByValue == "alphabeticalAToZ") {
                    products = gbb.utility.sortAscending(products, "title")
                } else if (result.sortByValue == "alphabeticalZToA") {
                    products = gbb.utility.sortDescending(products, "title")
                } else if (result.sortByValue == "priceLowToHigh") {
                    products = gbb.utility.sortAscending(products, "price")
                } else if (result.sortByValue == "priceHighToLow") {
                    products = gbb.utility.sortDescending(products, "price")
                }
            }
            return products;
        },
        /**
         * Generates a stylesheet string based on the settings 
         * and appends it to the head of the HTML document.
         * @returns {string} The generated style string.
         */
        getActiveVariantStyle: function () {
            let style =
                `<style>
                    .gbbActiveVariant {
                            background: ${gbb.settings?.pageCustomizationData?.productCard.productCardButtonColor} !important;
                            color:${gbb.settings.pageCustomizationData.productCard.productCardButtonTextColor} !important;
                        }
                    .gbbActiveImage {
                            border: 2px solid ${gbb.settings?.pageCustomizationData?.productCard.productCardButtonColor} !important;
                    }    
                    .gbbBodyWrapper ::-webkit-scrollbar-thumb{
                        background: ${gbb.settings?.pageCustomizationData?.generalSettings?.scrollBar?.scrollBarColor || "#000000"} !important;
                    }    
                    .gbbActiveMsgDeliveryOptions {
                        border: 1px solid #A2A2A2 !important;
                        background-color: rgb(255, 255, 255) !important;
                    }      
                    .gbbCustomerUploadButton{
                        background-color: ${gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor};
                        color: ${gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor};
                    }      
                    </style>`
            gbb.$('html > head').append(style);
            return style;
        },
        getConditionMessage: function (type, condition) {
            let result = gbb.settings?.languageData?.conditions;
            if (type == "amount") {
                result = result.amount;
            } else if (type == "quantity") {
                result = result.quantity;
            } else if (type == "weight") {
                result = result.weight;
            }
            result = result[condition];
            result = result["value"]
            return result;
        },
        checkConditions: function (value, element, goToNextStep) {
            let result = true;
            // let conditions = additionalInfo.conditions || [];
            let elementMaxValue = element.maxValue || element.value
            switch (element.condition) {
                case "lessThanOrEqualTo": {
                    result = value <= element.value ? true : false;
                    break;
                }
                case "equalTo": {
                    if (!goToNextStep) {
                        result = value <= elementMaxValue ? true : false;
                    } else {
                        // result = value == element.value ? true : false;
                        result = value - element.value >= 0 ? true : false;
                    }
                    break;
                }
                case "greaterThanOrEqualTo": {
                    if (goToNextStep) {
                        result = value >= element.value ? true : false;
                    }
                    break;
                }
            }
            return result;
        },
        checkConditionsAndProceedToNextPage: async function (noteAttribute, gbbFooterNextButton) {
            try {
                let result = await gbb.utility.checkConditionsOnNext(noteAttribute, gbbFooterNextButton);
                if (result.isConditionMet) {
                    gbb.utility.renderTemporaryLoadingSpinner("show");
                    gbb.giftboxbuilderPage.action.onNextNavigationBYOB();
                    let isRenderSlotFooterEnable = gbb.settings.stepsConfigurationData?.isProductSlotsEnabled && gbb.gbbAddProductsPage?.state?.isEveryConditionHaveTypeQuantity
                    if (isRenderSlotFooterEnable) {
                        setTimeout(() => {
                            gbb.gbbAddProductsPage.f.autoScrollSlotsOnNavigation()
                        }, 1000)
                    }
                    gbb.utility.disableElement(gbbFooterNextButton, 1000);
                    return true;
                } else {
                    return false;
                }
            } catch (e) {
                gbb.utility.debugConsole(e);
            }
        },
        checkStepConditions: async function (noteAttribute, { productAmount, category, productQuantity, productWeight }) {
            //this function recognizes what kind of page type it is
            //single category page -> fire checkSingleCategoryPageConditions function
            //multiple category page ->
            //->check if page level conditions are enabled
            //if not enabled-> fire checkMultipleCategoryPageCondition function
            //else -> fire checkSingleCategoryPageConditions function
            // let productAmount = 
            let conditionResult;
            let pageType = gbb?.gbbAddProductsPage?.state?.productPageData?.pageType
            if (gbb.state.currentPageId == 'personalizationPage') {
                let options = {
                    productQtyToAdd : productQuantity
                }
                conditionResult = gbb.gbbAddonProducts.f.checkMaxAddonProductsConditions(options)
            } else if (pageType && pageType == "MULTIPLE_CATEGORY") {
                let globalConditions = gbb.gbbAddProductsPage.state.productPageData?.isPageConditionsEnabled;
                if (!globalConditions) {
                    // let options = {productAmount, goToNextStep, category, checkConditionsForOneCategoryOnNext, productQuantity}  
                    let options = {
                        productAmount: productAmount,
                        goToNextStep: false,
                        category: category,
                        checkConditionsForOneCategoryOnNext: false,
                        productQuantity: productQuantity,
                        productWeight: productWeight
                    }
                    conditionResult = await gbb.utility.checkMultipleCategoryPageCondition(noteAttribute, options);
                } else {
                    let options = {
                        productAmount: productAmount,
                        productQuantity: productQuantity,
                        goToNextStep: false,
                        productWeight: productWeight
                    }

                    conditionResult = await gbb.utility.checkSingleCategoryPageConditions(noteAttribute, options);
                }
            } else {
                let options = {
                    productAmount: productAmount,
                    productQuantity: productQuantity,
                    goToNextStep: false,
                    productWeight: productWeight
                }
                // conditionResult = await gbb.utility.checkSingleCategoryPageConditions(noteAttribute, productAmount, productQuantity, false);
                conditionResult = await gbb.utility.checkSingleCategoryPageConditions(noteAttribute, options);
            }

            return conditionResult;
        },
        checkMultipleCategoryPageConditionOnNext: async function (noteAttribute, categoriesData) {
            //this function is fired when we're trying to go from a "multiple category" page to next page and "pagelevel" conditions are not enabled on this page
            let result;

            let categories = JSON.parse(JSON.stringify(categoriesData));
            //sort the checkMultipleCategoryPageConditionOnNext and place the current category at the first

            let currentCategory = gbb.gbbMultipleCategoriesPage.state.currentCategoryId;

            categories = categories.sort((a, b) => {
                if (a.categoryId == currentCategory) {
                    return -1;
                } else {
                    return 1;
                }
            });



            for (let index = 0; index < categories.length; index++) {
                // let options = {productAmount, goToNextStep, category, checkConditionsForOneCategoryOnNext, productQuantity}
                let options = {
                    productAmount: "",
                    goToNextStep: true,
                    category: categories[index]["categoryId"],
                    checkConditionsForOneCategoryOnNext: true,
                    productQuantity: ""
                }
                // result = await gbb.utility.checkMultipleCategoryPageCondition(noteAttribute, "", true, categories[index]["categoryId"], true, "");
                result = await gbb.utility.checkMultipleCategoryPageCondition(noteAttribute, options);
                if (!result.isConditionMet) {
                    break;
                }
            }
            return result;
        },
        checkMultipleCategoryPageCondition: async function (noteAttribute, { productAmount, goToNextStep, category, checkConditionsForOneCategoryOnNext, productQuantity, productWeight }) {
            //this function tells us if the conditions on multiple category page is satisfied
            //goToNextStep determines if productAmount or productQuantity values should be modified or not
            let categoryTitle;
            let categories = undefined
            categories = gbb.gbbAddProductsPage.state.productPageData.categories;
            categories = gbb.utility.convertObjectToArray(categories)

            if (goToNextStep && !checkConditionsForOneCategoryOnNext) {
                return gbb.utility.checkMultipleCategoryPageConditionOnNext(noteAttribute, categories);
            }
            let conditionResult = gbb.utility.getStepConditionsForMultipleCategoriesPage(categories, category);
            conditions = conditionResult.conditions;
            let categoryData = {
                categoryTitle: conditionResult.categoryTitle,
                categoryId: category
            }

            productAmount = gbb.utility.formatPriceWithoutSymbol(productAmount);
            let cartAmount, cartQuantity, cartResult;

            let pageType = "MULTIPLE_CATEGORY"
            let options = {
                productAmount: productAmount,
                productQuantity: productQuantity,
                goToNextStep: goToNextStep,
                category: category,
                pageType: pageType,
                productWeight: productWeight
            }
            let modifiedValues = await gbb.utility.modifyProductValuesToCheckCondiitons(noteAttribute, options)
            cartAmount = modifiedValues.result.cartAmount;
            cartQuantity = modifiedValues.result.cartQuantity;
            cartResult = modifiedValues.result.cartResult;
            cartWeight = modifiedValues.result.cartWeight;

            let dataForConditionsCheck = {
                conditions: conditions,
                cartAmount: cartAmount,
                cartQuantity: cartQuantity,
                cartResult: cartResult,
                goToNextStep: goToNextStep,
                categoryData: categoryData,
                cartWeight: cartWeight
            }

            let result = gbb.utility.loopThroughEachConditionAndCheck(conditions, dataForConditionsCheck);
            // result = {
            //     ...result,
            //     conditions: conditions
            // }
            return result;
        },
        checkSingleCategoryPageConditions: async function (noteAttribute, { productAmount, productQuantity, goToNextStep, productWeight }) {
            //this function tells us if the conditions on page is satisfied
            //goToNextStep determines if productAmount or productQuantity values should be modified or not
            let conditions = gbb.utility.getStepCondtions(noteAttribute);
            productAmount = gbb.utility.formatPriceWithoutSymbol(productAmount);
            let cartAmount, cartQuantity, cartResult, cartWeight;
            let options = {
                productAmount: productAmount,
                productQuantity: productQuantity,
                goToNextStep: goToNextStep,
                productWeight: productWeight
            }
            let modifiedValues = await gbb.utility.modifyProductValuesToCheckCondiitons(noteAttribute, options)
            cartAmount = modifiedValues.result.cartAmount;
            cartQuantity = modifiedValues.result.cartQuantity;
            cartResult = modifiedValues.result.cartResult;
            cartWeight = modifiedValues.result.cartWeight;
            let dataForConditionsCheck = {
                conditions: conditions,
                cartAmount: cartAmount,
                cartQuantity: cartQuantity,
                cartResult: cartResult,
                cartWeight: cartWeight,
                goToNextStep: goToNextStep
            }
            let result = gbb.utility.loopThroughEachConditionAndCheck(conditions, dataForConditionsCheck)
            // result = {
            //     ...result,
            //     conditions: conditions
            // }
            return result;
        },
        modifyProductValuesToCheckCondiitons: async function (noteAttribute, { productAmount, productQuantity, category, pageType, goToNextStep, productWeight }) {
            let cartResult = await gbb.utility.getStepCartData(noteAttribute, category, pageType);
            let cartQuantity = cartResult.quantity;
            let cartAmount = cartResult.amount;
            let cartWeight = cartResult.weight;
            gbb.utility.debugConsole("cartResult", cartResult);
            gbb.utility.debugConsole("ccartResult cartWeight", cartWeight);
            productAmount = parseInt(productAmount);
            if (!goToNextStep) {
                if (productQuantity) {
                    cartQuantity += productQuantity; //new cart quantity
                    productAmount = productAmount * productQuantity
                    productWeight = productWeight * productQuantity
                } else {
                    cartQuantity += gbb.gbbAddProductsPage.state.incrementProductQtyBy || 1;
                }
                cartAmount += productAmount;
                cartWeight += productWeight;
            }
            return { result: { cartAmount, cartQuantity, cartResult, cartWeight } };
        },
        loopThroughEachConditionAndCheck: function (conditions, { cartAmount, cartQuantity, cartResult, goToNextStep, categoryData, cartWeight }) {
            let categoryTitle = categoryData?.categoryTitle;
            let categoryId = categoryData?.categoryId;
            let pageType = gbb?.gbbAddProductsPage?.state?.productPageData?.pageType
            let result = {
                isConditionMet: true,
                message: "",
                conditions: conditions
            }

            let maxValue = 0;

            for (let j = 0; j < conditions.length; j++) {
                let currentCondtion = conditions[j]
                if (currentCondtion && currentCondtion.customValue){ // outdoor-dog-supply.com -> when merchant wants to handle conditions dynamically based on some custom logic 
                    // currentCondtion.customValue = "window.customStepCondition"
                    let customConditionValue = eval(currentCondtion.customValue) || currentCondtion.value
                    currentCondtion.value = customConditionValue
                }
                // get maxValue from the conditions array in the value field
                if (parseInt(conditions[j].value) > maxValue) {
                    maxValue = parseInt(conditions[j].value)
                }

                if (conditions[j].condition == "greaterThanOrEqualTo") {
                    maxValue = Number.MAX_SAFE_INTEGER;
                    break;
                }
            }



            for (let index = 0; index < conditions.length; index++) {
                let element = JSON.parse(JSON.stringify(conditions[index]));

                let allValuesFromConditions = conditions.map((condition) => {
                    return parseInt(condition.value)
                });
                element.maxValue = maxValue;

                let isThisLastElement = index - (conditions.length - 1) == 0 ? true : false
                let additionalInfo = {
                    conditions: conditions
                }
                if (element.type == "quantity") {
                    result.isConditionMet = gbb.utility.checkConditions(cartQuantity, element, goToNextStep);

                } else if (element.type == "amount") {
                    result.isConditionMet = gbb.utility.checkConditions(cartAmount, element, goToNextStep);
                } else if (element.type == "weight") {
                    //conver element value to grams
                    let weightValueInGrams = gbb.utility.convertToGrams(element.value, element.unit);
                    let weightConditionObject = {
                        ...element,
                        value: weightValueInGrams
                    }
                    result.isConditionMet = gbb.utility.checkConditions(cartWeight, weightConditionObject, goToNextStep);
                }

                let isAtleastOneTierSatisifed = false;
                if (element.condition == "equalTo") {
                    switch (element.type) {
                        case "quantity":
                            isAtleastOneTierSatisifed = allValuesFromConditions.includes(parseInt(cartQuantity))
                            break;
                        case "amount":
                            isAtleastOneTierSatisifed = allValuesFromConditions.includes(parseInt(cartAmount))
                            break;
                        case "weight":
                            isAtleastOneTierSatisifed = allValuesFromConditions.includes(parseInt(cartWeight))
                            break;
                    }
                }


                if (isAtleastOneTierSatisifed) {
                    result.isConditionMet = true;
                    break;
                }


                if (!result.isConditionMet) {
                    result.message = gbb.utility.getConditionMessage(element.type, element.condition);
                    let quantityVariables = gbb.utility.getQuantityVariables(element, cartResult, additionalInfo);
                    let amountVariables = gbb.utility.getAmountVariables(element, cartResult, additionalInfo);
                    let weightVariables = gbb.utility.getWeightVariables(element, cartResult, additionalInfo);
                    let message = gbb.utility.replaceConditionVariables(result.message, quantityVariables, amountVariables, weightVariables);
                    if (pageType && pageType == "MULTIPLE_CATEGORY") {
                        // scroll to categoryId
                        // write after clicking on category
                        // -100 for the top
                        // dont click on category if it's already clicked
                        if (gbb.utility.isCategoryOpen(categoryId)) {
                            gbb.utility.debugConsole("category already open")
                        } else {
                            gbb.$(`div[categoryId='${categoryId}']`).click()
                        }
                        // gbb.utility.scrollToCategory(categoryId, -100)

                        gbb.f.renderConditionNotificationToast(message, categoryTitle);
                    } else {
                        gbb.f.renderConditionNotificationToast(message);
                    }
                    break;
                }
            }
            return result;
        },
        getPageRankByPageId: function (pageId) {
            try {
                let navigationItems = gbb.state.navigationItems || [];
                let item = navigationItems.find(item => item?.id == pageId);
                return item?.rank;
            } catch (error) {
                gbb.utility.debugConsole("error in getPageRankByPageId", error)
            }
        },
        checkConditionsOnNext: async function (noteAttribute) {
            //this function is fired when we're going from current page to next page
            //if it's a single catgory page -> fire checkSingleCategoryPageConditions function
            //multiple category page ->
            //->check if page level conditions are enabled
            //if not enabled-> fire checkMultipleCategoryPageCondition function
            //else -> fire checkSingleCategoryPageConditions function
            //personalization page -> relevant conditions
            let condition;
            let pageType = gbb?.gbbAddProductsPage?.state?.productPageData?.pageType
            let options = {
                productAmount: "",
                productQuantity: "",
                goToNextStep: true
            }
            if (noteAttribute == "personalizePage" || gbb.state.currentPageId == 'personalizationPage') {
                condition = gbb.utility.checkPersonalizePageConditions();

            } else if (pageType && pageType == "MULTIPLE_CATEGORY") {
                let globalConditions = gbb.gbbAddProductsPage.state.productPageData?.isPageConditionsEnabled;
                if (!globalConditions) {
                    let categories = gbb.gbbAddProductsPage.state.productPageData.categories;
                    categories = gbb.utility.convertObjectToArray(categories)
                    condition = await gbb.utility.checkMultipleCategoryPageConditionOnNext(noteAttribute, categories);
                } else {
                    // condition = await gbb.utility.checkSingleCategoryPageConditions(noteAttribute, "", "", true);
                    condition = await gbb.utility.checkSingleCategoryPageConditions(noteAttribute, options);
                }

            } else {
                // condition = await gbb.utility.checkSingleCategoryPageConditions(noteAttribute, "", "", true);
                condition = await gbb.utility.checkSingleCategoryPageConditions(noteAttribute, options);
            }
            return condition;
        },
        checkPersonalizePageConditions: function () {
            let result = {
                isConditionMet: true, //because if text message and video message are both disabled -> isConditionMet should be true
                message: ""
            }
            if (gbb?.settings?.giftMessage?.isGiftMessageMandatory && (!gbb.gbbPersonalizePage.state?.giftMessage || gbb.gbbPersonalizePage.state?.giftMessage?.trim().length == 0)) {
                let warningMsg = gbb.$(".gbbPageBody").find(".gbbGiftMessageV2RequiredWarning");
                warningMsg.css("display", "block")
                result.isConditionMet = false;
                return result;
            } else {
                let warningMsg = gbb.$(".gbbPageBody").find(".gbbGiftMessageV2RequiredWarning");
                warningMsg.css("display", "none")
                result.isConditionMet = true;
            }

            let isEmailInfoValid = gbb.gbbPersonalizePage.f.verifyEmailFields();
            if (!isEmailInfoValid) {
                result.isConditionMet = false
            }
            let isAddonEnabled = gbb.gbbAddonProducts.state.isEnabled 
            if (isAddonEnabled) {
                let isAddonPageConditionMet = gbb.gbbAddonProducts.f.checkAddonsConditionsOnNext();
                if (!isAddonPageConditionMet) {
                    result.isConditionMet = false;
                    let message = gbb.utility.renderLanguageValue(gbb.settings?.languageData?.addons?.addonProductsMandatory) || "Please add atleast one product1"
                    gbb.f.renderConditionNotificationToast(message)
                }

            }
            return result;
        },
        getQuantityVariables: function (element, cartResult, additionalInfo) {
            let quantityVariables = {};

            let conditions = additionalInfo?.conditions || [];
            let isNextValueSet = false;

            if (element.condition == "equalTo") {
                for (let j = 0; j < conditions.length; j++) {
                    let item = conditions[j];
                    if ((parseInt(item.value) >= parseInt(cartResult.quantity)) && !isNextValueSet) {
                        // nextConditionalQuantity = item.value;
                        isNextValueSet = true;
                        element.value = item.value
                    }
                }
            }

            quantityVariables.currentQuantity = cartResult.quantity;
            quantityVariables.conditionQuantity = element.value;
            quantityVariables.remainingQuantity = Math.abs(quantityVariables.currentQuantity - quantityVariables.conditionQuantity);
            return quantityVariables;
        },
        getAmountVariables: function (element, cartResult, additionalInfo) {
            let amountVariables = {};
            let conditions = additionalInfo?.conditions || [];
            let isNextValueSet = false;

            if (element.condition == "equalTo") {
                for (let j = 0; j < conditions.length; j++) {
                    let item = conditions[j];
                    if ((parseInt(item.value) >= parseInt(cartResult.amount)) && !isNextValueSet) {
                        element.value = item.value
                        isNextValueSet = true;
                    }
                }
            }
            amountVariables.currentAmount = cartResult.amount;
            amountVariables.conditionAmount = element.value;
            amountVariables.remainingAmount = Math.abs(amountVariables.currentAmount - amountVariables.conditionAmount);
            return amountVariables;
        },
        getWeightVariables: function (element, cartResult, additionalInfo) {
            let weightVariables = {};

            let conditions = additionalInfo?.conditions || [];
            let isNextValueSet = false;

            if (element.condition == "equalTo") {
                for (let j = 0; j < conditions.length; j++) {
                    let item = conditions[j];
                    if ((parseInt(item.value) >= parseInt(cartResult.weight)) && !isNextValueSet) {
                        element.value = item.value
                        isNextValueSet = true;
                    }
                }
            }

            weightVariables.currentWeight = cartResult.weight;
            weightVariables.conditionWeight = element.value + String(element.unit);
            weightVariables.remainingWeight = Math.abs(weightVariables.currentWeight - weightVariables.conditionWeight) + String(element.unit);
            return weightVariables;
        },
        replaceConditionVariables: function (message, quantityVariables, amountVariables, weightVariables) {
            for (let [key, value] of Object.entries(quantityVariables)) {
                if (!value) {
                    value = ""
                }
                let VariableName = "##" + key + "##"
                //let VariableName = JSON.stringify(`}`)
                message = message.replace(new RegExp(`${VariableName}`, 'g'), value);
            }
            for (let [key, value] of Object.entries(amountVariables)) {
                if (!value) {
                    value = ""
                }
                let VariableName = "##" + key + "##"
                value = gbb.utility.getCurrencySymbol() + "" + value;
                message = message.replace(new RegExp(`${VariableName}`, 'g'), value);
            }
            for (let [key, value] of Object.entries(weightVariables)) {
                if (!value) {
                    value = ""
                }
                let VariableName = "##" + key + "##"
                message = message.replace(new RegExp(`${VariableName}`, 'g'), value);
            }
            return message;
        },
        getStepCondtions: function (noteAttribute) {
            let conditions = [];

            let addProductsPageArr = ADDPRODUCT_PAGES_LIST;
            let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey

            // convert this to if else
            if (addProductsPageArr.includes(noteAttribute)) {
                conditions = gbb.settings.stepsConfigurationData[keyAttribute].conditions || [];
            }

            return conditions;
        },
        getStepConditionsForMultipleCategoriesPage: function (categories, category) {
            let result = {
                categoryTitle: "",
                conditions: []
            }
            for (let index = 0; index < categories.length; index++) {
                let ele = categories[index];
                if (ele.categoryId == category) {
                    result.conditions = ele.conditions;
                    result.categoryTitle = ele.title || ""
                    break;
                }
            }
            return result;
        },
        getStepCartData: async function (noteAttribute, category, pageType) { //gets the total amount of the products added in a specific step
            let result = {
                amount: 0,
                quantity: 0,
                weight: 0
            }
            let cartData = await gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage() //if we should use the cart state

            let items = cartData.items;
            for (let index = 0; index < items.length; index++) {

                let item = items[index];
                if (item && item.properties && item.properties._boxProduct == noteAttribute) {

                    if (pageType && pageType == "MULTIPLE_CATEGORY") {
                        //document - metch category if MULTIPLE_CATEGORY page, 
                        if (item.properties._Category != category) {
                            continue
                        }
                    }

                    let amount = gbb.utility.formatPriceWithoutSymbol(item.price);
                    amount = amount * item.quantity;
                    result.amount += amount;
                    result.quantity += item.quantity
                    result.weight += item.weight * item.quantity
                }
            }
            return result;
        },
        executeRedirectAction: function () {
            try {

                let regionalLocale = gbb.utility.getRegionalLocaleFromUrl();
                if (gbb.settings.app.stackDiscounts) {
                    let discountString = gbb.gbbBrowser.prepareDiscountString();
                    if (discountString) {
                        gbb.gbbDiscountComponent.state.discountCode = discountString;
                    }
                }

                if (gbb.settings.app.redirectToScript && gbb.settings.app.redirectToScript?.trim()?.length != 0) {
                    const codeString = gbb.settings.app.redirectToScript;
                    eval(codeString);
                } else if (gbb.settings.app.redirectToCheckoutEnabled) {
                    if (gbb.gbbDiscountComponent.state.discountCode) {
                        // https://{domain}/discount/{discountCode}?redirect=/checkout
                        window.location.href = window.location.origin + regionalLocale + "/cart/checkout?discount=" + gbb.gbbDiscountComponent.state.discountCode;
                        // window.location.href =  window.location.origin + "/discount/" + gbb.gbbDiscountComponent.state.discountCode+"?redirect=/checkout";
                    }
                    else {
                        window.location.href = window.location.origin + regionalLocale + "/cart/checkout";
                    }
                } else if (gbb.settings.app.redirectToCartEnabled) {
                    window.location.href = window.location.origin + regionalLocale + "/cart/";
                } else {
                    if (gbb.gbbDiscountComponent.state.discountCode) {
                        window.location.href = window.location.origin + regionalLocale + "/cart/checkout?discount=" + gbb.gbbDiscountComponent.state.discountCode;
                        // window.location.href =  window.location.origin + "/discount/" + gbb.gbbDiscountComponent.state.discountCode+"?redirect=/checkout";
                    }
                    else {
                        window.location.href = window.location.origin + regionalLocale + "/cart/checkout";
                    }
                }
            } catch (err) {
                gbb.utility.debugConsole(err + "inside executeRedirectAction");
            }
        },

        loadCheckoutPage: async function () {

            if (gbb.state.giftBoxCartData?.items?.length > 0 && gbb.settings?.discountsData?.isDiscountEnabled && gbb.gbbDiscountComponent?.state?.discountCode) {
                // window.location.href = window.location.origin + "/discount/" + gbb.gbbDiscountComponent.state.discountCode + "?redirect=" + window.location.pathname
                // const discountResp = await fetch("/discount/" + gbb.gbbDiscountComponent.state.discountCode);
                // if (response.status == 200) {
                // window.location.href = window.location.origin + "/cart/checkout"
                // gbb.utility.executeRedirectAction();
                // }

                await fetch("/discount/" + gbb.gbbDiscountComponent.state.discountCode)
                    .then(resp => resp.json())
                    .then((response) => {
                        //response.data
                        if (response.data.isAutomatic) {
                            setTimeout(() => {
                                gbb.utility.executeRedirectAction();
                            }, 1000);
                        } else {
                            gbb.utility.executeRedirectAction();
                        }
                    }).catch((err) => {
                        gbb.utility.debugConsole(err);
                        gbb.utility.executeRedirectAction();
                    })

                return;
            }

            gbb.utility.executeRedirectAction();
        },
        getVariantDetailsFromCurrentProductsDataSet: function (variantId,origin) { 
            try {
                let variantDetails = gbb.state.currentProductsDataSetForVariants[variantId];
                if (origin == 'addonProducts') {
                    variantDetails = gbb.gbbAddonProducts.state.currentProductsDataSetForVariants_addons[variantId]
                }
                return variantDetails;
            } catch (error) {
                gbb.utility.debugError("error in getVariantDetailsFromCurrentProductsDataSet",error)
            }
        },
        getProductDetailsFromState: function (productId, variantId) {
            let productDetails = {};
            let productsDbToSearchIn = gbb.gbbAddProductsPage.state.currentProductsDataset
            let addonProductsState = gbb.gbbAddonProducts.state
            let isAddonProductDataSetExists = addonProductsState?.addonProductsDataSet?.length > 0
            let isCurrentPageTypePersonalization = gbb.state.currentPageId == 'personalizationPage'
            let eligibleTierForAddons = addonProductsState?.eligibleTierForAddons || {}

            if (isCurrentPageTypePersonalization && Object.keys(eligibleTierForAddons).length>0 && isAddonProductDataSetExists) {
                productsDbToSearchIn = addonProductsState?.addonProductsDataSet
            }

            for (let i = 0; i < productsDbToSearchIn?.length; i++) {
                let product = productsDbToSearchIn[i];
                if (product.id == productId) {
                    let variantDetails;
                    productDetails = product;
                    let isDisplayVariantsAsIndividualProductsEnabled = gbb.gbbAddProductsPage.state.displayVariantsAsIndividualProducts

                    if (isCurrentPageTypePersonalization) {
                        let activeTierIndex = eligibleTierForAddons?.tierIndex
                        isDisplayVariantsAsIndividualProductsEnabled = addonProductsState.tiers[activeTierIndex]?.displayVariantsAsIndividualProducts_addons// read from addon
                    }

                    if (variantId && isDisplayVariantsAsIndividualProductsEnabled) {
                        let origin = isCurrentPageTypePersonalization ? "addonProducts": null
                        variantDetails = gbb.utility.getVariantDetailsFromCurrentProductsDataSet(variantId, origin)
                        gbb.utility.debugConsole("variants name is ", variantDetails.title);
                        product.variants = [variantDetails];
                        product = gbb.gbbAddProductsPage.f.updateProductDataWithFirstVariantData(product);
                        productDetails = product;
                        break;  // Exit the loop once we found the product
                    }
                }
            }
            return productDetails;
        },
        closeVariantsModal: function () {
            try {
                gbb.utility.slider.state.slideIndex = 1;
                gbb.state.variantCustomProperties = {};
                gbb.state.currentModalProductData = {};
                gbb.gbbProductFormStep.state.formSubmissionData = {};
                // gbb.$("body").css("overflow-y", "auto");
                gbb.$("body").find(".gbbProductVariantModalContainer").remove()
                gbb.$("body").find(".gbbProductVariantModalMainContainer").remove()
                gbb.$("body").css("overflow-y", DEFAULT_BODY_OVERFLOW_VALUE);
                gbb.gbbBrowser.emitCustomEvent({
                    eventName: "gbb-variants-modal-close",
                })
            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        productDetailsWith_VariantId_Or_ProductIdAsKey: function (products, extraInfo) {
            //products is an objects with product handle as key
            //this function returns an object with product id as key
            let productsWithIdAsKey = {};
            for (let [key, value] of Object.entries(products)) {
                let product = value
                //if product has variants
                if (product.variants.length > 0) {

                    // if product.variants.length == 1;
                    // change product.featured_image to product.variants[0].image

                    //if there is only one variant in the product
                    // then change the product.featured_image to an image
                    // using product.media[]
                    if (product.variants.length == 1) {
                        let getNewImageAndMediaObjectWhenOnlyOneVariant = gbb.utility.getNewImageAndMediaObjectWhenOnlyOneVariant(product);
                        product.featured_image = getNewImageAndMediaObjectWhenOnlyOneVariant.newFeaturedImage;
                        product.media = getNewImageAndMediaObjectWhenOnlyOneVariant.newMedia;
                        product.images = getNewImageAndMediaObjectWhenOnlyOneVariant.newImages
                    }

                    for (let i = 0; i < product.variants.length; i++) {
                        product.variants[i]["productTags"] = product.tags;
                        product.variants[i].variant_id = product.variants[i].id;
                        product.variants[i].image = product.variants[i].featured_image?.src;
                        if (!product.variants[i].image) {
                            product.variants[i].image = product.featured_image
                        }

                        if (extraInfo == undefined || product.variants[i].title == "" || product?.variants?.length == 1) {
                            product.variants[i].title = product.variants[i].name
                        } else if (!extraInfo.shouldVariantTitleBeConvertedToProductTitle) {
                            product.variants[i].title = product.variants[i].title
                        }
                        product.variants[i].product_id = product.id
                        product.variants[i].productHandle = product.handle;
                        if (product.selling_plan_groups) {
                            //product.variants[i].sellingPlanDetails = gbb.utility.getSellingPlanDetailsForVariant(product?.selling_plan_groups, product.variants[i]?.selling_plan_allocations)
                            product.variants[i].selling_plan_groups = product.selling_plan_groups || [];
                            product.variants[i].selling_plan_allocations = product?.variants[i]?.selling_plan_allocations || [];
                        }
                        productsWithIdAsKey[product.variants[i].id] = product.variants[i];

                    }
                }

                //if product has no variants
                else {
                    productsWithIdAsKey[product.id] = product;
                }
            }

            return productsWithIdAsKey;
        },
        doesThisProductHaveConditions: function (currentProductProperties) {
            // const pagesWhichHaveConditionsOnPages = 
            const categoriesWhichHaveConditions = gbb.gbbAddProductsPage.state.categoriesWhichHaveConditions;
            const pagesWhichHaveConditionsOnPages = gbb.gbbAddProductsPage.state.pagesWhichHaveConditionsOnPages;
            if (pagesWhichHaveConditionsOnPages.includes(currentProductProperties._boxProduct) || categoriesWhichHaveConditions.includes(currentProductProperties._Category)) {
                return true;
            } else {
                return false;
            }

        },
        prepareMsgAttributesForCart: function () {
            try {
                let videoRecordId;
                let videoToggle = gbb.$(".gbbVideoMsgCheckboxField").is(":checked")
                if (videoToggle == false) {
                    videoRecordId = "";
                    gbb.gbbVideoMsg.state.uploadedVideoId = ""
                } else {
                    videoRecordId = gbb.gbbVideoMsg?.state?.uploadedVideoId;
                }

                gbb.gbbVideoMsg.state.uploadedVideoId = videoRecordId;

                if (!gbb.gbbPersonalizePage.state.giftMessage && !gbb.gbbVideoMsg.state.uploadedVideoId) {
                    quantity = 0;
                }



                return {
                    message: gbb.gbbPersonalizePage.state.giftMessage,
                    recipientName: gbb.gbbPersonalizePage.state.recipientName,
                    senderName: gbb.gbbPersonalizePage.state.senderName,
                    customerUploads: gbb.gbbPersonalizePage.state.customerUploadsResponse,
                    _videoMsgId: videoRecordId ? videoRecordId : null,
                    email: gbb.gbbVideoMsg?.state?.emailId,
                    _gbbEmailDeliveryOption: gbb?.gbbPersonalizePage?.state?.emailDeliveryOption,
                    _gbbEmailDeliveryDate: gbb?.gbbPersonalizePage?.state?.emailDatePicker ? gbb?.gbbPersonalizePage?.state?.emailDatePicker?.val() : "",
                }
            } catch (e) {
                gbb.utility.debugConsole(e)
                return false
            }
        },
        getActiveCurrencyRate: function () {
            let currencyRate = 1;
            if (window.Shopify && window.Shopify.currency && window.Shopify.currency.rate) {
                currencyRate = window.Shopify.currency.rate;
            }
            return currencyRate;
        },
        multiplyByBundleQuantity: function (cartData) {
            let cart = { ...cartData }
            cartData.bundleQuantity = cartData.boxQuantity || 1;
            let bundleQuantity = cartData?.bundleQuantity || 1;

            if (bundleQuantity > 1) {
                cart.items.forEach((item) => {
                    item.quantity = item.quantity * bundleQuantity;
                });
                cart.item_count = cart.item_count * bundleQuantity;
                cart.total_price = cart.total_price * bundleQuantity;
            }
            return cart;
        },
        applySellingPlanToAllCartItems: function (cartData) {
            let subscriptionPlan = gbb.gbbBrowser.getSubscriptionPlan();
            if (subscriptionPlan) {
                for (let i = 0; i < cartData.items.length; i++) {
                    delete cartData.items[i]?.selling_plan_allocations;
                    delete cartData.items[i]?.selling_plan_groups;
                    delete cartData.items[i]?.sellingPlanDetails;
                    cartData.items[i].selling_plan = parseInt(subscriptionPlan);
                }
            }
            return cartData;
        },
        applySellingPlanToAllCartItemsV2: function (cartData) {
            let activeSellingPlanId = gbb.gbbSubscriptionProductsPage.state.activeSellingPlanId
            if (activeSellingPlanId) {
                for (let i = 0; i < cartData.items.length; i++) {
                    delete cartData.items[i]?.selling_plan_allocations;
                    delete cartData.items[i]?.selling_plan_groups;
                    delete cartData.items[i]?.sellingPlanDetails;
                    cartData.items[i].selling_plan = parseInt(activeSellingPlanId);
                }
            }
            return cartData
        },
        checkIfBrandingShouldBeVisible: function (type) {
            try {

                // createdAt is more than 2months;
                let todayDate = new Date();
                let createdAt = new Date(gbb.settings.merchantInfo.createdAt);

                let storeIsOld = false;
                let diffTime = Math.abs(todayDate - createdAt);

                let diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                if (diffDays > 14) {
                    storeIsOld = true
                }

                if (!gbb.settings.merchantInfo?.isSubscription && storeIsOld) {
                    return false;
                }

                if (!gbb.settings?.merchantInfo?.isSubscription) {
                    return true;
                }
                if (gbb.settings?.merchantInfo?.isSubscription && gbb.settings?.merchantInfo?.isSubscription.name.search('Free') !== -1 && !type && type !== 'checkout') {
                    return true;
                }
                return false;
            } catch (error) {
                gbb.utility.debugConsole("error in checkIfBrandingShouldBeVisible", error);
                return false;
            }
        },
        renderPoweredByLabel: function () {
            let gbbPoweredByLabel = gbb.$("<a>")
                .attr("href", "https://apps.shopify.com/bundle-builder").attr("target", "_blank")
                .css("text-align", "end").css("display", "block").css("color", "black").css("font-size", "14px").css("text-decoration", "none");
            gbbPoweredByLabel.text("✨Powered By Easy Bundles✨");
            return gbbPoweredByLabel;
        },
        triggerSlackNotification: function (jsonBody) {
            jsonBody = jsonBody || {};

            gbb.utility.debugConsole("jsonBody", jsonBody)
            jsonBody = {
                errorStack: jsonBody?.stack || jsonBody?.error?.stack,
                errorName: jsonBody?.name || jsonBody?.error?.name,
                errorMessage: jsonBody?.message || jsonBody?.error?.message,
                sessionStorage: gbb.gbbBrowser.getCartDataFromSessionStorage(),
                ...jsonBody
            }

            const tempObj = {
                url: window.location.href,
                function: arguments?.callee?.caller?.name || "unknown",
                error: JSON.stringify(jsonBody)
            }


            let url = gbb.settings.SERVER_URL + "/api/utility/slackNotification";
            fetch(url, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(tempObj),
            }).then((response) => {
                gbb.utility.debugConsole("response", response)
            }).catch((error) => {
                gbb.utility.debugConsole("error", error)
            })

        },
        /** overwrites particular html tags 
        * example: overwrite tab/document name
        * @returns void 
        */
        setBuilderPageHTMLData_SEO: function () {
            try {
                // page
                let seoData = gbb.settings?.bundleSettings.builderPageSeoData || [];

                // 
                // example
                // [{
                //     target: "title",
                //     value: "Bundle Builder"
                //     // attributeToOverwrite field is not needed as attribute to overwrite as it's a text
                // },
                // {
                //     target: "meta[name='description']",
                //     value: "Bundle Builder",
                //     attributeToOverwrite: "content"
                // }]

                seoData.forEach((data) => {
                    if (data.attributeToOverwrite && data.target && data.value) {
                        // gbb.$(data.target).attr("content", data.value);
                        gbb.$(data.target).attr(data.attributeToOverwrite, data.value);
                    }
                    else if (data.target && data.value) {
                        gbb.$(data.target).text(data.value);
                    }
                })

            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        stringifyError: function (error) {
            const properties = Object.getOwnPropertyNames(error);
            const stringifiedError = JSON.stringify(
                (function () {
                    const obj = {};
                    for (let i = 0; i < properties.length; i++) {
                        const prop = properties[i];
                        obj[prop] = error[prop];
                    }
                    return obj;
                })()
            );
            return stringifiedError;
        },
        cleanUpProperties: function (cart) {
            let cartData = { ...cart }
            let propertiesToRemove = ["addProductsPage", "categoryId", "_Category", "category", "_boxProduct", "productPersonalizationMetaData", "_uniqueGbbItemKey"]
            let conditionalPropertiesToRemove = [];
            if (!gbb?.settings?.bundleSettings?.showCategoryNamesInLineItem) {
                conditionalPropertiesToRemove.push("_CategoryName");
                // propertiesToRemove.push("discount")
            }

            // now lets combine 
            propertiesToRemove = [...propertiesToRemove, ...conditionalPropertiesToRemove];

            cartData.items.forEach((item) => {
                propertiesToRemove.forEach((property) => {
                    if (item.properties && item.properties[property]) {
                        delete item.properties[property];
                    }
                });
            })
            return cartData;
        },
        addCustomProperties: function (cartData, propertiesToAdd,addQtyOfProduct=false) {
            try {
                cartData.items.forEach((item) => {
                    for (let [key, value] of Object.entries(propertiesToAdd)) {
                        let valueToAdd = addQtyOfProduct ? `${value}_${item.quantity}` : value;
                        item.properties[key] = valueToAdd
                    }
                })
                return cartData
            } catch (error) {
                gbb.utility.debugConsole('error in addCustomProperties',error)
            }
        },
        checkIfRemoveButtonShouldBeAppended: function (variantId, pageIdTheProductWasAddedFrom) {
            try {
                let boxCartDataInSessionStorage = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage();
                if (boxCartDataInSessionStorage) {
                    let items = boxCartDataInSessionStorage.items || [];
                    let currentItem = items.find((item) => item.variant_id == variantId && pageIdTheProductWasAddedFrom == item.properties["_boxProduct"]);
                    // let currentite,
                    if (currentItem) {
                        let item = { ...currentItem };
                        let properties = Object.keys(item.properties) || [];
                        if (properties.includes("_DefaultProduct")) {
                            return false;
                        }

                        if (item.properties._boxProduct == "giftMessage" && gbb.state.currentPageId !== "personalizationPage") {
                            if (gbb.settings.stepsConfigurationData.personalizationData.giftMessage.isGiftMessageMandatory) {
                                return false;
                            } else {
                                return true;
                            }
                        }
                        if (gbb.state.currentPageId == 'personalizationPage' && item.properties._boxProduct == 'addonProduct'){
                            return true;
                        }
                        if (pageIdTheProductWasAddedFrom == gbb.state.currentPageId) {
                            if (item.properties && item.properties._boxProduct != gbb.state.currentPageId) {
                                // now check if this doesThisProductHaveConditions
                                let doesThisProductHaveConditions = gbb.utility.doesThisProductHaveConditions(item.properties);
                                let isConditionalProductFilteringEnabled = gbb.settings.stepsConfigurationData.conditionalLogic.isEnabled || gbb.settings.stepsConfigurationData.conditionalLogic.rules.length > 0
                                gbb.utility.debugConsole("doesThisProductHaveConditions", doesThisProductHaveConditions)
                                if (doesThisProductHaveConditions || isConditionalProductFilteringEnabled) {
                                    return false;
                                } else {
                                    return true;
                                }
                            } else {
                                return true;
                            }
                        } else {
                            return false;
                        }
                    }
                }
                return true;
            } catch (err) {
                gbb.utility.debugConsole(err + "inside checkIfRemoveButtonShouldBeAppended");
            }
        },
        updateBoxIdInCartData: function (cartData) {
            try {

                let currentBoxIdFromCart = gbb.gbbBrowser.state.boxIdOffset || 0;
                if (currentBoxIdFromCart == 0) {
                    gbb.utility.debugConsole("Adding to cart....")
                    return cartData;
                } else {
                    gbb.utility.debugConsole("Aheem. Looks like theres already a box in the cart.")
                    gbb.utility.debugConsole("next boxId starts from->", currentBoxIdFromCart + 1)
                    let cartDataUpdated = { ...cartData };

                    let boxKeys = Object.keys(cartDataUpdated?.boxes) || [];

                    for (let i = 0; i < boxKeys.length; i++) {
                        let boxItem = cartDataUpdated.boxes[boxKeys[i]];

                        boxItem.items.forEach(item => {
                            const existingBoxID = item.properties["Box ID"];
                            item.properties["Box ID"] = parseInt(existingBoxID) + currentBoxIdFromCart;
                        });
                    }
                    return cartDataUpdated;
                }
            } catch (error) {
                gbb.utility.debugConsole("error in updateBoxIdInCartData", error)
                return cartData;
            }
        },
        removeAlreadyAddedProductsFromShopifyCart: async function () {
            try {
                let bundleName = gbb?.settings?.stepsConfigurationData?.bundleName;
                let boxIdOffset = parseInt(gbb.gbbBrowser.state.boxIdOffset);
                let qty = 0;
                let data = { updates: {} };
                let result = true;
                if (bundleName) {
                    let shopifyCartItems = await gbb.shopifyUtility.getCart();
                    shopifyCartItems = shopifyCartItems.items;
                    if (shopifyCartItems.length > 0) {
                        for (let i = 0; i < shopifyCartItems.length; i++) {
                            let item = shopifyCartItems[i];
                            let itemBundleName = item.properties["Bundle"];
                            let itemBoxId = parseInt(item.properties["Box ID"]);
                            if (itemBundleName && itemBundleName == bundleName && itemBoxId > boxIdOffset) { //tbd more conditions?
                                data.updates[shopifyCartItems[i]["key"]] = qty;
                            }
                        }
                        if (Object.keys(data?.updates)?.length > 0) {
                            result = await gbb.shopifyUtility.updateCart(data);
                        }
                    }
                }
                return result;
            } catch (err) {
                gbb.utility.debugConsole(err);
                return false;
            }
        },

        renderPreparingBundleModal: function () {
            try {
                const gbbPreparingBundleMainContainer = gbb.$("<div>").addClass("gbbPreparingBundleMainContainer");
                const gbbPreparingBundleContainerModal = gbb.$("<div>").addClass("gbbPreparingBundleContainerModal");

                const gbbPreparingBundleHeader = gbb.$("<div>").addClass("gbbPreparingBundleHeader");
                gbbPreparingBundleHeader.text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.general?.preparingBundleText) || "Preparing Bundle...");

                let preparingBundleGif = gbb.settings.merchantInfo?.customSettings?.preparingBundleGif || "https://d3ks0ngva6go34.cloudfront.net/public/packagingbundle.gif";
                const gbbPreparingBundleGifContainer = gbb.$("<div>").addClass("gbbPreparingBundleGifContainer");
                const gbbPreparingBundleGif = gbb.$("<img>").addClass("gbbPreparingBundleGif").attr("src", preparingBundleGif);

                gbbPreparingBundleGifContainer.append(gbbPreparingBundleGif);

                gbbPreparingBundleContainerModal.append(gbbPreparingBundleHeader);
                gbbPreparingBundleContainerModal.append(gbbPreparingBundleGifContainer);
                gbbPreparingBundleMainContainer.append(gbbPreparingBundleContainerModal);
                gbb.$("body").append(gbbPreparingBundleMainContainer);
                gbb.f.applyFontToPreparingBundlePopup();
            } catch (err) {
                gbb.utility.debugConsole("error inside renderPreparingBundleModal:", err);
            }
        },

        renderUnavaibleProductsModal: async function (products) {
            const gbbUnavailableProductsMainContainer = gbb.$("<div>").addClass("gbbUnavailableProductsMainContainer");
            const gbbUnavailableProductsContainerModal = gbb.$("<div>").addClass("gbbUnavailableProductsContainerModal");

            const gbbCartProductsContainerHeader = gbb.$("<div>").addClass("gbbCartProductsContainerHeader");
            const gbbCartProductsContainerHeaderLabel = gbb.$("<div>").addClass("gbbCartProductsContainerHeaderLabel").text(gbb.settings?.languageData?.general?.productsNotAvailableText?.value || "Oops! Some products are not availble..");

            const gbbCartProductsContainerBody = gbb.$("<div>").addClass("gbbCartProductsContainerBody");

            const gbbCartModalProductsContainer = gbb.$("<div>").addClass("gbbCartModalProductsContainer");


            products.forEach((product) => {
                const gbbCartModalProductContainer = gbb.$("<div>").addClass("gbbCartModalProductContainer");
                //attach a data attriute to the product container
                gbbCartModalProductContainer.attr("productId", product?.product_id);
                gbbCartModalProductContainer.attr("variantId", product?.variant_id)

                const gbbCartProductImageContainer = gbb.$("<div>").addClass("gbbCartProductImageContainer");
                const gbbCartModalProductImage = gbb.$("<img>").addClass("gbbCartModalProductImage");
                gbbCartModalProductImage.attr("src", product.image);
                const gbbCartModalProductTextContainer = gbb.$("<div>").addClass("gbbCartModalProductTextContainer");

                const gbbCartModalProductTitleContainer = gbb.$("<div>").addClass("gbbCartModalProductTitleContainer");
                const gbbCartModalProductTitle = gbb.$("<div>").addClass("gbbCartModalProductTitle");
                const gbbCartModalProductQuantity = gbb.$("<div>").addClass("gbbCartModalProductQuantity");

                const gbbCartModalProductPriceQtyContainer = gbb.$("<div>").addClass("gbbCartModalProductPriceQtyContainer");
                const gbbCartModalProductPrice = gbb.$("<div>").addClass("gbbCartModalProductPrice");
                //a button to remove the product from the cart

                gbbCartModalProductTitle.text(product.title);
                gbbCartModalProductPrice.text(gbb.utility.formatPrice(product.price));
                gbbCartModalProductQuantity.text("x" + product.quantity);
                gbbCartProductImageContainer.append(gbbCartModalProductImage);

                gbbCartModalProductTitleContainer.append(gbbCartModalProductTitle);
                //gbbCartModalProductTitleContainer.append(gbbCartModalProductQuantity);

                gbbCartModalProductTextContainer.append(gbbCartModalProductTitleContainer);
                gbbCartModalProductPriceQtyContainer.append(gbbCartModalProductQuantity);
                gbbCartModalProductPriceQtyContainer.append(gbbCartModalProductPrice);
                gbbCartModalProductTextContainer.append(gbbCartModalProductPriceQtyContainer);

                gbbCartModalProductContainer.append(gbbCartProductImageContainer);
                gbbCartModalProductContainer.append(gbbCartModalProductTextContainer);
                gbbCartModalProductsContainer.append(gbbCartModalProductContainer);
            })

            gbbCartProductsContainerHeader.append(gbbCartProductsContainerHeaderLabel);

            gbbCartProductsContainerBody.append(gbbCartModalProductsContainer);

            let checkoutButtonText = gbb?.settings?.languageData?.general?.checkoutButtonText?.value || "Checkout";

            if (gbb.settings.app.redirectToCartEnabled && !gbb.settings.app.redirectToCheckoutEnabled) {
                checkoutButtonText = gbb?.settings?.languageData?.general?.addToCartButtonText?.value || "Add to Cart";
            }
            const gbbUnavailableProductsModalFooter = gbb.$("<div>").addClass("gbbUnavailableProductsModalFooter");
            const gbbUnavailableProductsModalFooterBackBtn = gbb.$("<div>").addClass("gbbUnavailableProductsModalFooterBackBtn");
            gbbUnavailableProductsModalFooterBackBtn.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.general?.backButtonText) || "Back to Bundle")
            gbbUnavailableProductsModalFooterBackBtn.css("background", gbb.settings.pageCustomizationData.cartFooter.cartFooterBackButtonColor);
            gbbUnavailableProductsModalFooterBackBtn.css("color", gbb.settings.pageCustomizationData.cartFooter.cartFooterBackButtonTextColor);
            gbbUnavailableProductsModalFooterBackBtn.on("click", async () => {
                gbbUnavailableProductsModalFooterBackBtn.addClass("gbbDisabled")
                gbbUnavailableProductsModalFooterCheckoutBtn.addClass("gbbDisabled")
                let removeProducts = await gbb.utility.removeAlreadyAddedProductsFromShopifyCart();
                gbbUnavailableProductsModalFooterBackBtn.removeClass("gbbDisabled")
                gbbUnavailableProductsModalFooterCheckoutBtn.removeClass("gbbDisabled")
                if (removeProducts) {
                    gbb.$("body").find(".gbbUnavailableProductsMainContainer").remove()
                }
                gbb.$("body").find(".gbbSummaryPageCheckoutButton").removeClass("gbbDisabled")

                gbb.$("body").find(".gbbSummaryPageCheckoutButton").text(checkoutButtonText);
                gbb.$("body").find(".gbbSummaryPageCreateNewBoxButton").removeClass("gbbDisabled")
            })

            const gbbUnavailableProductsModalFooterCheckoutBtn = gbb.$("<div>").addClass("gbbUnavailableProductsModalFooterCheckoutBtn");
            gbbUnavailableProductsModalFooterCheckoutBtn.text(checkoutButtonText)
            gbbUnavailableProductsModalFooterCheckoutBtn.css("background", gbb.settings.pageCustomizationData.summaryBlock.summaryBlockAddToCartButtonColor)
            gbbUnavailableProductsModalFooterCheckoutBtn.css("color", gbb.settings.pageCustomizationData.summaryBlock.summaryBlockAddToCartButtonTextColor)
            gbbUnavailableProductsModalFooterCheckoutBtn.on("click", async (event) => {
                event.preventDefault();
                event.stopPropagation();
                gbbUnavailableProductsModalFooterBackBtn.addClass("gbbDisabled")
                gbbUnavailableProductsModalFooterCheckoutBtn.addClass("gbbDisabled")
                gbbUnavailableProductsModalFooterCheckoutBtn.text(gbb.settings.languageData.general?.loadingCheckoutButtonText?.value || "Loading ...1")
                await gbb.utility.applyDiscountOnCheckout();
                gbb.gbbBrowser.clearCartDataFromSessionStorage();
                setTimeout(() => {
                    gbb.$("body").find(".gbbUnavailableProductsMainContainer").remove()
                }, 5000)
                await gbb.utility.loadCheckoutPage();
            })

            gbbUnavailableProductsModalFooter.append(gbbUnavailableProductsModalFooterBackBtn);
            gbbUnavailableProductsModalFooter.append(gbbUnavailableProductsModalFooterCheckoutBtn);

            const gbbUnavailableProductsModalDiscountsMayNotApplyText = gbb.$("<div>").addClass("gbbUnavailableProductsModalDiscountsMayNotApplyText");
            gbbUnavailableProductsModalDiscountsMayNotApplyText.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.general?.discountsMayNotApplyText) || "discounts may not be applied")

            gbbUnavailableProductsContainerModal.append(gbbCartProductsContainerHeader);
            gbbUnavailableProductsContainerModal.append(gbbCartProductsContainerBody);
            gbbUnavailableProductsContainerModal.append(gbbUnavailableProductsModalFooter);
            gbbUnavailableProductsContainerModal.append(gbbUnavailableProductsModalDiscountsMayNotApplyText);


            gbbUnavailableProductsMainContainer.append(gbbUnavailableProductsContainerModal);
            gbb.$("body").append(gbbUnavailableProductsMainContainer);
            gbb.f.applyFontToUnavailableProductsPopup();
        },

        handleBackButtonReload : function () {
            try {
                window.addEventListener("pageshow", function (event) {
                    var historyTraversal = event.persisted ||
                        (typeof window.performance != "undefined" &&
                            window.performance.navigation.type === 2);
                    if (historyTraversal) {
                        // Handle page restore.
                        //or just move the user to the first page of the app
                        // alert("historyTraversal")
                        //   gbb.gbbBrowser.redirectToFirstProductPage();
                        window.location.reload();
                    }
                });
            } catch (err) {
                gbb.utility.debugConsole("error inside handleBackButtonReload", err);
            }
        },

        renderActivatePricingPopup: function () {
            try {
                const gbbActivatePricingMainContainer = gbb.$("<div>").addClass("gbbActivatePricingMainContainer");
                const gbbActivatePricingContainerModal = gbb.$("<div>").addClass("gbbActivatePricingContainerModal");

                const gbbActivatePricingHeader = gbb.$("<div>").addClass("gbbActivatePricingHeader");
                const headerHtml = "<span>Oops! Seems like the bundle plan <br/> isn't setup correctly!</span>";
                gbbActivatePricingHeader.html(headerHtml);

                const gbbActivatePricingDescription = gbb.$("<div>").addClass("gbbActivatePricingDescription");
                const descriptionHtml = "<span>Please contact the merchant to complete <br/> your bundle purchase.</span>";
                gbbActivatePricingDescription.html(descriptionHtml);

                const gbbActivatePricingImgContainer = gbb.$("<div>").addClass("gbbActivatePricingImgContainer");
                const gbbActivatePricingImg = gbb.$("<img>").addClass("gbbActivatePricingImg").attr("src", "https://gift-box-builder-app4.s3.us-east-2.amazonaws.com/public/icons/activate_pricing_popup_image.png");

                const gbbActivatePricingButtonContainer = gbb.$("<div>").addClass("gbbActivatePricingButtonContainer");
                const gbbActivatePricingButton = gbb.$("<button>").addClass("gbbActivatePricingButton");
                gbbActivatePricingButton.text('Complete the setup');
                gbbActivatePricingButtonContainer.append(gbbActivatePricingButton);

                gbbActivatePricingButton.on("click", async () => {
                    window.open(`https://${gbb?.settings?.merchantInfo?.shopName}/admin/apps/10b4272bede142b02924feec498b4009/pricing`, "_blank");
                })

                const gbbActivatePricingPoweredByContainer = gbb.$("<div>").addClass("gbbActivatePricingPoweredByContainer");
                const poweredByLabelHtml = "<span>✨Powered by <b>EasyBundles</b>✨</span>";
                gbbActivatePricingPoweredByContainer.html(poweredByLabelHtml);

                const gbbActivatePricingNoteContainer = gbb.$("<div>").addClass("gbbActivatePricingNoteContainer");
                const noteLabelHtml = "<span>NOTE: Once the pricing is activated, refresh this page.</span>";
                gbbActivatePricingNoteContainer.html(noteLabelHtml);

                gbbActivatePricingImgContainer.append(gbbActivatePricingImg);
                gbbActivatePricingContainerModal.append(gbbActivatePricingImgContainer);
                gbbActivatePricingContainerModal.append(gbbActivatePricingHeader);
                gbbActivatePricingContainerModal.append(gbbActivatePricingDescription);
                gbbActivatePricingContainerModal.append(gbbActivatePricingButtonContainer);
                gbbActivatePricingContainerModal.append(gbbActivatePricingNoteContainer);
                gbbActivatePricingContainerModal.append(gbbActivatePricingPoweredByContainer);
                gbbActivatePricingMainContainer.append(gbbActivatePricingContainerModal);
                gbb.$("body").append(gbbActivatePricingMainContainer);

            } catch (err) {
                gbb.utility.debugConsole("error inside renderActivatePricingPopup", err);
            }
        },

        handleCheckoutClick: async function () {
            try {
                // if(gbb.utility.checkIfBrandingShouldBeVisible('checkout')) {
                //     gbb.utility.renderActivatePricingPopup();
                //     return;
                // }
                gbb.gbbBrowser.emitCustomEvent({
                    eventName: "gbb-checkout-initiated",
                })
                gbb.utility.handleBackButtonReload();

                await gbb.utility.removeZeroPriceBoxes();
                let cartData = gbb.gbbBrowser.getCartDataFromSessionStorage();
                if (!cartData || Object.keys(cartData?.boxes)?.length == 0) {
                    await gbb.utility.loadCheckoutPage();
                    return;
                }
                let isGiftMessageVirtualProduct = gbb.settings.bundleSettings?.isGiftMessageVirtualProduct || false;
                if (isGiftMessageVirtualProduct) {
                    // giftMessageNotAsProduct
                    // remove giftMessageProduct from cartData, and create a new array for it
                    // save this new cartData in session storage
                    // save new array with giftMessage in state
                    gbb.gbbPersonalizePage.f.removeGiftMessageFromSessionStorage(cartData);
                }

                gbb.utility.renderPreparingBundleModal();

                let addGiftMessageToNote = gbb.settings.app.addGiftMessageToNote;

                setTimeout(() => {
                    gbb.$("body").find(".gbbPreparingBundleMainContainer").remove()
                }, 6000)
                let addToCartResult = await gbb.gbbBrowser.addItemsToCart();


                if (addGiftMessageToNote) {
                    let getUpdatedCart = await gbb.shopifyUtility.getCart();
                    let messageToAppend = gbb.utility.extractGiftMessageFromCartItems(getUpdatedCart);
                    await gbb.shopifyUtility.updateCart({ note: messageToAppend })
                }

                
                // setTimeout(() => {
                //     // gbb.utility.renderPreparingBundleModal();
                //     gbb.$("body").find(".gbbPreparingBundleMainContainer").remove()
                // }, 1000)


                if (addToCartResult.data) {
                    await gbb.utility.applyDiscountOnCheckout();
                    gbb.gbbBrowser.clearCartDataFromSessionStorage();
                    setTimeout(() => {
                    // gbb.utility.renderPreparingBundleModal();
                        gbb.$("body").find(".gbbPreparingBundleMainContainer").remove()
                    }, 1000)
                    await gbb.utility.loadCheckoutPage();
                    gbb.gbbBrowser.emitCustomEvent({
                        eventName: "gbb-checkout-success",
                    })
                } else if (!addToCartResult.data && addToCartResult?.failedProductsArr?.length > 0) {
                    //failedProductsArr
                    gbb.utility.renderTemporaryLoadingSpinner("hide")
                    gbb.$("body").find(".gbbPreparingBundleMainContainer").remove()
                    await gbb.utility.renderUnavaibleProductsModal(addToCartResult.failedProductsArr);
                    gbb.gbbBrowser.emitCustomEvent({
                        eventName: "gbb-checkout-failed",
                        detail: {
                            failedProducts: addToCartResult.failedProductsArr
                        }
                    })
                }
                // else {
                //     await gbb.utility.loadCheckoutPage();
                // }

                

            } catch (err) {
                gbb.utility.debugConsole("error inside handleCheckoutClick:", err);
            }
        },

        applyDiscountOnCheckout: async function () {
            try {
                let cartData = gbb.gbbBrowser.getCartDataFromSessionStorage();
                if (gbb.gbbDiscountComponent.state.isAtleastOneDiscountActive) {
                    await gbb.utility.getDynamicDiscountCode()
                    // await gbb.utility.updateCart({ attributes: { ["gbbDiscountCode"]: gbb.gbbDiscountComponent.state.discountCode} });
                }
                cartData.attributes = {
                    ...cartData.attributes,
                    // "gbbDiscountCode": gbb.gbbDiscountComponent.state.isAtleastOneDiscountActive.discountCode
                    // "gbbDiscountCode":  gbb.gbbDiscountComponent.state.discountCode
                }

                cartData.attributes[`gbbDiscountCode-${gbb.state.bundleName}`] = gbb.gbbDiscountComponent.state.discountCode

                // updateCartAttributes
                if (cartData.attributes) {
                    await gbb.shopifyUtility.updateCart({ attributes: cartData.attributes });
                    gbb.gbbBrowser.emitCustomEvent({
                        eventName: "gbb-bundle-discount-applied",
                    })
                }
            } catch (err) {
                gbb.utility.debugConsole("err inside applyDiscountOnCheckout:", err);
            }
        },
        extractGiftMessageFromCartItems: function (updatedCart) {
            try {
                let cartItems = updatedCart.items;
                // gbb.utility.debugConsole("cartItems", cartItems)
                let messagesPresentInCart = [];
                let messageToAppend = "";
                let isGiftMessageVirtualProduct = gbb.settings.bundleSettings?.isGiftMessageVirtualProduct || false;
                // decision on giftMessageAsProduct
                if (!isGiftMessageVirtualProduct) {
                    for (let i = 0; i < cartItems.length; i++) {
                        let item = cartItems[i];
                        // go deep and check if there are properties to the product
                        // if there is a property, then check if it has a gift message
                        // properties.Message
                        if (item.properties && item.properties.Message) {
                            messagesPresentInCart.push({ "Box ID": item.properties["Box ID"], "Message": item.properties.Message, "To": item.properties["Recipient Name"], "From": item.properties["Sender Name"] })
                        }
                    }

                }

                if (isGiftMessageVirtualProduct) {

                    let items = gbb.state.giftMessageProductInActiveSession || [];
                    if (items) {
                        messagesPresentInCart = items;
                    }

                    // from notes
                    let existingCartNotes = updatedCart?.note || "";
                    messageToAppend += existingCartNotes;
                }

                //sort the messagesPresentInCart by Box ID
                messagesPresentInCart = messagesPresentInCart.sort((a, b) => {
                    return a["Box ID"] - b["Box ID"]
                })
                //now append the message with a ":" separator in between

                if (messageToAppend != "" && messagesPresentInCart.length > 0) {
                    messageToAppend += "|| "
                }

                for (let i = 0; i < messagesPresentInCart.length; i++) {
                    let item = messagesPresentInCart[i];
                    // messageToAppend += `${item["Box ID"]}: ${item.Message} | `

                    if (isGiftMessageVirtualProduct) { // condition for gift message not as product
                        // has a bug, which says same box ID
                        // if(item['Box ID']){
                        //     messageToAppend += `Box Id: ${item["Box ID"]}\n`
                        // }
                        if (item["Bundle Name"]) {
                            messageToAppend += `Bundle Name: ${item["Bundle Name"]}\n`
                        }
                    }

                    if (item.To) {
                        messageToAppend += `To ${item.To},\n`
                    }

                    messageToAppend += `${item.Message}.`

                    if (item.From) {
                        messageToAppend += `\nFrom ${item.From}.`
                    }


                    if (i != messagesPresentInCart.length - 1 && messagesPresentInCart.length > 1) {
                        messageToAppend += `|| `
                    }

                }

                return messageToAppend;
            } catch (err) {
                gbb.utility.debugConsole("error inside extractGiftMessageFromCartItems", err);
            }
        },
        isElementVisible: function (element) {
            try {
                const vanillaJsElement = gbb.$(element)[0];
                if (!vanillaJsElement) {
                    return false;
                }
                const rect = vanillaJsElement.getBoundingClientRect();
                // gbb.utility.debugConsole("isElementVisible rect", rect)
                const viewHeight = Math.max(document.documentElement.clientHeight, window.innerHeight);
                // gbb.utility.debugConsole("isElementVisible viewheight",viewHeight)
                return !(rect.bottom < 0 || rect.top - viewHeight >= 0);
            } catch (err) {
                gbb.utility.debugConsole("error inside isElementVisible", err);
            }
        },
        removeFirstCharacterIfUnderscore: function (str) {
            try {
                if (str.charAt(0) === '_') {
                    str = str.slice(1);
                }
                return str;
            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        returnOnlyAdminSelectedVariantOptions: function (product) {
            try {
                let result = [];
                const validValues = new Set();
                for (const variant of product?.variants) {
                    if (variant?.option1) {
                        validValues.add(variant.option1);
                    }
                    if (variant?.option2) {
                        validValues.add(variant.option2);
                    }
                    if (variant?.option3) {
                        validValues.add(variant.option3);
                    }
                }
                gbb.utility.debugConsole("validValues:", validValues);
                for (let i = 0; i < product?.options?.length; i++) {
                    let option = product?.options[i];
                    if (option) {
                        gbb.utility.debugConsole("option:", option);
                        const invalidValues = [];
                        for (let j = 0; j < option?.values?.length; j++) {
                            let value = option?.values[j] || "";
                            if (value && !validValues.has(value)) {
                                invalidValues.push(value);
                            }
                            gbb.utility.debugConsole("invalid values:", invalidValues)
                        }
                        product.options[i].values = product?.options[i]?.values?.filter((value) => !invalidValues.includes(value));
                    }
                }
                result = product.options;
                return result;
            } catch (err) {
                gbb.utility.debugConsole(err)
            }
        },
        convertFromStoreCurrencyToCustomer: function (amount) {
            try {
                let activeCurrencyRate = gbb.utility.getActiveCurrencyRate();
                let convertedAmount = parseFloat(amount * activeCurrencyRate).toFixed(2);
                return convertedAmount;
            } catch (err) {
                gbb.utility.debugConsole(err)
            }
        },
        convertFromCustomerCurrencyToStore: function (amount) {
            try {
                let activeCurrencyRate = gbb.utility.getActiveCurrencyRate();
                let convertedAmount = parseFloat(amount / activeCurrencyRate).toFixed(2);
                return convertedAmount;
            } catch (err) {
                gbb.utility.debugConsole(err)
            }
        },
        removeZeroPriceBoxes: async function () {
            try {
                let cartData = gbb.gbbBrowser.getCartDataFromSessionStorage();
                for (const boxId in cartData.boxes) {
                    const box = cartData.boxes[boxId];
                    if (box.total_price == 0) {
                        await gbb.gbbBrowser.clearRelevantBoxFromSessionStorage(boxId);
                    }
                }
            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        removeIframeTagsFromHtml: function (html) {
            try {
                let parser = new DOMParser();
                let doc = parser?.parseFromString(html, 'text/html');
                let iframeElements = doc?.getElementsByTagName('iframe');
                if (!iframeElements || iframeElements.length === 0) {
                    return html; // No <video> tags found, return the original HTML
                }
                for (let i = iframeElements.length - 1; i >= 0; i--) {
                    let iframeElement = iframeElements[i];
                    iframeElement.parentNode.removeChild(iframeElement);
                }
                let modifiedHtml = new XMLSerializer().serializeToString(doc);
                return modifiedHtml;
            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        adjustImageTagsInProductDescriptionHtml: function (html) {
            try {
                const parser = new DOMParser();
                const doc = parser?.parseFromString(html, 'text/html');

                const imgElements = doc?.getElementsByTagName('img');
                if (!imgElements || imgElements.length === 0) {
                    return html; // No <img> tags found, return the original HTML
                }

                for (let i = 0; i < imgElements.length; i++) {
                    const imgElement = imgElements[i];
                    imgElement.setAttribute('width', '100px');
                    imgElement.setAttribute('height', '100px');
                    imgElement.style.objectFit = 'contain';
                }

                const modifiedHtml = new XMLSerializer().serializeToString(doc);
                return modifiedHtml;
            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        getNewImageAndMediaObjectWhenOnlyOneVariant: function (product) {
            // return an object know as newFeaturedImage, newMedia,newImages
            try {
                //setting defaults
                let newFeaturedImage = product?.featured_image;
                let newMedia = product.media
                let newImages = product?.images;
                let theresAnImageOrMediaToVariant = product.variants[0]?.image || product.variants[0]?.featured_media?.id || product.variants[0]?.featured_media?.src ? true : false;
                if (product?.variants?.length === 1 && theresAnImageOrMediaToVariant) {
                    //reset the featured image to this variant's featured image
                    newFeaturedImage = product?.variants[0]?.image || product.variants[0]?.featured_image?.src;
                    // change the order of the media but mapping the src to the variant's featured image
                    let indexofNewImage = product?.media.findIndex((media) => media?.src === newFeaturedImage);
                    if (indexofNewImage > -1) {
                        // shuffle the array, so that the ovject with the new featured image is at the front of the array]
                        newMedia = product?.media;
                        let newMediaObject = newMedia.splice(indexofNewImage, 1)[0];
                        newMedia.unshift(newMediaObject);
                    }

                    // change the order of the images but mapping the src to the variant's featured image
                    indexOfImageInImagesArr = product?.images.findIndex((image) => newFeaturedImage.includes(image));
                    if (indexOfImageInImagesArr > -1) {
                        newImages = product?.images;
                        // newImages[indexOfImageInImagesArr] = product?.variants[0]?.image;
                        // unshift the new featured image to the front of the array
                        newImages.unshift(newFeaturedImage);
                    }
                }
                return {
                    newFeaturedImage,
                    newMedia,
                    newImages
                }

            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        isCategoryOpen: function (categoryId) {
            try {
                // Get the parent element
                const parentElement = gbb.$(".gbbCategoryBodyContainer" + categoryId);

                // Check if it exists and has children
                if (parentElement.length > 0) {
                    // Check if gbbProductsContainer is one of the children
                    const gbbProductsItemsContainer = parentElement.find(".gbbProductsItemsContainer");

                    if (gbbProductsItemsContainer.length > 0) {
                        // gbbProductsContainer is not empty
                        gbb.utility.debugConsole("category is open")
                        return true;
                    } else {
                        // gbbProductsContainer is empty
                        gbb.utility.debugConsole("category is not open")
                        return false;
                    }
                } else {
                    // The parent element doesn't exist or has no children
                    gbb.utility.debugConsole("couldnt find category")
                    return false;
                }
            } catch (err) {
                gbb.utility.debugConsole(err, "error in isCategoryOpen");
            }
        },
        convertToGrams: function (weight, weightUnit) {
            try {
                let weightInGrams = 0;
                let weightValue = JSON.parse(JSON.stringify(weight))
                switch (weightUnit) {
                    case "kg":
                    case "KILOGRAMS":
                        weightInGrams = weightValue * 1000;
                        break;
                    case "g":
                    case "GRAMS":
                        weightInGrams = weightValue;
                        break;
                    case "lb":
                    case "POUNDS":
                        weightInGrams = weightValue * 453.592;
                        //round it off
                        weightInGrams = Math.round(weightInGrams);
                        break;
                    case "oz":
                    case "OUNCES":
                        weightInGrams = weightValue * 28.3495;
                        //round it off
                        weightInGrams = Math.round(weightInGrams);
                        break;
                    default:
                        weightInGrams = weightValue;
                        break;
                }
                return weightInGrams;
            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        getCurrentProductPersonalization: function (product) {
            try {
                let isProductPersonalizationEnabled = gbb?.gbbAddProductsPage?.state?.productPersonalizationMap && gbb.gbbAddProductsPage.state.productPersonalizationMap[product.id] ? true : false;
                // gbb.gbbAddProductsPage.state.productPersonalizationData
                let productPersonalizationData = gbb?.gbbAddProductsPage?.state?.productPersonalizationMap && gbb.gbbAddProductsPage.state.productPersonalizationMap[product.id] ? gbb.gbbAddProductsPage.state.productPersonalizationMap[product.id] : {};
                return {
                    isProductPersonalizationEnabled,
                    productPersonalizationData
                }
            } catch (err) {
                gbb.utility.debugConsole(err);
            }
        },
        getRegionalLocaleFromUrl: function () {
            let localePresentInUrl = window.location.pathname.split("/") || "";
            // now get locale from Shopify.locale   
            let currentShopifyLocale = Shopify.locale || "";

            let regionalLocale = "";

            if (currentShopifyLocale && currentShopifyLocale != "" && localePresentInUrl) {
                // check if both are same
                if (currentShopifyLocale == localePresentInUrl[1]) {
                    regionalLocale = `/${currentShopifyLocale}`
                } else {
                }
            }

            return regionalLocale;
        },
        debugConsole: function (...messages) {
            try {
                let flag = gbb.state.CONSTANT_DEBUG_FLAG;
                if (flag == false) {
                    return;
                }
                if (flag == true) {
                    for (let message of messages) {
                        console.log(message);
                    }
                    return;
                }
                let isDebug = localStorage.getItem("debug");
                if (isDebug) {
                    for (let message of messages) {
                        console.log(message);
                    }
                    gbb.state.CONSTANT_DEBUG_FLAG = true
                } else {
                    gbb.state.CONSTANT_DEBUG_FLAG = false
                }
            } catch (err) {
                console.error('error inside debugConsole ->', err)
            }
        },
        debugError: function (...messages) {
            try {
                let flag = gbb.state.CONSTANT_DEBUG_FLAG;
                if (flag == false) {
                    return;
                }
                if (flag == true) {
                    for (let message of messages) {
                        console.error(message);
                    }
                    return;
                }
                let isDebug = localStorage.getItem("debug");
                if (isDebug) {
                    gbb.state.CONSTANT_DEBUG_FLAG = true;
                    for (let message of messages) {
                        console.error(message);
                    }
                } else {
                    gbb.state.CONSTANT_DEBUG_FLAG = false
                }
            } catch (err) {
                console.error('error inside the debugError function ->', err)
            }
        },
        gbbMultiLangOverrider: function () {
            try {
                let languageMode = gbb.state.languageMode;
                let languageData = gbb.utility.getLocale();
                if (languageMode != "SINGLE") {

                    gbb.utility.gbbMultiLangDiscountOverrider(languageData)
                    gbb.utility.gbbMultiLangBundleDataOverriding(languageData)
                    gbb.utility.gbbMultiLangPersonalizationOverrider(languageData)
                    gbb.utility.gbbMultiLangSummaryPageOverrider(languageData);
                }
            } catch (error) {
                gbb.utility.debugError("error in gbbMultiLangOverrider", error)
            }
        },
        gbbMultiLangDiscountOverrider: function (languageData) {
            try {
                if (gbb.settings.discountsData != {}) {
                    let discountsData = gbb.settings.discountsData;
                    if (discountsData.multiLangData.hasOwnProperty(languageData)) {
                        discountsData.discountTextBody = discountsData.multiLangData[languageData].discountTextBody;
                        discountsData.discountTextForSuccess = discountsData.multiLangData[languageData].discountTextForSuccess || "";
                    }
                }
            } catch (error) {
                gbb.utility.debugError("error in gbbMultiLangDiscountOverrider", error);
            }
        },
        gbbMultiLangBundleDataOverriding: function (languageData) {
            try {
                let stepsConfigurationData = gbb.settings.stepsConfigurationData;
                for (const key in stepsConfigurationData) {
                    if (key.startsWith("productsData")) {
                        const productData = stepsConfigurationData[key];
                        if (productData && productData.multiLangData && productData?.multiLangData.hasOwnProperty(languageData)) {
                            productData.productPageStepText = productData.multiLangData[languageData].productPageStepText;
                            productData.productPageSubtext = productData.multiLangData[languageData].productPageSubtext;
                        }
                        // Iterate over categories and update titles
                        if (productData && productData.categories) {
                            for (const categoryKey in productData.categories) {
                                const category = productData.categories[categoryKey];
                                if (category.multiLangData && category.multiLangData.hasOwnProperty(languageData)) {
                                    category.title = category.multiLangData[languageData].categoryTitle;
                                    category.subTitle = category.multiLangData[languageData].categorySubtitle;
                                }
                            }
                        }
                    }
                }

            } catch (error) {
                gbb.utility.debugError("error in gbbMultiLangBundleDataOverriding", error);
            }
        },
        gbbMultiLangPersonalizationOverrider: function (languageData) {
            try {
                let personalizationData = gbb.settings.stepsConfigurationData.personalizationData;
                //stepsConfigurationData?.personalizationData?.personalizeStepText
                if (personalizationData && personalizationData.isPersonalizationEnabled && personalizationData.multiLangData && personalizationData?.multiLangData.hasOwnProperty(languageData) || false) {
                    personalizationData.personalizeStepText = personalizationData.multiLangData[languageData].personalizeStepText;
                    personalizationData.personalizePageSubtext = personalizationData.multiLangData[languageData].personalizePageSubtext;
                }

            } catch (error) {
                gbb.utility.debugError("error in gbbMultiLangPersonalizationOverrider", error);
            }
        },
        gbbMultiLangSummaryPageOverrider: function (languageData) {
            try {
                let summaryPageData = gbb.settings.stepsConfigurationData.summaryPageData;
                // gbb.settings?.stepsConfigurationData?.summaryPageData
                //stepsConfigurationData?.summaryPageData?.personalizeStepText
                if (summaryPageData && summaryPageData.isSummaryPageEnabled && summaryPageData.multiLangData && summaryPageData?.multiLangData.hasOwnProperty(languageData) || false) {
                    // reviewPageBannerSubtext
                    // : 
                    // "Review your bundle and proceed to checkout ar"
                    // reviewPageBannerText
                    // : 
                    // "You’ve made the  Right Choice! ar"
                    // reviewPageEmptyStateBannerButtonText
                    // : 
                    // "Go back to the bundle flow"
                    // reviewPageEmptyStateBannerSubText
                    // : 
                    // ""
                    // reviewPageEmptyStateBannerText

                    summaryPageData.reviewPageBannerSubtext = summaryPageData.multiLangData[languageData].reviewPageBannerSubtext;
                    summaryPageData.reviewPageBannerText = summaryPageData.multiLangData[languageData].reviewPageBannerText;
                    summaryPageData.reviewPageEmptyStateBannerButtonText = summaryPageData.multiLangData[languageData].reviewPageEmptyStateBannerButtonText;
                    summaryPageData.reviewPageEmptyStateBannerSubText = summaryPageData.multiLangData[languageData].reviewPageEmptyStateBannerSubText;
                    summaryPageData.reviewPageEmptyStateBannerText = summaryPageData.multiLangData[languageData].reviewPageEmptyStateBannerText;



                }

            } catch (error) {
                gbb.utility.debugError("error in gbbMultiLangPersonalizationOverrider", error);
            }
        },
        groupCartDataBasedOnId_and_Properties: function (items) {
            try {
                function consolidateProducts(products) {
                    const consolidated = [];

                    // Function to check if two properties objects are the same
                    function arePropertiesEqual(props1, props2) {
                        const keys1 = Object.keys(props1);
                        const keys2 = Object.keys(props2);
                        if (keys1.length !== keys2.length) return false;
                        return keys1.every(key => props1[key] === props2[key]);
                    }

                    // Iterate through each product in the input array
                    products.forEach(product => {
                        // Find an existing product in the consolidated array that matches the current product
                        // const existingProduct = consolidated.find(consProduct =>
                        //     consProduct.id === product.id && arePropertiesEqual(consProduct.properties, product.properties)
                        // );

                        // check if products have properties
                        let existingProduct;
                        if (product.properties && Object.keys(product.properties).length > 0) {
                            existingProduct = consolidated.find(consProduct =>
                                consProduct.id === product.id && arePropertiesEqual(consProduct.properties, product.properties));
                        } else {
                            existingProduct = consolidated.find(consProduct => consProduct.id === product.id);
                        }






                        if (existingProduct) {
                            // If found, add the quantity of the current product to the existing one
                            existingProduct.quantity += product.quantity || 1;
                        } else {
                            // If not found, add the current product to the consolidated array
                            consolidated.push({ ...product });
                        }
                    });

                    return consolidated;
                }

                // Example usage
                const products = JSON.parse(JSON.stringify(items));
                const result = consolidateProducts(products);
                // return 
                // console.log(consolidatedProducts);
                return result;
            } catch (e) {
                gbb.utility.debugConsole("error occured in groupCartDataBasedOnId_and_Properties", e)
                return items;
            }

        },
        debounceWrapper: function (callbackFn, delay = 500) {
            gbb.utility.debugConsole('INSIDE DEBOUNCE WRAPPER');
            let timeoutId;
            let lastResult;

            return function (...args) {
                if (timeoutId) {
                    clearTimeout(timeoutId);
                }

                return new Promise((resolve, reject) => {
                    timeoutId = setTimeout(() => {
                        try {
                            lastResult = callbackFn.apply(this, args);
                            resolve(lastResult);
                        } catch (error) {
                            reject(error);
                        }
                    }, delay);
                });
            }
        },
        allowATCBasedOnProductInventory: function (variantId, quantityToAdd = 1) {
            try {
                let qtyAlreadyInCart = 0;
                let cartData = gbb.state?.giftBoxCartData?.items || []
                let isATCAllowed = true
                let originForVariantDetails = gbb.state.currentPageId == 'personalizationPage' ? "addonProducts": null
                let variantDetails = gbb.utility.getVariantDetailsFromCurrentProductsDataSet(variantId, originForVariantDetails) || null
                if (!variantDetails) {
                    gbb.utility.debugConsole("variant details not found : allowATCBasedOnProductInventory")
                    isATCAllowed = false
                    return isATCAllowed;
                }
                if (variantDetails.currentlyNotInStock) { // digital product
                    isATCAllowed = true
                    return isATCAllowed
                }
                // check if variant present alreadyInCart
                if (cartData.length > 0) {
                    for (let i = 0; i < cartData.length; i++) {
                        if (cartData[i].id == variantId) {
                            qtyAlreadyInCart += cartData[i].quantity;
                        }
                    }
                }
                let totalQty = qtyAlreadyInCart + quantityToAdd;
                if (totalQty > variantDetails.quantityAvailable) {
                    isATCAllowed = false
                    return isATCAllowed
                }

                return isATCAllowed

            } catch (error) {
                gbb.utility.debugConsole("error in allowATCBasedOnProductInventory", error)
            }
        },
        isCurrentActiveVariantAllowedToAdd: function ({ product, selectedVariantsCombination, variantQuantity }) {
            try {
                let activeVariantInfo = gbb.utility.checkIfSelectedVariantCombinationIsAvailable(product, selectedVariantsCombination);
                let variantId = activeVariantInfo[0]?.id;
                let isInventoryAvailable = gbb.utility.allowATCBasedOnProductInventory(variantId, variantQuantity);
                return isInventoryAvailable
            } catch (error) {
                gbb.utility.debugConsole("error in isCurrentActiveVariantAllowedToAdd", error)
            }
        },
        validateProductQuantityAddButton: function ({ product, selectedVariantsCombination, variantQuantity, gbbProductQuantityAddButton }) {
            try {
                let isInventoryAvailable = gbb.utility.isCurrentActiveVariantAllowedToAdd({ product, selectedVariantsCombination, variantQuantity });
                if (isInventoryAvailable != true) {
                    gbbProductQuantityAddButton.addClass("gbbVariantInventoryNotAvailable")
                    gbbProductQuantityAddButton.addClass("gbbDisabled")
                } else if (
                    isInventoryAvailable == true &&
                    gbbProductQuantityAddButton.hasClass("gbbVariantInventoryNotAvailable")
                ) {
                    gbbProductQuantityAddButton.removeClass("gbbVariantInventoryNotAvailable")
                    gbbProductQuantityAddButton.removeClass("gbbDisabled")
                }
            } catch (error) {
                gbb.utility.debugConsole("error in validateProductQuantityAddButton", error)
            }
        },
        validateATCAndVariantQuantityAddButton: function ({ product, selectedVariantsCombination, variantQuantity, gbbProductQuantityAddButton, gbbProductVariantModalContainer }) {
            try {
                let validationOptions = {
                    product: product,
                    selectedVariantsCombination: selectedVariantsCombination,
                    variantQuantity: variantQuantity + gbb.gbbAddProductsPage.state.incrementProductQtyBy || 1,// adding 1 to check if we can add 1 more product or not 
                    gbbProductQuantityAddButton: gbbProductQuantityAddButton
                }
                gbb.utility.validateProductQuantityAddButton(validationOptions);
                let currentQty = variantQuantity;
                let isVariantWithCurrentQtyAllowedToAdd = gbb.utility.isCurrentActiveVariantAllowedToAdd({ ...validationOptions, variantQuantity: currentQty })
                if (isVariantWithCurrentQtyAllowedToAdd != true) {
                    gbbProductVariantModalContainer.addClass("gbbVariantInventoryNotAvailable")
                } else {
                    gbbProductVariantModalContainer.removeClass("gbbVariantInventoryNotAvailable")
                }
            } catch (error) {
                gbb.utility.debugConsole("error in validateATCAndVariantQuantityAddButton", error)
            }
        },
        extractIdsFromGraphQlId: function (id) {
            try {
                return Number(id.split("/").pop())
            } catch (error) {
                gbb.utility.debugConsole("error in extractIdsFromGraphQlId", error)
            }
        },
        generateSellingPlanGroupIdByName: function (groupName) {
            try {
                let base64Str = btoa(encodeURIComponent(groupName));
                return "EB_" + base64Str;
            } catch (error) {
                gbb.utility.debugConsole('error in generateSellingPlanGroupIdByName', error)
            }
        },
        prepareProductCardRibbonUI: function ({ ribbonContent, ribbonClassName }) {
            try {
                const gbbDiscountRibbon = gbb.$('<div>').addClass('gbbDiscountRibbon')
                if (ribbonClassName) {
                    gbbDiscountRibbon.addClass(ribbonClassName)
                }
                const gbbDiscountRibbonContent = gbb.$('<div>').addClass('gbbDiscountRibbonContent')
                if (ribbonContent) {
                    gbbDiscountRibbonContent.text(ribbonContent)
                    gbbDiscountRibbon.append(gbbDiscountRibbonContent)
                    return gbbDiscountRibbon
                }
            } catch (error) {
                gbb.utility.debugError('error in prepareProductCardRibbonUI', error)
            }
        }
    },
    shopifyUtility: {
        addToCart: async function (cartData) {
            try {
                let result = await gbb.$.ajax({
                    url: "/cart/add.js",
                    data: cartData,
                    type: "POST",
                    dataType: "json",
                })
                return result;
            } catch (error) {
                gbb.utility.debugConsole("error in shopifyUtility.addToCart", error)
                // throw error
                return false
            }
        },
        updateCart: async function (cartData) {
            try {
                let result = await gbb.$.ajax({
                    url: "/cart/update.js",
                    data: cartData,
                    type: "POST",
                    dataType: "json",
                })
                return result;
            } catch (error) {
                gbb.utility.debugConsole("error in shopifyUtility.updateCart", error)
                // throw error
                return false
            }
        },
        getCart: async function () {
            try {
                let result = await gbb.$.ajax({
                    url: "/cart.js",
                    type: "GET",
                    dataType: "json",
                })
                return result;
            } catch (error) {
                gbb.utility.debugConsole("error in shopifyUtility.getCart", error)
                // throw error
                return false
            }
        },
        changeCart: async function (data) {
            try {
                let result = await glpro.$.ajax({
                    type: "POST",
                    url: "/cart/change.js",
                    data: data,
                    dataType: "json",
                });
                return true
            } catch (error) {
                gbb.utility.debugError("glpro-utility-changeCart");
                gbb.utility.debugError(error);
                return false
            }
        },
    },
    graphQlUtility: {
        graphQlAPIWrapper: async function (query, variables) {
            try {
                let shopDomain = window.Shopify.shop;
                let storefrontAccessToken = gbb.state.storefrontAccessToken || gbb.settings.STOREFRONT_ACCESS_TOKEN;

                // debugger;
                // if (gbb.state.cachedProductDataGraphql.has(variables.ids[0])){
                //     return gbb.state.cachedProductDataGraphql.get(variables.ids[0]);
                // }

                const res = await fetch(`https://${shopDomain}/api/2023-10/graphql.json`, {
                    // const res = await fetch(`https://gift-kart-test-01.myshopify.com/api/2024-01/graphql.json`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Shopify-Storefront-Access-Token': storefrontAccessToken,
                    },
                    body: JSON.stringify({ query, variables }),
                })



                const data = await res.json();
                return data;

            } catch (error) {
                gbb.utility.debugConsole("error in graphQlAPIWrapper =>", error);
            }
        },
        gbbCleaningAndArrangingData: function (data) {
            try {
                let cleanedData = gbb.graphQlUtility.flattenGraphQLResponse(data);
                gbb.utility.debugConsole("cleanedData before processing =========>:", cleanedData);

                // remove null, undefined and missing values from the array
                cleanedData = cleanedData.filter(item => item != null && item != undefined);

                cleanedData = gbb.graphQlUtility.dataMappingFromGraphQL(cleanedData);

                return cleanedData;
            } catch (err) {
                gbb.utility.debugConsole("err in gbbCleaningAndArrangingData => ", err);
            }
        },
        dataMappingFromGraphQL: function (cleanedData) {
            try {

                const convertPlanNameToId = (planName) => {
                    let base64Str = btoa(encodeURIComponent(planName));
                    let id = "EB_" + base64Str;
                    return id;
                }

                const getAllMetafieldValuesInArray = (productData) => {
                    // productData.forEach(node => {
                    const metafields = [];
                    Object.keys(productData).forEach(key => {
                        if (key.startsWith('metafield_')) {
                            metafields.push(productData[key]);
                        }
                    });
                    return metafields;
                }

                const transformSellingPlans = (sellingPlanGroups) => {

                    let sellingPlanGroupsFlattened = []

                    let tempArray = []
                    let flattendData = gbb.graphQlUtility.flattenGraphQLResponse({ data: { nodes: sellingPlanGroups } });
                    tempArray = flattendData.map(item => {
                        return {
                            id: convertPlanNameToId(item.name),
                            name: item.name,
                            description: null,
                            options: item.options.map((option, index) => ({
                                name: option.name,
                                position: index + 1,
                                value: option.value
                            })),
                            selling_plans: item.sellingPlans?.map((plan) => {
                                return {
                                    id: parseInt(plan?.id?.split('/').pop()),
                                    gid: plan?.id,
                                    option: plan?.option,
                                    name: plan?.name,
                                    price_adjustments: plan?.priceAdjustments?.map((element, index) => {
                                        let adjustmentType = element?.adjustmentValue?.price ? 'price' : element?.adjustmentValue?.adjustmentAmount ? 'fixed_amount' : 'percentage'
                                        let _adjustmentValue = adjustmentType == 'percentage' ? element?.adjustmentValue?.adjustmentPercentage : adjustmentType == 'price' ? element?.adjustmentValue?.price?.amount : element?.adjustmentValue?.adjustmentAmount?.amount
                                        return {
                                            orderCount: element.orderCount,
                                            position: index + 1,
                                            value_type: adjustmentType,
                                            value: adjustmentType == 'percentage' ? parseFloat(_adjustmentValue) : parseFloat(_adjustmentValue) * 100
                                        }
                                    })
                                }
                            }),
                            recurring_deliveries: item.recurringDeliveries,
                        };
                    });

                    sellingPlanGroupsFlattened.push(tempArray);

                    return sellingPlanGroupsFlattened.flat();
                };
                const getSellingPlansGroupId = (sellingPlansGroup, sellingPlanId) => {
                    for (let i = 0; i < sellingPlansGroup?.length; i++) {
                        let currGroupData = sellingPlansGroup[i];
                        let foundSellingPlan = currGroupData?.selling_plans?.find((sellingPlan) => sellingPlan?.id == sellingPlanId);
                        if (foundSellingPlan) {
                            return currGroupData?.id;
                        }
                    }
                }
                const transformSellingPlanAllocation = (sellingPlanAllocations, sellingPlansGroup, variantDetails) => {
                    let response = gbb.graphQlUtility.flattenGraphQLResponse(sellingPlanAllocations);
                    response = response.map((el) => {
                        let sellingPlanId = parseInt(el?.node?.sellingPlan?.id?.split('/').pop())
                        let _price = parseFloat(variantDetails?.price?.amount) * 100 // read product's price 
                        let _per_delivery_price = _price
                        let priceAdjustmentArray = el?.node?.priceAdjustments || []
                        if (priceAdjustmentArray.length > 0) {
                            _price = parseFloat(priceAdjustmentArray[0]?.price?.amount) * 100
                            _per_delivery_price = parseFloat(priceAdjustmentArray[0]?.perDeliveryPrice?.amount) * 100
                        }
                        return {
                            compare_at_price: parseFloat(el?.node?.priceAdjustments[0]?.compareAtPrice?.amount) * 100,
                            per_delivery_price: _per_delivery_price,
                            price: _price,
                            selling_plan_id: sellingPlanId,
                            selling_plan_group_id: getSellingPlansGroupId(sellingPlansGroup, sellingPlanId) || null,
                            price_adjustments: [{ position: 1, price: _price }]
                        }
                    })
                    return response;
                };
                let newProductArray = JSON.parse(JSON.stringify(cleanedData));
                let returningArray = [];
                for (let i = 0; i < newProductArray.length; i++) {

                    let currProduct = newProductArray[i];
                    let originalProduct = cleanedData[i];

                    currProduct.available = originalProduct.availableForSale;
                    currProduct.featured_image = originalProduct?.featuredImage?.originalSrc;
                    let variantData = currProduct.variants;
                    let ogVariants = originalProduct.variants;
                    // productId
                    let splitProductId = originalProduct.id.split('/');
                    let pureProductId = parseInt(splitProductId[splitProductId.length - 1])

                    currProduct.productId = pureProductId;
                    currProduct.type = originalProduct.productType;
                    currProduct.id = pureProductId
                    currProduct.metafieldsData = getAllMetafieldValuesInArray(originalProduct);

                    currProduct.images = originalProduct?.images?.map(item => item?.originalSrc);

                    //   currProduct.media = originalProduct?.media?.map((item, index) moving to images from media coz we dont get variant media from shopify
                    currProduct.media = originalProduct?.images?.map((item, index) => {
                        return {
                            alt: item.alt,
                            computedPosition: index + 1,
                            gid: item.id,
                            id: item.id?.split('/').pop(),
                            // position: index+1, // since shopify SF Api doesnt provide position
                            src: item?.originalSrc
                        }
                    })

                    currProduct.compare_at_price = originalProduct?.compareAtPriceRange?.maxVariantPrice?.amount || originalProduct?.compareAtPriceRange?.minVariantPrice?.amount
                    currProduct.price = originalProduct?.priceRange?.maxVariantPrice?.amount || originalProduct.priceRange.minVariantPrice.amount

                    currProduct.compare_at_price = currProduct.compare_at_price > 0 ? currProduct.compare_at_price * 100 : null
                    currProduct.price = currProduct.price * 100

                    //   forEach originalProduct
                    //   let productSellingPlans = gbb.graphQlUtility.flattenGraphQLResponse(originalProduct.selling)
                    currProduct.selling_plan_groups = transformSellingPlans(originalProduct?.sellingPlanGroups)
                    // for variants
                    for (let j = 0; j < variantData.length; j++) {
                        variantData[j].available = ogVariants[j].availableForSale
                        variantData[j].image = ogVariants[j]?.image?.url || ogVariants[j]?.image?.originalSrc
                        variantData[j].price = parseFloat(variantData[j].price.amount) * 100;
                        let tempOptions = ogVariants[j]?.selectedOptions;
                        variantData[j].options = tempOptions.map(item => item.value);
                        // variantData[j].op
                        // variantData[]    
                        // derive option1,option2 and option3 values

                        if (tempOptions.length > 0) variantData[j].option1 = tempOptions[0].value;
                        if (tempOptions.length > 1) variantData[j].option2 = tempOptions[1].value;
                        if (tempOptions.length > 2) variantData[j].option3 = tempOptions[2].value;
                        // fixing variantId;
                        // variantData[j].id = variantData[j].variantId;
                        let spliVariantId = variantData[j].id.split('/');
                        let variantId = parseInt(spliVariantId[spliVariantId.length - 1])
                        variantData[j].variantId = variantId;
                        variantData[j].variant_id = variantId;
                        variantData[j].id = variantId
                        // variantData[j].public_title = (concat options by /)
                        variantData[j].public_title = tempOptions.map(item => item.value).join(' / ');
                        // publicTitle????
                        // variantData[j].name = currProduct.title +  " - " + ogVariants[j].title;
                        variantData[j].name = ogVariants[j].title == "Default Title" ? currProduct.title : currProduct.title + " - " + ogVariants[j].title;

                        variantData[j].featured_image = {
                            gid: ogVariants[j]?.image?.id,
                            id: ogVariants[j]?.image?.id?.split('/').pop(),
                            src: ogVariants[j]?.image?.originalSrc
                        }
                        variantData[j].featured_media = {
                            gid: ogVariants[j]?.image?.id,
                            id: ogVariants[j]?.image?.id?.split('/').pop(),
                            src: ogVariants[j]?.image?.originalSrc
                        }
                        variantData[j].compare_at_price = ogVariants[j].compareAtPrice ? parseFloat(ogVariants[j].compareAtPrice.amount) * 100 : null

                        variantData[j].weight = gbb.utility.convertToGrams(variantData[j].weight, variantData[j].weightUnit);
                        variantData[j].weightConvertedToGrams = true

                        variantData[j].selling_plan_allocations = transformSellingPlanAllocation(ogVariants[j]?.sellingPlanAllocations, currProduct.selling_plan_groups, ogVariants[j])



                    }
                    currProduct.variants = variantData;
                    currProduct = gbb.gbbKite.f.modifyProductDataWithDiscountedPrice(currProduct);
                    returningArray.push(currProduct);
                }

                return returningArray;

            } catch (error) {
                gbb.utility.debugConsole("error in dataMappingFromGraphQL ", error);
            }
        },
        flattenGraphQLResponse: function (response) {
            // console.log("response", response);
            const nodes = response.data ? response.data.nodes : [];
            const edges = response.edges ? response.edges : [];

            const flattenNodesOrEdges = (items) => {
                return items.map((item) => {
                    if (item) {
                        const flattenedItem = {};

                        Object.keys(item).forEach((key) => {
                            const value = item[key];
                            if (value && typeof value === "object") {
                                if (value.edges) {
                                    flattenedItem[key] = value.edges.map((edge) => edge.node);
                                } else if (value.node) {
                                    flattenedItem[key] = value.node;
                                } else {
                                    flattenedItem[key] = value;
                                }
                            } else {
                                flattenedItem[key] = value;
                            }
                        });

                        // console.log("flattenedItem", flattenedItem);
                        return flattenedItem;
                    }
                });
            };


            let flattenedNodes = []
            if (nodes.length > 0) {
                flattenedNodes = flattenNodesOrEdges(nodes);
            } else if (edges.length > 0) {
                flattenedNodes = flattenNodesOrEdges(edges);
            }

            // console.log("flattened-nodes", nodes);
            // console.log("flattened-edges", edges);


            // console.log("flattenedNodes", flattenedNodes);

            return flattenedNodes;
        },
        generateMetafieldQueries: function (metafields) {
            return metafields.map(metafield => {
                const { key, namespace } = metafield;
                return `metafield_${namespace}_${key}: metafield(key:"${key}", namespace:"${namespace}"){ 
                    id 
                    key
                    value
                    description
                    type
                }`;
            }).join(' ');
        },

        getProductsDataByIds: async function (productIds) {
            try {


                const metafields = gbb.settings.bundleSettings.metafieldNameSpaceAndKeys

                // const metafields = [
                //     { key: "test", namespace: "gbbNameSpace" },
                //     { key: "test2", namespace: "gbbNameSpace" },
                //     // Add more metafields as needed
                //     ];
                //  gbb.settings.bundleSettings.


                const metafieldQueries = gbb.graphQlUtility.generateMetafieldQueries(metafields);
                const query = `query test($ids: [ID!]!, $countryCode: CountryCode!, $languageCode: LanguageCode!) @inContext(country: $countryCode, language: $languageCode) {    
                nodes(ids: $ids) {
                ... on Product{
                  id
                  availableForSale
                  title
                  handle
                  createdAt
                  description
                  descriptionHtml
                  productType
                  ${metafieldQueries}
                  onlineStoreUrl
                  options{
                    id
                    name
                    values
                  }
                  featuredImage{
                    id
                    originalSrc
                    transformedSrc(maxWidth: 800, maxHeight: 800, crop: CENTER)
                  }
                 updatedAt
                tags
                totalInventory
                vendor
                requiresSellingPlan
                compareAtPriceRange{
                    maxVariantPrice{
                        amount
                        currencyCode
                    }
                    minVariantPrice{
                        amount
                        currencyCode
                    }
                }
                priceRange{
                    maxVariantPrice{
                        amount
                        currencyCode
                    }
                    minVariantPrice{
                        amount
                        currencyCode
                    }
                }
                media(first:100){
                    edges{
                        node{
                            id
                            alt
                            previewImage{
                                url
                                id
                            } 
                            
                        }
                    }

                }
                images(first:100){
                    edges{
                        node{
                            id
                            originalSrc
                            transformedSrc(maxWidth: 800, maxHeight: 800, crop: CENTER)
                        }
                    }
                }
                sellingPlanGroups(first: 100) {
                    edges{
                        node{
                            name
                            appName
                            options{
                                name
                                values
                            }
                            sellingPlans (first:100){
                                edges{
                                    node{
                                        id
                                        name
                                        recurringDeliveries
                                        priceAdjustments {
                                            adjustmentValue {
                                            ... on SellingPlanFixedAmountPriceAdjustment{
                                                adjustmentAmount{
                                                amount
                                                currencyCode
                                                }
                                                }
                                            ... on SellingPlanFixedPriceAdjustment{
                                                 price{
                                                    amount
                                                    currencyCode
                                                    }
                                                 }
                                            ... on SellingPlanPercentagePriceAdjustment{
                                                adjustmentPercentage
                                                }
                                            }
                                            orderCount
                                        }
                                        options{
                                            name
                                            value
                                        }

                                    }
                                }
                            }
                        }
                    }
                }
                variants(first: 100) {
                    edges {
                      node {
                        id
                        sku
                        title
                        price{
                          amount
                          currencyCode
                        }
                        weight
                        weightUnit
                        requiresShipping
                        currentlyNotInStock 
                        compareAtPrice{
                          amount
                          currencyCode
                        }
                        quantityAvailable
                        selectedOptions{
                            name
                            value
                        }
                       
                        availableForSale
                        image {
                          id
                          originalSrc
                          transformedSrc(maxWidth: 800, maxHeight: 800, crop: CENTER)
                        }
                        sellingPlanAllocations(first:100){
                            edges{
                                node{
                                     sellingPlan{
                                         id
                                         name
                                     }
                                    priceAdjustments{
                                        compareAtPrice{
                                            amount
                                            currencyCode
                                        }
                                        perDeliveryPrice{
                                            amount 
                                            currencyCode
                                        }
                                        price{
                                            amount
                                            currencyCode
                                        }
                                        unitPrice{
                                            amount
                                            currencyCode
                                        }
                                    }
                                }
                            }
                        }
                      }
                    }
                  }
                }
              }
              }`;

                
                 
                // remove the product ids that are already present
                let cachedProductData = []
                productIds = productIds.filter((id) => {
                    if (gbb.state.cachedProductDataGraphql.has(+id)) {
                        cachedProductData.push(gbb.state.cachedProductDataGraphql.get(+id))
                    }
                    else return id
                })

                for (let i = 0; i < productIds.length; i++) {
                    let item = productIds[i];
                    if (!String(item).includes("gid")) {
                        productIds[i] = "gid://shopify/Product/" + productIds[i]
                    }
                }




                const variables = {
                    ids: productIds,
                    // countryCode: "IN"  || variables.countryCode,
                    countryCode: gbb.utility.getCountry(),
                    languageCode: gbb.utility.getLocale().toUpperCase().split("-")[0]
                    // languageCode: "EN" || variables.languageCode.toUpperCase()
                };

                let response = []
                let failedProductsData = []

                if (productIds?.length > 0) {
                    response = await gbb.graphQlUtility.graphQlAPIWrapper(query, variables)

                    response?.data?.nodes?.forEach((item, idx) => {
                        if (!item) {
                            failedProductsData.push({
                                id: gbb.utility.extractIdsFromGraphQlId(productIds[idx]),
                                failedToFetch: true
                            })
                        }
                    });

                    response = gbb.graphQlUtility.gbbCleaningAndArrangingData(response);
                    response = [...cachedProductData, ...response, ...failedProductsData]
                    gbb.utility.setCachedGraphqlData(response);
                } else {
                    response = cachedProductData
                }

                response = response.filter(product => !product.failedToFetch)
                return response;

            } catch (error) {
                console.error('error in getProductDataByIds ', error)
            }
        },
    },
    gbbBrowser: {
        state: {
            boxIdOffset: 0,
            gbbDiscountsAlreadyPresentInCart: {},
        },
        addDefaultProductsToBox: function (boxId) {
            try {
                if (!boxId) {
                    boxId = gbb.state.activeBoxId || "box1";
                }
                gbb.state.activeBoxId = boxId;
                let defaultProducts = Object.values(gbb?.settings?.shopifyData?.defaultProductsData);

                for (let i = 0; i < defaultProducts.length; i++) {
                    let currentProduct = defaultProducts[i];
                    for (let j = 0; j < currentProduct.variants?.length; j++) {
                        let currentVariant = currentProduct.variants[j];
                        let quantity = currentProduct?.requiredQuantity || 1;
                        let data = {
                            variant: { id: currentVariant.id },
                            qty: quantity,
                        }
                        gbb.utility.addToCart(data, "defaultProduct", undefined, "defaultProduct");
                    }
                }

            } catch (err) {
                gbb.utility.debugConsole(err + "inside addDefaultProductsToTheCart");
            }
        },
        getRelevantGiftBoxProductsTotalWithCurrency: function (boxId) {
            try {
                //getGiftBoxProductsFromCart
                let boxCartDataInSessionStorage = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage(boxId);
                // gbb.state.giftBoxCartData = await gbb.utility.getGiftBoxProductsFromCart()
                let data = boxCartDataInSessionStorage
                // if(data.currency){
                return gbb.utility.getCurrencySymbol() + "" + parseFloat(data.total_price / 100).toFixed(2)
                // }else{
                // if(Shopify && Shopify.currency && Shopify.currency.active){
                //     return "0.0"+ " " +Shopify.currency.active
                // }else{
                //     return "0.0"
                // }

                // }
            } catch (error) {
                gbb.utility.debugError("getRelevantGiftBoxProductsTotalWithCurrency");
                gbb.utility.debugError(error);
                return "0.0"
            }
        },
        getProductsFromAllBoxesFromCart: function (cartDataFromSessionStorage) {
            try {
                let allCartItems = [];
                let addBoxQuantityToProperties = gbb.settings.app.addBoxQuantityToProperties || false;
                if (!cartDataFromSessionStorage) {
                    cartDataFromSessionStorage = sessionStorage.getItem(`gbb-cart-${gbb.state.bundleId}`);
                    cartDataFromSessionStorage = JSON.parse(cartDataFromSessionStorage);
                }
                if (cartDataFromSessionStorage && cartDataFromSessionStorage.boxes) {
                    Object.keys(cartDataFromSessionStorage?.boxes)?.forEach((box) => {
                        let tempArr = cartDataFromSessionStorage?.boxes[box]["items"] || [];
                        if (addBoxQuantityToProperties) {
                            tempArr.forEach((item) => {
                                item.properties["_Box Quantity"] = cartDataFromSessionStorage?.boxes[box]["boxQuantity"] || 1;
                            })
                        }
                        allCartItems.push(...tempArr)
                    })
                }
                return allCartItems;
            } catch (err) {
                gbb.utility.debugError(err + "getProductsFromAllBoxesFromCart");
            }
        },
        setRelevantBoxDataToSessionStorage: function (boxData, boxId) {
            try {
                const isPurchaseTypeSubscription = gbb.gbbSubscriptionProductsPage.f.checkIfPurchaseTypeIsSubscription()// for subscription bundles only

                if (!boxId) {
                    boxId = gbb.state.activeBoxId;
                }
                boxData.items = boxData.items.map((item) => {
                    let productPrice = item.price
                    let originForVariantDetails = item?.properties?._boxProduct == 'addonProduct' ? "addonProducts": null
                    let variantInfo = gbb.utility.getVariantDetailsFromCurrentProductsDataSet(item.variant_id, originForVariantDetails)
                    if (variantInfo) {
                        productPrice = variantInfo.price
                    }
                    if (isPurchaseTypeSubscription) {
                        productPrice = gbb.gbbSubscriptionProductsPage.f.getSubscriptionPriceByVariantId(item.variant_id)
                    }
                    return {
                        ...item,
                        price: productPrice
                    }
                })
                gbb.state.giftBoxCartData = boxData;

                // // update discount rule
                gbb.gbbDiscountComponent.f.updateCurrentDiscountRule();

                // @rafath why not call getCartDataFromSessionStorage here?
                let cartDataFromSessionStorage = gbb.gbbBrowser.getCartDataFromSessionStorage();
                if (cartDataFromSessionStorage) {
                    if (gbb.gbbDiscountComponent.state.currentDiscountRule[gbb.state.activeBoxId]) {
                        boxData["discountValue"] = gbb.gbbDiscountComponent.state.currentDiscountRule[gbb.state.activeBoxId]["discountValue"];
                    } else {
                        boxData["discountValue"] = null;
                    }
                    cartDataFromSessionStorage.boxes[boxId] = boxData;
                    gbb.gbbDiscountComponent.f.updateCurrentDiscountRule();
                    sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(cartDataFromSessionStorage));
                }
            } catch (err) {
                gbb.utility.debugError(err + "setRelevantBoxDataToSessionStorage");
            }
        },
        addItemToCartSessionStorage: function (itemData) {
            try {
                // if(item && item.quantity == 0){
                //     return 
                // }
                let boxCartDataInSessionStorage = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage();
                let currentBoxId = gbb.state.activeBoxId;
                if (boxCartDataInSessionStorage && boxCartDataInSessionStorage.items) {
                    boxCartDataInSessionStorage.items.push(itemData);
                    gbb.gbbBrowser.setRelevantBoxDataToSessionStorage(boxCartDataInSessionStorage, currentBoxId);
                }
                else {
                    gbb.utility.debugConsole("no items in session storage")
                }
                gbb.gbbBrowser.updateTotalPriceInSessionStorage()
                gbb.gbbBrowser.updateTotalofRelevantBoxPriceInSessionStorage()

            } catch (e) {
                gbb.utility.debugError("addItemToCartSessionStorage", e)
                gbb.utility.triggerSlackNotification(e)
            }

        },

        getCartDataFromSessionStorage: function (options) {
            try {

                const subscriptionPlanExists = gbb.gbbReviewPage.f.checkIfSubscriptionPlanExists();

                if (subscriptionPlanExists && options && options?.forSubscription && gbb.gbbBrowser?.getSubscriptionType() == "saveSubscription") {
                    return gbb.gbbBrowser.getCartDataForSubscription();
                }

                let cart = sessionStorage.getItem(`gbb-cart-${gbb.state.bundleId}`);
                cart = JSON.parse(cart);
                if (cart) { //&& cart.items
                    // gbb.state.giftBoxCartData = cart;
                    return cart;
                }
                else {
                    //return { items: [], attributes: {}, bundleQuantity: 1 };
                }

            } catch (error) {
                gbb.utility.debugError("getCartDataFromSessionStorage", error)
            }
        },
        getRelevantBoxDataFromSessionStorage: function (boxId) {
            try {

                // if(!boxId) {
                //     if(!gbb.state.activeBoxId) {
                //         gbb.state.activeBoxId = "box1"
                //     }
                //     boxId = gbb.state.activeBoxId;


                // }

                // let bundleCartData;
                // bundleCartData = sessionStorage.getItem(`gbb-cart-${gbb.state.bundleId}`);
                // bundleCartData = JSON.parse(bundleCartData);

                let bundleCartData;
                bundleCartData = sessionStorage.getItem(`gbb-cart-${gbb.state.bundleId}`);
                bundleCartData = JSON.parse(bundleCartData);

                if (!boxId) {
                    if (!gbb.state.activeBoxId) {
                        gbb.state.activeBoxId = "box1";
                    }
                    boxId = gbb.state.activeBoxId;
                    //find the isBoxActive box and set that as the active box
                    if (bundleCartData && bundleCartData.boxes) {
                        Object.keys(bundleCartData.boxes).forEach((box) => {
                            if (bundleCartData.boxes[box].isBoxActive) {
                                gbb.state.activeBoxId = box;
                                boxId = gbb.state.activeBoxId;
                            }
                        });
                    }
                }



                if (bundleCartData) {
                    let currentBoxData = bundleCartData?.boxes[boxId] || {};
                    if (currentBoxData && currentBoxData.items) {
                        gbb.state.giftBoxCartData = currentBoxData;
                        return currentBoxData;
                    }
                } else {
                    //initialization of the item session storage item happens here
                    bundleCartData = {
                        bundleId: gbb.state.bundleId,
                        attributes: {},
                        boxes: {
                            box1: {
                                boxId: "box1",
                                boxName: "Box - 1",
                                items: [],
                                boxQuantity: 1,
                                isBoxActive: true,
                                total_price: 0
                            }
                        }
                    }
                    gbb.state.activeBoxId = "box1";
                    gbb.state.giftBoxCartData = bundleCartData.boxes["box1"];
                    sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(bundleCartData));
                    if (gbb?.settings?.stepsConfigurationData?.defaultProductsData?.isDefaultProductsEnabled) {
                        gbb.gbbBrowser.addDefaultProductsToBox();
                    }
                }
                return bundleCartData;
            } catch (error) {
                gbb.utility.debugError("getRelevantBoxDataFromSessionStorage", error)
            }
        },
        updateTotalofRelevantBoxPriceInSessionStorage: function (boxId) {
            try {
                if (!boxId) {
                    boxId = gbb.state.activeBoxId
                }
                let boxCartDataInSessionStorage = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage(boxId);
                if (boxCartDataInSessionStorage && boxCartDataInSessionStorage.items) {
                    let totalPrice = 0;
                    let totalQuantity = 0;
                    boxCartDataInSessionStorage.items.forEach((item) => {
                        totalPrice += item.price * item.quantity;
                        totalQuantity += item.quantity;
                    })
                    boxCartDataInSessionStorage.total_price = totalPrice;
                    boxCartDataInSessionStorage.item_count = totalQuantity;
                    gbb.gbbBrowser.setRelevantBoxDataToSessionStorage(boxCartDataInSessionStorage, boxId);
                    //sessionStorage.setItem(`gbb-cart-${gbb.state.boxId}`, JSON.stringify(cartDataInSessionStorage));
                }
            } catch (err) {
                gbb.utility.debugConsole(err + "at updateTotalofRelevantBoxPriceInSessionStorage");
            }
        },
        updateTotalPriceInSessionStorage: function () {
            try {
                let cartDataInSessionStorage = gbb.gbbBrowser.getCartDataFromSessionStorage();
                if (cartDataInSessionStorage && cartDataInSessionStorage.boxes) {
                    let totalPrice = 0;
                    let totalQuantity = 0;
                    Object.keys(cartDataInSessionStorage.boxes).forEach((box) => {
                        let boxItem = cartDataInSessionStorage.boxes[box];
                        boxItem.items.forEach((item) => {
                            totalPrice += item.price * item.quantity;
                            totalQuantity += item.quantity;
                        })
                    })
                    cartDataInSessionStorage.total_price = totalPrice;
                    cartDataInSessionStorage.item_count = totalQuantity;
                    sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(cartDataInSessionStorage));
                }
            } catch (e) {
                gbb.utility.debugError("updateTotalPriceInSessionStorage", e)
            }
        },
        updateCartItemQuantityAndProperty: function (variantId, quantity, properties, boxId) {
            try {
                if (!boxId) {
                    boxId = gbb.state.activeBoxId;
                }
                let boxCartDataInSessionStorage = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage(boxId);


                // in properties there is _uniqueGbbItemkey;
                // let boxCartDataInSessionStorageIndex = boxCartDataInSessionStorage.items.findIndex((cart) => cart.id == variantId);

                let boxCartDataInSessionStorageIndex = boxCartDataInSessionStorage.items.findIndex(cart => {
                    if (cart.properties && cart.properties["_uniqueGbbItemKey"]) {
                        return cart.properties["_uniqueGbbItemKey"] == properties["_uniqueGbbItemKey"];
                    } else {
                        return cart.id == variantId;
                    }
                });
                boxCartDataInSessionStorage.items[boxCartDataInSessionStorageIndex].quantity = quantity;
                boxCartDataInSessionStorage.items[boxCartDataInSessionStorageIndex].properties = properties;

                //  if quantity is 0 then remove the item from cart
                if (quantity == 0 && boxCartDataInSessionStorageIndex > -1) {
                    boxCartDataInSessionStorage.items.splice(boxCartDataInSessionStorageIndex, 1);
                }

                gbb.gbbBrowser.setRelevantBoxDataToSessionStorage(boxCartDataInSessionStorage)
                //sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(boxCartDataInSessionStorage));
                gbb.gbbBrowser.updateTotalPriceInSessionStorage()
                gbb.gbbBrowser.updateTotalofRelevantBoxPriceInSessionStorage()
                return boxCartDataInSessionStorage;
            }
            catch (e) {
                gbb.utility.debugError("updateCartItemQuantityAndProperty", e)
            }
        },

        getCartDataForSubscription: function () {
            try {
                //gbb.state.giftboxCartData 
                // gbb.utility.debugConsole("inside getCartDataForSubscription");
                let cart = gbb.gbbBrowser.getCartDataFromSessionStorage();
                cart.total_price = 0;
                cart.item_count = 0;
                Object.keys(cart.boxes).forEach((box) => {
                    let boxItem = cart.boxes[box];
                    boxItem.total_price = 0;
                    boxItem.item_count = 0;
                    boxItem.items.forEach((item) => {
                        let sellingPlanDetails = item.sellingPlanDetails;
                        if (sellingPlanDetails) {
                            let planItem = sellingPlanDetails[cart?.subscriptionPlan];
                            // total_price += (item.quantity) * (item?.price - planItem?.price);
                            // item.price = planItem?.price || planItem?.perDeliveryPrice;
                            item.price = planItem?.price;
                        }
                        boxItem.total_price += item.price * item.quantity;
                        boxItem.item_count += item.quantity;
                    })
                    cart.total_price += boxItem.total_price;
                    cart.item_count += boxItem.item_count;
                    //setRelevantBoxDataToSessionStorage
                    // gbb.gbbBrowser.setRelevantBoxDataToSessionStorage(boxItem, box);
                })

                // gbb.gbbBrowser.updateSubscriptionTotal(cart.total_price)   

                gbb.gbbBrowser.updateTotalPriceInSessionStorage()

                return cart;

            } catch (e) {
                gbb.utility.debugError("getCartDataForSubscription", e)
            }
        },

        updateCartItemSellingDetails: function (variantId, sellingPlanDetails = []) {
            try {
                let cartDataInSessionStorage = gbb.gbbBrowser.getCartDataFromSessionStorage();
                let boxDataInSessionStorageIndex;
                let boxItem;
                let allBoxesKeys = Object.keys(cartDataInSessionStorage?.boxes)

                for (let i = 0; i < allBoxesKeys.length; i++) {
                    boxItem = cartDataInSessionStorage.boxes[allBoxesKeys[i]];
                    boxDataInSessionStorageIndex = boxItem.items.findIndex((cart) => cart.id == variantId)
                    if (boxDataInSessionStorageIndex != -1) {
                        boxItem.items[boxDataInSessionStorageIndex].sellingPlanDetails = sellingPlanDetails;
                        break;
                    }
                }
                cartDataInSessionStorage.boxes[boxItem.boxId] = boxItem;
                sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(cartDataInSessionStorage));

                gbb.gbbBrowser.updateTotalPriceInSessionStorage()
                gbb.gbbBrowser.updateTotalofRelevantBoxPriceInSessionStorage(boxItem.boxId)

                return cartDataInSessionStorage;
            }
            catch (e) {
                gbb.utility.debugError("updateCartItemSellingDetails", e)
            }
        },
        updateCartAttributes: function (attributesvalues) {
            try {
                let cartDataInSessionStorage = gbb.gbbBrowser.getCartDataFromSessionStorage();

                //loop cartDataInSessionStorage attributes and update one by one
                for (let [key, value] of Object.entries(attributesvalues)) {
                    cartDataInSessionStorage.attributes[key] = value;
                }
                sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(cartDataInSessionStorage));

                gbb.gbbBrowser.updateTotalPriceInSessionStorage();
                //gbb.gbbBrowser.updateTotalofRelevantBoxPriceInSessionStorage() #TBD
                return cartDataInSessionStorage;
            }
            catch (e) {
                gbb.utility.debugError("updateCartAttributes", e)
            }
        },
        deleteCartAttributes: function (attributes) {
            try {
                let cartDataInSessionStorage = gbb.gbbBrowser.getCartDataFromSessionStorage();
                let attributesKeys = Object.keys(cartDataInSessionStorage.attributes);
                for (let i = 0; i < attributesKeys.length; i++) {
                    if (attributes.includes(attributesKeys[i])) {
                        delete cartDataInSessionStorage.attributes[attributesKeys[i]];
                    }
                }
                sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(cartDataInSessionStorage));
                gbb.gbbBrowser.updateTotalPriceInSessionStorage();
                //gbb.gbbBrowser.updateTotalofRelevantBoxPriceInSessionStorage() #TBD
                return cartDataInSessionStorage;
            } catch (e) {
                gbb.utility.debugError("deleteCartAttributes", e)
            }
        },

        clearRelevantBoxFromSessionStorage: async function (boxId) {
            try {
                let cartDataInSessionStorage = gbb.gbbBrowser.getCartDataFromSessionStorage();

                //ex:allBoxesKeys = [box1, box2, box3, box4]
                let allBoxesKeys = Object.keys(cartDataInSessionStorage?.boxes) || [];
                gbb.gbbDiscountComponent.state.currentDiscountRule[boxId] = null;

                let currentBoxNo = parseInt(boxId.split("box")[1]);

                let lastBoxNo = parseInt(allBoxesKeys[allBoxesKeys.length - 1].split("box")[1]);

                let allBoxesData = JSON.parse(JSON.stringify(cartDataInSessionStorage.boxes));
                let tempAllBoxesData = JSON.parse(JSON.stringify(cartDataInSessionStorage.boxes));


                //allBoxesKeys = [box1, box2, box3, box4]
                for (let index = currentBoxNo; index < lastBoxNo; index++) {
                    let nextBoxIndex = index + 1;
                    let tempCopiedProductsDataObject = JSON.parse(JSON.stringify(tempAllBoxesData["box" + nextBoxIndex]))
                    allBoxesData[`box${index}`] = tempCopiedProductsDataObject;
                    allBoxesData[`box${index}`]["boxName"] = "Box - " + index;
                    allBoxesData[`box${index}`]["boxId"] = "box" + index;
                }
                delete allBoxesData["box" + allBoxesKeys.length];

                cartDataInSessionStorage.boxes = allBoxesData;

                sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(cartDataInSessionStorage));

                //update item properties for all boxes
                let newAllBoxesKeys = Object.keys(cartDataInSessionStorage?.boxes) || [];
                for (let i = 0; i < newAllBoxesKeys.length; i++) {
                    let boxItem = cartDataInSessionStorage.boxes[allBoxesKeys[i]];
                    let items = boxItem.items || [];
                    for (let i = 0; i < items.length; i++) {
                        let item = items[i];
                        let _data = {
                            id: item.key || item.id,
                            quantity: item.quantity,
                            properties: {
                                ...item.properties,
                                "Box ID": boxItem?.boxId?.split("box")[1] || 1
                            }
                        }
                        gbb.state.activeBoxId = boxItem.boxId;
                        await gbb.utility.changeCart(_data);
                    }
                }

                gbb.gbbBrowser.updateSubscriptionType("oneTimeSubscription");
                gbb.gbbBrowser.removeSubscriptionPlan();
                if (!cartDataInSessionStorage.boxes || Object.keys(cartDataInSessionStorage.boxes).length == 0) {
                    gbb.gbbBrowser.clearCartDataFromSessionStorage();
                }
                gbb.gbbReviewPage.init();
            } catch (err) {
                gbb.utility.debugConsole(err + "clearRelevantBoxFromSessionStorage");
            }
        },
        clearCartDataFromSessionStorage: function () {
            try {
                gbb.state.activeBoxId = null;
                sessionStorage.removeItem(`gbb-cart-${gbb.state.bundleId}`);
                let isEligibleTierForAddonsExists = gbb.storage.getItem(`eligible-tiers-for-addons-${gbb.state.bundleId}`)
                if (isEligibleTierForAddonsExists) {
                    sessionStorage.removeItem(`eligible-tiers-for-addons-${gbb.state.bundleId}`)
                }
            } catch (e) {
                gbb.utility.debugError("clearCartDataFromSessionStorage", e)
            }
        },
        addItemsToCart: async function () {
            try {
                const isPurchaseTypeSubscription = gbb.gbbSubscriptionProductsPage.f.checkIfPurchaseTypeIsSubscription()

                //perform ajax calls and add items to cart, then return the cart data
                //get the bundleQuantity from cartData
                // cartData = gbb.utility.multiplyByBundleQuantity(cartData)
                let cartData = gbb.gbbBrowser.getCartDataFromSessionStorage();
                let result = {
                    data: false,
                    failedProductsArr: []
                };
                //for loop and multiply quantity of items by boxQuantity
                for (let boxId in cartData.boxes) {
                    let boxCartData = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage(boxId);
                    cartData.boxes[boxId] = gbb.utility.multiplyByBundleQuantity(boxCartData)
                }

                //now traverse the cartData and remove all items from cart

                let allItems = gbb.gbbBrowser.getProductsFromAllBoxesFromCart(cartData);

                cartData.items = allItems;

                cartData = gbb.utility.cleanUpProperties(cartData);

                if (gbb.gbbAddonProducts.state.isEnabled) {
                    // check if cart contains addon products 
                    let isAddonProductPresentInCart = cartData.items.find(item => item.properties.hasOwnProperty("_addon_product"))
                    if (isAddonProductPresentInCart) {
                        let propertiesToAdd = {
                            _addon_offer_id:gbb.gbbAddonProducts.state.offerId
                        }
                        let addQtyToProducts = true
                        gbb.utility.addCustomProperties(cartData, propertiesToAdd, addQtyToProducts)
                    }
                }

                if (gbb.gbbBrowser.getSubscriptionType() == "saveSubscription" && gbb.gbbBrowser.getSubscriptionPlan()) {
                    cartData = gbb.utility.applySellingPlanToAllCartItems(cartData);
                }

                if (isPurchaseTypeSubscription) {
                    cartData = gbb.utility.applySellingPlanToAllCartItemsV2(cartData);
                }

                let cartDataWithBoxIdCorrected = gbb.utility.updateBoxIdInCartData(cartData);

                // if more than 
                // if ()

                cartDataWithBoxIdCorrected.items = gbb.utility.groupCartDataBasedOnId_and_Properties(cartDataWithBoxIdCorrected.items)


                result.data = await gbb.shopifyUtility.addToCart(cartDataWithBoxIdCorrected)

                if (!result.data) {
                    let response = await gbb.gbbBrowser.addIndividualItemsToCart(cartDataWithBoxIdCorrected);
                    result.data = response.data;
                    result.failedProductsArr = response.failedProductsArr;
                    gbb.gbbBrowser.emitCustomEvent({
                        eventName: "gbb-add-bundle-to-cart-failed",
                        detail: {
                            failedProducts:response.failedProductsArr || []
                        }
                    })
                } else {
                    result.data = true;
                    gbb.gbbBrowser.emitCustomEvent({
                        eventName: "gbb-add-bundle-to-cart-success",
                    })
                }
                // if (result.data) {
                //     gbb.gbbBrowser.clearCartDataFromSessionStorage()
                // }
                return result;
            } catch (error) {
                gbb.utility.debugConsole("error in gbbBrowser.addItemsToCart", error)
                return false
            }
        },
        addIndividualItemsToCart: async function (cartData) {
            let currentProduct;
            let result = {
                data: false,
                failedProductsArr: []
            }
            try {
                //individual ajax calls for each item
                let items = cartData.items;
                let apiResponse = [];
                for (let i = 0; i < items.length; i++) {
                    currentProduct = items[i];
                    let resp = await gbb.shopifyUtility.addToCart(items[i]);
                    apiResponse.push(resp)
                    if (resp && result.data) {
                        result.data = true;
                    }
                    if (!resp) {
                        result.data = false;
                        result.failedProductsArr.push(currentProduct);
                    }
                }
                return result;
            } catch (error) {
                // result.data = false;
                gbb.utility.debugConsole("error in gbbBrowser.addIndividualItemsToCart", error)
                return result;
            }
        },
        initializeRelevantBoxQuantity: function () {
            if (!gbb.gbbBrowser.getRelevantBoxQuantity()) {
                gbb.gbbBrowser.updateRelevantBoxQuantity(1);
            }
        },
        updateRelevantBoxQuantity: function (value, boxId) {
            if (!boxId) {
                boxId = gbb.state.activeBoxId
            }
            let boxCartDataInSessionStorage = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage(boxId);
            boxCartDataInSessionStorage.boxQuantity = value;
            // if(gbb.state.giftBoxCartData){ //TBD
            //     gbb.state.giftBoxCartData["bundleQuantity"] = value;
            // }
            gbb.gbbBrowser.setRelevantBoxDataToSessionStorage(boxCartDataInSessionStorage, boxId);
            return boxCartDataInSessionStorage.boxQuantity;
        },
        getRelevantBoxQuantity: function (boxId) {
            if (!boxId) {
                boxId = gbb.state.activeBoxId
            }
            let boxCartDataInSessionStorage = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage(boxId)
            if (boxCartDataInSessionStorage) {
                return boxCartDataInSessionStorage.boxQuantity;
            }
            return 0;
        },
        getSubscriptionType: function () {
            let cart = sessionStorage.getItem(`gbb-cart-${gbb.state.bundleId}`);
            cart = JSON.parse(cart);
            if (cart && cart.subscriptionType) {
                return cart.subscriptionType;
            }
            return 0;
        },
        updateSubscriptionType: function (value) {
            let cartDataInSessionStorage = gbb.gbbBrowser.getCartDataFromSessionStorage();
            cartDataInSessionStorage.subscriptionType = value;
            if (gbb.state.giftBoxCartData) {
                gbb.state.giftBoxCartData["subscriptionType"] = value;
            }
            sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(cartDataInSessionStorage));
            return cartDataInSessionStorage.subscriptionType;
        },
        getSubscriptionPlan: function () {
            let cart = sessionStorage.getItem(`gbb-cart-${gbb.state.bundleId}`);
            cart = JSON.parse(cart);
            if (cart && cart.subscriptionPlan) {
                return cart.subscriptionPlan;
            }
            return 0;
        },
        updateSubscriptionPlan: function (value) {
            let cartDataInSessionStorage = gbb.gbbBrowser.getCartDataFromSessionStorage();
            cartDataInSessionStorage.subscriptionPlan = value;
            if (cartDataInSessionStorage["subscriptionTotal"]) {
                delete cartDataInSessionStorage["subscriptionTotal"];
            }
            if (gbb.state.giftBoxCartData) {
                gbb.state.giftBoxCartData["subscriptionPlan"] = value;
            }
            sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(cartDataInSessionStorage));
            return cartDataInSessionStorage.subscriptionPlan;
        },
        prepareDiscountString: function () {
            let getAllDiscountsToApply = gbb.gbbBrowser.state.gbbDiscountsAlreadyPresentInCart;

            let bundleName = gbb.state.bundleName;


            if (gbb.gbbDiscountComponent.state.discountCode) {
                getAllDiscountsToApply = { ...getAllDiscountsToApply, [`gbbDiscountCode-${bundleName}`]: gbb.gbbDiscountComponent.state.discountCode };
            }
            let discountCodeString;
            // {"gbbDiscountCode-1": 'teeboxblandselv-42609929',"gbbDiscountCode-2": 'teeboxblandselv-42609929'}
            if (getAllDiscountsToApply) {
                //convert them to teeboxblandselv-42609929,teeboxblandselv-42609929
                discountCodeString = Object.values(getAllDiscountsToApply).join(",");
            }
            if (discountCodeString) {
                gbb.gbbDiscountComponent.state.discountCode = gbb.gbbDiscountComponent.state.discountCode + "," + discountCodeString;
            }

            return discountCodeString;
        },
        updateSubscriptionTotal: function (value) {
            let cartDataInSessionStorage = gbb.gbbBrowser.getCartDataFromSessionStorage();
            cartDataInSessionStorage.subscriptionTotal = value;
            if (gbb.state.giftBoxCartData) {
                gbb.state.giftBoxCartData["subscriptionTotal"] = value;
            }
            sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(cartDataInSessionStorage));
            return cartDataInSessionStorage.subscriptionTotal;
        },
        removeSubscriptionPlan: function () {
            let cartDataInSessionStorage = gbb.gbbBrowser.getCartDataFromSessionStorage();
            delete cartDataInSessionStorage.subscriptionPlan;
            sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(cartDataInSessionStorage));
            return cartDataInSessionStorage.subscriptionPlan;
        },
        createNewBoxInSessionStorage: function (isRedirectAllowed) {
            try {
                let cartDataFromSessionStorage = gbb.gbbBrowser.getCartDataFromSessionStorage();
                let boxKeys = Object.keys(cartDataFromSessionStorage?.boxes) || [];
                let maxBoxKey = 0;
                for (let i = 0; i < boxKeys.length; i++) {
                    let tempBoxKeyNo = parseInt(boxKeys[i]?.split("box")[1]);
                    if (tempBoxKeyNo > maxBoxKey) {
                        maxBoxKey = tempBoxKeyNo;
                    }
                }
                maxBoxKey = maxBoxKey + 1;
                let newBoxId = "box" + maxBoxKey
                let newBox = {
                    boxId: newBoxId,
                    boxName: "Box - " + maxBoxKey,
                    items: [],
                    boxQuantity: 1,
                    isBoxActive: true,
                    total_price: 0
                }

                gbb.gbbPersonalizePage.state.customerUploadsErrors = null;
                gbb.gbbPersonalizePage.state.customerUploadsResponse = null;

                // gbb.gbbBrowser.activateRelevantBoxInSessionStorage(newBoxId,{redirectToFirstProductPage:isRedirectAllowed});
                cartDataFromSessionStorage = gbb.gbbBrowser.activateRelevantBoxInSessionStorage(newBoxId, { redirectToFirstProductPage: isRedirectAllowed });

                gbb.gbbDiscountComponent.state.currentDiscountRule[gbb.state.activeBoxId] = null;
                cartDataFromSessionStorage.boxes[newBoxId] = newBox;
                sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(cartDataFromSessionStorage));

                if (gbb?.settings?.stepsConfigurationData?.defaultProductsData?.isDefaultProductsEnabled) {
                    gbb.gbbBrowser.addDefaultProductsToBox();
                }
                let isEligibleTierForAddonsExists = gbb.storage.getItem(`eligible-tiers-for-addons-${gbb.state.bundleId}`)
                if (isEligibleTierForAddonsExists) { 
                    sessionStorage.removeItem(`eligible-tiers-for-addons-${gbb.state.bundleId}`)
                }
                return cartDataFromSessionStorage;
            } catch (err) {
                gbb.utility.debugError(err);
            }
        },
        redirectToFirstProductPage: function () {
            try {
                let firstItem = gbb.state.navigationItems[0];
                if (firstItem.id == "landingPage") {
                    firstItem = gbb.state.navigationItems[1];
                }
                firstItem.initFn();
                gbb.f.addParamsToUrl("page", firstItem.id)
            } catch (err) {
                gbb.utility.debugError(err);
            }
        },

        activateRelevantBoxInSessionStorage: function (boxId, options) {
            // options = {redirectToFirstProductPage:true/false}
            try {
                gbb.state.activeBoxId = boxId;
                let cartDataFromSessionStorage = gbb.gbbBrowser.getCartDataFromSessionStorage();
                let boxKeys = Object.keys(cartDataFromSessionStorage?.boxes) || [];
                for (let i = 0; i < boxKeys.length; i++) {
                    let boxItem = cartDataFromSessionStorage.boxes[boxKeys[i]];
                    if (boxItem.isBoxActive) {
                        boxItem.isBoxActive = false;
                        break;
                    }
                }
                for (let i = 0; i < boxKeys.length; i++) {
                    let boxItem = cartDataFromSessionStorage.boxes[boxKeys[i]];
                    if (boxItem.boxId == boxId) {
                        boxItem.isBoxActive = true;
                        break;
                    }
                }
                if (options?.redirectToFirstProductPage) {
                    gbb.gbbBrowser.redirectToFirstProductPage();
                }
                gbb.gbbPersonalizePage.state.customerUploadsResponse = null;
                sessionStorage.setItem(`gbb-cart-${gbb.state.bundleId}`, JSON.stringify(cartDataFromSessionStorage));
                return cartDataFromSessionStorage;
            } catch (err) {
                gbb.utility.debugError(err);
            }
        },
        getCartDataFromShopify: async function () {
            try {
                const cartData = await gbb.shopifyUtility.getCart();
                //now loop through items and check if theres any property on known as Box ID
                // if yes, then save that BoxId as gbb.gbbBrowser.state.boxIdOffset
                let boxIdOffset = 0;
                let listOfBundleNamesPresentInCart = [];
                cartData.items.forEach(item => {
                    if (item.properties["Box ID"]) {
                        //  boxIdOffset = parseInt(item.properties["Box ID"]);
                        boxIdOffset = Math.max(boxIdOffset, parseInt(item.properties["Box ID"]));
                        // this will append duplicate box names, but its not gonna harm or cause a problem, so its fine
                        listOfBundleNamesPresentInCart.push(item.properties["Bundle"]);
                    }
                });

                listOfBundleNamesPresentInCart = [...new Set(listOfBundleNamesPresentInCart)];

                //              cartData.attributes
                // {gbbDiscountCode-1: 'teeboxblandselv-42609929'}

                let gbbDiscountsAlreadyPresentInCart = Object.keys(cartData.attributes).filter(key => key.includes("gbbDiscountCode-"));

                if (gbbDiscountsAlreadyPresentInCart.length > 0) {
                    gbbDiscountsAlreadyPresentInCart.forEach(discountCodeKey => {
                        let discountCode = cartData.attributes[discountCodeKey];
                        // check if this discountCodeKey is present in listOfBundleNamesPresentInCart
                        let discountCodeKeyBoxName = discountCodeKey.split("gbbDiscountCode-")[1];

                        //is discountCodeKeyBoxName present in listOfBundleNamesPresentInCart
                        if (discountCodeKeyBoxName && listOfBundleNamesPresentInCart.includes(discountCodeKeyBoxName)) {
                            // if yes, then add this discountCode to gbb.gbbBrowser.state.gbbDiscountsAlreadyPresentInCart
                            gbb.gbbBrowser.state.gbbDiscountsAlreadyPresentInCart[discountCodeKey] = discountCode;
                        }
                    })
                }

                gbb.gbbBrowser.state.cartDataFromShopifyBeforeLastPage = cartData;

                gbb.utility.debugConsole("boxIdOffset-> set as", boxIdOffset)
                gbb.gbbBrowser.state.boxIdOffset = boxIdOffset;
                return cartData;
            } catch (error) {
                gbb.utility.debugError(error);
                return;
            }
        },
        setSubscriptionBundleDataInSessionStorage: function (payload) {
            try {
                // set payload in session storage with bundleId
                sessionStorage.setItem(`gbb-subscription-bundle-${gbb.state.bundleId}`, JSON.stringify(payload));

            } catch (error) {
                gbb.utility.debugError('error in setSubscriptionBundleDataInSessionStorage', error)
            }
        },
        emitCustomEvent: function ({
            eventName,
            attachEventTo = document,
            detail = '',
            bubbles = true,
            cancelable = false
        }) {
            try {
                gbb.utility.debugConsole("customEvent:",{
                    eventName,
                    attachEventTo,
                    detail,
                });
                let event = new CustomEvent(eventName, {
                    detail: detail, // extra information that can be accessed via e.detail.message
                    bubbles: bubbles,    // Allow event propagation through the DOM if needed
                    // cancelable: cancelable, // we dont want to give other dev power to interrupt our execution / operations
                });
                // Dispatch the event on the specified element (default is document)
                attachEventTo.dispatchEvent(event);
                return attachEventTo
            } catch (error) {
                gbb.utility.debugError(`Error in emitCustomEvent for event: ${eventName}`, error);
            }
        }
    },
    storage: {

        setItem: function (field, value) {
            sessionStorage.setItem(field, value)
        },
        getItem: function (field) {
            return sessionStorage.getItem(field)
        }
    },
    themeSpecificCode: {
        init: function (settings) {
            gbb.themeSpecificCode.f.ventureTheme(settings)
        },

        f: {
            ventureTheme: function () {
                if (window.Shopify && window.Shopify.theme && window.Shopify.theme.theme_store_id && window.Shopify.theme.theme_store_id == gbb.constants.themesIds.VENTURE_THEME) {
                    // reload on save
                    gbb.selectors.sideCartDrawerOverlay = ""
                }
            }
        }
    },
    giftboxbuilderPage: {
        //init, selectGiftBoxPage, AddProductsPage, personalizePage, reviewPage,
        init: async function (settings) {
            gbb.giftboxbuilderPage.initialize(settings)
        },
        initialize: async function (settings) {
            // gbb.giftboxbuilderPage.init(settings)

            // gbb.state.cartData = await gbb.utility.getCart()

            gbb.utility.debugConsole("dummy commit");
            //initialize active variant class
            gbb.utility.getActiveVariantStyle();
            await gbb.utility.setStoreCurrenyStateFromCart();

            gbb.utility.setBuilderPageHTMLData_SEO()

            let navigationItems = gbb.f.setNavigationItems();

            if (gbb.settings.stepsConfigurationData.bundleStatus == "PAUSED") {
                navigationItems = [];
            }

            gbb.state.navigationItems = navigationItems
            let currentNavigationItem;

            gbb.giftboxbuilderPage.f.insertWrapperIntoBody();

            gbb.gbbAddProductsPage.f.createArraysOfPageWhichHaveConditions();

            if (gbb.settings?.stepsConfigurationData?.isProductSlotsEnabled) {
                gbb.gbbAddProductsPage.f.calculateProductSlotsData()
            }
            // document.title = "Easy Bundles"

            gbb.gbbDiscountComponent.f.updateCurrentDiscountRule()
            gbb.gbbKite.init();
            // currentPageId
            //  check the url params and see if there is ?page field

            let navId = gbb.f.getParamValueFromUrl("page")
            let currentFlow = gbb.f.getParamValueFromUrl("currentFlow")
            //check if landing page is enabled or not that's it
            let isLandingPageEnabled = gbb.settings?.stepsConfigurationData?.landingPageData?.isLandingPageEnabled
            if (isLandingPageEnabled && (navId == null || typeof navId == "undefined" || navId == "landingPage")) {
                gbb.gbbLandingPage.init(settings, "GIFTBOXBUILDER_PAGE")
                gbb.utility.renderTemporaryLoadingSpinner("hide")
                //prefetchFn of the next page to be loaded, figure out from navigationitems
                let nextNavigationItem = gbb.f.getNextNavigationItem();
                if (nextNavigationItem) {

                    if (nextNavigationItem.intialFetchFn) {
                        nextNavigationItem.intialFetchFn()
                    }
                }
            } else {
                gbb.utility.renderTemporaryLoadingSpinner("show")
            }


            // initialize all these fns after calling
            // prefetching the data from shopify

            // extract extra info from localStorage extraInfoFromLinkDummyProductPage
            gbb.f.processAdditionalLogicAsPerUseCase();

            const getProductsData = await gbb.f.prefetchData(settings)
            gbb.gbbBrowser.initializeRelevantBoxQuantity();
            const directlyLoadCheckoutPage = gbb.state.navigationItems.length < 1 ? true : false;
            if (directlyLoadCheckoutPage) {
                await gbb.gbbBrowser.getCartDataFromShopify();
                await gbb.utility.handleCheckoutClick();
                return;
            }

            if (navId != null && navId != "landingPage" && typeof navId != "undefined") {
                //find the current navigationItem
                currentNavigationItem = gbb.f.getNavItem(navId);
                gbb.state.currentPageId = currentNavigationItem.id
                //call the initFn
                gbb.f.markPreviousNavigationItemsAsCompleted(currentNavigationItem)
                await currentNavigationItem.initFn()
                gbb.utility.renderTemporaryLoadingSpinner("hide")
            } else {
                //call the initFn of the first item
                let firstItem = gbb.state.navigationItems[0];
                gbb.f.addParamsToUrl("page", firstItem.id)
                gbb.f.addParamsToUrl("currentFlow", "byob")
                gbb.f.markPreviousNavigationItemsAsCompleted(firstItem)

                if (firstItem.id != "landingPage") {
                    await firstItem.initFn()
                    gbb.utility.renderTemporaryLoadingSpinner("hide")
                }
            }

            gbb.utility.renderTemporaryLoadingSpinner("hide")

            await gbb.f.insertDiscountProgressBar();

            let isThisLastNavigationItem = gbb.state.navigationItems.indexOf(currentNavigationItem) == gbb.state.navigationItems.length - 1
            let isThisTheOnlyNavigationItem = gbb.state.navigationItems.length == 1

            if (isThisLastNavigationItem || isThisTheOnlyNavigationItem) {
                gbb.gbbBrowser.getCartDataFromShopify();
            }

            // gbb.giftboxbuilderPage.f.scrollIntoBundleViewForIndependentPage();

        },
        f: {
            applyCustomizationClassToBodyIfNeeded: function (body) {
                try {
                    let applyNewCustomization = gbb.settings.pageCustomizationData?.generalSettings?.bundle?.applyNewPageCustomization;

                    // If customization flag is not set, check against the version release date
                    if (!applyNewCustomization) {
                        let userCreatedAt = gbb.settings.merchantInfo.createdAt;
                        const versionReleaseDate = new Date('2024-09-19T00:00:00Z'); // 19th September 2024

                        applyNewCustomization = new Date(userCreatedAt) >= versionReleaseDate;
                    }

                    // Add class if customization is applicable
                    if (applyNewCustomization) {
                        gbb.$(body).addClass('gbbNewPageCustomization');
                    }
                } catch (error) {
                    gbb.utility.debugError("applyCustomizationClassToBodyIfNeeded", error);
                }
            },
            insertWrapperIntoBody: function () {
                let currentBundleDesignTemplate = gbb.settings.stepsConfigurationData.bundleDesignTemplate
                const gbbHTMLWrapper = gbb.elements.gbbHTMLWrapperParent;
                const gbbBodyWrapper = gbb.elements.gbbBodyWrapperParent;
                gbbHTMLWrapper.append(gbbBodyWrapper);
                gbb.$(".gbbPageBody").html(gbbHTMLWrapper);

                //attach bundle-number  to the html tag
                gbb.$("html").addClass(`bundle-${gbb.state.bundleId}`)
                gbb.$("html").addClass(`gbbBundle-HTML`)


                // add an id too
                if (currentBundleDesignTemplate == 'BUILD_FROM_SCRATCH_NEWPRODUCTCARD') {
                    gbb.$(".gbbPageBody").addClass('gbbProductsCardLayoutV2')
                }
                gbb.giftboxbuilderPage.f.applyCustomizationClassToBodyIfNeeded('.gbbPageBody')
                // if(gbb.settings.pageCustomizationData.)
                gbb.$(".gbbPageBody").attr("id", "gbbBundle")
                gbb.$(".gbbPageBody").addClass(`bundle-${gbb.state.bundleId}`)
                if (gbb.settings.pageCustomizationData.generalSettings.bundle.bundleBgColor) {
                    gbb.$(".gbbPageBody").css("background-color", gbb.settings.pageCustomizationData.generalSettings.bundle.bundleBgColor)
                }
            },
            scrollIntoBundleViewForIndependentPage: function () {
                try {
                    let gbbBundleElement = gbb.$("#gbbBundle").length > 0 && window.easyBundlesConfig;

                    if (gbbBundleElement) {
                        // gbbBundleElement[0].scrollIntoView({ behavior: "smooth", block: "start" });

                        // scroll with some  margin of top 20px;

                        let topPos = gbb.$("#gbbBundle").offset().top - 20;

                        // scroll into it;
                        gbb.$('html, body').animate({
                            scrollTop: topPos
                        }, 1000);
                    }
                } catch (e) {
                    gbb.utility.debugError("error in scrollIntoBundleViewForIndependentPage", e)
                }
            }
        },
        action: {
            onPrevNavigationBYOB: async function () {
                let currentPageItem = gbb.f.getNavItem(gbb.state.currentPageId);
                let scrollPoisitionAfterPageChange = gbb.state.scrollPoisitionAfterPageChange;

                let prevNavigationItem = gbb.f.getPreviousNavigationItem();
                gbb.state.navigationItems.forEach(function (item) {
                    if (item.id == currentPageItem.id) {
                        item.isActive = false;
                    }
                })
                gbb.state.navigationItems.forEach(function (item) {
                    if (item.id == prevNavigationItem.id) {
                        item.isActive = true;
                    }
                })
                //check if its the last navigation item
                if (prevNavigationItem) {

                    gbb.f.markPreviousNavigationItemsAsCompleted(prevNavigationItem)
                    await prevNavigationItem.initFn();

                    gbb.f.addParamsToUrl("page", prevNavigationItem.id)
                    setTimeout(() => {
                        window.scrollTo(0, scrollPoisitionAfterPageChange);
                    }, 700)
                }
                else {
                    gbb.utility.debugConsole("Welcome to the first page bro")
                    // gbb.gbbModal.action.onModalClose();
                }

            },
            onNextNavigationBYOB: async function (nextPageId) {
                // type -> back or next

                //next button click on path 2 -> create your own gift box

                // gbb.giftboxbuilderPage.f.onFooterNextButtonClick(settings)
                // if(nextNavigationItem.updatePageStatusFn){
                // nextNavigationItem
                // }
                // todo,
                let currentPageValidationPassed = true;
                let currentPageItem = gbb.f.getNavItem(gbb.state.currentPageId);
                let nextNavigationItem;

                if (nextPageId) {
                    nextNavigationItem = gbb.f.getNavItem(nextPageId);
                } else {
                    nextNavigationItem = gbb.f.getNextNavigationItem();
                }

                if (currentPageItem.updatePageStatusFn) {
                    currentPageValidationPassed = await currentPageItem.updatePageStatusFn();
                }

                //make next navigation item active
                if (nextNavigationItem) {
                    gbb.state.navigationItems.forEach(function (item) {
                        if (item.id == nextNavigationItem.id) {
                            item.isActive = true;
                        }
                    })
                }

                //is this nextNavigationItem is the last navigation item then call shopifyAddToCart
                let isThisLastNavigationItem = gbb.state.navigationItems.indexOf(nextNavigationItem) == gbb.state.navigationItems.length - 1
                let scrollPoisitionAfterPageChange = gbb.state.scrollPoisitionAfterPageChange;
                //check if its the last navigation item
                if (nextNavigationItem && currentPageValidationPassed) {
                    await nextNavigationItem.initFn();
                    gbb.f.addParamsToUrl("page", nextNavigationItem.id)
                    setTimeout(() => {
                        window.scrollTo(0, scrollPoisitionAfterPageChange);
                        // window.scrollTo(0, 70);
                    }, 700)

                }

                if (isThisLastNavigationItem) {
                    gbb.gbbBrowser.getCartDataFromShopify();
                }

                else if (!nextNavigationItem) {
                    gbb.utility.debugConsole("Welcome to the end bro")
                    let cartData = await gbb.utility.getCart();
                    gbb.state.giftBoxCartData = cartData;
                    await gbb.utility.handleCheckoutClick();
                    // gbb.gbbModal.action.onModalClose();
                }

                // gbbBundle scroll to gbbBundle id attribute
                gbb.giftboxbuilderPage.f.scrollIntoBundleViewForIndependentPage();

            }
        }

    },
    gbbLandingPage: {
        state: {
            buildBoxButtonAction: undefined,
            // giftBoxData: null,
        },
        init: async function (settings, parent) {
            gbb.state.navigationItems = gbb.f.setNavigationItems();
            gbb.state.currentPageId = "landingPage";
            if (gbb?.gbbAddProductsPage?.state?.productPageData) {
                gbb.gbbAddProductsPage.state.productPageData = undefined
            }
            let navItem = gbb.utility.getNavItem(gbb.state.currentPageId)
            gbb.f.markPreviousNavigationItemsAsCompleted(navItem)
            gbb.gbbLandingPage.initialize(settings, parent)
            gbb.gbbLandingPage.f.registerEvents(settings)
            gbb.utility.renderTemporaryLoadingSpinner("hide")

            // gbb.gbbModel.init(settings)
        },
        initialize: function (settings, parent) {

            // gbb.utility.debugConsole("settings:",settings.giftwrap);

            // let {isEnabledOnProductPage, isEnabledOnCartPage} = gbb.gbbLandingPage.f.checkifGiftWrapEnabled(settings.giftwrap, productHandle, parent)
            // if (isEnabledOnProductPage) {
            let gbbLandingPageWrapper = gbb.$("<div>").addClass("gbbLandingPageWrapper");
            const gbbLandingPageHeaderHTML = gbb.gbbLandingPage.f.prepareHeader();
            const gbbLandingPageBodyHTML = gbb.gbbLandingPage.f.prepareUI();
            const gbbLandingPageFooterHTML = gbb.gbbLandingPage.f.prepareFooter();

            gbbLandingPageWrapper.append(gbbLandingPageHeaderHTML);
            gbbLandingPageWrapper.append(gbbLandingPageBodyHTML);
            gbbLandingPageWrapper.append(gbbLandingPageFooterHTML);

            gbb.$("body").attr("data-page", gbb.state.currentPageId)
            gbb.state.landingPageBody = gbbLandingPageWrapper;
            gbb.gbbLandingPage.f.insertIntoMainPageWrapper();
        },
        f: {

            prepareHeader: function () {
                //this is a header
                const gbbLandingPageHeaderHTML = gbb.$("<div>").addClass("gbbLandingPageHeader");
                // gbbLandingPageHeaderHTML.append("<div> <h1> Header Gift Box Builder</h1> </div>");
                // return gbbLandingPageHeaderHTML;
            },
            prepareUI: function () {

                let scrollPoisitionAfterPageChange = gbb.state.scrollPoisitionAfterPageChange;

                window.scrollTo(0, scrollPoisitionAfterPageChange);

                // window.scrollTo(0, 70);
                let gbbLandingPageHTML;

                //gbbLandingPageHTMLContent = create divs with classNams
                gbbLandingPageHTML = gbb.$("<div>").addClass("gbbLandingPageHTMLContent");
                //one image div, 2 text divs, 1 button div and one label div and 1 cards main div
                const landingPageBanner = gbb.$("<div>").addClass("gbbLandingPageBanner");
                //all the text and button goes in this div
                const landingPageBannerImage = gbb.$("<img>").addClass("gbbLandingPageBannerImage");
                const gbbLandingPageBannerTextWrapper = gbb.$("<div>").addClass("gbbLandingPageBannerTextWrapper");
                const landingPageBannerText = gbb.$("<div>").addClass("gbbLandingPageBannerText");
                //subtext
                const landingPageBannerSubText = gbb.$("<div>").addClass("gbbLandingPageBannerSubText");
                //create a button
                const gbbLandingPageBannerButtonWrapper = gbb.$("<div>").addClass("gbbLandingPageBannerButtonWrapper");
                // const gbbLandingPageBannerButton = gbb.$("<button>").addClass("landingPageBannerButton");
                const gbbLandingPageBannerButton = gbb.$("<div>").addClass("landingPageBannerButton");

                landingPageBannerImage.attr("src", gbb.settings.stepsConfigurationData.landingPageData.stepImage);


                landingPageBannerText.text(gbb.settings?.stepsConfigurationData?.landingPageData?.bannerText);
                landingPageBannerSubText.text(gbb.settings?.stepsConfigurationData?.landingPageData?.bannerSubtext);

                landingPageBannerText.css("color", gbb.settings.pageCustomizationData.landingPage.landingPageTextColor);
                landingPageBannerSubText.css("color", gbb.settings.pageCustomizationData.landingPage.landingPageTextColor);

                gbbLandingPageBannerButton.css("background", gbb.settings.pageCustomizationData.landingPage.landingPageButtonBgColor);
                gbbLandingPageBannerButton.css("color", gbb.settings.pageCustomizationData.landingPage.landingPageButtonTextColor);
                gbbLandingPageBannerButton.on("click", function () {
                    gbb.state.currentFlow = "byob";
                    //add params to url
                    gbb.f.addParamsToUrl("currentFlow", "byob")
                    gbb.giftboxbuilderPage.action.onNextNavigationBYOB()
                    // add pointer events none to none
                    // setTimeout(() => {
                    // gbb.utility.renderTemporaryLoadingSpinner();
                    // }, 100)
                    gbbLandingPageBannerButton.css("pointer-events", "none");
                    setTimeout(() => {
                        gbbLandingPageBannerButton.css("pointer-events", "auto");
                    }, 1000)

                    //gbb.gbbReviewPage.init(gbb.settings, "SUMMARY_PAGE")
                    //gbb.gbbAddProductsPage.init(gbb.settings, "ADD_PRODUCTS_PAGE");
                    //gbb.gbbAddProductsPage.f.insertIntoMainPageWrapper();
                });
                gbbLandingPageBannerButton.text(gbb.settings?.stepsConfigurationData?.landingPageData?.bannerButtonText);

                //gbbLandingPageBannerTextWrapper.append(landingPageBannerText);
                //gbbLandingPageBannerTextWrapper.append(landingPageBannerSubText);
                gbbLandingPageBannerButtonWrapper.append(gbbLandingPageBannerButton);
                //gbb.f.applyPrimaryColorCss(gbbLandingPageBannerButton);
                gbbLandingPageBannerTextWrapper.append(gbbLandingPageBannerButtonWrapper.clone());

                //Navigation items container
                const landingPageNavigationItemsContainer = gbb.$("<div>").addClass("gbbLandingPageNavigationItemsContainer");




                landingPageBanner.append(landingPageBannerImage);
                let nextNavigationItems = gbb.f.getNavigationItemsToDisplay(gbb.state.currentPageId);
                landingPageNavigationItemsContainer.append(gbb.f.renderNavigationHTML(landingPageNavigationItemsContainer, "landingPage", nextNavigationItems));




                gbbLandingPageHTML.append(landingPageBanner);
                gbbLandingPageHTML.append(landingPageBannerText);
                gbbLandingPageHTML.append(landingPageNavigationItemsContainer);
                gbbLandingPageHTML.append(gbbLandingPageBannerButtonWrapper);



                return gbbLandingPageHTML;

            },
            prepareFooter: function () {
                //this is a footer
                const gbbLandingPageFooterHTML = gbb.$("<div>").addClass("gbbLandingPageFooter");
                // gbbLandingPageFooterHTML.append("<div> <h1>Footer Gift Box Builder</h1> </div>");
                // return gbbLandingPageFooterHTML;
            },
            insertIntoMainPageWrapper: function () {

                gbb.$(".gbbBodyWrapper").html(gbb.state.landingPageBody);
                gbb.$(".gbbBodyWrapper").addClass(`bundle-${gbb.state.bundleId}`);
                gbb.$(".gbbBodyWrapper").children().first().hide();
                gbb.$(".gbbBodyWrapper").children().first().fadeIn(700);

            },
            registerEvents: function (settings) {
                gbb.gbbLandingPage.state.buildBoxButtonAction = function () {
                    gbb.utility.debugConsole("build box button clicked");
                    // window.alert("build box button clicked");
                };
            }

        },
        events: function (settings) {
        },
        action: {
        }
    },
    gbbAddProductsPage: {
        state: {
            buildBoxButtonAction: undefined,
            productPageKey: "",
            //TODO: @abhishek change it here
            fetchCountPerBatch: 24,
            fetchBatchStartIndex: 0,
            uniqueProductsData: [],
            currentProductsDataset: [],
            pagesWhichHaveConditionsOnPages: [],
            categoriesWhichHaveConditions: [],
            displayVariantsAsIndividualProducts: false,
            dataForInfiniteScroll: {
                noteAttribute: "",
                allProductsData: null,
                categoryId: "",
            },
            filterBySearch: {
                isSearchEnabled: false,
                searchQuery: {
                    searchField: 'title',
                    searchFieldType: String,
                    searchText: '',
                }
            },
            showBoxProductsInFooter: false,
            autoNextStepOnConditionMet: false,
            pagesWhichHaveExhaustedATCFooterAnimation: [],
            isAnimateFooterOnATCEnabled: false,
            lastClearedDiscountProgressBarValue: 0,
            totalProductSlotsRequired: 0,
            productSlotsCalculationData: [],
            isEveryConditionHaveTypeQuantity: null,
            incrementProductQtyBy: 1,
            decrementProductQtyBy: 1,
            // giftBoxData: null,
        },
        initPageX: async function (pageNumber, settings, parent) {
            // Construct the dynamic parts of the state based on the page number
            const pageId = `addProductsPage${pageNumber}`;
            const productPageKey = `productsData${pageNumber}`;
            const productsData = JSON.parse((JSON.stringify(gbb.settings.stepsConfigurationData[productPageKey])))

            if (true || pageId !== gbb.state.currentPageId) {
                gbb.gbbBrowser.emitCustomEvent({
                    eventName: "gbb-page-init",
                    detail: {
                        activePageId: pageId,
                        prevPageId: gbb.state.currentPageId,
                    }
                })
            }

            // Set the global state for the current page
            gbb.state.currentPageId = pageId;
            gbb.gbbMultipleCategoriesPage.state.currentCategoryId = undefined;
            gbb.gbbMultipleCategoriesPage.currentIndex = undefined;
            gbb.gbbAddProductsPage.state.productPageKey = productPageKey;
            gbb.gbbMultipleCategoriesPage.state.currentCategory = undefined;



            // Check if we need to use the filter logic or not
            let uniqueProductsData = productsData.uniqueProductsData;



            // get first page from the array of navigationItems.
            let navigationItems = [...gbb.state.navigationItems];


            let blackListedNavigationItems = ["landingPage", "reviewPage"];

            navigationItems = navigationItems.filter(function (item) {
                return !blackListedNavigationItems.includes(item.id);
            })


            let skipConditionalLogicFiltering = navigationItems[0].id == pageId || productsData?.skipConditionalLogicFiltering || gbb.settings.bundleSettings.conditionalLogicFilterOnFirstPageAswell || false;

            if (skipConditionalLogicFiltering == false) {
                if (productsData.pageType == "MULTIPLE_CATEGORY") {
                    let allCategoriesData = gbb.f.filterOutBasedOnConditionalLogic_MultipleCategories(productsData.categories)

                    productsData.categories = allCategoriesData;
                    // uniqueProductsData = gbb.f.filterOutBasedOnConditionalLogic(productsData.uniqueProductsData);
                } else {
                    // uniqueProductsData = productsData.uniqueProductsData; // Or some default value or logic
                    uniqueProductsData = gbb.f.filterOutBasedOnConditionalLogic(productsData.uniqueProductsData);
                }
            }


            gbb.gbbAddProductsPage.state.productPageData = productsData;
            gbb.gbbAddProductsPage.state.uniqueProductsData = uniqueProductsData;

            // reset search value
            gbb.gbbAddProductsPage.state.filterBySearch.isSearchEnabled = productsData?.filterBySearch?.isSearchEnabled || false
            gbb.gbbAddProductsPage.state.filterBySearch.searchQuery.searchFieldType = productsData?.filterBySearch?.searchFieldType || `String`
            gbb.gbbAddProductsPage.f.resetSearchTextValue()
            gbb.gbbAddProductsPage.state.dataForInfiniteScroll = {
                noteAttribute: undefined,
                allProductsData: undefined,
                categoryId: undefined,
            }
            if (gbb.settings?.app?.integrations?.judgeme?.isEnabled) {
                await gbb.gbbIntegrations?.judgeme?.init(uniqueProductsData)
            }
            gbb.gbbAddProductsPage.state.showBoxProductsInFooter = false
            // Initialize the page
            if (gbb.$("body").hasClass("gbbBodyOverflowHidden")) {  // when drawer is open and user navigates to another page in that case we will close the footer drawer
                gbb.$("body").removeClass("gbbBodyOverflowHidden")
                // gbb.$("body").css("overflow",DEFAULT_BODY_OVERFLOW_VALUE)
            }
            let bundleType = gbb.settings?.stepsConfigurationData?.bundleType || ''
            let isSubscriptionBundle = bundleType == 'SUBSCRIPTION_BUNDLE'
            if (isSubscriptionBundle) {
                let subscriptionBundlesData = gbb.settings?.stepsConfigurationData?.subscriptionBundlesData || {}
                gbb.gbbSubscriptionProductsPage.f.subscriptionBundlesInit(subscriptionBundlesData)
            }
            await gbb.gbbAddProductsPage.init(settings, parent);
            if (isSubscriptionBundle) {
                gbb.gbbSubscriptionProductsPage.f.autoScrollToActiveSellingPlanNavigation()
             }
        },
        initPage1: async function (settings, parent) {

            await gbb.gbbAddProductsPage.initPageX(1, settings, parent)
            // gbb.state.currentPageId = "addProductsPage1"
            // gbb.gbbAddProductsPage.state.productPageKey = "productsData1"
            // gbb.gbbAddProductsPage.state.productPageData = gbb.settings.stepsConfigurationData.productsData1
            // gbb.gbbAddProductsPage.state.uniqueProductsData = gbb.settings.stepsConfigurationData.productsData1.uniqueProductsData
            // await gbb.gbbAddProductsPage.init(settings, parent)
        },
        initPage2: async function (settings, parent) {
            await gbb.gbbAddProductsPage.initPageX(2, settings, parent)
        },
        initPage3: async function (settings, parent) {
            await gbb.gbbAddProductsPage.initPageX(3, settings, parent);
        },
        initPage4: async function (settings, parent) {
            await gbb.gbbAddProductsPage.initPageX(4, settings, parent);
        },
        initPage5: async function (settings, parent) {
            await gbb.gbbAddProductsPage.initPageX(5, settings, parent);
        },
        initPage6: async function (settings, parent) {
            await gbb.gbbAddProductsPage.initPageX(6, settings, parent);
        },
        initPage7: async function (settings, parent) {
            await gbb.gbbAddProductsPage.initPageX(7, settings, parent);
        },
        initPage8: async function (settings, parent) {
            await gbb.gbbAddProductsPage.initPageX(8, settings, parent);
        },
        initPage9: async function (settings, parent) {
            await gbb.gbbAddProductsPage.initPageX(9, settings, parent);
        },
        initPage10: async function (settings, parent) {
            await gbb.gbbAddProductsPage.initPageX(10, settings, parent);
        },
        initPage11: async function (settings, parent) {
            await gbb.gbbAddProductsPage.initPageX(11, settings, parent);
        },
        initPage12: async function (settings, parent) {
            await gbb.gbbAddProductsPage.initPageX(12, settings, parent);
        },
        init: async function (settings, parent) {
            // gbb.utility.debugConsole("INSIDE INIT");
            //clear the dom reference for gbb
            // add the data-page attribute to it as well and attach it on body

            // let productsData = await gbb.utility.getFilteredSortedProductsData(gbb.gbbAddProductsPage.state.uniqueProductsData);
            gbb.gbbAddProductsPage.f.resetFiltersInfo();
            await gbb.utility.getGiftBoxProductsFromCart()
            gbb.gbbAddProductsPage.state.fetchBatchStartIndex = 0
            let navItem = gbb.utility.getNavItem(gbb.state.currentPageId)
            gbb.f.markPreviousNavigationItemsAsCompleted(navItem)
            gbb.$("body").attr("data-page", gbb.state.currentPageId)
            //documentation: gbb.gbbAddProductsPage.state.productPageKey can be productsData1,productsData2, productsData3
            gbb.utility.initializeFiltersInfo(gbb.gbbAddProductsPage.state.productPageKey);

            //documentation: currentPageId  - addProductsPage1, addProductsPage2, addProductsPage3, addProductsPage4
            gbb.utility.setSortByValues(gbb.state.currentPageId);
            gbb.gbbAddProductsPage.f.setMapForProductsThatHavePersonalization();

            await gbb.gbbAddProductsPage.initialize(settings, parent)
            gbb.gbbAddProductsPage.f.registerEvents(settings)
            gbb.utility.renderTemporaryLoadingSpinner("hide")

            gbb.state.setInfiniteScrollTrackerForProducts = true;

            // activate this only on scroll event of page
            if (gbb.settings.app.isInfiniteScrollEnabled) {
                gbb.$(window).on('scroll', gbb.gbbAddProductsPage.events.activateInfiniteScrollForProducts);
            }
        },


        initialFetch: async function (noteAttribute, productsData) {
            //the task of the page is to get uniqueProductsDat from gbb.settings.stepsConfiguration 
            // at a given time only gbb.addProductsPage.state.fetchCountPerBatch
            // and fetch them from shopify  using  getProductsBulk (helpfull methods are present in  gbb.utility)
            //  once fetched they should all be saved in currentPageSelectedProducts for the initFn to render
            let originalProductsData = [...productsData]
            gbb.gbbAddProductsPage.state.currentProductsDataset = [];
            let response;
            // gbb.utility.debugConsole('fetching...')

            //fetchCountPerBatch 24
            //0-24
            //
            let productsToFetch = null
            try {
                //splice and fetch products from uniqueProductsData from gbb.settings.stepsConfiguration
                productsToFetch = originalProductsData.slice(0, gbb.gbbAddProductsPage.state.fetchCountPerBatch)
            } catch (e) {
                gbb.utility.debugError(e)
            }
            if (productsToFetch) {
                let listOfHandles = productsToFetch.map((product) => product.handle);
                let listOfProductIds = productsToFetch.map((product) => product.productId);
                gbb.gbbAddProductsPage.state.fetchBatchStartIndex = gbb.gbbAddProductsPage.state.fetchCountPerBatch;

                //   TOOD: SF API conditional check
                let fetchOptions = { listOfProductIds }
                response = await gbb.utility.getProductsBulkForRelevantVariants(listOfHandles, productsToFetch, fetchOptions);



                // gbb.utility.debugConsole("fetched products", response)
                gbb.utility.setMapForVariantId(response);
                response = gbb.utility.convertObjectToArray(response);

                if (gbb.gbbAddProductsPage.state.displayVariantsAsIndividualProducts) {
                    //  products has something known as variants[];
                    // now duplicate entries if theres more than one variant.
                    //use a for loop
                    // function flattenVariants(products) {
                    const flattened = [];
                    response.forEach((product) => {

                        const { variants, ...productAttrs } = product; // Extract variants and keep the rest of the product attributes

                        variants.forEach((variant) => {
                            let merged = { ...productAttrs, compare_at_price: variant.compare_at_price, variants: [variant] }; // Merge product attributes with variant attributes
                            merged = gbb.gbbAddProductsPage.f.updateProductDataWithFirstVariantData(merged)
                            flattened.push(merged);
                        });
                    });
                    response = flattened;
                    // return flattened;
                    // }
                }
            }
            if (response) {
                return response;
            }
        },

        fetchNextProductsBatch: async function (noteAttribute, allProductsData) {
            try {
                let dataFromDB;
                let resp;
                // let currentCount = gbb.gbbAddProductsPage.state.currentProductsDataset.length
                let currentCount = gbb.gbbAddProductsPage.state.fetchBatchStartIndex;

                //: remove this switch case and put just uniqueProductsData state as dependency
                dataFromDB = allProductsData;

                // if(gbb.state.addProductsFilters.activatedFilters.length>0){
                //     dataFromDB = gbb.state.currentFilteredProducts
                // }

                let productsToFetch = null;
                try {
                    productsToFetch = dataFromDB.slice(currentCount, currentCount + gbb.gbbAddProductsPage.state.fetchCountPerBatch);
                } catch (e) {
                    gbb.utility.debugError(e);
                }
                if (productsToFetch) {
                    // gbb.utility.debugConsole("products to fetch,", productsToFetch)
                    let listOfHandles = productsToFetch.map((product) => product.handle);
                    let listOfProductIds = productsToFetch.map((product) => product.productId);
                    gbb.gbbAddProductsPage.state.fetchBatchStartIndex = gbb.gbbAddProductsPage.state.fetchBatchStartIndex + gbb.gbbAddProductsPage.state.fetchCountPerBatch;
                    let fetchOptions = { listOfProductIds }

                    resp = await gbb.utility.getProductsBulkForRelevantVariants(listOfHandles, productsToFetch, fetchOptions);
                    gbb.utility.debugConsole("fetched products");
                    resp = gbb.utility.convertObjectToArray(resp);
                    gbb.utility.setMapForVariantId(resp);
                    if (gbb.gbbAddProductsPage.state.displayVariantsAsIndividualProducts) {
                        //  products has something known as variants[];
                        // now duplicate entries if theres more than one variant.
                        //use a for loop
                        // function flattenVariants(products) {
                        const flattened = [];
                        resp.forEach((product) => {
                            const { variants, ...productAttrs } = product; // Extract variants and keep the rest of the product attributes

                            variants.forEach((variant) => {
                                let merged = { ...productAttrs, variants: [variant] }; // Merge product attributes with variant attributes
                                merged = gbb.gbbAddProductsPage.f.updateProductDataWithFirstVariantData(merged);
                                flattened.push(merged);
                            });
                        });
                        resp = flattened;
                        // return flattened;
                        // }
                    }

                    //addProductsPage1Data is now currentProducts
                    gbb.gbbAddProductsPage.state.currentProductsDataset = [...gbb.gbbAddProductsPage.state.currentProductsDataset, ...resp];
                }
                // gbb.utility.debugConsole(currentCount, "/", dataFromDB.length)
                if (dataFromDB.length > currentCount) {
                    //activateLoadMore Button
                    // gbb.gbbAddProductsPage.f.activateLoadMoreButton(noteAttribute);
                } else {
                    // gbb.gbbAddProductsPage.f.deactivateLoadMoreButton()
                    gbb.gbbAddProductsPage.f.hideLoadMoreButton();
                }
                return resp;
            } catch (e) {
                gbb.utility.debugError(e);
            }
        },
        updatePageStatus: function () {
            // check the currentPageId



            const listOfPageIds = ADDPRODUCT_PAGES_LIST

            if (listOfPageIds.includes(gbb.state.currentPageId) == false) {
                return;
            }
            let navItem = gbb.f.getNavItem(gbb.state.currentPageId);
            if (navItem) {
                // navItem.addClass("gbbNavItemActive");
                navItem.isCompleted = true;
                navItem.isActive = false

                //if cart items have the values, then mark complete, else mark incomplete
            }

            //update the navigationItems  by filtering the array gbb.state.navigationItems using id
            gbb.state.navigationItems.forEach(function (item) {
                if (item.id == gbb.state.currentPageId) {
                    item = {
                        ...item,
                        navItem
                    }
                }
            })
            return true;

            // if it is addProductsPage, then find the item in the navigation list
            // and set the class to active
            // else set the class to inactive

        },
        initialize: async function (settings, parent) {
            try {
                let productPageData = gbb.gbbAddProductsPage.state.productPageData
                let isTabBasedUIEnabled = gbb.gbbAddProductsPage.state.productPageData?.isMultiCategoryTabBasedUIEnabled || false;
                gbb.gbbAddProductsPage.state.displayVariantsAsIndividualProducts = productPageData.displayVariantsAsIndividualProducts || false

                if (gbb.$(".gbbAddGiftBoxPageWrapper") && gbb.$(".gbbAddGiftBoxPageWrapper").length > 0) {
                    gbb.$(".gbbAddGiftBoxPageWrapper").remove();
                }
                let gbbAddProductsPageWrapper = gbb.$("<div>").addClass("gbbAddGiftBoxPageWrapper");

                let gbbAddProductsPageBodyHTML = ""

                if (productPageData?.pageType == "MULTIPLE_CATEGORY") {
                    if (isTabBasedUIEnabled) {
                        gbbAddProductsPageBodyHTML = await gbb.gbbMultipleCategoriesPage.f.prepareUIV2TabUI(productPageData)
                    } else {
                        gbbAddProductsPageBodyHTML = await gbb.gbbMultipleCategoriesPage.f.prepareUIV2(productPageData)
                    }
                } else {
                    gbbAddProductsPageBodyHTML = await gbb.gbbAddProductsPage.f.prepareUI();
                }





                const gbbAddProductPageSubtextWrapper = gbb.$("<div>").addClass("gbbAddProductPageSubtextWrapper");
                const gbbAddProductPageSubtext = gbb.$("<div>").addClass("gbbAddProductPageSubtext");
                const gbbDiscountComponent = gbb.$("<div>").addClass("gbbDiscountComponent");
                const gbbAddProductPageBanners = gbb.$("<div>").addClass("gbbAddProductPageBanners")


                gbbAddProductPageSubtext.html(productPageData?.productPageSubtext);
                gbbAddProductPageSubtext.css("color", gbb.settings?.pageCustomizationData?.generalSettings?.productPage?.productPageTitleColor || "black");


                if (productPageData?.pageBanners) {
                    if (productPageData.pageBanners?.mobileBanner) {
                        let mobileBanner = gbb.$("<img>").addClass("gbbMobileImageBanner")
                        mobileBanner.attr('src', productPageData.pageBanners?.mobileBanner)
                        gbbAddProductPageBanners.append(mobileBanner);
                    }
                    if (productPageData.pageBanners?.desktopBanner) {
                        let desktopBanner = gbb.$("<img>").addClass("gbbDesktopImageBanner")
                        desktopBanner.attr('src', productPageData.pageBanners?.desktopBanner)
                        gbbAddProductPageBanners.append(desktopBanner);
                    }
                }

                gbbAddProductPageSubtextWrapper.append(gbbAddProductPageSubtext);
                gbbAddProductPageSubtextWrapper.append(gbbAddProductPageBanners);
                const gbbAddProductsPageFooterHTML = gbb.gbbAddProductsPage.f.prepareFooter();
                const gbbAddProductsPageHeaderHTML = gbb.gbbAddProductsPage.f.prepareHeader();

                // if(isTabBasedUIEnabled){
                //     gbbAddProductsPageFooterHTML.addClass("tabBasedUIFooter");
                // }


                gbbAddProductsPageFooterHTML.css("background", gbb.settings.pageCustomizationData.cartFooter.cartFooterBgColor)
                gbbAddProductsPageFooterHTML.css("color", gbb.settings.pageCustomizationData.cartFooter.cartFooterTextColor)


                gbbAddProductsPageWrapper.append(gbbAddProductsPageHeaderHTML);
                gbbAddProductsPageWrapper.append(gbbAddProductPageSubtextWrapper);
                gbbAddProductsPageWrapper.append(gbbDiscountComponent);

                // ask ashfaq
                // if(isTabBasedUIEnabled){
                //     gbbAddProductsPageBodyHTML.append(gbbAddProductsPageFooterHTML);
                //     gbbAddProductsPageWrapper.append(gbbAddProductsPageBodyHTML);
                // }else{
                gbbAddProductsPageWrapper.append(gbbAddProductsPageBodyHTML);
                gbbAddProductsPageWrapper.append(gbbAddProductsPageFooterHTML);
                // }


                gbb.state.addProductsBody = gbbAddProductsPageWrapper;
                gbb.gbbAddProductsPage.f.insertIntoMainPageWrapper();
            } catch (e) {
                gbb.utility.debugConsole("error in gbbAddProductsPage init", e)
            }
        },
        f: {

            prepareHeader: function () {
                //this is a header
                let bundleType = gbb.settings?.stepsConfigurationData?.bundleType || '';
                let isSubscriptionBundle = bundleType == 'SUBSCRIPTION_BUNDLE'
                const gbbAddProductsPageHeaderHTML = gbb.$("<div>").addClass("gbbAddProductsPageHeader");
                let gbbPageHeader = gbb.$("<div>").addClass("gbbPageHeader");
                let gbbPageHeaderText = gbb.$("<div>").addClass("gbbPageHeaderText");
                gbbPageHeaderText.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData.landingPage.bannerText));

                let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
                let currentPage = gbb.state.currentPageId;

                const gbbAddProductsPageBannerImage = gbb.$("<img>").addClass("gbbPageBannerImage");
                gbbAddProductsPageBannerImage.attr("src", gbb.settings.pageCustomizationData.banners.pageBannerImageSrc)
                let navigationItems = gbb.state.navigationItems;
                let stepsCount = 0;
                navigationItems = navigationItems.filter((element) => {
                    if (element.isNavBarItem && element.isNavBarItem == true) {
                        stepsCount++;
                        return element;
                    }
                })
                if (stepsCount == 1) {
                    gbbPageHeader.addClass("gbbPageHeaderWithoutLine");
                }
                const gbbAddProductsPageNavigationContainer = gbb.$("<div>").addClass("gbbAddProductsPageNavigationContainer");
                //gbbPageHeader.append(gbbPageHeaderText);

                let nextNavigationItems = gbb.f.getNavigationItemsToDisplay(gbb.state.currentPageId);

                gbbAddProductsPageNavigationContainer.append(gbb.f.renderNavigationHTML(gbbAddProductsPageNavigationContainer, currentPage, nextNavigationItems));

                // STEP PROGRESS BAR

                gbbAddProductsPageHeaderHTML.append(gbbPageHeader);
                if (isSubscriptionBundle) {
                    let subscriptionBundleWrapper = gbb.gbbSubscriptionProductsPage.f.prepareSubscriptionHeaderHTML()
                    gbbAddProductsPageHeaderHTML.append(subscriptionBundleWrapper)
                }
                gbbAddProductsPageHeaderHTML.append(gbbAddProductsPageNavigationContainer)
                return gbbAddProductsPageHeaderHTML;
            },
            prepareUI: async function () {
                let gbbAddProductsPageHTML = gbb.$("<div>").addClass("gbbAddProductsPageHTML");
                let noteAttribute = gbb.state.currentPageId;
                gbb.utility.setSortByValues(noteAttribute, "featured");

                productsData = gbb.utility.getProductsInDefaultView()
                gbbAddProductsPageHTML.append(await gbb.gbbAddProductsPage.f.renderProductsCardContainer(productsData, noteAttribute, "initFlow"));

                //no navigation will be available if there is only one step enabled - adjust the positioning
                let navigationItems = gbb.state.navigationItems;
                let stepsCount = 0;
                navigationItems = navigationItems.filter((element) => {
                    if (element.isNavBarItem && element.isNavBarItem == true) {
                        stepsCount++;
                        return element;
                    }
                })

                return gbbAddProductsPageHTML;
            },
            prepareFooter: function () {
                const gbbAddProductsPageFooterHTML = gbb.$("<div>").addClass("gbbAddProductsPageFooterHTML");
                let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey
                const currentPage = gbb.state.currentPageId
                gbbAddProductsPageFooterHTML.append(gbb.f.renderCartProductsFooterHTML(currentPage));
                return gbbAddProductsPageFooterHTML;
            },
            prepare_and_updateProductsCardContainerHTML: async function ({ allProductsData, noteAttribute, origin, categoryId }) {
                try {
                    let gbbAddProductsContainerHTML
                    let gbbProductsContainer
                    gbb.gbbAddProductsPage.f.setMapForProductsThatHavePersonalization({ categoryId: categoryId });
                    if (origin == "initFlow") {
                        gbbAddProductsContainerHTML = gbb.$("<div>").addClass("gbbAddProductsContainerHTML");
                    } else {
                        gbbAddProductsContainerHTML = gbb.utility.getCurrentPageHTML(noteAttribute);
                    }

                    let productsDataFirstBatch = await gbb.gbbAddProductsPage.initialFetch(noteAttribute, allProductsData);

                    gbb.gbbAddProductsPage.state.currentProductsDataset = productsDataFirstBatch;


                    let parentProductsContainerSelector = categoryId ? '.gbbMultipleCategoryBody' : '.gbbAddProductsContainerHTML'
                    let isProductContainerExists = gbb.$(parentProductsContainerSelector).find('.gbbProductsContainer').length > 0;
                    let productsCardHTML = gbb.f.renderProductsHTML(productsDataFirstBatch, noteAttribute, categoryId);
                    let gbbProductsItemsContainer = gbb.$("<div>").addClass("gbbProductsItemsContainer");
                    if (isProductContainerExists) {
                        gbbProductsContainer = gbb.$(".gbbProductsContainer");
                        // gbbProductsItemsContainer = gbbProductsItemsContainer.html(productsCardHTML);
                        gbbProductsItemsContainer.html(productsCardHTML);
                        gbbProductsContainer.html(gbbProductsItemsContainer)
                    } else {
                        gbbProductsContainer = gbb.$("<div>").addClass("gbbProductsContainer");

                        gbbProductsItemsContainer.append(productsCardHTML);
                        gbbProductsContainer.append(gbbProductsItemsContainer);
                    }
                    if (productsCardHTML && productsCardHTML.length <= 4) {
                        gbbProductsItemsContainer.addClass("gbbProductsItemsContainerLessProducts");
                    }
                    gbbProductsItemsContainer.attr('total-products', productsCardHTML?.length || 0)
                    // add no products available card
                    if (productsDataFirstBatch.length <= 0 && noteAttribute !== 'reviewPage') {

                        const gbbProductsNotAvailable = gbb.$("<div>").addClass("gbbProductsNotAvailable");
                        gbbProductsNotAvailable.text(gbb.utility.renderLanguageValue(gbb.settings.languageData.general.noProductsAvailable) || 'No Products Found1');

                        //replace gbbProductsNotAvailable class if available
                        if (gbb.$(".gbbProductsNotAvailable").length > 0) {
                            gbb.$(".gbbProductsNotAvailable").replaceWith(gbbProductsNotAvailable);
                        } else {
                            gbbProductsContainer.append(gbbProductsNotAvailable);
                        }
                    }

                    return {
                        gbbAddProductsContainerHTML,
                        gbbProductsContainer,
                    }
                } catch (error) {
                    gbb.utility.debugConsole("error in prepare_and_updateProductsCardContainerHTML", error)

                }

            },
            renderProductsCardContainer: async function (allProductsData, noteAttribute, origin, categoryId) {
                try {
                    let divsArray = [];
                    let { gbbAddProductsContainerHTML, gbbProductsContainer } = await gbb.gbbAddProductsPage.f.prepare_and_updateProductsCardContainerHTML({ allProductsData, noteAttribute, origin, categoryId });

                    let gbbProductsFilterTags = gbb.utility.getAllFilterTagsForProducts(allProductsData, noteAttribute);
                    if (origin == 'initFlow' || !origin) {
                        if (!categoryId) {
                            let filterSearchHeaderHTML = gbb.f.renderFiltersSearchSortHeaderHTML(noteAttribute);
                            divsArray.push(filterSearchHeaderHTML)
                        }
                        divsArray.push(gbbProductsContainer);
                        gbbAddProductsContainerHTML.html(divsArray);
                    } else if (origin == 'filtersFlow') {
                        let filterSearchHeaderHTML = gbb.f.renderFiltersSearchSortHeaderHTML(noteAttribute);
                        gbb.$('.gbbFiltersSearchSortHeader').replaceWith(filterSearchHeaderHTML);
                    }
                    const isLoadMoreButtonRequired = allProductsData.length > gbb.gbbAddProductsPage.state.fetchBatchStartIndex
                    //showLoadMoreButton needed
                    if (isLoadMoreButtonRequired) {
                        origin = origin == 'filtersFlow' ? 'resetLoadMoreRef' : origin;
                        gbb.gbbAddProductsPage.f.activateLoadMoreButton(noteAttribute, gbbAddProductsContainerHTML, allProductsData, categoryId, origin);
                    } else {
                        gbb.gbbAddProductsPage.f.hideLoadMoreButton();
                    }

                    return gbbAddProductsContainerHTML;
                } catch (error) {
                    gbb.utility.debugConsole("error in renderProductsCardContainer", error)
                }
            },
            insertIntoMainPageWrapper: function () {

                gbb.$(".gbbBodyWrapper").html(gbb.state.addProductsBody);
                //find the first child of gbbBodyWrapper and hide it in ui for 700ms
                gbb.$(".gbbBodyWrapper").children().first().hide();
                gbb.$(".gbbBodyWrapper").children().first().fadeIn(700);

                //gbb.$(".gbbNavigationItemsContainer").replaceWith(gbb.f.renderNavigationHTML())
            },
            updateProductCard: function (productId, variantId) {

                let productItem = gbb.$(".gbbProductsContainer").find(`[productId='${productId}']`);

                // now filter based on firstvariantid as well 
                if (variantId) {
                    let productItem_temp = gbb.$(".gbbProductsContainer").find(`[productId='${productId}'][firstvariantid='${variantId}']`);
                    // gbb.utility.debugConsole("productItems array length",productItem.length)
                    // productItem = 
                    if (productItem_temp.length > 0) {
                        productItem = productItem_temp;
                    }

                    // productItem = gbb.$(".gbbProductsContainer").find(``);
                }
                let categoryId = (productItem).parents(".gbbCategoryContainer").attr("categoryid");
                let product = gbb.utility.getProductDetailsFromState(productId, variantId);

                let noteAttribute = gbb.state.currentPageId;

                let newProductItemHTML = gbb.f.renderProductsHTML([product], noteAttribute, categoryId);
                // gbb.$(".gbbPageBody").find(`[productId='${productId}']`).replaceWith(newProductItemHTML);
                productItem.replaceWith(newProductItemHTML);

            },
            resetFiltersInfo: function () {
                // gbb.state.addProductsFilters.isFiltersActive
                // gbb.state.addProductsFilters.activatedFilters
                // gbb.state.addProductsFilters.priceFilterActive
                // gbb.state.addProductsFilters.addProductsActivatedFilters;
                gbb.state.addProductsFilters = {
                    isFiltersActive: false,
                    activatedFilters: [],
                    priceFilterActive: false,
                    addProductsActivatedFilters: []
                }

            },
            resetSearchTextValue: function () {
                gbb.gbbAddProductsPage.state.filterBySearch.searchQuery.searchText = '';
            },
            hideExcessProducts: function (gbbAddProductsContainerHTML) {
                let productsCount = gbbAddProductsContainerHTML.find(".gbbProductItem").length;
                if (productsCount > (gbb.gbbAddProductsPage.state.fetchCountPerBatch)) {
                    gbbAddProductsContainerHTML.find(".gbbProductItem").each(function (index) {
                        if (index >= (gbb.gbbAddProductsPage.state.fetchCountPerBatch)) {
                            gbb.$(this).hide();
                        }
                    })
                    // commenting out (no use case for this as of now)
                    // gbb.gbbAddProductsPage.f.activateLoadMoreButton();
                }
            },
            loadMoreProducts: async function (noteAttribute, allProductsData, categoryId) {

                // gbb.utility.debugConsole("")

                if (categoryId) {
                    gbb.utility.debugConsole("fetching products from category: ", categoryId)
                }
                let productItemsHTML = gbb.$(".gbbProductItem")
                //find the productItems that are not hidden
                let currentProductItems = gbb.gbbAddProductsPage.state.currentProductsDataset;


                let productsCount = currentProductItems.length;
                let productsToShow = gbb.gbbAddProductsPage.state.fetchCountPerBatch;
                //: this condition is not in shape
                if (true) {

                    let startIndex = productsCount - 1;
                    gbb.utility.debugConsole("fetching starts.. in loadMoreProducts")
                    const productsData = await gbb.gbbAddProductsPage.fetchNextProductsBatch(noteAttribute, allProductsData)
                    if (productsData && productsData.length > 0) {
                        let productItems = gbb.f.renderProductsHTML(productsData, noteAttribute, categoryId);
                        if (productItems && productItems.length > 0) {
                            gbb.$(".gbbProductsItemsContainer").append(productItems);
                        }
                    }

                    //append product items to the container

                    let dbDataCount = allProductsData.length
                    let fetchBatchStartIndex = gbb.gbbAddProductsPage.state.fetchBatchStartIndex
                    if (fetchBatchStartIndex >= dbDataCount) {
                        //scrollBarListener is disabled
                        gbb.utility.debugConsole("scrollBarListener is disabled from loadMoreProductsFn:")
                        gbb.state.setInfiniteScrollTrackerForProducts = false;
                        gbb.$(".gbbLoadMoreProductsButton").hide();
                    }
                }
            },
            activateLoadMoreButton: function (noteAttribute, parentEle, allProductsData, categoryId, origin) {

                // if already present
                if (origin == 'resetLoadMoreRef' || gbb.gbbAddProductsPage.state.filterBySearch?.searchQuery?.searchText?.length > 0) {
                    // continue processing
                }
                else if (!categoryId) {
                    if (gbb.$(".gbbLoadMoreProductsButton").length > 0) {
                        // alert("already found load more btuton")
                        return;
                    }
                }

                let attachButtonTo = parentEle || gbb.$(".gbbLoadMoreProductsButton").parent();
                gbb.gbbAddProductsPage.state.dataForInfiniteScroll = {
                    noteAttribute: noteAttribute,
                    allProductsData: allProductsData,
                    categoryId: categoryId
                }

                let loadMoreButton = gbb.$("<div>").addClass("gbbLoadMoreProductsButton");
                loadMoreButton.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.general?.loadMoreProductsButtonText) || "Load More Products1");
                loadMoreButton.on("click", async function () {
                    gbb.utility.disableElement(loadMoreButton, 500);
                    await gbb.gbbAddProductsPage.f.loadMoreProducts(noteAttribute, allProductsData, categoryId);
                })
                // if (gbb.$(".gbbLoadMoreProductsButton").length <= 0) {
                //     gbb.$(attachButtonTo).append(loadMoreButton);
                // } else {
                //     let loadMoreBtn = gbb.$(".gbbLoadMoreProductsButton")
                //     loadMoreBtn.text('REPLACED')
                //     loadMoreBtn.replaceWith(loadMoreButton)
                // } In multicategory we were updating dom -> then we were updating parentEle container -> here we were loosing load more btn ref
                if (gbb.$(".gbbLoadMoreProductsButton").length > 0) {
                    gbb.$(".gbbLoadMoreProductsButton").remove()
                }
                gbb.$(attachButtonTo).append(loadMoreButton);

                return loadMoreButton

            },
            hideLoadMoreButton: function () {
                //scrollBarListener is disabled
                gbb.utility.debugConsole("scrollBarListener is disabled from hideLoadMoreButton:")
                gbb.state.setInfiniteScrollTrackerForProducts = false;
                gbb.$(".gbbLoadMoreProductsButton").hide();
            },
            registerEvents: function (settings) {
                gbb.gbbAddProductsPage.state.buildBoxButtonAction = function () {
                    gbb.utility.debugConsole("build box button clicked");
                };
            },
            renderNextPage: async function (pageId) {
               try {
                   let noteAttribute = gbb.state.currentPageId
                   let currentPageRank = gbb.utility.getPageRankByPageId(noteAttribute)
                   let pageToRenderRank = gbb.utility.getPageRankByPageId(pageId)
                   let renderPrevStep = pageToRenderRank < currentPageRank
                   let condition = !renderPrevStep && await gbb.utility.checkConditionsOnNext(noteAttribute, "", true);
                   if (renderPrevStep || condition.isConditionMet) {
                       gbb.utility.renderTemporaryLoadingSpinner("show")
                       gbb.giftboxbuilderPage.action.onNextNavigationBYOB(pageId);
                   }
               } catch (error) {
                    gbb.utility.debugConsole("error in renderNextPage", error)
               }
            },
            createArraysOfPageWhichHaveConditions: function () {

                // each of these fields has an array of conditions, if empty then check if they have an object with key as "categories"
                // if they have an object with key as "categories" then check if the objects keys have a conditions array
                // if they have a conditions array then check if the conditions array is empty
                // if not empty then copy the category id and push to the array 
                let pagesWhichHaveConditionsOnPages = [];
                let pagesWhichHaveConditionOnCategories = [];
                let categoriesWhichHaveConditions = [];

                // so in gbb.settings.stepsConfigurationData
                // there are fields such as productsData1 ...... till 12.
                for (let i = 0; i < Object.keys(gbb.settings.stepsConfigurationData).length; i++) {
                    // object keys are productsData1, productsData2, productsData3, productsData4, productsData5, productsData6, productsData7, productsData8, productsData9, productsData10, productsData11, productsData12
                    // so we are looping through each of these keys
                    let _key = Object.keys(gbb.settings.stepsConfigurationData)[i];
                    let currData = gbb.settings.stepsConfigurationData[_key];
                    _key = String(_key)
                    if (_key.includes("productsData")) {
                        //now check if the productsData has a conditions array
                        if (currData?.conditions?.length > 0) {
                            // if it has a conditions array then push the page name to the pagesWhichHaveConditionsOnPages array
                            pagesWhichHaveConditionsOnPages.push(_key);
                        } else {
                            // currData
                            //check if the productsData has a categories object
                            if (currData?.categories) {
                                // if it has a categories object then loop through the categories object
                                for (let [key, value] of Object.entries(currData.categories)) {
                                    // if the categories object has a conditions array then push the page name to the pagesWhichHaveConditionOnCategories array
                                    if (value?.conditions?.length > 0) {
                                        pagesWhichHaveConditionOnCategories.push(_key);
                                        categoriesWhichHaveConditions.push(key);
                                    }
                                }
                            }
                        }
                    }
                }

                // now we have an array of pages which have conditions on pages and pages which have conditions on categories
                // we also have an array of categories which have conditions
                // now we need to check if the current product has any of the categories which have conditions
                // if it does then we need to check if the current product has any of the conditions

                // in the pagesWhichHaveCondtionOnCategories array we have the page names. change the page number from productsData1 to addProductsPage1
                // and similarly

                pagesWhichHaveConditionsOnPages.forEach((page, index) => {
                    pagesWhichHaveConditionsOnPages[index] = page.replace("productsData", "addProductsPage");
                })

                gbb.gbbAddProductsPage.state.pagesWhichHaveConditionsOnPages = pagesWhichHaveConditionsOnPages;
                gbb.gbbAddProductsPage.state.categoriesWhichHaveConditions = categoriesWhichHaveConditions;

            },
            setMapForProductsThatHavePersonalization: function (options = {}) {
                try {
                    let map = {};
                    let keyAttribute = gbb.gbbAddProductsPage.state.productPageKey;
                    let currentProductsData = JSON.parse(JSON.stringify(gbb.settings.stepsConfigurationData[keyAttribute]));
                    let categoryProductsData;

                    if (currentProductsData && currentProductsData.pageType == "MULTIPLE_CATEGORY") {
                        // gbb.utility.debugConsole("multiple category page")
                        //create a map for each
                        //object.keys(currentProductsData.categories).forEach((category) => {

                        let categoryIds = Object.keys(currentProductsData.categories);

                        options.categoryId = options.categoryId || currentProductsData?.categories[categoryIds[0]]?.categoryId;
                        categoryProductsData = currentProductsData.categories[options.categoryId];

                        currentProductsData = categoryProductsData;
                    }
                    let productFormData = currentProductsData.productPersonalization;
                    if (productFormData && productFormData.isProductPersonalizationEnabled == true) {
                        if (productFormData?.isEnabledForSelectedProducts == true) {
                            productFormData.selectedProducts.forEach((product) => {
                                map[product.productId] = { formBlocks: productFormData.formBlocks };
                            });
                        } else if (productFormData?.isEnabledForAllProducts == true) {
                            // create a map out of  this data but select only productId
                            currentProductsData.uniqueProductsData.forEach((product) => {
                                map[product.productId] = { formBlocks: productFormData.formBlocks };
                            });
                        } else {
                            // none; no map needed
                        }

                        gbb.gbbAddProductsPage.state.productPersonalizationData = productFormData;
                        gbb.gbbAddProductsPage.state.productPersonalizationMap = map;
                    } else {
                        gbb.gbbAddProductsPage.state.productPersonalizationData = null;
                        gbb.gbbAddProductsPage.state.productPersonalizationMap = null;
                    }
                } catch (error) {
                    gbb.utility.debugConsole("error in setMapForProductsThatHavePersonalization", error);
                }
            },
            updateProductDataWithFirstVariantData: function (productData) {
                try {
                    let firstVariantData = productData.variants[0];
                    // productData.title = firstVariantData.name || productData.title;
                    productData.title = productData.title;
                    productData.variantName = firstVariantData.public_title == "Default Title" ? "" : firstVariantData.public_title;
                    productData.renderChooseOptionsButton_forcefully = false
                    productData.featured_image = firstVariantData.image || productData.featured_image;
                    // push the firstVariantData.image into the product.images. but the firstVariantData.image should be the first element
                    productData.images = [firstVariantData.image, ...productData.images];
                    if (gbb?.settings?.bundleSettings?.removeUnUsedVariantImages) {
                        productData = gbb.utility.removeUnUsedVariantImages(productData)
                    }
                    productData = gbb.utility.shiftFirstVariantMedia_toFirstIndexInMediaObj(productData);
                    //find the "https://cdn.shopify.com/s/files/1/0603/6874/8751/products/Candle_UH_Back.png?v=1639895559"
                    // in the 
                    // productData.media = [... new Set(firstVariantData.featured_image, ...productData.media)]
                    return productData;
                } catch (error) {
                    gbb.utility.debugConsole("error in updateProductDataWithFirstfirstVariantDataData", error)
                }
            },
            handleAutoNextStep: async function (options) {
                try {
                    // return;
                    // let conditionRules = options.condition.conditions;
                    // let condition = options.condition;
                    let currentPageId = gbb.state.currentPageId;
                    // 

                    let activeConditionConfig = gbb.gbbAddProductsPage.f.getConditionConfig_basedOnCurrentPageOrCategory(gbb.state.currentPageId);

                    let validConditionTypesForAutoNext = ["equalTo"]

                    let conditionRules = activeConditionConfig.conditions;

                    if (conditionRules && conditionRules.length > 0 && conditionRules.length == 1
                        && validConditionTypesForAutoNext.includes(conditionRules[0].condition)
                        && activeConditionConfig.autoNextStepOnConditionMet == true) {
                        await gbb.utility.checkConditionsAndProceedToNextPage(currentPageId);
                    }


                } catch (error) {
                    gbb.utility.debugConsole("error in handleAutoNextStep", error)
                }
            },
            getConditionConfig_basedOnCurrentPageOrCategory: function (pageId) {
                try {
                    // from active pageId, get if its a productPageData 
                    let currentPageData = gbb.gbbAddProductsPage.state.productPageData;
                    let result = {
                        conditions: [],
                        autoNextStepOnConditionMet: false
                    }
                    if (!currentPageData) {
                        return result
                    }
                    //give priorty to global config conditions
                    if (currentPageData.conditions && currentPageData.conditions.length > 0) {
                        //if present then return the conditions
                        result.conditions = currentPageData.conditions;
                        result.autoNextStepOnConditionMet = currentPageData.autoNextStepOnConditionMet;
                    }

                    if (currentPageData.pageType == "MULTIPLE_CATEGORY" && gbb.gbbAddProductsPage.state.productPageData.isPageConditionsEnabled != true) {
                        // get active category id
                        let currentCategoryId = gbb.gbbMultipleCategoriesPage.state.currentCategoryId;

                        // get conditions for the currentCategoryId
                        let categoryData = currentPageData.categories[currentCategoryId];
                        if (categoryData.conditions && categoryData.conditions.length > 0) {
                            result.conditions = categoryData.conditions;
                        }

                        result.autoNextStepOnConditionMet = categoryData.autoNextStepOnConditionMet;

                    }

                    return result;
                    //if MULTIPLE_CATEGORY then 
                    // get the currentCategoryId. 
                } catch (error) {
                    gbb.utility.debugConsole("error in getConditionConfig_basedOnCurrentPageOrCategory", error)
                }
            },
            prepareHTMLforProductMetafields: function (productData,origin) {
                try {
                    const metafieldNameSpaceAndKeys = gbb.settings.bundleSettings.metafieldNameSpaceAndKeys || []
                   
                    if (!metafieldNameSpaceAndKeys.length) return ''
                    // filter origin 
                    let metafieldWrapper = gbb.$("<div>").addClass('productsMetafieldWrapper')
                    const validMetafieldTypes = ["single_line_text_field","multi_line_text_field"] //only allow the type whose value we can get root level -- for eg : metafield.value 
                    for (let i = 0; i < metafieldNameSpaceAndKeys.length; i++){
                        let metafieldData = metafieldNameSpaceAndKeys[i]
                        if (metafieldData.hasOwnProperty("showOnProductCard") || metafieldData.hasOwnProperty("showOnModal")) { 
                            if (origin == 'PRODUCT_CARD' && !metafieldData.showOnProductCard) {
                                continue
                            }
                            else if (origin == 'PRODUCT_VARIANTS_MODAL' && !metafieldData.showOnModal) {
                                continue
                            } 
                        }
                        let productMetafieldAccessKey = `metafield_${metafieldData?.namespace}_${metafieldData?.key}`
                        let productMetafieldData = productData[productMetafieldAccessKey] || {}
                        if (validMetafieldTypes.includes(productMetafieldData?.type)) {
                            let divToAppend = gbb.$('<div>').addClass(`product_metafield_${metafieldData?.key}`).attr('metafield-key', metafieldData?.key)
                            divToAppend.text(productMetafieldData?.value)
                            metafieldWrapper.append(divToAppend)
                        }
                    }
                    return metafieldWrapper;
                } catch (error) {   
                    gbb.utility.debugConsole("error in prepareHTMLforProductMetafields", error)
                }
            },
            renderProductDynamicContent: function (productData,origin) {
                try {
                    // the value will be present in 
                    // let content = `<div>
                    //  ${productData?.metafield_gbbNameSpace_test?.value}
                    // </div>`
                    if(gbb.settings.app.dynamicScriptForHTMLContent){
                        return eval(gbb.settings.app.dynamicScriptForHTMLContent)
                    } else {
                        return gbb.gbbAddProductsPage.f.prepareHTMLforProductMetafields(productData,origin)
                    }
                   
                    // prodCard
                    // popup 
                    // dono dikhao
                    
                    // return content;
                    // return eval(gbb.settings.app.dynamicScriptForHTMLContent)

                    // gbb.settings.app.dynamicHTMLContent
                    // retu
                    // return gbb.settings.app.dynamicHTMLContent;

                } catch (e) {
                    gbb.utility.debugConsole("error in renderProductDynamicContent", e)
                }
            },
            getSearchedProductInBundlePage: function (query, productsData) {
                try {
                    // query -> contains the search params eg: {title:'val'} || {tags:'spo-default'}
                    // productsData is the array of products on which we will implement search functionality 
                    let searchKey = Object.keys(query)[0] || 'title';
                    let searchVal = query[searchKey] || '';
                    searchVal = searchVal?.toString()?.trim()?.toLowerCase();
                    let searchType = gbb.gbbAddProductsPage.state.filterBySearch.searchQuery.searchFieldType || 'String'
                    let searchedProducts = [];

                    switch (searchType) {
                        case 'String': {
                            searchedProducts = productsData?.filter((product) => {
                                return product[searchKey]?.toLowerCase()?.trim()?.includes(searchVal);
                            })
                            break
                        }
                        case 'Array': {
                            for (let i = 0; i < productsData.length; i++) {
                                let product = productsData[i];
                                // product[searchKey] => product[tags] = ['snow','sport'] => array
                                if (product[searchKey] && product[searchKey].length > 0) {
                                    for (let j = 0; j < product[searchKey].length; j++) {
                                        let arrayElement = product[searchKey][j]?.toString()?.toLowerCase()?.trim()
                                        if (arrayElement?.includes(searchVal)) {
                                            searchedProducts.push(product)
                                        }
                                    }
                                }
                            }
                            // searchedProducts = productsData?.filter((product) => {
                            //     if (product[searchKey] && product[searchKey].length > 0) { 
                            //         return product[searchKey]?.some((el) => {
                            //             let arrayElement = el?.toString()?.toLowerCase()?.trim()
                            //             return arrayElement?.includes(searchVal);
                            //         })
                            //     }
                            // })
                            break
                        }
                        default: {
                            searchedProducts = productsData
                        }
                    }
                    return searchedProducts;
                } catch (e) {
                    gbb.utility.debugConsole("error in getSearchedProductInBundlePage", e)

                }
            },
            handleSearchBundleInput: async function (value, noteAttribute) {
                try {
                    let isFilterActive = gbb.utility.getActivatedFilters(noteAttribute).length > 0
                    gbb.gbbAddProductsPage.state.filterBySearch.searchQuery.searchText = value
                    let pageType = gbb.gbbAddProductsPage.state.productPageData.pageType
                    let categoryId = gbb.gbbMultipleCategoriesPage.state.currentCategoryId

                    let totalProducts = pageType == 'MULTIPLE_CATEGORY' ? gbb.gbbAddProductsPage.state.productPageData.categories[categoryId].uniqueProductsData : gbb.gbbAddProductsPage.state.uniqueProductsData

                    if (isFilterActive) {
                        totalProducts = await gbb.utility.getFilteredSortedProductsData(noteAttribute, 'searchProductsFlow')
                    }
                    let keyToSearch = gbb.gbbAddProductsPage.state.filterBySearch.searchQuery.searchField || 'title';
                    let searchQueryParams = {
                        [keyToSearch]: gbb.gbbAddProductsPage.state.filterBySearch.searchQuery.searchText
                    }
                    // reset load more btn ref if search value is cleared 
                    // to load normal products with load more functionality
                    if (value.trim().length <= 0) {
                        let gbbAddProductsContainerHTML = gbb.$('.gbbAddProductsContainerHTML')
                        gbb.gbbAddProductsPage.f.activateLoadMoreButton(noteAttribute, gbbAddProductsContainerHTML, totalProducts, categoryId, 'resetLoadMoreRef');
                    }

                    let searchedProducts = gbb.gbbAddProductsPage.f.getSearchedProductInBundlePage(searchQueryParams, totalProducts)
                    gbb.state.setInfiniteScrollTrackerForProducts = true;

                    return searchedProducts
                } catch (error) {
                    gbb.utility.debugConsole("error in handleSearchBundleInput", error)
                }
            },
            renderShowBoxProductsToggleHTML: function () {
                try {
                    let gbbShowBoxProductsToggleContainer = gbb.$('<div>').addClass('gbbShowBoxProductsToggleContainer')
                    gbbShowBoxProductsToggleContainer.append(PLAIN_CHEVRON_UP_SVG)
                    if (gbb.gbbAddProductsPage.state.showBoxProductsInFooter) {
                        gbbShowBoxProductsToggleContainer.css('transform', 'rotate(180deg)');
                    }

                    if (gbb.state.giftBoxCartData?.items?.length <= 0) {
                        gbbShowBoxProductsToggleContainer.css('transform', 'rotate(0deg)');
                        gbb.gbbAddProductsPage.state.showBoxProductsInFooter = false;

                    }
                    return gbbShowBoxProductsToggleContainer;
                } catch (error) {
                    gbb.utility.debugConsole("error in renderShowBoxProductsToggleHTML", error)
                }
            },
            renderCartIconWithQuantityHTML: function () {
                try {
                    let _boxData = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage();
                    let cartIconWithQuantity = gbb.$('<div>').addClass('gbbCartIconWithQuantityContainer')
                    let cartIconWithQuantityText = gbb.$('<div>').addClass('gbbCartIconWithQuantityText')
                    let cartQuantity = gbb.$('<div>').addClass('gbbCartQuantity')
                    let cartQuantityValue = _boxData?.item_count || 0

                    cartIconWithQuantity.css('background', gbb.settings?.pageCustomizationData?.cartFooter?.cartFooterNextButtonColor || '#000000')
                    cartIconWithQuantity.css("color", gbb.settings?.pageCustomizationData?.cartFooter?.cartFooterNextButtonTextColor || '#ffffff')

                    // cartIconWithQuantity.click(gbb.gbbAddProductsPage.f.toggleBoxProductsDisplayFooter)

                    cartQuantity.text(cartQuantityValue)
                    cartIconWithQuantityText.append(cartQuantity)
                    cartIconWithQuantity.append(cartIconWithQuantityText)
                    cartIconWithQuantity.append(CART_SVG)
                    return cartIconWithQuantity;
                } catch (error) {
                    gbb.utility.debugConsole("error in renderCartIconWithQuantityHTML", error)
                }
            },
            toggleBoxProductsDisplayFooter: function () {
                if (gbb.state.giftBoxCartData?.items?.length <= 0) {
                    return
                }
                let isShowProductsActive = gbb.gbbAddProductsPage.state.showBoxProductsInFooter;
                let gbbFooterProductsContainer = gbb.$('.gbbFooterProductsContainer')
                let gbbSlotFooterProductsContainerWrapper = gbb.$(".gbbSlotFooterProductsContainerWrapper")
                // let gbbShowBoxProductsToggleContainer = gbb.$('.gbbShowBoxProductsToggleContainer')
                if (gbbFooterProductsContainer.is(':visible')) {
                    gbbFooterProductsContainer.slideUp(700); // Hide with animation
                    gbb.$("body").removeClass("gbbBodyOverflowHidden")
                    // gbbShowBoxProductsToggleContainer.css('transform', 'rotate(0deg)')
                    gbbSlotFooterProductsContainerWrapper && gbbSlotFooterProductsContainerWrapper.slideDown(700)
                    // gbb.$("body").css("overflow-y", DEFAULT_BODY_OVERFLOW_VALUE);
                } else {
                    gbbFooterProductsContainer.slideDown(700); // Show with animation
                    // gbb.$('body').css('overflow-y', 'hidden');
                    gbb.$("body").addClass("gbbBodyOverflowHidden")
                    gbbSlotFooterProductsContainerWrapper && gbbSlotFooterProductsContainerWrapper.slideUp(700)
                    // gbbShowBoxProductsToggleContainer.css('transform', 'rotate(180deg)');
                }
                gbb.gbbAddProductsPage.state.showBoxProductsInFooter = !isShowProductsActive;
            },
            renderShowBoxProductsInFooterHTML: function () {
                try {
                    let _boxData = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage();
                    let showBoxProductsInFooter = gbb.$('<div>').addClass('showBoxProductsInFooter')
                    let showBoxProductsInFooterText = gbb.$('<div>').addClass('showBoxProductsInFooterText')
                    showBoxProductsInFooterText.text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.general?.viewCartProductsLabel) || 'View Selected Products')
                    // showBoxProductsInFooterText.append(" ").append(`(${_boxData?.item_count})`)
                    // let toggleForDisplayProducts = gbb.gbbAddProductsPage.f.renderShowBoxProductsToggleHTML()
                    showBoxProductsInFooter.click(gbb.gbbAddProductsPage.f.toggleBoxProductsDisplayFooter)
                    showBoxProductsInFooter.append(showBoxProductsInFooterText)
                    return showBoxProductsInFooter
                } catch (e) {
                    gbb.utility.debugConsole("error in renderShowBoxProductsInFooterHTML", e)
                }

            },
            renderProgressBarHTML: function (configOptions) {
                try {
                    const { filledPercentage, filledColor, emptyColor } = configOptions
                    let progressBarContainer = gbb.$('<div>').addClass('progressBarContainer')
                    let progressBar = gbb.$('<div>').addClass('progressBar')
                    progressBar.css('background', emptyColor)
                    let progressBarFill = gbb.$('<div>').addClass('progressBarFill')
                    progressBarFill.css('background', filledColor)
                    let animationConfig = {
                        start: gbb?.gbbAddProductsPage?.state?.lastClearedDiscountProgressBarValue || 0,
                        end: filledPercentage
                    }
                    progressBarFill.css('width', animationConfig?.start + '%')
                    progressBarFill.animate({ width: animationConfig?.end + '%' }, 500)

                    progressBar.append(progressBarFill)
                    progressBarContainer.append(progressBar)
                    gbb.gbbAddProductsPage.state.lastClearedDiscountProgressBarValue = filledPercentage
                    return progressBarContainer;
                } catch (error) {
                    gbb.utility.debugConsole("error in renderProgressBarHTML", error)
                }
            },
            calculateProductSlotsData: function () {
                try {
                    let totalNoOfSlotsRequired = 0
                    let productSlotsCalculationArray = []
                    let stepsConfigurationData = gbb.settings?.stepsConfigurationData
                    for (let i = 1; i <= 12; i++) {// max page can be 12
                        let currentPageData = stepsConfigurationData[`productsData${i}`]
                        if (gbb.gbbAddProductsPage.state?.isEveryConditionHaveTypeQuantity == false) {
                            break
                        }
                        if (!currentPageData) { // if page 6 is not present then no point checking page 7,8,9....12
                            break
                        }
                        if (!currentPageData?.isProductsEnabled) {
                            continue
                        }
                        let isMultiCategory = currentPageData?.pageType == 'MULTIPLE_CATEGORY' ? true : false
                        if (isMultiCategory && currentPageData?.isPageConditionsEnabled != true) { // if pageLevel condition is false for multicategory then only we will check categories conditions else pagelevel conditions will be considered
                            for (let key in currentPageData?.categories) {
                                let currentCategoryData = currentPageData?.categories[key]
                                if (currentCategoryData?.conditions && currentCategoryData?.conditions?.length > 0) {
                                    let slotsRequiredForThisStep = gbb.gbbAddProductsPage.f.calculateNumberOfSlotsRequired(currentCategoryData?.conditions)
                                    totalNoOfSlotsRequired += slotsRequiredForThisStep
                                    productSlotsCalculationArray.push({
                                        pageId: `addProductsPage${i}`,
                                        categoryId: key,
                                        slotsRequired: slotsRequiredForThisStep
                                    })
                                }
                            }
                        } else {
                            if (currentPageData?.conditions && currentPageData?.conditions?.length > 0) {
                                let slotsRequiredForThisStep = gbb.gbbAddProductsPage.f.calculateNumberOfSlotsRequired(currentPageData?.conditions)
                                totalNoOfSlotsRequired += slotsRequiredForThisStep
                                productSlotsCalculationArray.push({
                                    pageId: `addProductsPage${i}`,
                                    categoryId: null,
                                    slotsRequired: slotsRequiredForThisStep
                                })
                            }
                        }
                        gbb.gbbAddProductsPage.state.productSlotsCalculationData = productSlotsCalculationArray
                        gbb.gbbAddProductsPage.state.totalProductSlotsRequired = totalNoOfSlotsRequired
                        if (gbb.gbbAddProductsPage?.state?.isEveryConditionHaveTypeQuantity == null) { // we change this flag to false if any of the condition does not have type as quantity ---- if this flag is null which means all conditions have type as quantity
                            gbb.gbbAddProductsPage.state.isEveryConditionHaveTypeQuantity = true
                        }
                    }
                } catch (error) {
                    gbb.utility.debugConsole("error in initializeProductSlotsData", error)
                }
            },
            calculateNumberOfSlotsRequired: function (conditionsArray) {
                try {
                    let slotsRequiredForThisStep = 0
                    let calculationRule = "Maximum"
                    let conditionTypesToExclude = []
                    let conditionValues = []
                    for (let i = 0; i < conditionsArray.length; i++) {
                        let currentCondition = conditionsArray[i]
                        if (currentCondition.type != 'quantity') {
                            gbb.gbbAddProductsPage.state.isEveryConditionHaveTypeQuantity = false
                            return 0
                        }
                        if (!conditionTypesToExclude.includes(currentCondition.condition)) {
                            conditionValues.push(+currentCondition.value)
                        }
                    }
                    if (conditionValues.length > 0) {
                        if (calculationRule == "Minimum") {
                            slotsRequiredForThisStep = Math.min(...conditionValues)
                        } else {
                            slotsRequiredForThisStep = Math.max(...conditionValues)
                        }
                    }
                    return slotsRequiredForThisStep
                } catch (error) {
                    gbb.utility.debugConsole("error in calculateNumberOfSlotsRequired", error)
                }
            },
            autoScrollSlotsOnNavigation: function () {
                try {
                    let productsContainer = gbb.$(".gbbSlotFooterProductsContainer")
                    let totalNoOfEmptySlots = productsContainer.find(".gbbSlotFooterProductContainerEmpty").length
                    let totalNoOfFilledSlots = productsContainer.find(".gbbSlotFooterProductContainer").not('.gbbSlotFooterProductContainerEmpty').length
                    // let totalNoOfSlotsToScroll = totalNoOfFilledSlots - 1

                    let minimumSlotsToScroll = -1 * Math.min(totalNoOfFilledSlots, 3)
                    let lastFilledCardToScroll = productsContainer.find(".gbbSlotFooterProductContainer").not(".gbbSlotFooterProductContainerEmpty").eq(minimumSlotsToScroll)
                    lastFilledCardToScroll.length > 0 && lastFilledCardToScroll[0].scrollIntoView({ behavior: "smooth", block: "nearest", inline: "start" });
                    // if (totalNoOfEmptySlots > 0) {
                    // let card = productsContainer.find('.gbbSlotFooterProductContainer');
                    // let cardWidth = card[0].offsetWidth
                    // let distanceToScroll = (totalNoOfSlotsToScroll * cardWidth) + (totalNoOfSlotsToScroll * 10)
                    // productsContainer.animate({
                    //     scrollLeft:distanceToScroll
                    // },300)
                    // } 

                } catch (error) {
                    gbb.utility.debugConsole("error in autoScrollSlotsOnNavigation", error)
                }
            },
            // autoScrollSlotsBasedOnATC: function (flow) {
            //     try {
            //         let gbbSlotFooterProductsContainerWrapper = gbb.$('.gbbSlotFooterProductsContainerWrapper')
            //         let visibleContentWidth = gbbSlotFooterProductsContainerWrapper.width()
            //         let containerLeft = gbbSlotFooterProductsContainerWrapper.scrollLeft();
            //         let distanceToScroll = 0 
            //         let productCardsContainer = gbb.$(".gbbSlotFooterProductsContainer")
            //         let emptyCardFound = false
            //         //  find the last child which has class gbbSlotFooterProductContainer and doesnt contain gbbSlotFooterProductContainerEmpty

            //         if (flow == "addToCart") {
            //             productCardsContainer.find(".gbbSlotFooterProductContainer").each(function (index) {
            //                 let productCard = gbb.$(this)

            //                 let isProductSlotEmpty = productCard.hasClass("gbbSlotFooterProductContainerEmpty")
            //                 if (isProductSlotEmpty) {
            //                     let productCardLeft =  productCard.position().left; 
            //                     let productCardRight = productCardLeft + productCard.width();

            //                     // Check if the card is already visible within the container's width
            //                     if (productCardLeft >= containerLeft && productCardRight <= visibleContentWidth) {
            //                         emptyCardFound = true;
            //                     } else {
            //                         let previousCardLeft = productCard.prev().position().left
            //                         distanceToScroll = previousCardLeft
            //                         // use scrollIntoView to scroll to the card 
            //                         previousCardLeft[0].scrollIntoView({ behavior: "smooth", block: "nearest", inline: "start" });
            //                         // gbb.$(".gbbSlotFooterProductsContainer").animate({
            //                         //     scrollLeft: productCard.prev()
            //                         //     }, 500)
            //                     }
            //                     return false; // Exit the loop once the first empty card is found
            //                 }
            //             })
            //             // Scroll to the first empty card if it is not visible
            //             // if (!emptyCardFound && distanceToScroll > 0) {
            //             //     gbb.$(".gbbSlotFooterProductsContainer").animate({
            //             //         scrollLeft:  distanceToScroll
            //             //     }, 500)
            //             // }
            //         } else if (flow == "removeFromCart") {
            //             let lastFilledCard = productCardsContainer.find(".gbbSlotFooterProductContainer").not(".gbbSlotFooterProductContainerEmpty").last()
            //             let lastFilledCardLeft = lastFilledCard?.position().left;
            //             // last filledCard is inside visbility then dont scroll 
            //             let lastFilledCardRight = lastFilledCardLeft + lastFilledCard.width();
            //             // if (lastFilledCardRight > visibleContentWidth) {
            //             //     distanceToScroll = lastFilledCardLeft - containerLeft;
            //             //     gbb.$(".gbbSlotFooterProductsContainer").animate({
            //             //         scrollLeft: lastFilledCardLeft
            //             //     }, 500)
            //             // }

            //             // lastFilledCard.scrollIntoView({ behavior: "smooth", block: "nearest", inline: "start" });
            //                 gbb.$(".gbbSlotFooterProductsContainer").animate({
            //                     scrollLeft: lastFilledCard
            //                 }, 500)
            //        }

            //     } catch (error) {
            //         gbb.utility.debugConsole("error in autoScrollSlotsBasedOnATC", error)
            //     }
            // },
            autoScrollSlots: function () {
                try {
                    let productsContainer = gbb.$(".gbbSlotFooterProductsContainer")
                    let totalNoOfFilledSlots = productsContainer.find(".gbbSlotFooterProductContainer").not(".gbbSlotFooterProductContainerEmpty").length
                    let productCard = productsContainer.find('.gbbSlotFooterProductContainer').eq(0)

                    let slotsFooterWrapperWidth = gbb.$('.gbbSlotFooterProductsContainerWrapper').width()
                    let gridGap = 10
                    let totalSizeTakenByFilledSlots = (totalNoOfFilledSlots * productCard.width()) + ((totalNoOfFilledSlots - 1) * gridGap)
                    let slideConditionPercentage = 0.6 // calculate 60% of the width of the container
                    let triggerAutoSlide = totalSizeTakenByFilledSlots > (slotsFooterWrapperWidth * slideConditionPercentage)
                    if (triggerAutoSlide) {
                        let thirdLastFilledProductCard = productsContainer.find(".gbbSlotFooterProductContainer").not(".gbbSlotFooterProductContainerEmpty").eq(-3)
                        if (thirdLastFilledProductCard?.length > 0) {
                            thirdLastFilledProductCard[0].scrollIntoView({ behavior: "smooth", block: "nearest", inline: "start" });
                        }
                    }
                } catch (err) {
                    gbb.utility.debugConsole("error in autoScrollSlots", err)
                }
            }
        },
        events: {
            activateInfiniteScrollForProducts: async function () {
                if (gbb.state.setInfiniteScrollTrackerForProducts == false) {
                    return;
                }
                const myElement = gbb.$('[data-load-more-indicator-status]');

                if (gbb.utility.isElementVisible(myElement)) {
                    if (myElement.attr("data-load-more-indicator-status") != "fetching") {
                        myElement.attr("data-load-more-indicator-status", "fetching")
                        let fetchInProgress;
                        if (!fetchInProgress) {
                            fetchInProgress = true;
                            setTimeout(async function () {
                                gbb.utility.debugConsole("fetching..in progress")
                                const noteAttribute = gbb.gbbAddProductsPage.state.dataForInfiniteScroll.noteAttribute
                                const allProductsData = gbb.gbbAddProductsPage.state.dataForInfiniteScroll.allProductsData
                                const categoryId = gbb.gbbAddProductsPage.state.dataForInfiniteScroll.categoryId
                                await gbb.gbbAddProductsPage.f.loadMoreProducts(noteAttribute, allProductsData, categoryId);
                                myElement.removeAttr("data-load-more-indicator-status")
                            }, 400)
                            gbb.utility.debugConsole("queued...in setTimeout");
                        }
                    } else {
                        // gbb.utility.debugConsole("fetching...from else if")
                    }
                } else {
                    // gbb.utility.debugConsole('Element is not visible');
                }
            }

        },
        action: {
            showPage1: async function () {
                //updatePageStatusFn
                // gbb.gbbAddProductsPage.state.updatePageStatusFn(1);
                let pageId = "addProductsPage1";
                await gbb.gbbAddProductsPage.f.renderNextPage(pageId);

            },
            showPage2: async function () {

                let pageId = "addProductsPage2";
                await gbb.gbbAddProductsPage.f.renderNextPage(pageId);
            },
            showPage3: async function () {
                let pageId = "addProductsPage3";
                await gbb.gbbAddProductsPage.f.renderNextPage(pageId);

            },

            showPage4: async function () {
                let pageId = "addProductsPage4";
                await gbb.gbbAddProductsPage.f.renderNextPage(pageId)
            },

            showPage5: async function () {
                let pageId = "addProductsPage5";
                await gbb.gbbAddProductsPage.f.renderNextPage(pageId)
            },

            showPage6: async function () {
                let pageId = "addProductsPage6";
                await gbb.gbbAddProductsPage.f.renderNextPage(pageId)
            },

            showPage7: async function () {
                let pageId = "addProductsPage7";
                await gbb.gbbAddProductsPage.f.renderNextPage(pageId)
            },

            showPage8: async function () {
                let pageId = "addProductsPage8";
                await gbb.gbbAddProductsPage.f.renderNextPage(pageId)
            },

            showPage9: async function () {
                let pageId = "addProductsPage9";
                await gbb.gbbAddProductsPage.f.renderNextPage(pageId)
            },

            showPage10: async function () {
                let pageId = "addProductsPage10";
                await gbb.gbbAddProductsPage.f.renderNextPage(pageId)
            },

            showPage11: async function () {
                let pageId = "addProductsPage11";
                await gbb.gbbAddProductsPage.f.renderNextPage(pageId)
            },

            showPage12: async function () {
                let pageId = "addProductsPage12";
                await gbb.gbbAddProductsPage.f.renderNextPage(pageId)
            }
        },
    },
    gbbSubscriptionProductsPage: {
        state: {
            selectedSellingPlanGroup: null,
            activeSellingPlanId: null,
            activeSellingPlanDetails: null,
            selectedSellingPlanGroupId: null,
            sellingPlansArray: [],
            enableOneTimePurchase: false,
            showDiscountOnProductCards: false,
            purchaseType: null,
            constants: {
                ONE_TIME_PURCHASE: 'ONE_TIME_PURCHASE',
                SUBSCRIPTION_PURCHASE: 'SUBSCRIPTION_PURCHASE'
            },
            languageFields: {
                oneTimePurchaseLabel: "One time Purchase", // get it from multilang
                subscriptionPurchaseLabel: "Subscription Purchase",// get it from multilang
                frequencyLabel: "Frequency1",
                pageTitle: "Page Title1"
            },
        },
        settings: {
            pageCustomizationData: { // change values 
                header: {
                    purchaseOptionActiveColor: "#2B2B2B",
                    purchaseOptionActiveBgColor: "#FFFFFF",
                    purchaseOptionInActiveColor: "#888888",
                    purchaseOptionInActiveBgColor: "#F0F0F0",
                    purchaseOptionStrokeRadius: "8px",
                    purchaseOptionStrokeColor: "#D5D5D5",
                    purchaseOptionStrokeWidth: "2px",
                    sellingPlanNavigationActiveBgColor: "#FFFFFF",
                    sellingPlanNavigationActiveTitleColor: "#333333",
                    sellingPlanNavigationInActiveTitleColor: "#333333",
                    pageTitleColor: "#333333",
                    pageTitleFontWeight: "bold",
                    headerBgColor: "#EDEDED",
                    sellingPlanNavigationNextPrevIconBgColor: "#2B2B2B",
                    sellingPlanNavigationActiveDiscountPillBgColor: "#CAE983",
                    sellingPlanNavigationActiveDiscountPillTextColor: "#000000",
                    sellingPlanNavigationInActiveDiscountPillTextColor: "#000000",
                    sellingPlanNavigationInActiveDiscountPillBgColor: "#9D9D9D",
                    productDiscountRibbonBgColor: "#FF0000",
                    productDiscountRibbonTextColor: "#FFFFFF",
                    subscriptionFrequencyLabelTextColor: "#333333",
                    subscriptionFrequencyLabelFontWeight: "bold",
                    subscriptionPageTitleTextColor: "#000000",
                    subscriptionPageTitleFontWeight: "bold",
                    sellingPlansNavigationStrokeColor: "#B7B7B7",
                    sellingPlansNavigationStrokeWidth: "2px",
                    sellingPlansNavigationStrokeRadius: "10px"
                }
            }
        },
        f: {
            setCssVariablesForSubscriptionProductsPage: function () {
                try {
                    let root = document.documentElement;
                    let pageCustomizationData = gbb.gbbSubscriptionProductsPage.settings.pageCustomizationData || {}
                    const keysToMap = ['header']
                    keysToMap.forEach((key) => {
                        let currentKey = pageCustomizationData[key] || {}
                        Object.keys(currentKey).forEach((key) => {
                            let value = currentKey[key];
                            if (value) {
                                let _key = gbb.f.convertCamelCaseToKebabCase(key);
                                root.style.setProperty(`--gbb-gbbSubscriptionBundle-${_key}`, value);
                            }
                        })
                    })
                } catch (error) {
                    gbb.utility.debugError('error in setCssVariablesForSubscriptionProductsPage', error)
                }
            },
            checkIfPurchaseTypeIsSubscription: function () {
                try {
                    const { SUBSCRIPTION_PURCHASE } = gbb.gbbSubscriptionProductsPage.state.constants
                    const subscriptionDataFromSessionStorage = gbb.gbbSubscriptionProductsPage.f.getSubscriptionDataFromSessionStorage()
                    if (subscriptionDataFromSessionStorage && subscriptionDataFromSessionStorage.purchaseType) { 
                        return subscriptionDataFromSessionStorage.purchaseType == SUBSCRIPTION_PURCHASE
                    }
                    const isPurchaseTypeSubscription = gbb.gbbSubscriptionProductsPage.state.purchaseType == SUBSCRIPTION_PURCHASE
                    return isPurchaseTypeSubscription
                } catch (error) {
                    gbb.utility.debugError('error in checkIfPurchaseTypeIsSubscription', error)
                }
            },
            updateSubscriptionDataInSessionStorage: function (data = {}) {
                try {
                    let { ONE_TIME_PURCHASE } = gbb.gbbSubscriptionProductsPage.state.constants
                    let dataToSet = {
                        activeSellingPlanId: gbb.gbbSubscriptionProductsPage.state.activeSellingPlanId,
                        activeSellingPlanDetails: gbb.gbbSubscriptionProductsPage.state.activeSellingPlanDetails,
                        purchaseType: gbb.gbbSubscriptionProductsPage.state.purchaseType,
                        selectedSellingPlanGroupId: gbb.gbbSubscriptionProductsPage.state.selectedSellingPlanGroupId,
                        enableOneTimePurchase: gbb.gbbSubscriptionProductsPage.state.enableOneTimePurchase,
                        sellingPlansArray: gbb.gbbSubscriptionProductsPage.state.sellingPlansArray,
                    }
                    dataToSet = { ...dataToSet, ...data }
                    if (dataToSet.purchaseType == ONE_TIME_PURCHASE) {
                        dataToSet['activeSellingPlanId'] = null
                        dataToSet['activeSellingPlanDetails'] = null
                    }
                    sessionStorage.setItem(`gbb-subscription-bundle-${gbb.state.bundleId}`, JSON.stringify(dataToSet));
                } catch (error) {
                    gbb.utility.debugError('error updateSubscriptionDataInsessionStorage', error)
                }
            },
            getSubscriptionDataFromSessionStorage: function () {
                try {
                    return JSON.parse(sessionStorage.getItem(`gbb-subscription-bundle-${gbb.state.bundleId}`))
                } catch (error) {
                    gbb.utility.debugError('error in getSubscriptionDataFromSessionStorage', error)
                }
            },
            checkIfPricingPoliciesChanged: function (sessionArray, settingsArray) {
                try {
                    for (const settingsItem of settingsArray) {
                        const sessionItem = sessionArray.find(item => item.id === settingsItem.id);
                        if (!sessionItem) return true;

                        const sessionPricingPolicies = sessionItem.pricingPolicies;
                        const settingsPricingPolicies = settingsItem.pricingPolicies;

                        if (sessionPricingPolicies.length !== settingsPricingPolicies.length) return true;

                        for (let j = 0; j < sessionPricingPolicies.length; j++) {
                            const sessionPolicy = sessionPricingPolicies[j];
                            const settingsPolicy = settingsPricingPolicies[j];

                            if (sessionPolicy.adjustmentType !== settingsPolicy.adjustmentType) return true;

                            const { adjustmentType } = sessionPolicy.adjustmentType;
                            const adjustmentValueSession = sessionPolicy.adjustmentValue;
                            const adjustmentValueSettings = settingsPolicy.adjustmentValue;

                            if (adjustmentType === 'PERCENTAGE') {
                                if (adjustmentValueSession.percentage !== adjustmentValueSettings.percentage) return true;
                            } else if (adjustmentType === 'PRICE' || adjustmentType === 'FIXED_AMOUNT') {
                                if (adjustmentValueSession.amount !== adjustmentValueSettings.amount) return true;
                            }
                        }
                    }
                    return false;
                } catch (error) {
                    gbb.utility.debugError('error in checkIfPricingPoliciesChanged', error);
                }
            },

            checkIfNameChanged: function (sessionArray, settingsArray) {
                try {
                    for (const settingsItem of settingsArray) {
                        const sessionItem = sessionArray.find(item => item.id === settingsItem.id);
                        if (!sessionItem) return true;

                        const keysToCheck = ['name', 'displayTitle', 'displayDiscountText'];
                        for (const key of keysToCheck) {
                            if (sessionItem[key] !== settingsItem[key]) return true;
                        }
                    }
                    return false;
                } catch (error) {
                    gbb.utility.debugError('error in checkIfNameChanged', error);
                }
            },

            hasSubscriptionDataChanged: function (dataToUpdate) {
                try {
                    const subscriptionDataFromSessionStorage = gbb.gbbSubscriptionProductsPage.f.getSubscriptionDataFromSessionStorage();
                    if (!subscriptionDataFromSessionStorage) return false;

                    const sellingPlanArrayFromSession = subscriptionDataFromSessionStorage.sellingPlansArray;
                    const sellingPlanArrayFromSettings = dataToUpdate.sellingPlansArray;

                    if (sellingPlanArrayFromSession.length !== sellingPlanArrayFromSettings.length) return true;

                    if (this.checkIfNameChanged(sellingPlanArrayFromSession, sellingPlanArrayFromSettings)) return true;
                    if (this.checkIfPricingPoliciesChanged(sellingPlanArrayFromSession, sellingPlanArrayFromSettings)) return true;

                    const keysToCompare = ['enableOneTimePurchase', 'selectedSellingPlanGroupId'];
                    for (const key of keysToCompare) {
                        if (dataToUpdate[key] !== subscriptionDataFromSessionStorage[key]) return true;
                    }

                    return false;
                } catch (error) {
                    gbb.utility.debugError('error in hasSubscriptionDataChanged', error);
                }
            },
            setSubscriptionBundlesLanguageFields: function (options) {
                try {
                    let languageFields = gbb.gbbSubscriptionProductsPage.state.languageFields
                    for (let key in options) {
                        if (key && languageFields.hasOwnProperty(key)) {
                            languageFields[key] = options[key]
                        }
                    }
                    gbb.gbbSubscriptionProductsPage.state.languageFields = languageFields
                } catch (error) {
                    gbb.utility.debugError('error in setSubscriptionBundlesLanguageFields', error)
                }
            },
            setSubscriptionBundlesSettings: async function (dataToSet) {
                try {
                    let { selectedSubscriptionGroup, enableOneTimePurchase, showDiscountOnProductCards, frequencyLabel, pageTitle, isDefaultPurchaseTypeSubscription = false } = dataToSet || {}
                    const { ONE_TIME_PURCHASE, SUBSCRIPTION_PURCHASE } = gbb.gbbSubscriptionProductsPage.state.constants
                    const purchaseType = (enableOneTimePurchase && isDefaultPurchaseTypeSubscription) || !enableOneTimePurchase ? SUBSCRIPTION_PURCHASE:ONE_TIME_PURCHASE
                    const activeSellingPlanData = selectedSubscriptionGroup?.sellingPlans[0] || {}
                    let groupId = gbb.utility.generateSellingPlanGroupIdByName(selectedSubscriptionGroup.name)
                    const updateStates = {
                        selectedSellingPlanGroup: selectedSubscriptionGroup,
                        selectedSellingPlanGroupId: groupId,
                        activeSellingPlanDetails: activeSellingPlanData,
                        activeSellingPlanId: gbb.utility.extractIdsFromGraphQlId(activeSellingPlanData?.id) || null,
                        sellingPlansArray: selectedSubscriptionGroup?.sellingPlans || [],
                        purchaseType: purchaseType,
                        enableOneTimePurchase: enableOneTimePurchase,
                        showDiscountOnProductCards: showDiscountOnProductCards,
                    }

                    const subscriptionDataFromSessionStorage = gbb.gbbSubscriptionProductsPage.f.getSubscriptionDataFromSessionStorage()

                    let isSessionDataChanged = gbb.gbbSubscriptionProductsPage.f.hasSubscriptionDataChanged(updateStates)

                    if (isSessionDataChanged || !subscriptionDataFromSessionStorage) {
                        let dataToSet = {
                            activeSellingPlanId: gbb.utility.extractIdsFromGraphQlId(activeSellingPlanData?.id),
                            activeSellingPlanDetails: activeSellingPlanData,
                            purchaseType: purchaseType,
                            selectedSellingPlanGroupId: groupId,
                            enableOneTimePurchase: enableOneTimePurchase,
                        }
                        gbb.gbbSubscriptionProductsPage.f.updateSubscriptionDataInSessionStorage(dataToSet)
                    }
                    else if (subscriptionDataFromSessionStorage) {
                        for (let key in subscriptionDataFromSessionStorage) {
                            if (key && updateStates.hasOwnProperty(key)) {
                                updateStates[key] = subscriptionDataFromSessionStorage[key]
                            }
                        }
                    }
                    gbb.gbbSubscriptionProductsPage.state = { ...gbb.gbbSubscriptionProductsPage.state, ...updateStates }
                    gbb.gbbSubscriptionProductsPage.f.setSubscriptionBundlesLanguageFields({ frequencyLabel, pageTitle })
                    if (isSessionDataChanged) {
                        await gbb.gbbSubscriptionProductsPage.f.resetProductsDataBasedOnActiveSellingPlan()
                    }
                } catch (error) {
                    gbb.utility.debugError("error in gbbSubscriptionProductsPage.f.setSubscriptionBundlesSettings", error)
                }
            },
            prepareSubscriptionHeaderHTML: function () {
                try {
                    const enableOneTimePurchase = gbb.gbbSubscriptionProductsPage.state.enableOneTimePurchase || false
                    const purchaseType = gbb.gbbSubscriptionProductsPage.state.purchaseType
                    const { SUBSCRIPTION_PURCHASE } = gbb.gbbSubscriptionProductsPage.state.constants

                    const gbbSubscriptionBundleWrapper = gbb.$('<div>').addClass('gbbSubscriptionBundleWrapper')
                    if (enableOneTimePurchase) {
                        let purchaseOptionsWrapperHTML = gbb.gbbSubscriptionProductsPage.f.preparePurchaseOptionsUI()
                        gbbSubscriptionBundleWrapper.append(purchaseOptionsWrapperHTML)
                    }
                    if (purchaseType == SUBSCRIPTION_PURCHASE) {
                        let sellingPlansNavigationHTML = gbb.gbbSubscriptionProductsPage.f.prepareSellingPlansNavigationUI()
                        gbbSubscriptionBundleWrapper.append(sellingPlansNavigationHTML)
                    }

                    return gbbSubscriptionBundleWrapper;
                } catch (error) {
                    gbb.utility.debugError('error in gbbSubscriptionProductsPage.f.prepareSubscriptionHeaderHTML', error)
                }
            },
            resetProductsDataBasedOnActiveSellingPlan: async function () {
                try {
                    gbb.gbbSubscriptionProductsPage.f.updateSubscriptionDataInSessionStorage()
                    let cartData = gbb.state.giftBoxCartData
                    gbb.gbbBrowser.setRelevantBoxDataToSessionStorage(cartData)
                    gbb.gbbBrowser.updateTotalPriceInSessionStorage()
                    gbb.gbbBrowser.updateTotalofRelevantBoxPriceInSessionStorage()
                    await gbb.gbbSubscriptionProductsPage.f.resetProductsCardContainerUI()
                    gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML(gbb.state.currentPageId));
                } catch (error) {
                    gbb.utility.debugError('error in gbbSubscriptionProductsPage.f.resetProductsDataBasedOnActiveSellingPlan', error)
                }
            },
            handleChangeActiveSellingPlan: async function (event) {
                try {
                    let gbbSellingPlanNavigationTab = gbb.$(event.currentTarget)
                    if (gbbSellingPlanNavigationTab.hasClass("active")) {
                        return
                    }
                    let sellingPlanId = gbbSellingPlanNavigationTab.data('selling-plan-id')
                    let sellingPlanIdGid = `gid://shopify/SellingPlan/${sellingPlanId}`
                    let sellingPlansArray = gbb.gbbSubscriptionProductsPage.state.sellingPlansArray
                    let sellingPlan = sellingPlansArray.find((sellingPlan) => sellingPlan.id == sellingPlanIdGid)
                    gbb.$('.gbbSellingPlanNavigationTab').removeClass('active')
                    gbbSellingPlanNavigationTab.addClass('active')
                    gbb.gbbSubscriptionProductsPage.state.activeSellingPlanId = sellingPlanId
                    gbb.gbbSubscriptionProductsPage.state.activeSellingPlanDetails = sellingPlan
                    await gbb.gbbSubscriptionProductsPage.f.resetProductsDataBasedOnActiveSellingPlan()
                    return sellingPlanId
                } catch (error) {
                    gbb.utility.debugError('error in gbbSubscriptionProductsPage.f.handleChangeActiveSellingPlan', error)
                }
            },
            prepareIndividualSellingPlanNavigationTabHTML: function (sellingPlan) {
                try {
                    const activeSellingPlanId = gbb.gbbSubscriptionProductsPage.state.activeSellingPlanId
                    const gbbSellingPlanNavigationTab = gbb.$('<div>').addClass('gbbSellingPlanNavigationTab')
                    const gbbSellingPlanNavigationTabTitle = gbb.$('<div>').addClass('gbbSellingPlanNavigationTabTitle')
                    const gbbSellingPlanNavigationDiscountText = gbb.$('<div>').addClass('gbbSellingPlanNavigationDiscountText')
                    const sellingPlanId = gbb.utility.extractIdsFromGraphQlId(sellingPlan.id)
                    if (sellingPlanId == activeSellingPlanId) {
                        gbbSellingPlanNavigationTab.addClass("active")
                    }
                    gbbSellingPlanNavigationTab.attr('data-selling-plan-id', sellingPlanId)
                    gbbSellingPlanNavigationTabTitle.text(sellingPlan.displayTitle)
                    gbbSellingPlanNavigationDiscountText.text(sellingPlan.displayDiscountText)
                    gbbSellingPlanNavigationTab.append(gbbSellingPlanNavigationTabTitle)
                    gbbSellingPlanNavigationTab.append(gbbSellingPlanNavigationDiscountText)

                    gbbSellingPlanNavigationTab.on("click", gbb.gbbSubscriptionProductsPage.f.handleChangeActiveSellingPlan)
                    return gbbSellingPlanNavigationTab
                } catch (error) {
                    gbb.utility.debugError('error in gbbSubscriptionProductsPage.f.prepareIndividualSellingPlanNavigationTabHTML', error)
                }
            },
            prepareNextPrevNavigationsHTML: function () {
                try {
                    const nextNavigationIconHTML = gbb.$('<div>').addClass("gbbSellingPlanNextNavigationIconWrapper").append(CONSTANT_ARROW_SVG)
                    const prevNavigationIconHTML = gbb.$('<div>').addClass("gbbSellingPlanPrevNavigationIconWrapper").append(CONSTANT_ARROW_SVG)

                    return { nextNavigationIconHTML, prevNavigationIconHTML }
                } catch (error) {
                    gbb.utility.debugError('error in gbbSubscriptionProductsPage.f.prepareNextPrevNavigationsHTML', error)
                }
            },
            renderSellingPlansNavigationTabs: function (options) {
                try {
                    const { sellingPlansArray, gbbSellingPlansNavigationTabsContainer } = options
                    gbbSellingPlansNavigationTabsContainer.empty();  // Clear previous tabs

                    for (let i = 0; i < sellingPlansArray.length; i++) {
                        const sellingPlan = sellingPlansArray[i];
                        const navigationTab = gbb.gbbSubscriptionProductsPage.f.prepareIndividualSellingPlanNavigationTabHTML(sellingPlan);
                        gbbSellingPlansNavigationTabsContainer.append(navigationTab);
                    }
                    return gbbSellingPlansNavigationTabsContainer
                } catch (error) {
                    gbb.utility.debugError('error in renderSellingPlansNavigationTabs', error)
                }
            },
            handleNextPrevNavigationBtnClickV1: function ({ operation }) {
                try {
                    const navigationTabsContainer = gbb.$(".gbbSellingPlansNavigationTabsContainer").first();
                    const totalSellingPlans = gbb.gbbSubscriptionProductsPage.state.sellingPlansArray?.length || 0;
                    let isMobileView = false;

                    // Check if the navigation container exists
                    if (!navigationTabsContainer.length) return;

                    const navigationTabs = gbb.$(".gbbSellingPlanNavigationTab");
                    let slidesPerView = 4; // Default number of visible slides
                    if (window.innerWidth < 550) {
                        isMobileView = true;
                        slidesPerView = 1;  // Only 1 visible slide in mobile view
                    }

                    // Find the active element using the 'active' class
                    const $activeElement = navigationTabs.filter('.active').first();
                    const activeIndex = navigationTabs.index($activeElement);

                    let scrollToElementIndex;

                    // Calculate the new index to scroll to based on the "NEXT" or "PREV" operation
                    if (operation === "NEXT") {
                        scrollToElementIndex = Math.min(activeIndex + slidesPerView, totalSellingPlans - 1);
                    } else if (operation === "PREV") {
                        scrollToElementIndex = Math.max(activeIndex - slidesPerView, 0);
                    }

                    const $nextSlideElement = navigationTabs.eq(scrollToElementIndex).first();

                    // Make sure the next slide element exists
                    if (!$nextSlideElement.length) return;

                    const containerRect = navigationTabsContainer.get(0).getBoundingClientRect();
                    const nextSlideRect = $nextSlideElement.get(0).getBoundingClientRect();

                    // Calculate the scroll offset based on the active element and the next element
                    const offset = nextSlideRect.left - containerRect.left;

                    // Adjust scrolling direction based on operation
                    if (operation === "NEXT") {
                        navigationTabsContainer.animate({
                            scrollLeft: '+=' + offset
                        }, 500);
                    } else if (operation === "PREV") {
                        navigationTabsContainer.animate({
                            scrollLeft: '-=' + Math.abs(offset)
                        }, 500);
                    }

                    if (isMobileView) {
                        gbb.gbbSubscriptionProductsPage.f.handleChangeActiveSellingPlan({ currentTarget: $nextSlideElement });
                    }

                } catch (error) {
                    gbb.utility.debugError('Error in handleNextPrevNavigationBtnClick', error);
                }
            },
            autoScrollToActiveSellingPlanNavigation: function () {
                try {
                    const navigationTabsContainer = gbb.$(".gbbSellingPlansNavigationTabsContainer").first();
                    if (!navigationTabsContainer.length) return;
                    const navigationTabs = gbb.$(".gbbSellingPlanNavigationTab");
                    const totalSellingPlans = gbb.gbbSubscriptionProductsPage.state.sellingPlansArray?.length || 0;
                    const $activeElement = navigationTabs.filter('.active').first();
                    const activeIndex = navigationTabs.index($activeElement);
                    let scrollToElementIndex = Math.min(activeIndex, totalSellingPlans - 1);
                    
                    const $nextSlideElement = navigationTabs.eq(scrollToElementIndex).first();

                    if (!$nextSlideElement.length) return;

                    const containerRect = navigationTabsContainer.get(0).getBoundingClientRect();
                    const nextSlideRect = $nextSlideElement.get(0).getBoundingClientRect();

                    const offset = nextSlideRect.left - containerRect.left;
                        navigationTabsContainer.animate({
                            scrollLeft: '+=' + offset
                        }, 500);

                } catch (error) {
                    gbb.utility.debugError('error in autoScrollToActiveSellingPlanNavigation', error)
                }
            },
            handleNextPrevNavigationBtnClick: function ({ operation }) {
                try {
                    const navigationTabsContainer = gbb.$(".gbbSellingPlansNavigationTabsContainer").first();
                    const totalSellingPlans = gbb.gbbSubscriptionProductsPage.state.sellingPlansArray?.length || 0;
                    let isMobileView = window.innerWidth < 550; // Check if it's mobile view
                    let slidesPerView = isMobileView ? 1 : 4; // Set slides per view depending on screen size

                    // Check if the navigation container exists
                    if (!navigationTabsContainer.length) return;

                    const navigationTabs = gbb.$(".gbbSellingPlanNavigationTab");

                    let scrollToElementIndex;

                    if (isMobileView) {
                        const $activeElement = navigationTabs.filter('.active').first();
                        const activeIndex = navigationTabs.index($activeElement);

                        // Calculate the new index based on the operation
                        if (operation === "NEXT") {
                            scrollToElementIndex = Math.min(activeIndex + slidesPerView, totalSellingPlans - 1);
                        } else if (operation === "PREV") {
                            scrollToElementIndex = Math.max(activeIndex - slidesPerView, 0);
                        }

                    } else {
                        const containerRect = navigationTabsContainer.get(0).getBoundingClientRect();

                        // Find the index of the first visible element
                        let firstVisibleTabIndex = 0;
                        navigationTabs.each(function (index) {
                            const tabRect = gbb.$(this).get(0).getBoundingClientRect();
                            if (tabRect.left >= containerRect.left && tabRect.right <= containerRect.right) {
                                firstVisibleTabIndex = index;
                                return false; // Stop when first visible tab is found
                            }
                        });

                        // Calculate the new index based on the operation
                        if (operation === "NEXT") {
                            scrollToElementIndex = Math.min(firstVisibleTabIndex + slidesPerView, totalSellingPlans - 1);
                        } else if (operation === "PREV") {
                            scrollToElementIndex = Math.max(firstVisibleTabIndex - slidesPerView, 0);
                        }
                    }

                    const $nextSlideElement = navigationTabs.eq(scrollToElementIndex).first();

                    // Make sure the next slide element exists
                    if (!$nextSlideElement.length) return;

                    const containerRect = navigationTabsContainer.get(0).getBoundingClientRect();
                    const nextSlideRect = $nextSlideElement.get(0).getBoundingClientRect();

                    // Calculate the scroll offset
                    const offset = nextSlideRect.left - containerRect.left;

                    // Scroll to the next or previous element
                    if (operation === "NEXT") {
                        navigationTabsContainer.animate({
                            scrollLeft: '+=' + offset
                        }, 500);
                    } else if (operation === "PREV") {
                        navigationTabsContainer.animate({
                            scrollLeft: '-=' + Math.abs(offset)
                        }, 500);
                    }

                    if (isMobileView) {
                        gbb.gbbSubscriptionProductsPage.f.handleChangeActiveSellingPlan({ currentTarget: $nextSlideElement });
                    }

                } catch (error) {
                    gbb.utility.debugError('Error in handleNextPrevNavigationBtnClick', error);
                }
            },
            addPrevNextNavigationButtons: function ({
                gbbSellingPlansNavigationItemsWrapper,
                gbbSellingPlansNavigationTabsContainer,
            }) {
                try {
                    const { nextNavigationIconHTML, prevNavigationIconHTML } = gbb.gbbSubscriptionProductsPage.f.prepareNextPrevNavigationsHTML();

                    gbbSellingPlansNavigationItemsWrapper.append(prevNavigationIconHTML);
                    gbbSellingPlansNavigationItemsWrapper.append(gbbSellingPlansNavigationTabsContainer);
                    gbbSellingPlansNavigationItemsWrapper.append(nextNavigationIconHTML);
                    prevNavigationIconHTML.prop('disabled', true);

                    nextNavigationIconHTML.on('click', () => {
                        gbb.gbbSubscriptionProductsPage.f.handleNextPrevNavigationBtnClick({ operation: "NEXT" })
                    });

                    prevNavigationIconHTML.on('click', () => {
                        gbb.gbbSubscriptionProductsPage.f.handleNextPrevNavigationBtnClick({ operation: "PREV" })
                    });
                    return gbbSellingPlansNavigationItemsWrapper
                } catch (error) {
                    gbb.utility.debugError('error in addPrevNextNavigationButtons', error)
                }
            },
            prepareSellingPlansNavigationUI: function () {
                try {
                    const noOfTabsToRender = 4;//make it dynamic
                    const isMobileView = window.innerWidth < 500
                    const sellingPlansArray = gbb.gbbSubscriptionProductsPage.state.sellingPlansArray;
                    const numberOfSellingPlans = sellingPlansArray?.length;
                    const languageFields = gbb.gbbSubscriptionProductsPage.state.languageFields
                    const gbbSellingPlansNavigationWrapper = gbb.$('<div>').addClass('gbbSellingPlansNavigationWrapper');
                    const gbbSellingPlansNavigationItemsWrapper = gbb.$('<div>').addClass('gbbSellingPlansNavigationItemsWrapper');
                    const gbbSellingPlansNavigationTabsContainer = gbb.$('<div>').addClass('gbbSellingPlansNavigationTabsContainer');
                    gbbSellingPlansNavigationItemsWrapper.attr('data-total-selling-plans', numberOfSellingPlans);
                    const gbbSellingPlansNavigationTitle = gbb.$('<div>').addClass('gbbSellingPlansNavigationTitle');

                    gbbSellingPlansNavigationTitle.text(languageFields.pageTitle);

                    gbb.gbbSubscriptionProductsPage.f.renderSellingPlansNavigationTabs({ sellingPlansArray, gbbSellingPlansNavigationTabsContainer });

                    if (numberOfSellingPlans > noOfTabsToRender || isMobileView) {
                        gbb.gbbSubscriptionProductsPage.f.addPrevNextNavigationButtons({
                            gbbSellingPlansNavigationItemsWrapper,
                            gbbSellingPlansNavigationTabsContainer,
                        })
                    } else {
                        gbbSellingPlansNavigationItemsWrapper.append(gbbSellingPlansNavigationTabsContainer);
                    }

                    gbbSellingPlansNavigationWrapper.append(gbbSellingPlansNavigationTitle);
                    gbbSellingPlansNavigationWrapper.append(gbbSellingPlansNavigationItemsWrapper);

                    return gbbSellingPlansNavigationWrapper;
                } catch (error) {
                    gbb.utility.debugError('error in gbbSubscriptionProductsPage.f.prepareSellingPlansNavigationUI', error);
                }
            },
            resetProductsCardContainerUI: async function () {
                try {
                    let pageType = gbb.gbbAddProductsPage.state.productPageData.pageType
                    let categoryId = gbb.gbbMultipleCategoriesPage.state.currentCategoryId
                    let totalProducts = pageType == 'MULTIPLE_CATEGORY' ? gbb.gbbAddProductsPage.state.productPageData.categories[categoryId].uniqueProductsData : gbb.gbbAddProductsPage.state.uniqueProductsData
                    let noteAttribute = gbb.state.currentPageId;

                    let updatedProductsCardsContainer = await gbb.gbbAddProductsPage.f.renderProductsCardContainer(totalProducts, noteAttribute, 'resetProductCardsContainer', categoryId)

                    return updatedProductsCardsContainer
                } catch (error) {
                    gbb.utility.debugError("error in resetProductsCardContainerUI", error)
                }
            },
            handlePurchaseOptionClick: async function (event) {
                try {
                    let gbbPurchaseOption = gbb.$(event.currentTarget).first()
                    let optionValue = gbbPurchaseOption.attr('data-purchase-type')
                    const sellingPlansArray = gbb.gbbSubscriptionProductsPage.state.sellingPlansArray || []
                    const { ONE_TIME_PURCHASE } = gbb.gbbSubscriptionProductsPage.state.constants

                    if (gbbPurchaseOption.hasClass("active")) {
                        return
                    }
                    gbb.$('.gbbPurchaseOption').removeClass('active')
                    gbbPurchaseOption.addClass('active')
                    gbb.gbbSubscriptionProductsPage.state.purchaseType = optionValue
                    if (optionValue == ONE_TIME_PURCHASE) {
                        gbb.gbbSubscriptionProductsPage.state.activeSellingPlanId = null
                        gbb.gbbSubscriptionProductsPage.state.activeSellingPlanDetails = null
                    } else {
                        let sellingPlanToSetActive = sellingPlansArray[0] || {}
                        gbb.gbbSubscriptionProductsPage.state.activeSellingPlanId = gbb.utility.extractIdsFromGraphQlId(sellingPlanToSetActive?.id) || null
                        gbb.gbbSubscriptionProductsPage.state.activeSellingPlanDetails = sellingPlanToSetActive || null
                    }
                    let updatedPageHeader = gbb.gbbSubscriptionProductsPage.f.prepareSubscriptionHeaderHTML()
                    gbb.$(".gbbSubscriptionBundleWrapper").replaceWith(updatedPageHeader);
                    await gbb.gbbSubscriptionProductsPage.f.resetProductsDataBasedOnActiveSellingPlan()
                } catch (error) {
                    gbb.utility.debugError("error in handlePurchaseOptionClick", error)
                }
            },
            preparePurchaseOptionsUI: function () {
                try {
                    const activePurchaseType = gbb.gbbSubscriptionProductsPage.state.purchaseType
                    const languageFields = gbb.gbbSubscriptionProductsPage.state.languageFields
                    const { ONE_TIME_PURCHASE, SUBSCRIPTION_PURCHASE } = gbb.gbbSubscriptionProductsPage.state.constants
                    const options = [
                        {
                            label: languageFields.oneTimePurchaseLabel,
                            value: ONE_TIME_PURCHASE,
                            isActive: activePurchaseType == ONE_TIME_PURCHASE,
                        },
                        {
                            label: languageFields.subscriptionPurchaseLabel,
                            value: SUBSCRIPTION_PURCHASE,
                            isActive: activePurchaseType == SUBSCRIPTION_PURCHASE,
                        }
                    ]
                    let gbbPurchaseOptionsWrapper = gbb.$('<div>').addClass('gbbPurchaseOptionsWrapper')
                    let gbbPurchaseOptionsTitle = gbb.$('<div>').addClass("gbbPurchaseOptionsTitle")
                    let gbbPurchaseOptionsButtonWrapper = gbb.$('<div>').addClass('gbbPurchaseOptionsButtonWrapper')
                    gbbPurchaseOptionsTitle.text(gbb.gbbSubscriptionProductsPage.state.languageFields.frequencyLabel)

                    options.forEach((option) => {
                        let gbbPurchaseOption = gbb.$('<div>').addClass('gbbPurchaseOption')
                        let gbbPurchaseOptionTextContent = gbb.$("<div>").addClass('gbbPurchaseOptionTextContent')
                        gbbPurchaseOptionTextContent.text(option.label)
                        gbbPurchaseOption.attr('data-purchase-type', option.value)
                        if (option.isActive) {
                            gbbPurchaseOption.addClass('active')
                        }
                        gbbPurchaseOption.on("click", gbb.gbbSubscriptionProductsPage.f.handlePurchaseOptionClick)
                        gbbPurchaseOption.append(gbbPurchaseOptionTextContent)
                        gbbPurchaseOptionsButtonWrapper.append(gbbPurchaseOption)
                    })
                    gbbPurchaseOptionsWrapper.append(gbbPurchaseOptionsTitle)
                    gbbPurchaseOptionsWrapper.append(gbbPurchaseOptionsButtonWrapper)
                    return gbbPurchaseOptionsWrapper;
                } catch (error) {
                    gbb.utility.debugError('error in gbbSubscriptionProductsPage.f.preparePurchaseOptionsUI', error)
                }
            },
            subscriptionBundlesInit: function (subscriptionBundlesData) {
                try {
                    gbb.gbbSubscriptionProductsPage.f.setSubscriptionBundlesSettings(subscriptionBundlesData)
                    gbb.gbbSubscriptionProductsPage.f.setCssVariablesForSubscriptionProductsPage()
                } catch (error) {
                    gbb.utility.debugError("error in gbbSubscriptionProductsPage.f.subscriptionBundlesInit", error)
                }
            },
            calculateSubscriptionProductDiscountValue: function (variantInfo) {
                try {
                    const { activeSellingPlanDetails } = gbb.gbbSubscriptionProductsPage.state;
                    const pricingPolicies = activeSellingPlanDetails?.pricingPolicies || [];

                    if (!variantInfo || !activeSellingPlanDetails || pricingPolicies.length === 0) return 0;

                    const activePricingPolicy = pricingPolicies[0];
                    const { adjustmentType: discountType, adjustmentValue } = activePricingPolicy || {};
                    let discountValue = 0;

                    switch (discountType) {
                        case 'FIXED_AMOUNT':
                            discountValue = parseInt(adjustmentValue?.amount) * 100;
                            return discountValue > 0 ? gbb.utility.formatPrice(discountValue) : false;

                        case 'PRICE':
                            discountValue = parseInt(adjustmentValue?.amount);
                            const variantPrice = variantInfo.price / 100;
                            const calculateDiscountOn = variantPrice - discountValue;
                            const percentageDiscount = Math.max((calculateDiscountOn / variantPrice) * 100, 0);
                            return percentageDiscount > 0 ? Math.floor(percentageDiscount) + '%' : false;

                        case 'PERCENTAGE':
                            discountValue = adjustmentValue?.percentage;
                            return discountValue > 0 ? discountValue + '%' : false;

                        default:
                            return discountValue;
                    }
                } catch (error) {
                    gbb.utility.debugError('error in gbbSubscriptionProductsPage.f.calculateSubscriptionProductDiscountValue', error);
                }
            }
            ,
            prepareSubscriptionProductDiscountRibbonUI: function (variantDetails) {
                try {
                    const gbbSubscriptionDiscountRibbon = gbb.$('<div>').addClass('gbbSubscriptionDiscountRibbon')
                    const gbbSubscriptionDiscountContent = gbb.$('<div>').addClass('gbbSubscriptionDiscountContent')
                    const discountValue = gbb.gbbSubscriptionProductsPage.f.calculateSubscriptionProductDiscountValue(variantDetails)
                    if (discountValue) {
                        gbbSubscriptionDiscountContent.text(`-${discountValue}`)
                        gbbSubscriptionDiscountRibbon.append(gbbSubscriptionDiscountContent)
                        return gbbSubscriptionDiscountRibbon
                    }
                } catch (error) {
                    gbb.utility.debugError('error in gbbSubscriptionProductsPage.f.prepareSubscriptionProductDiscountRibbonUI', error)
                }
            },
            getSubscriptionPriceByVariantId: function (variantId) {
                try {
                    const variantData = gbb.utility.getVariantDetailsFromCurrentProductsDataSet(variantId)
                    const { selling_plan_allocations } = variantData
                    const activeSellingPlanId = gbb.gbbSubscriptionProductsPage.state.activeSellingPlanId
                    const groupId = gbb.gbbSubscriptionProductsPage.state.selectedSellingPlanGroupId
                    if (!variantData) return 0

                    if (!activeSellingPlanId || !selling_plan_allocations || selling_plan_allocations.length == 0) {
                        return variantData.price
                    }

                    const activeSellingPlanAllocation = selling_plan_allocations.find((allocation) => {
                        return allocation.selling_plan_id == activeSellingPlanId
                    })

                    if (!activeSellingPlanAllocation) {
                        return variantData.price
                    }

                    return activeSellingPlanAllocation.price

                } catch (error) {
                    gbb.utility.debugError("error in gbbSubscriptionProductsPage.f.getSubscriptionPriceByVariantId", error)
                }
            }
        },

    },
    gbbAddonProducts: {
        f: {
            addonProductsInit: function (tmpCartSettings) {
                try {
                    let addonsData = tmpCartSettings.stepsConfigurationData.personalizationData.addonProducts || {}
                    if (Object.keys(addonsData).length > 0 && addonsData?.isEnabled) {
                        let eligibleTiersData = JSON.parse(gbb.storage.getItem(`eligible-tiers-for-addons-${gbb.state.bundleId}`))
                        let statesToUpdate = {
                            isEnabled: addonsData?.isEnabled,
                            tiers: addonsData?.tiers,
                            isSkippable: addonsData?.isSkippable,
                            title: addonsData?.title,
                            eligibleTierForAddons: eligibleTiersData || null,
                            offerId: addonsData?.offerId || null,
                            addonsMessaging : addonsData?.addonsMessaging,
                            displayVariantsAsIndividualProducts_addons: addonsData?.displayVariantsAsIndividualProducts_addons || false,
                        }
                        gbb.gbbAddonProducts.state = { ...gbb.gbbAddonProducts.state, ...statesToUpdate }
                        // gbb.gbbAddonProducts.f.calculateEligibleAddonProductsTier("personalizationPage") // forcefully calculate
                    }
                    return addonsData
                } catch (error) {
                    gbb.utility.debugError("error in gbbAddonProducts.f.addonProductsInit", error)
                }
            },
            getCartTotalItemsAndTotalPriceForAddons: function () {
                try {
                    let cartDataFromSession = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage(gbb.state.activeBoxId)
                    let { items: cartItems } = cartDataFromSession || {}
                    let blackListedBoxProductKeys = ["greetingCard", "addonProduct", "giftMessage"]
                    let total_price = 0
                    let item_count = 0
                    cartItems?.forEach((item) => {
                        if (!blackListedBoxProductKeys.includes(item.properties._boxProduct)) {
                            total_price += item.price * item.quantity
                            item_count += item.quantity
                       }
                    })
                    return { total_price, item_count }
                } catch (error) {
                    gbb.utility.debugError("error in gbbAddonProducts.f.getCartTotalItemsAndTotalPriceForAddons", error)
                }
            },
            calculateEligibleAddonProductsTier: function (origin) {
                try {
                    let isAddonEnabled = gbb.gbbAddonProducts.state.isEnabled 
                    let isCurrentPageTypePersonalization = gbb.state.currentPageId == 'personalizationPage'
                    let qualifiedTierIndex = null
                    let tiers = gbb.gbbAddonProducts.state.tiers 

                    if (!origin && (!isAddonEnabled || isCurrentPageTypePersonalization)) {
                        return null
                    }

                    let { total_price, item_count } = gbb.gbbAddonProducts.f.getCartTotalItemsAndTotalPriceForAddons()
                    for (let idx = 0; idx < tiers.length; idx++) { 
                        let { type, value } = tiers[idx]?.condition
                        value = +value
                        total_price = total_price / 100 

                         if (type == "QUANTITY" && item_count>= value) {
                            qualifiedTierIndex = idx
                         } else if (type == 'AMOUNT' && total_price >= gbb.utility.convertFromStoreCurrencyToCustomer(value)) {
                            qualifiedTierIndex = idx
                        }
                    }

                    if (!qualifiedTierIndex && tiers[0]?.condition?.isValidateEligibilityConditionEnabled == false) {
                        qualifiedTierIndex = 0
                    }
                    let qualifiedTier = qualifiedTierIndex!==null ? tiers[qualifiedTierIndex] : null
                    
                    if (qualifiedTier) {
                        gbb.gbbAddonProducts.f.updateProductAndVariantPricesBasedOnAddonTier(qualifiedTier)
                        qualifiedTier.tierIndex = qualifiedTierIndex
                    } else {
                        gbb.gbbAddonProducts.f.removeAddonProductsFromCart()
                        let productsShopifyData = gbb.gbbAddonProducts?.state?.productsShopifyData || {}
                        gbb.gbbAddonProducts.f.setMapForVariantId_addons(productsShopifyData);
                    }
                    gbb.storage.setItem(`eligible-tiers-for-addons-${gbb.state.bundleId}`, JSON.stringify(qualifiedTier))
                    gbb.gbbAddonProducts.state.eligibleTierForAddons = qualifiedTier

                    return qualifiedTier

                } catch (error) {
                    gbb.utility.debugError("error in gbbAddonProducts.f.calculateEligibleAddonProductsTier", error)
                }
            },
            removeAddonProductsFromCart: async function () {
                try {
                    let { items } = gbb.state.giftBoxCartData || {}
                    let addonProducts = items.filter((item) => {
                        return item.properties._boxProduct == 'addonProduct'
                    })

                    for (let i = 0; i < addonProducts.length; i++){
                        let dataToSend = {
                            qty: 0,
                            variant:addonProducts[i]
                        }
                        await gbb.utility.removeFromCart(dataToSend,"addonProduct")
                    }

                    return addonProducts
                } catch (error) {
                    gbb.utility.debugError('error in removeAddonProductsFromCart', error)
                }
            },
            getAddonProductsToRender: function ({ selectedAddonProducts: qualifiedProducts, displayVariantsAsIndividualProducts_addons=false }){
                try {
                    let prefetchedProductsData = gbb.gbbAddonProducts.state.addonProductsDataByHandle || {}
                    let productsToRender = []
                    for (let product of qualifiedProducts) {
                        let currentProductData = prefetchedProductsData[product.handle]
                        if (displayVariantsAsIndividualProducts_addons) {
                            const { variants, ...productAttrs } = currentProductData;
                            variants.forEach((variant) => {
                                let merged = {
                                    ...productAttrs,
                                    compare_at_price: variant.compare_at_price,
                                    variants: [variant]
                                };
                                merged = gbb.gbbAddProductsPage.f.updateProductDataWithFirstVariantData(merged)
                                productsToRender.push(merged);
                            });
                        } else {
                            productsToRender.push(currentProductData)
                        }
                    } 
                    return productsToRender
                } catch (error) {
                    gbb.utility.debugError("error in gbbAddonProducts.f.getAddonProductsToRender", error)
                }
            },
            setPrefetchedAddonsData: function (addonProductsData) {
                try {
                    let productsDataById = {}
                    let productsDataSet = []
                    let productsDataByHandle ={}
                    for (let [key, value] of Object.entries(addonProductsData)) { 
                        let productData = value
                        productData.customProductAttribute = 'addonProduct'
                        productsDataById[productData.id] = productData
                        productsDataByHandle[productData.handle] = productData
                        productsDataSet.push(productData)
                    }
                    gbb.gbbAddonProducts.state.addonProductsDataByHandle = productsDataByHandle
                    gbb.gbbAddonProducts.state.addonProductsDataById = productsDataById
                    gbb.gbbAddonProducts.state.addonProductsDataSet = productsDataSet
                } catch (error) {
                    gbb.utility.debugError('error in gbbAddonProducts.f.setPrefetchedAddonsData')
                }
            },
            prepareAddonProductsUI: function () {
                try {
                    let gbbAddonProductsWrapper = gbb.$("<div>").addClass("gbbAddonProductsWrapper");
                    let gbbAddonProductsSectionTitle = gbb.$("<div>").addClass("gbbAddonProductsSectionTitle");
                    let gbbAddonProductsContainer = gbb.$("<div>").addClass("gbbProductsContainer");
                    gbbAddonProductsContainer.addClass("gbbProductsItemsContainer")
                    let eligibleTier = gbb.gbbAddonProducts.state.eligibleTierForAddons   
                    if (!eligibleTier) {
                        eligibleTier = gbb.gbbAddonProducts.state.tiers[0] || {}
                        gbbAddonProductsContainer.addClass("notEligibleForAddons")
                    }
                    gbb.gbbAddonProducts.f.updateProductAndVariantPricesBasedOnAddonTier(eligibleTier)
                    // let { selectedAddonProducts = [] } = eligibleTier

                    let productsDataToRender = gbb.gbbAddonProducts.f.getAddonProductsToRender(eligibleTier)
                    let productCardsHTML = gbb.f.renderProductsHTML(productsDataToRender,'personalizePage')
                    gbbAddonProductsSectionTitle.html(gbb.gbbAddonProducts.state.title)

                    gbbAddonProductsContainer.append(productCardsHTML)
                    gbbAddonProductsWrapper.append(gbbAddonProductsSectionTitle)
                    gbbAddonProductsWrapper.append(gbbAddonProductsContainer)
                    return gbbAddonProductsWrapper
                } catch (error) {
                    gbb.utility.debugError('error in prepareAddonProductsUI')
                }
            },
            prepareDiscountRibbonContentForProductAddons: function () {
                try {
                    let eligibleTier = gbb.gbbAddonProducts.state.eligibleTierForAddons

                    if (!eligibleTier) {
                        eligibleTier = gbb.gbbAddonProducts.state.tiers[0] || {} // for disable state
                    }

                    let { type, value} = eligibleTier?.discount || {}
                    let discountText = ''
                    if (value && +value > 0 && type == "PERCENTAGE") {
                        discountText = value == 100 ? "Free" : `${value}% off`
                    }

                    return {
                        type,
                        value,
                        discountText
                    }

                } catch (error) {
                    gbb.utility.debugError('error in prepareDiscountRibbonContentForProductAddons',error)
                }
            },
            checkAddonsConditionsOnNext: function () {
                try {
                    let result = true
                    let isAddonSkippable = gbb.gbbAddonProducts.state.isSkippable
                    let eligibleTierForAddons = gbb.gbbAddonProducts.state.eligibleTierForAddons || {}
                    let isEligibleForAddons = Object.keys(eligibleTierForAddons).length > 0
                    if (isEligibleForAddons && !isAddonSkippable) {
                        let cartDataItems = gbb.state.giftBoxCartData.items || []
                        // check if any of the items.properties._boxProduct - addonProduct
                        let isAddonProductExistInCart = cartDataItems.some((item) => {
                            return item.properties._boxProduct == "addonProduct"
                        })
                        result = isAddonProductExistInCart
                    }
                    return result
                } catch (error) {
                    gbb.utility.debugConsole('error in checkAddonsConditionsOnNext', error)
                }
            },
            checkMaxAddonProductsConditions: function ({productQtyToAdd}) {
                try {
                    let result = {
                        isConditionMet:true
                    }
                    let isAddonsEnabled = gbb.gbbAddonProducts.state.isEnabled 
                    let eligibleTiersData = gbb.gbbAddonProducts.state.eligibleTierForAddons
                    let cartItems = gbb.state.giftBoxCartData.items || []
                    let isEligibleForAddons = Object.keys(eligibleTiersData).length>0
                    if (!isAddonsEnabled || !isEligibleForAddons) return result
                    let maxAddonsAllowed = +eligibleTiersData.configurations.maxAddonProductsAllowed
                    let totalAddonsInCart = 0
                    cartItems.forEach((product, idx) => {
                        if (product.properties._boxProduct == 'addonProduct') {
                            totalAddonsInCart+=product.quantity 
                        }
                    })
                    if ((totalAddonsInCart + productQtyToAdd) > maxAddonsAllowed) {
                        result.isConditionMet = false
                        let message = gbb.settings?.languageData?.addons?.maxAddonProductsAllowed?.value 
                        // let message = `add maximum ##maxAllowedAddons## products to continue`
                        if (message) {
                            message = message.replace(new RegExp('##maxAllowedAddons##', 'g'), maxAddonsAllowed);
                        } else {
                            message = `1Only add upto ${maxAddonsAllowed}`
                        }
                        gbb.f.renderConditionNotificationToast(message)
                    }
                    
                    return result
                } catch (error) {
                    gbb.utility.debugConsole('error in checkMaxAddonProductsConditions',error)
                }
            },
            setMapForVariantId_addons: function (productsObj) {
                try {
                    if(Object.keys(productsObj).length == 0) return
                    let data = gbb.utility.productDetailsWith_VariantId_Or_ProductIdAsKey(productsObj)
                    gbb.gbbAddonProducts.state.currentProductsDataSetForVariants_addons = { ...gbb.gbbAddonProducts.state.currentProductsDataSetForVariants_addons, ...data };
                } catch (error) {
                    gbb.utility.debugError("error in setMapForVariantId_addons", error)
                }
            },
            updateProductAndVariantPricesBasedOnAddonTier: function (qualifiedTier) {
                try {
                    let discountValue = qualifiedTier?.discount?.value || 0
                    let products = JSON.parse(JSON.stringify(gbb.gbbAddonProducts.state.productsShopifyData))
                    const updateProductOrVariantPrice = (data) => {
                        let discountedPrice = data.price - (data.price * discountValue / 100)
                        let updatedCompareAtPrice = data.price
                        data.compare_at_price = updatedCompareAtPrice 
                        data.price = discountedPrice
                        return data
                    }
                    for (let [key, value] of Object.entries(products)) {
                        let currentProductDetails = value 
                        currentProductDetails = updateProductOrVariantPrice(currentProductDetails)
                        for (let variantIdx = 0; variantIdx < currentProductDetails.variants.length; variantIdx++) { 
                            let currentVariant = currentProductDetails.variants[variantIdx]
                            currentProductDetails.variants[variantIdx] = updateProductOrVariantPrice(currentVariant)
                        }
                        products[key] = currentProductDetails
                    }
                    gbb.gbbAddonProducts.f.setPrefetchedAddonsData(products)
                    gbb.gbbAddonProducts.f.setMapForVariantId_addons(products);

                    return products
                } catch (error) {
                    gbb.utility.debugError("error in gbbAddonProducts.f.updateProductAndVariantPricesBasedOnAddonTier",error)
                }
            },
            replaceIneligibleConditionVariables: function (message) {
                try {
                    let firstTierInfo = gbb.gbbAddonProducts.state.tiers[0] || {}
                    let { type, value } = firstTierInfo?.condition || {}
                    let { total_price, item_count } = gbb.gbbAddonProducts.f.getCartTotalItemsAndTotalPriceForAddons()

                    function calculateDiffValue(type, value, item_count, total_price) {
                        let diffValue = null
                        if (type === 'QUANTITY') {
                            diffValue = value - item_count;
                        } else if (type === 'AMOUNT') {
                            total_price = total_price / 100;
                            value = gbb.utility.convertFromStoreCurrencyToCustomer(value);
                            diffValue =  (value - total_price).toFixed(2);
                        }
                        return diffValue;
                    }

                    function replaceMessagePlaceholders(message, diffValue, type) {
                        message = message.replace("##AddonsConditionDiff##", diffValue);
                        if (type === 'AMOUNT') {
                            message = message.replace("##currencyUnit##", gbb.utility.getCurrencySymbol());
                        }
                        return message;
                    }

                    const diffValue = calculateDiffValue(type, value, item_count, total_price);
                    if (diffValue !== null) {
                        message = replaceMessagePlaceholders(message, diffValue, type);
                    }
                    return message
                } catch (error) {
                    gbb.utility.debugError("error in gbbAddonProducts.f.replaceIneligibleConditionVariables", error)
                }
            },
            getAddonsMessageToRender: function () {
                try {
                    let message = ""
                    let eligibleTier = gbb.gbbAddonProducts.state.eligibleTierForAddons
                    let addonsMessaging = gbb.gbbAddonProducts.state.addonsMessaging 
                    
                    if (!eligibleTier) {
                        let ineligibleMessaging = addonsMessaging?.ineligibleState
                        message = gbb.gbbAddonProducts.f.replaceIneligibleConditionVariables(ineligibleMessaging)
                    } else {
                        let activerTierIndex = eligibleTier?.tierIndex
                        if (activerTierIndex == null) return message;
                        message = addonsMessaging[`tier${activerTierIndex + 1}`]?.eligibleState
                    }

                    return message
                } catch (error) {
                    gbb.utility.debugError("error in getAddonsMessageToRender",error)
                }
            },
            checkIfAddonsMessagingNeeded: function () {
                try {
                    let isAddonsEnabled = gbb.gbbAddonProducts.state.isEnabled || false;
                    let isMessagingEnabled = gbb.gbbAddonProducts.state.addonsMessaging?.isEnabled || false;
                    let isCurrentPageTypePersonalization = gbb.state.currentPageId == "personalizationPage"
                    return isAddonsEnabled && isMessagingEnabled && isCurrentPageTypePersonalization
                } catch (error) {
                    gbb.utility.debugError("error in checkIfAddonsMessagingNeeded",error)
                }
            },

        },
        settings:{},
        state: {
            isEnabled: false,
            title: "",  
            isSkippable:true,
            tiers: [],
            activeTier:null,
            addonProductsDataByHandle: {},
            addonProductsDataById: {},
            addonProductsDataSet: [],
            eligibleTierForAddons:null,
            offerId: null,
            addonsMessaging: null
        },
        utility:{}
    },
    gbbMultipleCategoriesPage: {
        state: {
            buildBoxButtonAction: undefined,
            categoryStatus: {},
            currentCategory: undefined,
            currentIndex: undefined,
            currentCategoryId: undefined,
            // giftBoxData: null,
        },
        f: {
            prepareUIV2: async function (productPageData) {
                let gbbMultipleCategoriesPageHTML;
                let noteAttribute = gbb.state.currentPageId;
                let gbbMultipleCategoriesContainerHTML = gbb.$("<div>").addClass("gbbMultipleCategoriesContainerHTML");

                gbbMultipleCategoriesPageHTML = gbb.$("<div>").addClass("gbbMultipleCategoriesPageHTML");
                let categories = gbb.utility.convertObjectToArray(productPageData?.categories)
                for (let i = 0; i < categories.length; i++) {
                    // categories?.forEach(async (category, index) => {
                    let category = categories[i];
                    let index = i;
                    let gbbCategoryContainer = gbb.$("<div>").addClass("gbbCategoryContainer");
                    gbbCategoryContainer.css("background", gbb.settings.pageCustomizationData?.categoryBlock?.categoryBgColor || "#FFFFFF")
                    let gbbCategoryHeaderContainer = gbb.$("<div>").addClass("gbbCategoryHeaderContainer").attr("currentIndex", index).attr("categoryId", category.categoryId);
                    let gbbCategoryBodyContainer = gbb.$("<div>").addClass("gbbCategoryBodyContainer" + category.categoryId);

                    //data attribute to store the category id
                    gbbCategoryContainer.attr("categoryId", category.categoryId);

                    let gbbCategoryToggleButton = gbb.$("<img>").addClass("gbbCategoryToggleButton" + index);
                    gbbCategoryToggleButton.attr("src", CONSTANT_IMAGES_DROPDOWN_BUTTON);
                    gbbCategoryToggleButton.css("transform", "rotate(90deg)");

                    let gbbCategoryImage = gbb.$("<img>").addClass("gbbCategoryImage");
                    gbbCategoryImage.attr("src", category.categoryImg);


                    // let gbbCategoryBannerImage = gbb.$("<img>").addClass("gbbCategoryImage").addClass("gbbCategoryBanner")
                    // gbbCategoryBannerImage.attr("src", category?.categoryBanner);

                    if (category?.categoryBanner) {



                        gbbCategoryContainer.addClass("bannerAttached");

                        gbbCategoryImage.attr("src", category?.categoryBanner)
                        // let insertDynamicStyle = ``;

                        // gbb.$("head").append(`<style>${insertDynamicStyle}</style>`);
                    }

                    let gbbCategoryTitlesContainer = gbb.$("<div>").addClass("gbbCategoryTitlesContainer");
                    let gbbCategoryTitle = gbb.$("<div>").addClass("gbbCategoryTitle");
                    let gbbCategorySubTitle = gbb.$("<div>").addClass("gbbCategorySubTitle");

                    gbbCategoryTitle.text(category.title || "Category");
                    gbbCategorySubTitle.text(category.subTitle || "");

                    gbbCategoryTitlesContainer.append(gbbCategoryTitle)
                    gbbCategoryTitlesContainer.append(gbbCategorySubTitle)

                    gbbCategoryHeaderContainer.append(gbbCategoryToggleButton)
                    gbbCategoryHeaderContainer.append(gbbCategoryImage)
                    gbbCategoryHeaderContainer.append(gbbCategoryTitlesContainer)

                    let gbbProductsContainer = gbb.$("<div>").addClass("gbbProductsContainer");
                    // let gbbProductsItemsContainer = gbb.$("<div>").addClass("gbbProductsItemsContainer");
                    // gbbProductsItemsContainer.append(gbb.f.renderProductsHTML(category.dataFromShopify, noteAttribute, category.categoryId));

                    if (gbb.gbbMultipleCategoriesPage.currentIndex != undefined && gbb.gbbMultipleCategoriesPage.currentIndex == index) {
                        gbb.utility.debugConsole("prepareUiV2 for multipleCategories was called")
                        gbb.state.setInfiniteScrollTrackerForProducts = true;
                        gbb.gbbAddProductsPage.state.dataForInfiniteScroll = {
                            noteAttribute: noteAttribute,
                            categoryId: category.categoryId,
                            allProductsData: category.uniqueProductsData,
                        }
                        let renderData = await gbb.gbbAddProductsPage.f.renderProductsCardContainer(category.uniqueProductsData, noteAttribute, "initFlow", category.categoryId)
                        renderData.find(".gbbFiltersSearchSortHeader").remove()
                        gbbProductsContainer.append(renderData)
                        gbbCategoryToggleButton.css("transform", "rotate(360deg)");
                    } else {
                        gbbCategoryBodyContainer.hide();
                    }

                    // gbbProductsContainer.append(gbbProductsItemsContainer);

                    gbbCategoryBodyContainer.append(gbbProductsContainer);
                    gbbCategoryContainer.append(gbbCategoryHeaderContainer);
                    gbbCategoryContainer.append(gbbCategoryBodyContainer);



                    gbbCategoryHeaderContainer.on("click", async (event) => {
                        if (!event) {
                            return
                        }
                        let gbbMultipleCategoriesPageHTMLEle = gbb.$(".gbbAddGiftBoxPageWrapper").find(".gbbMultipleCategoriesPageHTML");
                        // gbb.gbbMultipleCategoriesPage.f.eventListenerForPrepareUIV2(event, gbbMultipleCategoriesPageHTMLEle, false, gbbCategoryHeaderContainer);
                        let categoryObjData = {
                            clickedIndex: event.currentTarget.attributes.currentIndex.value,
                            gbbMultipleCategoriesPageHTMLEle: gbbMultipleCategoriesPageHTMLEle,
                            isTabBasedUI: false,
                            clickedCategoryId: gbbCategoryHeaderContainer.attr('categoryId')
                        }
                        gbb.gbbMultipleCategoriesPage.f.eventListenerForPrepareUIV2(event, categoryObjData);

                        // let clickedIndex = event.currentTarget.attributes.currentIndex.value
                        // let currentIndex = gbb.gbbMultipleCategoriesPage.currentIndex
                        // gbb.$(".gbbAddGiftBoxPageWrapper").find("gbbMultipleCategoriesContainerHTML").css("pointer-events", "none")
                        // if (currentIndex != undefined && currentIndex == clickedIndex) {
                        //     gbb.gbbMultipleCategoriesPage.currentIndex = undefined;
                        //     gbbMultipleCategoriesPageHTMLEle.html(await gbb.gbbMultipleCategoriesPage.f.prepareUIV2(gbb.gbbAddProductsPage.state.productPageData))
                        // } else {
                        //     gbb.gbbMultipleCategoriesPage.currentIndex = event.currentTarget.attributes.currentIndex.value
                        //     gbbMultipleCategoriesPageHTMLEle.html(await gbb.gbbMultipleCategoriesPage.f.prepareUIV2(gbb.gbbAddProductsPage.state.productPageData))
                        //     let categoryId = gbbCategoryHeaderContainer.attr('categoryId');
                        //     gbb.utility.debugConsole(categoryId);
                        //     let selectedDiv = gbb.$(`div[categoryId='${categoryId}']`)
                        //     gbb.$('html, body').scrollTop(selectedDiv.offset().top-100);
                        //     // window.selectedDiv = selectedDiv;
                        // }
                        // isCategoryPrductsVisible = !isCategoryPrductsVisible
                    })



                    gbbMultipleCategoriesContainerHTML.append(gbbCategoryContainer);
                }
                //no navigation will be available if there is only one step enabled - adjust the positioning
                let navigationItems = gbb.state.navigationItems;


                //navigation icons not present

                //gbbAddProductsPageHTML.append(gbb.f.renderFiltersSideBarHTML(noteAttribute));
                gbbMultipleCategoriesPageHTML.append(gbbMultipleCategoriesContainerHTML);
                return gbbMultipleCategoriesPageHTML;

            },
            prepareUIV2TabUI: async function (productPageData) {
                try {
                    gbb.utility.debugConsole("inside tab ui");
                    let gbbMultipleCategoriesPageHTML;
                    let noteAttribute = gbb.state.currentPageId;
                    let gbbMultipleCategoriesContainerHTML = gbb.$("<div>").addClass("gbbMultipleCategoriesContainerHTMLForTabUI");
                    let categories = gbb.utility.convertObjectToArray(productPageData?.categories);
                    gbb.gbbMultipleCategoriesPage.f.setCurrentCategory(categories);
                    let activeCategory = gbb.gbbMultipleCategoriesPage.state.currentCategory;

                    gbbMultipleCategoriesPageHTML = gbb.$("<div>").addClass("gbbMultipleCategoriesPageHTMLForTabUI");
                    let gbbMultipleCategoriesRibbonContainer = gbb.$("<div>").addClass("gbbMultipleCategoriesRibbonContainer");
                    let gbbMultipleCategoriesDropdownContainer = gbb.$("<div>").addClass("gbbMultipleCategoriesDropdownContainer");
                    let gbbFilterSearchHTML = gbb.f.renderFiltersSearchSortHeaderHTML(noteAttribute)
                    gbb.$(gbbFilterSearchHTML).find('.gbbSearchBarMainWrapper').css('grid-column', 2)
                    // create a dropdown aswell
                    let gbbMutipleCategoriesDropdown = gbb.$("<select>").addClass("gbbMutipleCategoriesDropdown");
                    if (gbb.settings.pageCustomizationData?.categoryBlock?.tabActiveBgColor) {
                        gbbMutipleCategoriesDropdown.css("background", gbb.settings.pageCustomizationData?.categoryBlock?.tabActiveBgColor)
                    }
                    if (gbb.settings.pageCustomizationData?.categoryBlock?.tabActiveTextColor) {
                        gbbMutipleCategoriesDropdown.css('color', gbb.settings.pageCustomizationData?.categoryBlock?.tabActiveTextColor)
                    }
                    // let gbbMultipleCategoriesDropdownArrow = gbb.$("<img>").addClass("gbbMultipleCategoriesDropdownArrow");
                    // gbbMultipleCategoriesDropdownArrow.attr("src", ARROW_DOWN_SVG);
                    let gbbMultipleCategoriesDropdownArrow = gbb.$("<div>").addClass("gbbMultipleCategoriesDropdownArrow");
                    gbbMultipleCategoriesDropdownArrow.append(ARROW_DOWN_SVG);


                    let gbbMultipleCategoriesActiveCategorySubtitle = gbb.$("<div>").addClass("gbbMultipleCategoriesActiveCategorySubtitle");
                    for (let i = 0; i < categories.length; i++) {
                        let category = categories[i];
                        let index = i;
                        let gbbCategoryContainer = gbb.$("<div>").addClass("gbbCategoryContainer");
                        gbbCategoryContainer.addClass("gbbCategoryContainerTabUI")
                        if (gbb.settings.pageCustomizationData?.categoryBlock?.tabInactiveBgColor) {
                            gbbCategoryContainer.css("background", gbb.settings.pageCustomizationData?.categoryBlock?.tabInactiveBgColor)

                        }
                        if (gbb.settings.pageCustomizationData?.categoryBlock?.tabInactiveTextColor) {
                            gbbCategoryContainer.css('color', gbb.settings.pageCustomizationData?.categoryBlock?.tabInactiveTextColor)
                        }
                        // gbbCategoryContainer.css("background",gbb.settings.pageCustomizationData.colors.secondaryColor || "#FFFFFF").css("color",gbb.settings.pageCustomizationData.colors.textColor || "black" );
                        let optionValue = gbb.$("<option>").attr("value", category.categoryId).attr("categoryId", category.categoryId).text(category.title || "Category").attr("currentIndex", index)


                        // give active status to selected category
                        if (activeCategory != undefined && activeCategory.categoryId == category.categoryId) {
                            gbbCategoryContainer.addClass("gbbCategoryContainerTabUIActive");
                            optionValue.attr("selected", "selected")
                            // gbbCategoryContainer.css("background",gbb.settings.pageCustomizationData.colors.primaryColor || "#FFFFFF").css("color",gbb.settings.pageCustomizationData.colors.textColor || "black" );
                        }



                        // give active status to first category if no category is selected
                        if (activeCategory == undefined && index == 0) {
                            gbbCategoryContainer.addClass("gbbCategoryContainerTabUIActive");
                            activeCategory = category;
                            gbb.gbbMultipleCategoriesPage.state.currentCategoryId = category.categoryId;
                            gbb.gbbMultipleCategoriesPage.f.setCurrentCategory(categories);
                        }

                        if (gbbCategoryContainer.hasClass("gbbCategoryContainerTabUIActive")) {
                            if (gbb.settings.pageCustomizationData?.categoryBlock?.tabActiveBgColor) {
                                gbbCategoryContainer.css("background", gbb.settings.pageCustomizationData?.categoryBlock?.tabActiveBgColor)
                            }
                            if (gbb.settings.pageCustomizationData?.categoryBlock?.tabActiveTextColor) {
                                gbbCategoryContainer.css('color', gbb.settings.pageCustomizationData?.categoryBlock?.tabActiveTextColor)
                            }
                        }




                        // gbbCategoryContainer.css("background", gbb.settings.pageCustomizationData?.categoryBlock?.categoryBgColor || "#FFFFFF")
                        let gbbCategoryHeaderContainer = gbb.$("<div>").addClass("gbbCategoryHeaderContainer").attr("currentIndex", index).attr("categoryId", category.categoryId);
                        gbbCategoryHeaderContainer.addClass("gbbCategoryHeaderContainerTabUI")
                        gbbCategoryContainer.attr("categoryId", category.categoryId);

                        let gbbCategoryTitlesContainer = gbb.$("<div>").addClass("gbbCategoryTitlesContainer");
                        gbbCategoryTitlesContainer.addClass("gbbCategoryTitlesContainerForTabUI");
                        let gbbCategoryTitle = gbb.$("<div>").addClass("gbbCategoryTitle");
                        let gbbCategorySubTitle = gbb.$("<div>").addClass("gbbCategorySubTitleForTabUI");

                        gbbCategoryTitle.html(category.title || "Category");
                        gbbCategorySubTitle.html(category.subTitle || "");

                        let gbbCategoryImage = gbb.$("<img>").addClass("gbbCategoryImageForTabUI");
                        gbbCategoryImage.attr("src", category.categoryImg)

                        gbbCategoryTitlesContainer.append(gbbCategoryTitle);
                        // gbbCategoryTitlesContainer.append(gbbCategorySubTitle);



                        gbbMutipleCategoriesDropdown.append(optionValue)
                        gbbCategoryHeaderContainer.append(gbbCategoryTitlesContainer);
                        gbbCategoryHeaderContainer.append(gbbCategoryImage);
                        gbbCategoryContainer.append(gbbCategoryHeaderContainer);
                        gbbMultipleCategoriesRibbonContainer.append(gbbCategoryContainer);




                        // can we have onChange?
                        gbbMutipleCategoriesDropdown.off("change").on("change", async (event) => {
                            if (!event) {
                                return
                            }
                            // gbb.utility.clearAllFilters(noteAttribute);
                            gbb.utility.debugConsole("event", event);
                            // gbb.f
                            let optionValueClicked = gbb.$(event.currentTarget).find("option:selected");
                            gbb.utility.debugConsole("optionValueClicked", optionValueClicked);
                            let gbbMultipleCategoriesPageHTMLEle = gbb.$(".gbbAddGiftBoxPageWrapper").find(".gbbMultipleCategoriesPageHTMLForTabUI")
                            let categoryObjData = {
                                clickedIndex: optionValueClicked.attr("currentIndex"),
                                gbbMultipleCategoriesPageHTMLEle: gbbMultipleCategoriesPageHTMLEle,
                                isTabBasedUI: true,
                                clickedCategoryId: optionValueClicked.attr("categoryId")
                            }
                            // debugger;
                            gbb.gbbMultipleCategoriesPage.f.eventListenerForPrepareUIV2(event, categoryObjData);

                            // gbb.gbbMultipleCategoriesPage.f.eventListenerForPrepareUIV2(event, gbbMultipleCategoriesPageHTMLEle, true, optionValueClicked)
                        })



                        gbbCategoryHeaderContainer.on("click", async (event) => {
                            gbb.utility.debugConsole("opton value clicked")
                            if (!event) {
                                return
                            }
                            // gbb.utility.clearAllFilters(noteAttribute);
                            let gbbMultipleCategoriesPageHTMLEle = gbb.$(".gbbAddGiftBoxPageWrapper").find(".gbbMultipleCategoriesPageHTMLForTabUI")
                            let categoryObjData = {
                                clickedIndex: event.currentTarget.attributes.currentIndex.value,
                                gbbMultipleCategoriesPageHTMLEle: gbbMultipleCategoriesPageHTMLEle,
                                isTabBasedUI: true,
                                clickedCategoryId: gbbCategoryHeaderContainer.attr('categoryId')
                            }
                            // debugger;
                            gbb.gbbMultipleCategoriesPage.f.eventListenerForPrepareUIV2(event, categoryObjData);

                            // gbb.gbbMultipleCategoriesPage.f.eventListenerForPrepareUIV2(event, gbbMultipleCategoriesPageHTMLEle, true, gbbCategoryHeaderContainer)

                        })
                    }
                    //no navigation will be available if there is only one step enabled - adjust the positioning
                    let navigationItems = gbb.state.navigationItems;

                    // populate the body section
                    let gbbMultipleCategoryBodyContainer = gbb.$("<div>").addClass("gbbMultipleCategoryBodyContainer");
                    let gbbMultipleCategoryBody = gbb.$("<div>").addClass("gbbMultipleCategoryBody");
                    // debugger
                    let gbbProductsContainer = gbb.$("<div>").addClass("gbbMultiCategoryProductsContainer");


                    let renderData = await gbb.gbbMultipleCategoriesPage.f.renderProductsInTabUI(activeCategory, noteAttribute);
                    gbbMultipleCategoriesActiveCategorySubtitle.html(activeCategory.subTitle || "");



                    gbbProductsContainer.append(renderData);
                    gbbMultipleCategoryBody.append(gbbProductsContainer);
                    gbbMultipleCategoryBodyContainer.append(gbbMultipleCategoryBody);

                    //navigation icons not present


                    gbbMultipleCategoriesPageHTML.append(gbbFilterSearchHTML)
                    gbbMultipleCategoriesPageHTML.append(gbbMultipleCategoriesRibbonContainer);

                    gbbMultipleCategoriesDropdownContainer.append(gbbMutipleCategoriesDropdown);
                    // gbbMultipleCategoriesDropdownArrow
                    gbbMultipleCategoriesDropdownContainer.append(gbbMultipleCategoriesDropdownArrow);

                    gbbMultipleCategoriesPageHTML.append(gbbMultipleCategoriesDropdownContainer)
                    gbbMultipleCategoriesPageHTML.append(gbbMultipleCategoriesActiveCategorySubtitle);
                    gbbMultipleCategoriesPageHTML.append(gbbMultipleCategoryBodyContainer);


                    gbbMultipleCategoriesContainerHTML.append(gbbMultipleCategoriesPageHTML);




                    return gbbMultipleCategoriesContainerHTML;
                } catch (error) {
                    gbb.utility.debugConsole("error in prepareUIV2TabUI", error)
                }
            },
            renderProductsInTabUI: async function (activeCategory, noteAttribute) {
                gbb.state.setInfiniteScrollTrackerForProducts = true;
                gbb.gbbAddProductsPage.state.dataForInfiniteScroll = {
                    noteAttribute: noteAttribute,
                    categoryId: activeCategory.categoryId,
                    allProductsData: activeCategory.uniqueProductsData,
                }
                let totalProducts = activeCategory.uniqueProductsData

                // check if search or filter is active then change totalProducts data to render specific products
                let isFilterActive = gbb.utility.getActivatedFilters(noteAttribute).length > 0
                let isSearchActive = gbb.gbbAddProductsPage.state.filterBySearch.searchQuery.searchText.trim().length > 0
                if (isFilterActive) {
                    let filteredProducts = await gbb.utility.getFilteredSortedProductsData(noteAttribute, 'searchProductsFlow')
                    totalProducts = filteredProducts
                }
                if (isSearchActive) {
                    let searchValue = gbb.gbbAddProductsPage.state.filterBySearch.searchQuery.searchText
                    let searchedProducts = await gbb.gbbAddProductsPage.f.handleSearchBundleInput(searchValue, noteAttribute)
                    totalProducts = searchedProducts

                }
                let renderData = await gbb.gbbAddProductsPage.f.renderProductsCardContainer(totalProducts, noteAttribute, "initFlow", activeCategory.categoryId)
                // renderData.find(".gbbFiltersSearchSortHeader").remove() 

                return renderData;
            },
            setCurrentCategory: function (categories) {
                let currentCategoryId = gbb.gbbMultipleCategoriesPage.state.currentCategoryId;
                if (currentCategoryId) {
                    // find category with currentCategoryId
                    let currentCategory = categories.find((category) => {
                        return category.categoryId == currentCategoryId;
                    })
                    gbb.gbbMultipleCategoriesPage.state.currentCategory = currentCategory;
                }
            },
            eventListenerForPrepareUIV2: async function (event, categoryData) {
                // if (!event) {
                //     return
                // }

                let gbbMultipleCategoriesPageHTMLEle = categoryData.gbbMultipleCategoriesPageHTMLEle;
                let isTabBasedUI = categoryData.isTabBasedUI;
                let clickedIndex = categoryData.clickedIndex;
                let clickedCategoryId = categoryData.clickedCategoryId;
                //  gbbCategoryHeaderContainer
                if (clickedCategoryId !== gbb.gbbMultipleCategoriesPage.state.currentCategoryId) {
                    gbb.gbbBrowser.emitCustomEvent({
                        eventName: 'gbb-category-change',
                        detail: {
                            activeCategory: clickedCategoryId,
                            prevCategory: gbb.gbbMultipleCategoriesPage.state.currentCategoryId
                        }
                    })
                }
                gbb.utility.debugConsole("inside eventListenerForPrepareUI V2")

                // let clickedIndex = 
                let currentIndex = gbb.gbbMultipleCategoriesPage.currentIndex;
                gbb.$(".gbbAddGiftBoxPageWrapper").find("gbbMultipleCategoriesContainerHTML").css("pointer-events", "none")
                if (currentIndex != undefined && currentIndex == clickedIndex) {
                    gbb.gbbMultipleCategoriesPage.currentIndex = undefined;
                    gbb.gbbMultipleCategoriesPage.state.currentCategoryId = clickedCategoryId;

                    // firing function as per requirement
                    if (isTabBasedUI) {
                        // reset search value 
                        // gbb.gbbAddProductsPage.f.resetSearchTextValue()
                        gbbMultipleCategoriesPageHTMLEle.html(await gbb.gbbMultipleCategoriesPage.f.prepareUIV2TabUI(gbb.gbbAddProductsPage.state.productPageData));
                    } else {
                        gbbMultipleCategoriesPageHTMLEle.html(await gbb.gbbMultipleCategoriesPage.f.prepareUIV2(gbb.gbbAddProductsPage.state.productPageData))
                    }

                } else {
                    // gbb.gbbMultipleCategoriesPage.currentIndex = event.currentTarget.attributes.currentIndex.value
                    gbb.gbbMultipleCategoriesPage.currentIndex = clickedIndex;
                    // let categoryId = gbbCategoryHeaderContainer.attr('categoryId');
                    let categoryId = clickedCategoryId;
                    gbb.gbbMultipleCategoriesPage.state.currentCategoryId = categoryId;

                    // firing function as per requirement
                    if (isTabBasedUI) {
                        // reset search value 
                        // gbb.gbbAddProductsPage.f.resetSearchTextValue()

                        gbbMultipleCategoriesPageHTMLEle.html(await gbb.gbbMultipleCategoriesPage.f.prepareUIV2TabUI(gbb.gbbAddProductsPage.state.productPageData));
                        gbb.utility.debugConsole(categoryId);
                        let selectedDiv = gbb.$(`div[categoryId='${categoryId}']`)
                        // gbb.$('html, body').scrollTop(selectedDiv.offset().top-200);
                    } else {
                        gbbMultipleCategoriesPageHTMLEle.html(await gbb.gbbMultipleCategoriesPage.f.prepareUIV2(gbb.gbbAddProductsPage.state.productPageData))
                        gbb.utility.debugConsole(categoryId);
                        let selectedDiv = gbb.$(`div[categoryId='${categoryId}']`)
                        gbb.$('html, body').scrollTop(selectedDiv.offset().top - 100);
                    }
                    // window.selectedDiv = selectedDiv;
                }
                return;
            },
        },
    },
    gbbPersonalizePage: {
        state: {
            // buildBoxButtonAction: undefined,
            // giftBoxData: null,
            giftMessage: null,
            scheduleDeliveryDate: null,
            showAllGreetingCardImages: false,
            showAllGiftWrapImages: false,
            greetingCardActiveImageSrc: "",
            giftWrapActiveImageSrc: "",
            emailDeliveryOption: null,
            emailDatePicker: "",
            // senderNameIsChange:false,
            senderName: "",
            // recipientNameIsChange:false,
            recipientName: "",
            customerUploadsResponse: null, //this is an Object.
            customerUploadsErrors: {},
            // additionalGiftMessageInfoIsChange:false,
            // additionalGiftMessageInfo:""
        },
        init: async function (settings, parent) {
            if (true || gbb.state.currentPageId !== 'personalizationPage') {
                gbb.gbbBrowser.emitCustomEvent({
                    eventName: 'gbb-page-init',
                    detail: {
                        prevPageId: gbb.state.currentPageId,
                        activePageId: 'peronalizationPage'
                    }
                })
            }
            gbb.state.currentPageId = "personalizationPage"
            gbb.gbbMultipleCategoriesPage.state.currentCategory = undefined;
            gbb.gbbMultipleCategoriesPage.state.currentCategoryId = undefined
            gbb.gbbAddProductsPage.state.dataForInfiniteScroll = {
                noteAttribute: undefined,
                allProductsData: undefined,
                categoryId: undefined,
            }
            if (gbb?.gbbAddProductsPage?.state?.productPageData) {
                gbb.gbbAddProductsPage.state.productPageData = undefined
            }
            let navItem = gbb.utility.getNavItem(gbb.state.currentPageId)
            gbb.f.markPreviousNavigationItemsAsCompleted(navItem)
            await gbb.utility.getGiftBoxProductsFromCart()
            gbb.gbbPersonalizePage.initialize(settings, parent)
            gbb.gbbPersonalizePage.f.registerEvents(settings);
            gbb.utility.renderTemporaryLoadingSpinner("hide")
            //gbb.gbbPersonalizePage.f.insertIntoMainPageWrapper();
            // gbb.gbbModel.init(settings)
        },
        initialize: async function (settings, parent) {

            let gbbPersonalizePageWrapper = gbb.$("<div>").addClass("gbbPersonalizePageWrapper");
            const gbbPersonalizePageHeaderHTML = gbb.gbbPersonalizePage.f.prepareHeader();

            const gbbPersonalizePageSubtextWrapper = gbb.$("<div>").addClass("gbbPersonalizePageSubtextWrapper");
            const gbbDiscountComponent = gbb.$("<div>").addClass("gbbDiscountComponent");

            const gbbPersonalizePageSubtext = gbb.$("<div>").addClass("gbbPersonalizePageSubtext");
            gbbPersonalizePageSubtext.html(gbb.settings?.stepsConfigurationData?.personalizationData?.personalizePageSubtext)
            // gbbPersonalizePageSubtext.html("Hi")

            gbbPersonalizePageSubtextWrapper.append(gbbPersonalizePageSubtext);

            const gbbPersonalizePageBodyHTML = await gbb.gbbPersonalizePage.f.prepareUI();

            const gbbPersonalizePageFooterHTML = gbb.gbbPersonalizePage.f.prepareFooter();

            gbbPersonalizePageFooterHTML.css("background", gbb.settings.pageCustomizationData.cartFooter.cartFooterBgColor)
            gbbPersonalizePageFooterHTML.css("color", gbb.settings.pageCustomizationData.cartFooter.cartFooterTextColor)

            gbbPersonalizePageWrapper.append(gbbPersonalizePageHeaderHTML);
            gbbPersonalizePageWrapper.append(gbbPersonalizePageSubtextWrapper);
            gbbPersonalizePageWrapper.append(gbbDiscountComponent);
            gbbPersonalizePageWrapper.append(gbbPersonalizePageBodyHTML);
            gbbPersonalizePageWrapper.append(gbbPersonalizePageFooterHTML);

            gbb.state.personalizePageBody = gbbPersonalizePageWrapper;
            gbb.gbbPersonalizePage.f.insertIntoMainPageWrapper();
            gbb.gbbPersonalizePage.action.refreshCustomerUploadsList();


            // if(gbb.settings?.scheduleDelivery?.isScheduleDeliveryEnabled){
            //     gbb.gbbPersonalizePage.f.useDatePickerLibrary();
            // }


        },

        updatePageStatus: async function () {
            if (gbb.state.currentPageId != "personalizationPage") {
                return;
            }

            let isMessageProductExists = gbb.gbbPersonalizePage.f.checkIfMessageProductExistsInShopifyData();
            let qty = gbb.gbbPersonalizePage.f.getMessageProductQuantity();
            let isVirtualProduct = false;
            let virtualProduct;
            let isGiftMessageVirtualProduct = gbb.settings.bundleSettings.isGiftMessageVirtualProduct || false;
            if (isGiftMessageVirtualProduct) {
                isVirtualProduct = true;
                isMessageProductExists = true;


                if (gbb.settings && gbb.settings.shopifyData) {
                    gbb.settings.shopifyData.giftMessageData = gbb.settings.shopifyData.giftMessageData || {}; // Initialize giftMessageData as an empty array if it doesn't exist

                    gbb.settings.shopifyData.giftMessageData.variants = gbb.settings.shopifyData.giftMessageData.variants || []; // Initialize variants as an empty array if it doesn't exist
                    gbb.settings.shopifyData.giftMessageData.properties = gbb.settings.shopifyData.giftMessageData.properties || {};
                    let variantData = {
                        id: "1111",
                    }

                    let gifMesssageDataForVirtualProduct = {
                        "id": 1111,
                        "title": gbb.settings.giftMessage?.messageProduct?.product?.variants[0]?.option1 || "Message Product",
                        "option1": "Write your message to your loved one",
                        "available": true,
                        "name": "Message - Write your message",
                        "public_title": "Write your message",
                        "requires_selling_plan": false,
                        "variant_id": 1111,
                        "price": 0,
                        "weight": 0,
                        "compare_at_price": null,
                        "inventory_management": null,
                        // "image": "https://cdn.shopify.com/s/files/1/0680/3541/2253/files/1713126763137_8487c4ff-5454-41b7-b36e-ceced15ba145.png?v=1715596242",
                        // "image": "https://d3ks0ngva6go34.cloudfront.net/public/message_default.png",
                        "image": gbb.settings?.giftMessage?.messageProduct?.product?.variants[0]?.variantImage || "https://d3ks0ngva6go34.cloudfront.net/public/message_default.png",
                        "product_id": 1111,
                    }

                    gbb.settings.shopifyData.giftMessageData.variants.push(variantData);
                    let dummyMessageObject = JSON.parse(JSON.stringify(gifMesssageDataForVirtualProduct));

                    dummyMessageObject.variants = gbb.settings.shopifyData.giftMessageData.variants;

                    if (!gbb.state.currentProductsDataSetForVariants || Object.keys(gbb.state.currentProductsDataSetForVariants) < 1) {
                        gbb.state.currentProductsDataSetForVariants = {}
                    }

                    gbb.state.currentProductsDataSetForVariants[variantData.id] = dummyMessageObject;
                }
                qty = 1;
                let message = gbb.gbbPersonalizePage.state.giftMessage
                if (!message) {
                    qty = 0;
                    isMessageProductExists = false;
                }
            }
            // only sideeffect of this is that we are skipping gift message add to the cart.
            // but this is because we couldnt find any gift message product
            if (isMessageProductExists) {
                let data = {
                    variant: { id: gbb.settings?.shopifyData?.giftMessageData?.variants[0].id },
                    qty: qty,
                    //qty : 0 videoMessageDataHasBeenChanged || emailDataHasBeenChanged ? 0 : 1,
                }
                if (data.qty == 0) {
                    await gbb.utility.removeFromCart(data, "giftMessage");
                } else {
                    await gbb.utility.addToCart(data, "giftMessage");
                }
            }
            let navItem = gbb.f.getNavItem(gbb.state.currentPageId);
            if (navItem) {
                navItem.isCompleted = true;
                navItem.isActive = false
                //if cart items have the values, then mark complete, else mark incomplete
            }
            //update the navigationItems  by filtering the array gbb.state.navigationItems using id
            gbb.state.navigationItems.forEach(function (item) {
                if (item.id == gbb.state.currentPageId) {
                    item = {
                        ...item,
                        navItem
                    }
                }
            })
            return true;
        },
        f: {

            prepareHeader: function () {
                const gbbPersonalizePageHeaderHTML = gbb.$("<div>").addClass("gbbPersonalizePageHeader");
                let gbbPageHeader = gbb.$("<div>").addClass("gbbPageHeader");
                let navigationItems = gbb.state.navigationItems;
                let stepsCount = 0;
                navigationItems = navigationItems.filter((element) => {
                    if (element.isNavBarItem && element.isNavBarItem == true) {
                        stepsCount++;
                        return element;
                    }
                })
                if (stepsCount == 1) {
                    gbbPageHeader.addClass("gbbPageHeaderWithoutLine");
                }

                let gbbPageHeaderText = gbb.$("<div>").addClass("gbbPageHeaderText");

                const gbbPersonalizePageBannerImage = gbb.$("<img>").addClass("gbbPageBannerImage");
                gbbPersonalizePageBannerImage.attr("src", gbb.settings.pageCustomizationData.banners.pageBannerImageSrc)
                gbbPageHeader.append(gbbPersonalizePageBannerImage)
                //gbbPageHeader.append(gbbPageHeaderText);

                const gbbPersonalizePageNavigationContainer = gbb.$("<div>").addClass("gbbPersonalizePageNavigationContainer");

                gbbPageHeaderText.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData.landingPage.bannerText));
                let nextNavigationItems = gbb.f.getNavigationItemsToDisplay(gbb.state.currentPageId);
                gbbPersonalizePageNavigationContainer.append(gbb.f.renderNavigationHTML(gbbPersonalizePageNavigationContainer, "personalizePage", nextNavigationItems));

                gbbPersonalizePageHeaderHTML.append(gbbPersonalizePageNavigationContainer)
                return gbbPersonalizePageHeaderHTML;
            },
            prepareUI: async function () {
                let settings = gbb.settings
                let gbbPersonalizePageHTML;

                gbbPersonalizePageHTML = gbb.$("<div>").addClass("gbbPersonalizePageHTMLContent");
                gbbPersonalizePageHTML = gbb.$("<div>").addClass("gbbPersonalizePageHTML");

                if (gbb.settings?.addonProducts?.isEnabled) {
                    let addonProductsHTML = gbb.gbbAddonProducts.f.prepareAddonProductsUI()
                    gbbPersonalizePageHTML.append(addonProductsHTML)
                }
                if (gbb.settings?.greetingCard?.isGreetingCardEnabled) {
                    let greetingCardHTML = gbb.gbbPersonalizePage.components.greetingCard();
                    gbbPersonalizePageHTML.append(greetingCardHTML);
                }

                if (gbb.settings?.giftMessage?.isGiftMessageEnabled) {
                    gbb.gbbPersonalizePage.state.giftMessage = gbb.utility.getAttributValueFromMessageItem("Message") //read from noteAttributes
                    let giftMessage = await gbb.gbbPersonalizePage.components.giftMessage();
                    gbbPersonalizePageHTML.append(giftMessage);
                }


                if (gbb.settings?.customerUploads?.isCustomerUploadsEnabled) {
                    let customerAttachmentHTML = gbb.gbbPersonalizePage.components.customerUploads();
                    gbbPersonalizePageHTML.append(customerAttachmentHTML);
                }


                if (gbb.settings.videoMessage.isVideoMessageEnabled) {
                    //read email Id and recordedId from noteAttributes
                    gbb.gbbVideoMsg.state.emailId = gbb.utility.getAttributValueFromMessageItem("Recipient Email");
                    gbb.gbbVideoMsg.state.uploadedVideoId = gbb.utility.getAttributValueFromMessageItem("_videoMsgId");
                    let videoMessageHTML = gbb.gbbPersonalizePage.components.videoMessage();
                    gbbPersonalizePageHTML.append(videoMessageHTML);
                }

                // if(gbb.settings?.scheduleDelivery?.isScheduleDeliveryEnabled){
                //     let scheduleDeliveryHTML = await gbb.gbbPersonalizePage.components.scheduleDelivery();
                //     gbbPersonalizePageHTML.append(scheduleDeliveryHTML);
                // }

                if (gbb.settings?.giftMessage?.isEmailEnabled) {
                    let emailAddressHTML = await gbb.gbbPersonalizePage.components.emailAddress();
                    gbbPersonalizePageHTML.append(emailAddressHTML);
                }

                if (gbb.settings?.giftMessage?.isGiftMessageEnabled || gbb.settings.videoMessage.isVideoMessageEnabled) {
                    if (gbb.settings?.giftMessage?.isEmailEnabled) {
                        let scheduleMessageDeliveryHTML = await gbb.gbbPersonalizePage.components.scheduleMessageDelivery();
                        gbbPersonalizePageHTML.append(scheduleMessageDeliveryHTML);
                    }
                }

                return gbbPersonalizePageHTML;

            },
            prepareFooter: function () {
                //this is a footer
                const gbbPersonalizePageFooterHTML = gbb.$("<div>").addClass("gbbPersonalizePageFooterHTML");
                gbbPersonalizePageFooterHTML.append(gbb.f.renderCartProductsFooterHTML("personalizePage"));
                return gbbPersonalizePageFooterHTML;
            },
            insertIntoMainPageWrapper: function () {

                gbb.$(".gbbBodyWrapper").html(gbb.state.personalizePageBody);

                gbb.$(".gbbBodyWrapper").children().first().hide();
                gbb.$(".gbbBodyWrapper").children().first().fadeIn(700);
            },
            calculateDaysFromToday: function (numberOfDays) {
                return new Date(Date.now() + parseInt(numberOfDays) * 24 * 60 * 60 * 1000)
            },
            useDatePickerLibrary: function () {
                try {
                    const minDate = gbb.gbbPersonalizePage.f.calculateDaysFromToday(gbb.settings.scheduleDelivery.leadTime);
                    let maxDate = gbb.gbbPersonalizePage.f.calculateDaysFromToday(gbb.settings.scheduleDelivery.maxDateInDays);
                    const disabledDates = gbb.settings.scheduleDelivery.disabledDates;
                    const disabledDays = gbb.settings.scheduleDelivery.disabledDaysOfWeek;
                    let datePicker = gbb.$(".gbbScheduleDeliveryDatePicker");
                    flatpickr(datePicker, {
                        // inline: true,
                        dateFormat: "d-m-Y",
                        time_24hr: true,
                        minDate: minDate,
                        maxDate: maxDate,
                        disable: [
                            function (date) {
                                // return true to disable
                                // let d = new Date(date+"Z");
                                let d = gbb.utility.getDate(date);

                                // d = (d.toISOString().split('T')[0]);
                                // return (date.getDay() === 0 || date.getDay() === 6);
                                if (disabledDates.includes(d) || disabledDays.includes(new Date(date).toLocaleString("en-us", { weekday: "long" }))) {
                                    return true;
                                }
                            },
                        ],
                        onChange: async function (selectedDates, dateStr, instance) {
                            gbb.utility.debugConsole("date changed");
                            gbb.utility.debugConsole({ dateStr });
                            gbb.gbbPersonalizePage.state.scheduleDeliveryDate = dateStr;
                            if (gbb.gbbPersonalizePage.state.scheduleDeliveryDate) {
                                // await gbb.utility.updateCart({ attributes: { ["gbbScheduleDelivery"]: gbb.gbbPersonalizePage.state.scheduleDeliveryDate } });
                                gbb.gbbBrowser.updateCartAttributes({ gbbScheduleDelivery: gbb.gbbPersonalizePage.state.scheduleDeliveryDate });
                            }

                            //
                        },
                        // appendTo: gbb.$(body)
                    });
                    if (gbb.utility.getAttributValueFromCart("gbbScheduleDelivery") != null) {
                        datePicker.val(gbb.utility.getAttributValueFromCart("gbbScheduleDelivery"));
                    }
                } catch (e) {
                    gbb.utility.debugConsole(e);

                    //gbbScheduleDeliveryHTML
                    //hide this component
                    gbb.$(".gbbScheduleDeliveryHTML").hide();
                }

            },
            activateClearSelectionButton: function (productType) {
                //create a new button
                // productType -> expected params are
                // "giftWrap" or "greetingCard"
                let clearSelectionButton = gbb.$("<div>").addClass("gbbClearSelectionButton");

                //: clear selection language
                clearSelectionButton.text(gbb.utility.renderLanguageValue(gbb.settings.languageData?.personalizePage?.clearSelectionButton) || "Clear Selection");
                clearSelectionButton.click(function () {
                    gbb.gbbPersonalizePage.action.onClearSelectionButtonClick(productType);
                });

                return clearSelectionButton;
            },
            registerEvents: function (settings) {
                gbb.gbbPersonalizePage.state.buildBoxButtonAction = function () {
                    gbb.utility.debugConsole("build box button clicked");
                    // window.alert("build box button clicked");
                };
            },
            renderGreetingCardImages: function (greetingCardData) {
                try {
                    // let imageList = greetingCardData.images;
                    if (true || imageList) {
                        let gbbGreetingCardImageList = [];
                        let greetingCardProducts = Object.values(greetingCardData) || [];
                        for (let i = 0; i < greetingCardProducts?.length; i++) {
                            let greetingCardProduct = greetingCardProducts[i];
                            for (let j = 0; j < greetingCardProduct?.variants?.length; j++) {
                                //: No Image found png
                                let _img = greetingCardProduct?.variants[j]?.featured_image?.src || greetingCardProduct?.featured_image || "No Image found png";
                                let variantId = greetingCardProduct?.variants[j]?.id;
                                // add an input event listener to each image of radio type
                                let variantTitle = gbb.$("<div>").addClass("gbbVariantTitle").append(greetingCardProduct?.variants[j]?.title);
                                let variantPrice = gbb.$("<span>").addClass("gbbVariantPrice").append(gbb.utility.formatPrice(greetingCardProduct?.variants[j]?.price));
                                let variantDetailsWrapper = gbb.$("<div>").addClass("gbbVariantDetailsWrapper");

                                variantDetailsWrapper.append(variantTitle);
                                variantDetailsWrapper.append(variantPrice);

                                imageInput = gbb.$("<input>").attr("type", "radio").attr("name", "greetingCardImage").attr("value", _img)
                                imageInput.addClass("greetingCardImageInput")
                                let imageAndDetailsWrapper = gbb.$("<div>").addClass("greetingCardImageAndDetailsWrapper");
                                let imageLabel = gbb.$("<label>").addClass('gbbGreetingCardImageLabel')
                                let image = gbb.$("<img>").addClass('greetingCardImage')

                                // imageLabel.on("click", gbb.gbbPersonalizePage.action.onGreetingCardImageClick)
                                imageLabel.on("click", gbb.gbbPersonalizePage.action.onGreetingCardImageClick)

                                let argsObj = {
                                    productData: greetingCardProduct,
                                    variantId: variantId.id,
                                }

                                let uniqueItemKey = gbb.utility.getUniqueIdForVariant(argsObj);


                                const isItemInCart = gbb.utility.checkIfItemPresentInGiftBoxCart(variantId, { uniqueItemKey });
                                if (isItemInCart) {
                                    gbb.gbbPersonalizePage.state.greetingCardActiveImageSrc = _img;
                                    gbb.gbbPersonalizePage.state.greetingCardTitle = isItemInCart.variant_title;
                                    gbb.gbbPersonalizePage.state.greetingCardPrice = isItemInCart.price;
                                } else {
                                    gbb.gbbPersonalizePage.state.greetingCardActiveImageSrc = null;
                                    gbb.gbbPersonalizePage.state.greetingCardTitle = null;
                                    gbb.gbbPersonalizePage.state.greetingCardPrice = null;
                                    imageInput.attr("checked", false)
                                    imageLabel.removeClass("gbbActiveGreetingCard")
                                    gbb.gbbPersonalizePage.action.removeCheckmarkDivsFromGreetingCards();
                                }

                                //if image is checked then attach gbbActiveGreetingCard css to it
                                if (gbb.gbbPersonalizePage.state.greetingCardActiveImageSrc == _img) {
                                    imageInput.attr("checked", true)
                                    imageLabel.addClass("gbbActiveGreetingCard")
                                    gbb.gbbPersonalizePage.action.addCheckMarkDivs(imageLabel);
                                } else {
                                    imageInput.attr("checked", false)
                                    imageLabel.removeClass("gbbActiveGreetingCard")
                                    gbb.gbbPersonalizePage.action.removeCheckmarkDivsFromGreetingCards();
                                }
                                image.attr("src", _img)

                                imageInput.attr("data-variant-id", variantId)
                                image.attr("data-variant-id", variantId)
                                imageLabel.attr("data-variant-id", variantId)

                                imageLabel.append(imageInput)
                                // imageLabel.append(variantTitle).append(variantPrice)
                                imageLabel.append(image)

                                imageAndDetailsWrapper.append(imageLabel);
                                imageAndDetailsWrapper.append(variantDetailsWrapper);
                                gbbGreetingCardImageList.push(imageAndDetailsWrapper)
                            }
                        }
                        // if gbbGreetingCardImageList has no elements then return that there are no Images to display
                        if (gbbGreetingCardImageList.length == 0) {
                            return gbb.$("<div>").addClass('gbbGreetingCardImageList').html("No products found" || gbb.utility.renderLanguageValue(gbb.settings.languageData.giftcardV2.purchasePageFields.noImagesAvailable))
                        }
                        return gbbGreetingCardImageList;
                    }
                } catch (e) {
                    gbb.utility.debugConsole("error occured in renderGreetingCardImages", e)
                }
            },
            renderGiftWrapImages: function (giftWrapData) {
                // let imageList = giftWrapData.images;
                if (true || imageList) {
                    let giftWrapImageList = [];
                    for (let i = 0; i < giftWrapData.variants?.length; i++) {
                        //: no images png
                        let _img = giftWrapData.variants[i]?.featured_image?.src || "No Image found png";
                        let variantId = giftWrapData.variants[i]?.id;

                        let variantTitle = gbb.$("<div>").addClass("gbbVariantTitle").append(giftWrapData.variants[i]?.title);
                        let variantPrice = gbb.$("<span>").addClass("gbbVariantPrice").append(gbb.utility.formatPrice(giftWrapData.variants[i]?.price));

                        let variantDetailsWrapper = gbb.$("<div>").addClass("gbbVariantDetailsWrapper");

                        variantDetailsWrapper.append(variantTitle);
                        variantDetailsWrapper.append(variantPrice);
                        // add an input event listener to each image of radio type
                        imageInput = gbb.$("<input>").attr("type", "radio").attr("name", "giftWrapImage").attr("value", _img)
                        imageInput.addClass("giftWrapImageInput")
                        let imageAndDetailsWrapper = gbb.$("<div>").addClass("greetingCardImageAndDetailsWrapper");
                        let imageLabel = gbb.$("<label>").addClass('giftWrapImageLabel')
                        let image = gbb.$("<img>").addClass('giftWrapImage')

                        //on click set the current item to the preview image as active image
                        // imageLabel.on("click", gbb.gbbPersonalizePage.action.onGiftWrapImageClick)
                        imageAndDetailsWrapper.on("click", gbb.gbbPersonalizePage.action.onGiftWrapImageClick)

                        const isItemInCart = gbb.utility.checkIfItemPresentInGiftBoxCart(variantId);

                        if (isItemInCart) {
                            gbb.gbbPersonalizePage.state.giftWrapActiveImageSrc = _img;
                            gbb.gbbPersonalizePage.state.giftWrapTitle = isItemInCart.variant_title;
                            gbb.gbbPersonalizePage.state.giftWrapPrice = gbb.utility.formatPrice(isItemInCart.price);
                        }

                        //if image is checked then attach activeGiftWrap css to it
                        if (gbb.gbbPersonalizePage.state.giftWrapActiveImageSrc == _img) {
                            imageInput.attr("checked", true)
                            imageLabel.addClass("activeGiftWrap")
                            gbb.gbbPersonalizePage.action.addCheckMarkDivs(imageLabel);
                        }
                        image.attr("src", _img)

                        imageInput.attr("data-variant-id", variantId)
                        image.attr("data-variant-id", variantId)
                        imageLabel.attr("data-variant-id", variantId)

                        imageLabel.append(imageInput)
                        // imageLabel.append(variantTitle).append(variantPrice)
                        imageLabel.append(image)
                        imageAndDetailsWrapper.append(imageLabel);
                        imageAndDetailsWrapper.append(variantDetailsWrapper);
                        giftWrapImageList.push(imageAndDetailsWrapper)
                    }
                    // if giftWrapImageList has no elements then return that there are no Images to display
                    if (giftWrapImageList.length == 0) {
                        return gbb.$("<div>").addClass('giftWrapImageList').html("No products found" || gbb.utility.renderLanguageValue(gbb.settings.languageData.giftcardV2.purchasePageFields.noImagesAvailable))
                    }
                    return giftWrapImageList;
                }

            },
            verifyEmailFields: function () {
                if (gbb.settings?.giftMessage?.isEmailEnabled) {
                    let email = gbb.gbbVideoMsg.state.emailId;
                    let emailValid;
                    let isEmailWarningMsgPresent = gbb.$(".gbbPageBody").find(".gbbEmailValidationError");
                    let emailValidationError = gbb.$("<div>").addClass("gbbEmailValidationError").text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.generalSettings?.emailValidationError) || "Please enter a valid email address");
                    if (email && email.trim().length != 0) {//email is not empty -> it must be valid
                        //check for validation
                        emailValid = gbb.utility.emailValidation(email);
                        if (!emailValid) {
                            if (isEmailWarningMsgPresent.length == 0) {
                                gbb.$(".gbbEmailAddressWrapper").append(emailValidationError);
                            }
                            return false;
                        } else {
                            gbb.$(".gbbEmailValidationError").remove();
                            return true;
                        }
                    }
                    else if (!email || email?.trim().length == 0) {//email is empty -> check if video message exists, if it does -> email cannot be empty
                        if (gbb.gbbVideoMsg.state.uploadedVideoId || gbb.$(".gbbVideoMsgCheckboxField").is(":checked")) {
                            if (isEmailWarningMsgPresent.length == 0) {
                                gbb.$(".gbbEmailAddressWrapper").append(emailValidationError);
                            }
                            return false;
                        } else {
                            //if the video message is not checked then remove the error message
                            gbb.$(".gbbEmailValidationError").remove();
                            return true;
                        }
                    }
                } else {
                    return true;
                }
            },
            getMessageProductQuantity: function () { //if text message or video message is present -> then only quantity will be 1 otherwise 0
                let qty;
                let videoToggle = gbb.$(".gbbVideoMsgCheckboxField").is(":checked")
                if (!videoToggle) {
                    gbb.gbbVideoMsg.state.uploadedVideoId = null
                }
                if ((gbb.gbbPersonalizePage.state?.giftMessage && gbb.gbbPersonalizePage.state?.giftMessage?.trim().length != 0) || gbb.gbbVideoMsg.state.uploadedVideoId) {
                    qty = 1;
                } else if (gbb.gbbPersonalizePage.state.customerUploadsResponse && Object.keys(gbb.gbbPersonalizePage.state.customerUploadsResponse).length > 0) {
                    qty = 1;
                } else {
                    qty = 0;
                }
                return qty;
            },
            checkIfMessageProductExistsInShopifyData: function () { //check if we have a message product at all or not
                if (gbb.settings && gbb.settings.shopifyData && gbb.settings?.shopifyData?.giftMessageData
                    && gbb.settings?.shopifyData?.giftMessageData?.variants[0].id) {
                    return true;
                } else {
                    return false;
                }
            },
            deleteCustomerUploadsError: function (key) {
                if (gbb.gbbPersonalizePage.state.customerUploadsErrors != null && gbb.gbbPersonalizePage.state.customerUploadsErrors[key]) {
                    delete gbb.gbbPersonalizePage.state.customerUploadsErrors[key];
                }
            },
            deleteCustomerUploadsResponse: function (key) {
                if (gbb.gbbPersonalizePage.state.customerUploadsResponse != null && gbb.gbbPersonalizePage.state.customerUploadsResponse[key]) {
                    delete gbb.gbbPersonalizePage.state.customerUploadsResponse[key];
                }
            },
            removeGiftMessageFromSessionStorage: function (cartData) {
                try {
                    let boxes = Object.keys(cartData.boxes);
                    let giftMessageProductInSessionStorage = [];
                    let totalCount = 0;
                    for (let i = 0; i < boxes.length; i++) {
                        let box = cartData.boxes[boxes[i]];
                        let items = box.items;
                        for (let j = 0; j < items.length; j++) {
                            let item = items[j];
                            if (item.properties && item.properties.Message) {
                                giftMessageProductInSessionStorage.push({ "Box ID": item.properties["Box ID"], "Message": item.properties.Message, "To": item.properties["Recipient Name"], "From": item.properties["Sender Name"], "Bundle Name": item.properties.Bundle })

                                // remove this item from the cartData
                                items.splice(j, 1);
                                j--;
                            }
                        }
                    }
                    // update cartData in session storage
                    if (cartData) {
                        let bundleId = gbb.state.bundleId;
                        let sessionStorageKey = `gbb-cart-${bundleId}`;
                        sessionStorage.setItem(sessionStorageKey, JSON.stringify(cartData));
                    }

                    gbb.state.giftMessageProductInActiveSession = giftMessageProductInSessionStorage;
                    gbb.gbbBrowser.updateTotalPriceInSessionStorage();
                    gbb.gbbBrowser.updateTotalofRelevantBoxPriceInSessionStorage();
                } catch (err) {
                    gbb.utility.debugConsole("error inside removeGiftMessageFromSessionStorage", err);
                }
            }
        },
        events: {
            onCustomerUploadsFileChange: async function (event) {
                try {
                    let fileBlob = event.target.files[0];
                    gbb.utility.debugConsole(fileBlob, "file")

                    let fileAllowed = true;
                    if (fileBlob.type) {
                        const allowedExtensions = ['.xlsx', '.xls', '.pdf', '.jpeg', '.png', '.jpg', '.heif', '.heic'];
                        const extension = fileBlob.name.split('.').pop();

                        if (allowedExtensions.includes('.' + extension)) {
                            fileAllowed = true;
                        } else if (fileBlob.type.startsWith('video/')) {
                            fileAllowed = true;
                        } else {
                            fileAllowed = false;
                        }
                    }

                    if (!fileAllowed) {
                        let fieldKey = event.target.getAttribute("data-field-key");
                        gbb.gbbPersonalizePage.state.customerUploadsErrors[fieldKey] = { fileNotSupportedError: true };
                        gbb.gbbPersonalizePage.action.refreshCustomerUploadsErrorMessage()
                        return;
                    }

                    //fileSize limit is 5mbs
                    let fieldKey = event.target.getAttribute("data-field-key");

                    // gbbCustomerUploadsActionButton //disable this button
                    let buttonRef = gbb.$(".gbbCustomerUploadsListItem[data-field-key='" + fieldKey + "']").find(".gbbCustomerUploadsActionButton").children(0);

                    let customerUploadTextFields = gbb.settings.customerUploads.textFields || {};


                    buttonRef.text(customerUploadTextFields.uploadingText.value || "Uploading...")
                    buttonRef.addClass("gbbDisabled");

                    let reader = new FileReader();
                    try {
                        reader.onload = async function (event) {
                            if (fileBlob.size > 5000000) {
                                gbb.gbbPersonalizePage.state.customerUploadsErrors[fieldKey] = { fileSizeError: true };
                                gbb.gbbPersonalizePage.action.refreshCustomerUploadsErrorMessage()
                                buttonRef.removeClass("gbbDisabled");
                                buttonRef.text(customerUploadTextFields.uploadText.value || "Upload")
                                gbb.utility.debugConsole("file size is greater than 5mb")
                                return;
                            };

                            // let fileData = event.target.result;
                            let fileUploadData = await gbb.gbbPersonalizePage.action.uploadCustomerUploadsFile(fileBlob, fieldKey);
                            if (fileUploadData) {
                                const responseDataObject = fileUploadData.data;
                                let fileUrl = responseDataObject.url;
                                let fileName = responseDataObject.originalFileName;
                                let labelName = responseDataObject.fieldKey;
                                const fileDataObject = {
                                    fileUrl: fileUrl,
                                    fileName: fileName,
                                    labelName: labelName
                                }
                                gbb.gbbPersonalizePage.state.customerUploadsResponse = {
                                    ...gbb.gbbPersonalizePage.state.customerUploadsResponse,
                                    [fieldKey]: fileDataObject.fileUrl
                                }

                                gbb.gbbPersonalizePage.f.deleteCustomerUploadsError(fieldKey);

                                // gbb.gbbBrowser.updateCartAttributes(gbb.gbbPersonalizePage.state.customerUploadsResponse);
                                gbb.gbbPersonalizePage.action.refreshCustomerUploadsList();
                                gbb.gbbPersonalizePage.action.refreshCustomerUploadsErrorMessage();
                            } else {
                                gbb.utility.debugConsole("error in uploading file")
                                gbb.gbbPersonalizePage.state.customerUploadsErrors[fieldKey] = { fileUploadError: true };
                                gbb.gbbPersonalizePage.action.refreshCustomerUploadsErrorMessage()
                                buttonRef.removeClass("gbbDisabled");
                                buttonRef.text(customerUploadTextFields.uploadText.value || "Upload")
                            }
                        }
                        reader.readAsDataURL(fileBlob);

                        // we accept 


                    } catch (e) {
                        gbb.utility.debugConsole(e)
                        gbb.gbbPersonalizePage.state.customerUploadsErrors[fieldKey] = { fileUploadError: true };
                        gbb.gbbPersonalizePage.action.refreshCustomerUploadsErrorMessage()
                        buttonRef.removeClass("gbbDisabled");
                        buttonRef.text(customerUploadTextFields.uploadText.value || "Upload")
                        return;
                    }
                } catch (error) {
                    gbb.utility.debugConsole(error);
                    return false;
                }
            }
        },
        components: {
            greetingCard: function (settings) {

                let greetingCardContainer = gbb.$("<div>").addClass("gbbGreetingCardContainer")

                let greetingCardCheckboxLabel = gbb.$("<label>").addClass("gbbGreetingCardCheckboxLabel");
                let greetingCardCheckboxPrice = gbb.$("<label>").addClass("gbbGreetingCardCheckboxPrice");


                let greetingCardImg = gbb.$("<img>").addClass("gbbGreetingCardImg");
                let greetingCardImgWrapper = gbb.$("<div>").addClass("greetingCardImgWrapper");


                // 2.a. img for the greeting card
                let greetingCardWrapper = gbb.$("<div>").addClass("greetingCardWrapper");

                let products = gbb.state.giftBoxCartData.items;

                products.forEach((product) => {
                    //product.properties is an object
                    if (product.properties["_boxProduct"] == "greetingCard") {
                        gbb.gbbPersonalizePage.state.greetingCardTitle = product.variant_title;
                        gbb.gbbPersonalizePage.state.greetingCardPrice = gbb.utility.formatPrice(product.price);
                        gbb.gbbPersonalizePage.state.greetingCardActiveImageSrc = product.image;
                    }
                })
                greetingCardCheckboxLabel.text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.personalizePage?.selectGreetingCardLabel) || "Greeting Card1");
                //modularize code from here onwards

                // 2. img container for the greeting card
                let greetingCardImageContainer = gbb.$("<div>").addClass("gbbGreetingCardImageContainer");
                let greetingCardDropDownWrapper = gbb.$("<div>").addClass("gbbGreetingCardDropDownWrapper");
                //: Button
                let greetingCardDropDownButton = gbb.$("<img>").addClass("gbbGreetingCardDropDownButton");
                greetingCardDropDownButton.attr("src", CONSTANT_IMAGES_DROPDOWN_BUTTON);
                let _button = gbb.gbbPersonalizePage.f.activateClearSelectionButton("greetingCard");


                // 2.b. container for all the greeting card options
                let greetingCardAllImagesContainer = gbb.$("<div>").addClass("greetingCardAllImagesContainer");
                let greetingCardAllImagesLabel = gbb.$("<div>").addClass("greetingCardAllImagesLabel");

                //: Language support
                greetingCardAllImagesLabel.text("Greeting Card");

                let greetingCardData = gbb.settings?.shopifyData?.greetingCardData;

                //  greetingCardDropDownWrapper.on("click", async function (event) {
                //  gbb.gbbPersonalizePage.action.handleShowAllGreetingCardImagesButtonEvent(event);
                if (true || gbb.gbbPersonalizePage.state.showAllGreetingCardImages == false) {
                    //if greetingCardData.images has only one element add a class to listwrapper that says gbbJustOneProduct
                    let gbbGreetingCardImageList = gbb.$("<div>").addClass("gbbGreetingCardImageList")
                    gbbGreetingCardImageList.html(gbb.gbbPersonalizePage.f.renderGreetingCardImages(greetingCardData));

                    let greetingCardProducts = Object.values(greetingCardData) || [];
                    let greetingCardVariants = greetingCardProducts[0]?.variants || [];
                    if (greetingCardVariants?.length == 1) {
                        gbbGreetingCardImageList.addClass("gbbJustOneProduct")
                    }


                    gbb.gbbPersonalizePage.state.showAllGreetingCardImages = true;

                    // gbb.$(".greetingCardWrapper").html(_button);
                    greetingCardWrapper.append(gbbGreetingCardImageList);
                    // gbb.$(".greetingCardWrapper").append(gbbGreetingCardImageList);

                    // await gbb.$(".greetingCardWrapper").append(gbb.gbbPersonalizePage.f.activateClearSelectionButton("greetingCard"));
                }
                else {
                    // remove the contents of greetingCardWraooer
                    if (gbb.gbbPersonalizePage.state.greetingCardActiveImageSrc) {
                        greetingCardImg.attr("src", gbb.gbbPersonalizePage.state.greetingCardActiveImageSrc);
                        greetingCardImgWrapper.append(greetingCardImg);
                        gbb.$(".greetingCardWrapper").html(greetingCardImgWrapper);
                    }
                    else {
                        greetingCardCheckboxLabel.text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.personalizePage?.selectGreetingCardLabel) || "Greeting Card1");
                        greetingCardCheckboxPrice.text("");
                        gbb.$(".greetingCardWrapper").html("")
                    }
                    gbb.$(".gbbGreetingCardDropDownButton").css("transform", "rotate(180deg)");
                    gbb.gbbPersonalizePage.state.showAllGreetingCardImages = false;
                }
                //  });

                greetingCardImageContainer.append(greetingCardWrapper);
                //  greetingCardImageContainer.append(greetingCardShowAllImagesButtonWrapper);

                greetingCardDropDownWrapper.append(greetingCardCheckboxLabel);
                greetingCardDropDownWrapper.append(_button);


                if (false) {
                    greetingCardDropDownWrapper.append(greetingCardCheckboxPrice);
                    greetingCardDropDownWrapper.append(greetingCardDropDownButton);
                }


                greetingCardContainer.append(greetingCardDropDownWrapper);
                greetingCardContainer.append(greetingCardImageContainer);

                return greetingCardContainer;
            },
            giftWrap: function (settings) {
                // 1. checkbox for giftWrap
                let giftWrapContainer = gbb.$("<div>").addClass("gbbGiftWrapContainer");
                let giftWrapCheckboxLabel = gbb.$("<label>").addClass("gbbGiftWrapCheckboxLabel")
                let giftWrapCheckboxPrice = gbb.$("<label>").addClass("gbbGiftWrapCheckboxPrice")

                let products = gbb.state.giftBoxCartData.items;

                products.forEach((product) => {
                    //product.properties is an object
                    if (product.properties["_boxProduct"] == "giftWrap") {
                        gbb.gbbPersonalizePage.state.giftWrapTitle = product.variant_title;
                        gbb.gbbPersonalizePage.state.giftWrapPrice = gbb.utility.formatPrice(product.price);
                        gbb.gbbPersonalizePage.state.giftWrapActiveImageSrc = product.image;
                    }
                })

                //: Language support

                //modularize code from here onwards

                // 2. img container for the greeting card
                let giftWrapImageContainer = gbb.$("<div>").addClass("gbbGiftWrapImageContainer");

                let giftWrapDropDownWrapper = gbb.$("<div>").addClass("gbbGiftWrapDropDownWrapper");
                let giftWrapDropDownButton = gbb.$("<img>").addClass("gbbGiftWrapDropDownButton")
                giftWrapDropDownButton.attr("src", CONSTANT_IMAGES_DROPDOWN_BUTTON);
                // 2.a. img for the greeting card
                let giftWrapWrapper = gbb.$("<div>").addClass("giftWrapWrapper");
                let giftWrapImgWrapper = gbb.$("<div>").addClass("giftWrapImgWrapper");
                let giftWrapImg = gbb.$("<img>").addClass("gbbGiftWrapImg");

                // 2.b. container for all the greeting card options
                let giftWrapAllImagesContainer = gbb.$("<div>").addClass("giftWrapAllImagesContainer");

                //render all the images in an image tag in AllImagesContainer
                let giftWrapData = gbb.settings?.shopifyData?.giftWrapData;

                // [button] to show all the images
                //let giftWrapShowAllImagesButtonWrapper = gbb.$("<div>").addClass("gbbGreetingCardShowAllImagesButtonWrapper");

                //  selectGreetingCardLabel
                if (gbb.gbbPersonalizePage.state.giftWrapTitle) {
                    giftWrapCheckboxLabel.text(gbb.gbbPersonalizePage.state.giftWrapTitle)
                    giftWrapCheckboxPrice.text(gbb.gbbPersonalizePage.state.giftWrapPrice)
                    giftWrapImg.attr("src", gbb.gbbPersonalizePage.state.giftWrapActiveImageSrc);
                    giftWrapImgWrapper.append(giftWrapImg);

                    giftWrapWrapper.append(giftWrapImgWrapper);
                } else {
                    giftWrapCheckboxLabel.text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.personalizePage?.giftWrapLabel) || "Select Wrap 1");
                }


                giftWrapDropDownWrapper.on("click", function (event) {
                    //  gbb.gbbPersonalizePage.action.handleShowAllGreetingCardImagesButtonEvent(event);
                    if (gbb.gbbPersonalizePage.state.showAllGiftWrapImages == false) {

                        gbb.$(".gbbGiftWrapDropDownButton").css("transform", "rotate(360deg)");

                        let giftWrapImageList = gbb.$("<div>").addClass("giftWrapImageList")
                        giftWrapImageList.html(gbb.gbbPersonalizePage.f.renderGiftWrapImages(giftWrapData));

                        if (giftWrapData.variants?.length == 1) {
                            giftWrapImageList.addClass("gbbJustOneProduct")
                        }

                        gbb.gbbPersonalizePage.state.showAllGiftWrapImages = true;

                        gbb.$(".giftWrapWrapper").html(gbb.gbbPersonalizePage.f.activateClearSelectionButton("giftWrap"));
                        gbb.$(".giftWrapWrapper").append(giftWrapImageList);
                    }
                    else {
                        if (gbb.gbbPersonalizePage.state.giftWrapActiveImageSrc) {
                            giftWrapImg.attr("src", gbb.gbbPersonalizePage.state.giftWrapActiveImageSrc);
                            giftWrapImgWrapper.append(giftWrapImg);
                            gbb.$(".giftWrapWrapper").html(giftWrapImgWrapper);
                        }
                        else {
                            giftWrapCheckboxLabel.text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.personalizePage?.giftWrapLabel) || "Select Wrap 1");
                            giftWrapCheckboxPrice.text("");
                            gbb.$(".giftWrapWrapper").html("")
                        }

                        gbb.$(".gbbGiftWrapDropDownButton").css("transform", "rotate(180deg)");
                        gbb.gbbPersonalizePage.state.showAllGiftWrapImages = false;
                    }
                });

                //  giftWrapCheckboxLabel.text


                //  giftWrapShowAllImagesButtonWrapper.append(giftWrapShowAllImagesButton);

                giftWrapImageContainer.append(giftWrapWrapper);
                //  giftWrapImageContainer.append(giftWrapShowAllImagesButtonWrapper);


                //  giftWrapContainer.append(giftWrapCheckbox);
                giftWrapDropDownWrapper.append(giftWrapCheckboxLabel);
                giftWrapDropDownWrapper.append(giftWrapCheckboxPrice);
                giftWrapDropDownWrapper.append(giftWrapDropDownButton);
                giftWrapContainer.append(giftWrapDropDownWrapper);

                giftWrapContainer.append(giftWrapImageContainer);

                return giftWrapContainer;
            },
            giftMessage: function (settings) {
                let giftMessageV2MainContent = gbb.$("<div>").addClass("gbbGiftMessageV2MainContent");

                let gbbGiftMessageV2HTML = gbb.$("<div>").addClass('gbbGiftMessageV2HTML')


                let gbbGiftMessageV2ToFromContainer;
                if (gbb.settings?.giftMessage.isSenderAndRecipientNameEnabled == true) {
                    gbbGiftMessageV2ToFromContainer = gbb.gbbPersonalizePage.components.gbbGiftMessageV2ToFromUI();
                }
                // a label field
                let giftMessageV2PrepareUI;
                let gbbGiftMessageV2 = gbb.$("<div>").addClass('gbbGiftMessageV2')
                // a label field
                let gbbGiftMessageV2Label = gbb.$("<label>").addClass("gbbGiftMessageV2Label").attr("for", "gbbGiftMessageV2").text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.personalizePage?.messageLabel) || "giftnote1 ");
                let gbbGiftMessageV2InputField = gbb.$("<textarea>").addClass("gbbGiftMessageV2InputField").attr("placeholder", gbb.utility.renderLanguageValue(gbb.settings?.languageData?.personalizePage?.messagePlaceholder) || "Placeholder1")
                let gbbGiftMessageV2RequiredWarning = gbb.$("<div>").addClass("gbbGiftMessageV2RequiredWarning").text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.personalizePage?.messageIsRequiredError) || "Message is Required!")
                gbbGiftMessageV2RequiredWarning.css("display", "none");

                let gbbGiftMessageCounterEle = gbb.$("<div>").addClass("gbbGiftMessageCounterEle")


                let giftMessageCharacterLimit = gbb.settings.giftMessage.giftMessageCharacterLimit || "";
                giftMessageCharacterLimit = giftMessageCharacterLimit.trim() != "" && giftMessageCharacterLimit.trim() != "0" ? giftMessageCharacterLimit : "";

                if (giftMessageCharacterLimit) {
                    gbbGiftMessageV2InputField.attr("maxlength", giftMessageCharacterLimit)
                }
                // gbbGiftMessageV2MainContent
                ///save the input field values
                if (gbb.utility.getAttributValueFromMessageItem("Message")) {
                    let noteVal = gbb.utility.getAttributValueFromMessageItem("Message");
                    gbbGiftMessageV2InputField.val(noteVal)
                    gbb.gbbPersonalizePage.state.giftMessage = noteVal;
                    if (giftMessageCharacterLimit) {
                        const maxlength = gbbGiftMessageV2InputField.attr("maxlength");
                        const currentLength = gbbGiftMessageV2InputField.val().length;
                        gbbGiftMessageCounterEle.text(currentLength + "/" + maxlength);
                    }
                }

                gbbGiftMessageV2InputField.on("change", function (event) {
                    gbb.gbbPersonalizePage.state.giftMessage = gbbGiftMessageV2InputField.val();
                })

                if (giftMessageCharacterLimit) {
                    gbbGiftMessageV2InputField.on("input", ((e) => {
                        const target = e.target;
                        // Get the `maxlength` attribute
                        const maxLength = target.getAttribute('maxlength');
                        // Count the current number of characters
                        const currentLength = target.value.length;
                        gbbGiftMessageCounterEle.text(`${currentLength}/${maxLength}`);
                    }))
                }
                gbb.f.applyLabelCSS(gbbGiftMessageV2Label)

                // create an empty divider to separate the message and the video message button
                let gbbGiftMessageV2Divider = gbb.$("<div>").addClass("gbbGiftMessageV2Divider")

                let gbbGiftMessageV2InputFieldsDiv = gbb.$("<div>").addClass("gbbGiftMessageV2InputFieldsDiv")
                gbbGiftMessageV2InputFieldsDiv.append(gbbGiftMessageV2InputField).append(gbbGiftMessageV2RequiredWarning)

                if (giftMessageCharacterLimit) {
                    gbbGiftMessageV2InputFieldsDiv.append(gbbGiftMessageCounterEle)
                }

                gbbGiftMessageV2.append(gbbGiftMessageV2InputFieldsDiv)
                gbbGiftMessageV2.append(gbbGiftMessageV2Divider)
                // gbbGiftMessageV2.append(gbbVideoMsgButton)

                gbbGiftMessageV2HTML.append(gbbGiftMessageV2Label);
                if (gbbGiftMessageV2ToFromContainer) {
                    gbbGiftMessageV2HTML.append(gbbGiftMessageV2ToFromContainer);
                }
                gbbGiftMessageV2HTML.append(gbbGiftMessageV2);
                // gbb.$(".gbbModalContent").html(gbbGiftMessageV2HTML);

                giftMessageV2MainContent.append(gbbGiftMessageV2HTML);

                // let giftMessageV2Buttons = await gbb.gbbGiftMessageV2.f.renderButtons();

                return giftMessageV2MainContent;
            },
            gbbGiftMessageV2ToFromUI: function () {
                let gbbGiftMessageV2ToFromContainer = gbb.$("<div>").addClass("gbbGiftMessageV2ToFromContainer")
                let gbbGiftMessageV2ToField = gbb.$("<input>").addClass("gbbGiftMessageV2ToField").attr("placeholder", gbb.utility.renderLanguageValue(gbb.settings?.languageData?.personalizePage.recipientNamePlaceholder) || "To")
                let gbbGiftMessageV2FromField = gbb.$("<input>").addClass("gbbGiftMessageV2FromField").attr("placeholder", gbb.utility.renderLanguageValue(gbb.settings?.languageData?.personalizePage.senderNamePlaceholder) || "From")

                gbbGiftMessageV2ToFromContainer.append(gbbGiftMessageV2FromField);
                gbbGiftMessageV2ToFromContainer.append(gbbGiftMessageV2ToField)

                if (gbb.utility.getAttributValueFromMessageItem("Sender Name")) {
                    let noteVal = gbb.utility.getAttributValueFromMessageItem("Sender Name");
                    gbbGiftMessageV2FromField.val(noteVal);
                    gbb.gbbPersonalizePage.state.senderName = noteVal;
                }


                gbbGiftMessageV2FromField.on("change", function (event) {
                    gbb.gbbPersonalizePage.state.senderName = gbbGiftMessageV2FromField.val();
                })

                if (gbb.utility.getAttributValueFromMessageItem("Recipient Name")) {
                    let noteVal = gbb.utility.getAttributValueFromMessageItem("Recipient Name");
                    gbbGiftMessageV2ToField.val(noteVal);
                    gbb.gbbPersonalizePage.state.recipientName = noteVal;
                }

                gbbGiftMessageV2ToField.on("change", function (event) {
                    gbb.gbbPersonalizePage.state.recipientName = gbbGiftMessageV2ToField.val();
                })

                return gbbGiftMessageV2ToFromContainer;
            },
            customerUploads: function () {
                let gbbCustomerUploadsHTML = gbb.$("<div>").addClass("gbbCustomerUploadsHTML");
                let gbbCustomerUploadsDivider = gbb.$("<div>").addClass("gbbCustomerUploadsDivider")
                let customerUploadTextFields = gbb.settings.customerUploads.textFields || {};

                // customerUploadTextFields.mainText = "Upload your photos here";
                // customerUploadTextFields.subText = "Supported Formats mp4. Max file size 5MB";

                //let gbbCustomerUploadsMainText, subtext and then a list of dialog
                let gbbCustomerUploadsMainText = gbb.$("<div>").addClass("gbbCustomerUploadsMainText").text(customerUploadTextFields.mainText.value);

                gbb.f.applyLabelCSS(gbbCustomerUploadsMainText)


                let gbbCustomerUploadsSubText = gbb.$("<div>").addClass("gbbCustomerUploadsSubText").text(customerUploadTextFields.subText.value);

                let gbbCustomerUploadsList = gbb.$("<div>").addClass("gbbCustomerUploadsList");

                // gbb.settings.customerUploads.attachmentFields = [{
                //     "label": "Photo 1",
                //     "url": "",
                // },
                // {
                //     "label": "Photo 2",
                //     "url": "",
                // },
                // {
                //     "label": "Photo 3",
                //     "url": "",
                // },
                // {
                //     "label": "Photo 4",
                //     "url": "",
                // }];

                let customerUploadsFields = gbb.settings.customerUploads.attachmentFields;
                //each field has a label
                customerUploadsFields.forEach((field, index) => {
                    let labelToDisplay = gbb.utility.removeFirstCharacterIfUnderscore(field.label);
                    let gbbCustomerUploadsListItem = gbb.$("<div>").addClass("gbbCustomerUploadsListItem").attr("data-field-key", field.label);
                    let gbbCustomerUploadsListItemLabel = gbb.$("<div>").addClass("gbbCustomerUploadsListItemLabel").text(labelToDisplay)


                    //.attr("for", `file-upload-${field.label}`);

                    let gbbCustomerUploadsListItemInput = gbb.$("<input>").addClass("gbbCustomerUploadsListItemInput").attr("type", "file").attr("id", `file-upload-${field.label}`)

                    // gbbCustomerUploadsListItemInput accept. excel, pdf, images .jpg .png .jpeg and videos
                    gbbCustomerUploadsListItemInput.attr("accept", ".xlsx,.xls,application/pdf,image/jpeg,image/png,image/jpg,video/*,image/heif,image/heic")

                    let gbbCustomerUploadsActionButton = gbb.$("<div>").addClass("gbbCustomerUploadsActionButton")

                    gbbCustomerUploadsActionButton.text(customerUploadTextFields.uploadText.value)
                    // gbbCustomerUploadsActionButton.addClass("gbbCustomerUploadButton")

                    let gbbCustomerUploadsButton = gbb.$("<label>").addClass("gbbCustomerUploadButton").attr("for", `file-upload-${field.label}`);
                    // gbbCustomerUploadsActionButton

                    // gbbCustomerUploadsButton.on("click", function (event) {
                    //     event.preventDefault();
                    //     gbbCustomerUploadsListItemInput.trigger("click");
                    // })

                    // gbbCustomerUploadsListItemInput.attr("data-field-index",index)
                    gbbCustomerUploadsListItemInput.attr("data-field-key", field.label);
                    gbbCustomerUploadsListItemInput.on("change", gbb.gbbPersonalizePage.events.onCustomerUploadsFileChange)
                    gbbCustomerUploadsListItem.append(gbbCustomerUploadsListItemLabel)
                    gbbCustomerUploadsListItem.append(gbbCustomerUploadsListItemInput)
                    gbbCustomerUploadsActionButton.append(gbbCustomerUploadsButton)
                    gbbCustomerUploadsListItem.append(gbbCustomerUploadsActionButton);
                    gbbCustomerUploadsList.append(gbbCustomerUploadsListItem);
                })

                let gbbCustomerUploadsErrorMsg = gbb.$("<div>").addClass("gbbCustomerUploadsErrorMsg");


                gbbCustomerUploadsHTML.append(gbbCustomerUploadsMainText)
                gbbCustomerUploadsHTML.append(gbbCustomerUploadsSubText)
                gbbCustomerUploadsHTML.append(gbbCustomerUploadsList)
                gbbCustomerUploadsHTML.append(gbbCustomerUploadsErrorMsg)
                gbbCustomerUploadsHTML.append(gbbCustomerUploadsDivider);

                // gbbCustomerUploadsErrorMsg
                return gbbCustomerUploadsHTML;

            },
            videoMessage: function (settings) {
                let gbbVideoMessageHTML = gbb.$("<div>").addClass("gbbVideoMessageHTML");
                let gbbVideoMsgCheckboxWrapper, gbbVideoMsgButtonGroup;
                let gbbVideoMsgCheckboxLabel;
                let videoId = gbb.utility.getAttributValueFromMessageItem("_videoMsgId");
                //TODO: video message entry index
                if (true) {
                    //gbbVideoMsgButton  = gbb.$("<button>").addClass("gbbVideoMsgButton").attr("type", "button").text(gbb.settings.languageData.videoMessage.sendVideoMessageText.value);
                    gbbVideoMsgButton = gbb.$("<button>").addClass("gbbVideoMsgButton").attr("type", "button").text("Video Msg");
                    gbbVideoMsgCheckboxLabel = gbb.$("<label>").addClass("gbbVideoMsgCheckboxLabel").attr("for", "gbbVideoMsgCheckbox").text(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage.sendVideoMessageText) || "Record Video 1");
                    // create a label with switch classname

                    gbb.f.applyLabelCSS(gbbVideoMsgCheckboxLabel)

                    gbbVideoMsgCheckboxWrapper = gbb.$("<label>").addClass("gbbVideoMsgCheckboxWrapper").attr("for", "gbbVideoMsg")

                    //input which is type of checkbox
                    let gbbVideoMsgCheckboxField = gbb.$("<input>").addClass("gbbVideoMsgCheckboxField").attr("type", "checkbox").attr("id", "gbbVideoMsg");


                    if (videoId) {
                        gbbVideoMsgCheckboxField.prop("checked", true);
                    } else {
                        gbbVideoMsgCheckboxField.prop("checked", false);
                    }

                    // a span which is round and slider css
                    let gbbVideoMsgSlider = gbb.$("<span>").addClass("gbbVideoMsgSlider").attr("id", "gbbVideoMsgSlider");

                    gbbVideoMsgButtonGroup = gbb.$("<div>").addClass("gbbVideoMsgButtonGroup");

                    //re record button and upload button
                    // reRecordButton
                    let gbbVideoMsgReRecordButton = gbb.$("<button>").addClass("gbbVideoMsgReRecordButton").attr("type", "button").text(gbb.utility.renderLanguageValue(gbb.settings.languageData?.videoMessage?.reRecordText) || "Re-Record");
                    // uploadButton
                    let gbbVideoMsgSaveButton = gbb.$("<button>").addClass("gbbVideoMsgSaveButton").attr("type", "button").text(gbb.utility.renderLanguageValue(gbb.settings.languageData?.videoMessage?.saveVideoText) || "Save");

                    gbbVideoMsgButtonGroup.append(gbbVideoMsgReRecordButton);

                    gbbVideoMsgButtonGroup.append(gbbVideoMsgSaveButton);


                    gbbVideoMsgSaveButton.on("click", function (event) {
                        if (gbb.gbbVideoMsg.state.justNowRecorded) {
                            gbb.gbbVideoMsg.f.clickAccept(event)
                        } else {
                            return;
                        }
                    });

                    gbbVideoMsgReRecordButton.on("click", function (event) {
                        //manipulate the state of gbbVideoMsgCheckboxField
                        if (gbbVideoMsgCheckboxField.prop("checked")) {
                            gbbVideoMsgCheckboxField.prop("checked", false);
                            gbbVideoMsgSlider.removeClass("gbbVideoMsgSliderActive")
                            gbb.gbbVideoMsg.f.clickClose(event);
                        }
                        gbbVideoMsgCheckboxField.prop("checked", true);
                        gbb.gbbVideoMsg.actions.gbbVideoMsgButton(event);
                    });

                    gbbVideoMsgCheckboxField.on("change", function (event) {
                        if (gbbVideoMsgCheckboxField.is(":checked")) {
                            gbb.gbbVideoMsg.actions.gbbVideoMsgButton(event);
                        } else {
                            gbbVideoMsgSlider.removeClass("gbbVideoMsgSliderActive")
                            gbb.gbbVideoMsg.f.clickClose(event);
                        }
                    })
                    gbbVideoMsgCheckboxWrapper.append(gbbVideoMsgCheckboxField)
                    gbbVideoMsgCheckboxWrapper.append(gbbVideoMsgSlider)

                }
                let videoHasAlreadyBeenRecorded = gbb.$("<div>").addClass("gbbVideoHasAlreadyBeenRecorded");
                //007F60
                videoHasAlreadyBeenRecorded.text("You have already recorded a video")
                // gbbGiftMessageV2InputField and gbbGiftMessageV2Label are added to same parent div
                let gbbVideoMessageCheckboxRow = gbb.$("<div>").addClass("gbbVideoMessageCheckboxRow")
                gbb.f.applyLabelCSS(gbbVideoMsgCheckboxLabel)
                gbbVideoMessageCheckboxRow.append(gbbVideoMsgCheckboxLabel).append(gbbVideoMsgCheckboxWrapper)
                if (gbb.utility.getAttributValueFromMessageItem("_videoMsgId") || gbb.gbbVideoMsg.state.uploadedVideoId) {
                    gbbVideoMessageHTML.append(videoHasAlreadyBeenRecorded)
                }
                gbbVideoMessageHTML.append(gbbVideoMessageCheckboxRow)
                gbb.gbbVideoMsg.init(settings, "", gbbVideoMessageCheckboxRow);

                gbbVideoMessageHTML.append(gbbVideoMsgButtonGroup)
                return gbbVideoMessageHTML;
            },
            scheduleDelivery: async function (settings) {
                let gbbScheduleDeliveryHTML = gbb.$("<div>").addClass("gbbScheduleDeliveryHTML");
                let gbbScheduleDeliveryWrapper = gbb.$("<div>").addClass("gbbScheduleDeliveryWrapper");

                //import date-fns
                try {
                    await gbb.importExternalScript("date-flatpickr");
                    gbb.utility.debugConsole("date-flatpickr imported");
                }
                catch (error) {
                    await gbb.importExternalScript("selfHosted-date-flatpickr");
                    gbb.utility.triggerSlackNotification(error)
                    gbb.utility.debugConsole("date-flatpickr not imported");
                }

                const datePicker = gbb.$("<input>").addClass("gbbScheduleDeliveryDatePicker").attr("type", "date")


                datePicker.attr("placeholder", gbb.utility.renderLanguageValue(gbb.settings.languageData?.reviewPage?.deliverySchedulerPlaceholderText) || "Select Date");
                //append a label to the date picker
                // let gbbScheduleDeliveryDateLabel = gbb.$("<div>").addClass("gbbScheduleDeliveryDateLabel").text(gbb.utility.renderLanguageValue(gbb.settings.languageData?.personalizePage?.deliverySchedulerLabel) || "Schedule Delivery1");
                let gbbScheduleDeliveryDateLabel = gbb.$("<div>").addClass("gbbScheduleDeliveryDateLabel").text(gbb.utility.renderLanguageValue(gbb.settings.languageData?.reviewPage?.deliveryDateLabel) || "Schedule Delivery1");
                //gbb.f.applyLabelCSS(gbbScheduleDeliveryDateLabel)

                gbbScheduleDeliveryWrapper.append(gbbScheduleDeliveryDateLabel)

                gbbScheduleDeliveryWrapper.append(datePicker)
                gbbScheduleDeliveryHTML.append(gbbScheduleDeliveryWrapper);

                return gbbScheduleDeliveryHTML;
            },
            emailAddress: function (settings) {
                let emailAddressHTML = gbb.$("<div>").addClass("gbbEmailAddressHTML");
                let emailAddressWrapper = gbb.$("<div>").addClass("gbbEmailAddressWrapper");

                //introduce an input field to enter the email address
                let gbbVideoMsgEmailField = gbb.$("<input>").addClass("gbbVideoMsgEmailField").attr("type", "email").attr("placeholder", gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.personalizePage?.emailAddressPlaceholder) || "Enter Recipient Email Address1");

                let gbbEmailAddressLabelField = gbb.$("<label>").addClass("gbbEmailAddressLabelField").attr("for", "gbbVideoMsgEmailField").text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.personalizePage?.emailAddressLabel) || "Recipient Email Address1");

                gbb.f.applyLabelCSS(gbbEmailAddressLabelField)

                gbbVideoMsgEmailField.on("change", function (event) {
                    gbb.gbbVideoMsg.state.emailId = gbbVideoMsgEmailField.val();
                })

                if (gbb.utility.getAttributValueFromMessageItem("Recipient Email") != null) {
                    let value = gbb.utility.getAttributValueFromMessageItem("Recipient Email");
                    gbbVideoMsgEmailField.val(value)
                    gbb.gbbVideoMsg.state.emailId = value;
                    // gbbVideoMsgEmailField
                }
                let giftMessageDeliveryInfo = gbb.$("<div>").addClass("giftMessageDeliveryInfo").text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.videoMessage?.giftMessageDeliveryInfo) || "The message will be sent to the recipient via email as soon as the order is placed.");
                //insert the email field below the video message row

                emailAddressWrapper.append(gbbEmailAddressLabelField);
                emailAddressWrapper.append(gbbVideoMsgEmailField).append(giftMessageDeliveryInfo)

                emailAddressHTML.append(emailAddressWrapper);
                return emailAddressHTML;
            },
            scheduleMessageDelivery: function () {
                let gbbScheduleMessageDeliveryHTML = gbb.$("<div>").addClass("gbbScheduleMessageDeliveryHTML").text("Email Delivery Date");
                let gbbScheduleMessageDeliveryWrapper = gbb.$("<div>").addClass("gbbScheduleMessageDeliveryWrapper");

                let gbbScheduleMessageSendNowContainer = gbb.$("<button>").addClass("gbbScheduleMessageSendNowContainer");
                let gbbScheduleMessageSendLaterContainer = gbb.$("<button>").addClass("gbbScheduleMessageSendLaterContainer");

                let gbbScheduleMessageDatePicker = gbb.$("<input>").attr("type", "date").addClass("gbbScheduleMessageDatePicker");
                gbb.gbbPersonalizePage.state.emailDatePicker = gbbScheduleMessageDatePicker;

                let dateValue;
                let cartDateValue = gbb.utility.getAttributValueFromMessageItem("_gbbEmailDeliveryDate");
                let emailDeliveryOption = gbb.utility.getAttributValueFromMessageItem("_gbbEmailDeliveryOption");
                gbb.gbbPersonalizePage.state.emailDeliveryOption = emailDeliveryOption

                let today = new Date().toISOString().slice(0, 10);

                dateValue = cartDateValue || today;

                gbbScheduleMessageDatePicker.attr("value", dateValue);
                gbbScheduleMessageDatePicker.attr("max", new Date(new Date().getTime() + 30 * 24 * 60 * 60 * 1000).toISOString().slice(0, 10));


                if (emailDeliveryOption == "sendLater") {
                    gbbScheduleMessageSendLaterContainer.addClass("gbbActiveMsgDeliveryOptions");
                    gbbScheduleMessageDatePicker.css("display", "block");
                } else {
                    gbbScheduleMessageSendNowContainer.addClass("gbbActiveMsgDeliveryOptions");
                }

                gbbScheduleMessageSendLaterContainer.on("click", (event) => {
                    gbbScheduleMessageDatePicker.css("display", "block");
                    gbbScheduleMessageSendLaterContainer.addClass("gbbActiveMsgDeliveryOptions");
                    gbbScheduleMessageSendNowContainer.removeClass("gbbActiveMsgDeliveryOptions");
                    gbb.gbbPersonalizePage.state.emailDeliveryOption = "sendLater"
                })

                gbbScheduleMessageSendNowContainer.on("click", () => {
                    gbbScheduleMessageDatePicker.css("display", "none");
                    gbbScheduleMessageSendNowContainer.addClass("gbbActiveMsgDeliveryOptions");
                    gbbScheduleMessageSendLaterContainer.removeClass("gbbActiveMsgDeliveryOptions");
                    gbb.gbbPersonalizePage.state.emailDeliveryOption = "sendNow"
                    gbbScheduleMessageDatePicker.attr("value", today);
                })

                gbbScheduleMessageSendNowContainer.text(gbb.utility.renderLanguageValue(gbb.settings.languageData.personalizePage.sendNow) || "Send Now1");
                gbbScheduleMessageSendLaterContainer.text(gbb.utility.renderLanguageValue(gbb.settings.languageData.personalizePage.sendLater) || "Send Later1");

                gbbScheduleMessageDeliveryWrapper.append(gbbScheduleMessageSendNowContainer);
                gbbScheduleMessageDeliveryWrapper.append(gbbScheduleMessageSendLaterContainer);

                gbbScheduleMessageDeliveryHTML.append(gbbScheduleMessageDeliveryWrapper);
                gbbScheduleMessageDeliveryHTML.append(gbbScheduleMessageDatePicker);


                return gbbScheduleMessageDeliveryHTML;
            }
        },
        action: {
            handlegreetingCardCheckboxEvent: function (event) {
                // gbb.$(".gbbGreetingCardImgContainer").addClass("")
                if (event.target.checked == true) {
                    gbb.$(".gbbGreetingCardImageContainer").removeClass("gbbDisabled");
                    //find gbbGreetingCardImageContainer inside of  greetingCardWrapper
                } else {
                    gbb.$(".gbbGreetingCardImageContainer").addClass("gbbDisabled");
                }
            },
            handleShowAllGreetingCardImagesButtonEvent: function (event) {
                // gbb.$(".greetingCardAllImagesContainer").toggleClass(");
                //hide the
                gbb.utility.debugConsole("Event triggered to show all greeting cards")
            },
            handlegiftWrapCheckboxEvent: function (event) {
                // gbb.$(".gbbGreetingCardImgContainer").addClass("")
                if (event.target.checked == true) {
                    gbb.$(".gbbGiftWrapImageContainer").removeClass("gbbDisabled");
                } else {
                    gbb.$(".gbbGiftWrapImageContainer").addClass("gbbDisabled");
                }
            },
            onClearSelectionButtonClick: async function (productType) {
                let products = gbb.state.giftBoxCartData.items;
                let allVariantIdList;
                if (productType == "greetingCard") {
                    allVariantIdList = gbb.settings.shopifyData?.greetingCardData?.variants?.map((variant) => {
                        return variant.id
                    });
                }
                if (productType == "giftWrap") {
                    allVariantIdList = gbb.settings.shopifyData?.giftWrapData?.variants?.map((variant) => {
                        return variant.id
                    });
                }
                let variantIdsToRemoveFromCart;
                //find all the variant ids in the cart whose properties have _boxProduct as the same as productType
                if (products) {
                    variantIdsToRemoveFromCart = products.map((product) => {
                        //product.properties is an object
                        if (product.properties["_boxProduct"] == productType) {
                            return product.variant_id
                        }
                    })
                    // remove null and undefined values

                    // ["123",undefined,undefined,"456"] -> ["123","456"]
                    variantIdsToRemoveFromCart = variantIdsToRemoveFromCart.filter((variantId) => {
                        return variantId != null || variantId != undefined;
                    })
                    await gbb.utility.removeFromCartBulk(variantIdsToRemoveFromCart, productType);
                }
                if (productType == "greetingCard") {
                    gbb.$(".gbbGreetingCardImageList").find(".gbb_checkmark").remove()
                    gbb.$(".gbbGreetingCardImageList").find(".gbbActiveGreetingCard").removeClass("gbbActiveGreetingCard")
                    gbb.gbbPersonalizePage.state.greetingCardActiveImageSrc = "";
                    gbb.gbbPersonalizePage.state.greetingCardTitle = "";
                    gbb.gbbPersonalizePage.state.greetingCardPrice = "";
                    gbb.$(".gbbGreetingCardCheckboxPrice").text(" ");
                    gbb.$(".gbbGreetingCardCheckboxLabel").text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.personalizePage?.selectGreetingCardLabel) || "Greeting Card1");
                }
                if (productType == "giftWrap") {
                    gbb.$(".giftWrapImageList").find(".gbb_checkmark").remove()
                    gbb.$(".giftWrapImageList").find(".activeGiftWrap").removeClass("activeGiftWrap")
                    gbb.gbbPersonalizePage.state.giftWrapActiveImageSrc = "";
                    gbb.gbbPersonalizePage.state.giftWrapTitle = "";
                    gbb.gbbPersonalizePage.state.giftWrapPrice = "";

                    gbb.$(".gbbGiftWrapCheckboxPrice").text(" ");
                    gbb.$(".gbbGiftWrapCheckboxLabel").text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.personalizePage?.giftWrapLabel) || "Select Wrap 1");
                }
                await gbb.utility.getGiftBoxProductsFromCart()
                gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML("personalizePage"));
            },
            onGreetingCardImageClick: async function (event) {
                event.preventDefault();
                //disable gbbGreetingCardImageList pointer events
                gbb.$(".gbbGreetingCardImageList").css("pointer-events", "none");
                // Pass either the image or just trigger this as a callback on Onclick
                let imageSrc;
                imageSrc = gbb.$(this).find("img").attr("src")
                gbb.utility.debugConsole("onclick triggered")
                // gbb.$('.greetingCardImagePreview').attr("src", imageSrc)


                // gbb.utility.addToCart
                //get the image attribute of data-variant-id
                let variantId = gbb.$(this).find("img").attr("data-variant-id");

                await gbb.gbbPersonalizePage.action.onClearSelectionButtonClick("greetingCard");
                gbb.gbbPersonalizePage.state.greetingCardActiveImageSrc = imageSrc


                //find the variant_title and price from the variantId by looping over gbb.settings.shopifyData.greetingCardData?.variants
                let variantTitle = "";
                let variantPrice = "";
                gbb.settings.shopifyData?.greetingCardData?.variants?.forEach((variant) => {
                    if (variant.id == variantId) {
                        variantTitle = variant.title;
                        variantPrice = variant.price;
                    }
                })
                if (variantTitle) {
                    gbb.gbbPersonalizePage.state.greetingCardTitle = variantTitle;
                    // gbb.$(".gbbGreetingCardCheckboxLabel").text(gbb.gbbPersonalizePage.state.greetingCardTitle)
                }
                gbb.$(this).find("input").prop("checked", true)
                gbb.$(this).addClass("gbbActiveGreetingCard")
                // add an icon on top of it
                gbb.gbbPersonalizePage.action.addCheckMarkDivs(gbb.$(this))
                gbb.gbbPersonalizePage.action.removeCheckmarkDivsFromSiblings(gbb.$(this))


                await gbb.utility.updateCartV2({ updates: { [variantId]: 1 }, attributes: { [variantId]: "greetingCard" } })
                gbb.$(".gbbGreetingCardImageList").css("pointer-events", "auto");
                await gbb.utility.getGiftBoxProductsFromCart();
                gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML("personalizePage"));
            },
            onGiftWrapImageClick: async function (event) {
                event.preventDefault();
                gbb.$(".giftWrapImageList").css("pointer-events", "none");
                // Pass either the image or just trigger this as a callback on Onclick
                let imageSrc;
                imageSrc = gbb.$(this).find("img").attr("src")

                await gbb.gbbPersonalizePage.action.onClearSelectionButtonClick("giftWrap");
                // gbb.$('.greetingCardImagePreview').attr("src", imageSrc)
                gbb.gbbPersonalizePage.state.giftWrapActiveImageSrc = imageSrc

                gbb.$(this).find("input").prop("checked", true)
                gbb.$(this).addClass("activeGiftWrap")
                // add an icon on top of it
                gbb.gbbPersonalizePage.action.addCheckMarkDivs(gbb.$(this))
                gbb.gbbPersonalizePage.action.removeCheckmarkDivsFromSiblings(gbb.$(this))
                // gbb.utility.addToCart
                //get the image attribute of data-variant-id
                // gbb.gbbPersonalizePage.f.activateClearSelectionButton("giftWrapImageList","giftWrap");

                let variantId = gbb.$(this).find("img").attr("data-variant-id");


                //find the variant_title and price from the variantId by looping over gbb.settings.shopifyData.greetingCardData?.variants
                let variantTitle = "";
                let variantPrice = "";
                gbb.settings?.shopifyData?.giftWrapData?.variants?.forEach((variant) => {
                    if (variant.id == variantId) {
                        variantTitle = variant.title;
                        variantPrice = variant.price;
                    }

                })
                if (variantTitle) {
                    gbb.gbbPersonalizePage.state.giftWrapTitle = variantTitle;
                }
                if (variantPrice) {
                    gbb.gbbPersonalizePage.state.giftWrapPrice = gbb.utility.formatPrice(variantPrice);
                }

                // gbbGiftWrapCheckboxLabel
                gbb.$(".gbbGiftWrapCheckboxLabel").text(gbb.gbbPersonalizePage.state.giftWrapTitle)
                gbb.$(".gbbGiftWrapCheckboxPrice").text(gbb.gbbPersonalizePage.state.giftWrapPrice)


                await gbb.utility.updateCartV2({ updates: { [variantId]: 1 }, attributes: { [variantId]: "giftWrap" } })
                gbb.$(".giftWrapImageList").css("pointer-events", "auto");
                await gbb.utility.getGiftBoxProductsFromCart()
                gbb.$(".gbbPageFooterHTML").replaceWith(gbb.f.renderCartProductsFooterHTML("personalizePage"));
            },
            findSelectedGreetingCardImage: function () {
                let selectedGreetingCardImage = gbb.$(".greetingCardImageContainer").find(".gbbActiveGreetingCard")
                return selectedGreetingCardImage
            },
            removeCheckmarkDivsFromSiblings: function (element) {
                element.siblings().find(".gbb_checkmark").remove()
                element.siblings().removeClass("gbbActiveGreetingCard")
            },
            removeCheckmarkDivsFromGreetingCards: function () {
                gbb.$(".gbbGreetingCardImageList").find(".gbb_checkmark").remove()
                gbb.$(".gbbGreetingCardImageList").find(".gbbActiveGreetingCard").removeClass("gbbActiveGreetingCard")
            },
            removeCheckmarkDivsFromGiftWrap: function () {
                gbb.$(".giftWrapImageList").find(".gbb_checkmark").remove()
                gbb.$(".giftWrapImageList").find(".activeGiftWrap").removeClass("activeGiftWrap")
            },
            addCheckMarkDivs: function (element) {
                let checkMarkDiv = gbb.$("<span>").addClass("gbb_checkmark")
                checkMarkDiv.append(gbb.$("<div>").addClass("gbb_checkmark_circle"))
                checkMarkDiv.append(gbb.$("<div>").addClass("gbb_checkmark_stem"))
                checkMarkDiv.append(gbb.$("<div>").addClass("gbb_checkmark_kick"))
                element.append(checkMarkDiv)
            },

            showPersonalizationPage: async function () {
                //updatePageStatusFn
                // gbb.gbbAddProductsPage.state.updatePageStatusFn(1);
                let pageId = "personalizationPage";
                await gbb.gbbAddProductsPage.f.renderNextPage(pageId)
            },

            uploadCustomerUploadsFile: async function (fileBlob, fieldKey) {
                try {
                    let formData = new FormData();

                    formData.append("shopName", gbb.settings.merchantInfo.shopName);
                    formData.append("upload_data", fileBlob);
                    formData.append("fieldKey", fieldKey);
                    // formData.append("fileExtension", fileExtension);
                    // formData.append("fileType", fileExtension);
                    // formData.append("fieldKey", fieldKey);
                    formData.append("upload_preset", "gbb_customer_uploads");
                    let response = await fetch("/apps/" + gbb.state.gbbUrl + "/upload/fileUploads", {
                        method: "POST",
                        body: formData
                    });
                    let data = await response.json();
                    return data;
                } catch (e) {
                    gbb.utility.debugConsole(e)
                    return false;
                }
            },
            refreshCustomerUploadsErrorMessage: function (buttonRef) {
                // fileSizeError
                // fileUploadError     

                try {
                    let fileSizeErrorText = gbb.settings.customerUploads.textFields.fileSizeError.value;
                    let fileUploadErrorText = gbb.settings.customerUploads.textFields.fileUploadError.value;
                    let fileNotSupportedText = gbb.settings.customerUploads.textFields.fileNotSupportedError.value;

                    let errorMsgField = gbb.$(".gbbCustomerUploadsErrorMsg");

                    if (errorMsgField) {
                        errorMsgField.html(" ");
                        const objectKeys = Object.keys(gbb.gbbPersonalizePage.state.customerUploadsErrors)

                        for (let i = 0; i < objectKeys.length; i++) {
                            let currentKey = objectKeys[i];
                            let currentItem = gbb.gbbPersonalizePage.state.customerUploadsErrors[currentKey];
                            if (currentItem) {
                                let isFileSizeError = currentItem.fileSizeError;
                                let isFileUploadError = currentItem.fileUploadError;
                                let isFileNotSupported = currentItem.fileNotSupportedError;
                                if (isFileSizeError) {
                                    errorMsgField.append(currentKey + " - " + fileSizeErrorText + "<br/>");
                                }
                                if (isFileUploadError) {
                                    errorMsgField.append(currentKey + " - " + fileUploadErrorText + "<br/>");
                                }
                                if (isFileNotSupported) {
                                    errorMsgField.append(currentKey + " - " + fileNotSupportedText + "<br/>");
                                }

                            }
                        }
                    } else {
                        gbb.utility.debugConsole("field not found")
                    }


                } catch (error) {
                    gbb.utility.debugConsole(error)
                    return;
                }

            },

            refreshCustomerUploadsList: function () {
                try {
                    let customerUploadsList = gbb.$(".gbbCustomerUploadsList");
                    //getCartAttributes
                    //filter attributes to get only those keys that are in customerUploads.fields
                    let customerUploadFields = gbb.settings.customerUploads.attachmentFields;

                    let customerUploads = {};
                    if (!customerUploadFields || !customerUploadFields?.length) {
                        return;
                    }
                    for (let i = 0; i < customerUploadFields?.length; i++) {
                        let currentKey = customerUploadFields[i].label;
                        let imageURL = gbb.utility.getAttributValueFromMessageItem(currentKey);
                        if (imageURL) {
                            customerUploads[currentKey] = imageURL;
                        }
                    }

                    // this occurs when the state is empty, often when the page is refreshed
                    if (gbb.gbbPersonalizePage.state.customerUploadsResponse == null) {
                        gbb.gbbPersonalizePage.state.customerUploadsResponse = customerUploads;
                    }

                    let customerUploadsTextFields = gbb.settings.customerUploads.textFields || {};
                    if (customerUploadsList) {
                        for (let i = 0; i < customerUploadFields.length; i++) {
                            let currentKey = customerUploadFields[i].label;
                            let currentItem = gbb.gbbPersonalizePage.state.customerUploadsResponse[currentKey];
                            let currentListItem = gbb.$(".gbbCustomerUploadsListItem[data-field-key='" + currentKey + "']");
                            let gbbCustomerUploadsActionButton = currentListItem.find(".gbbCustomerUploadsActionButton");
                            if (currentItem) {
                                if (currentListItem) {
                                    //currentListItem has a gbbCustomerUploadsActionButton that should be hidden 
                                    let removeButton = currentListItem.find(".gbbCustomerUploadsRemoveButton");
                                    gbbCustomerUploadsActionButton.removeClass("gbbDisabled");
                                    let previewButton = gbb.$("<div>").addClass("gbbCustomerUploadPreviewButton").text(customerUploadsTextFields.previewText.value || "Preview");

                                    //remove all previous on click events from the button

                                    // gbbCustomerUploadsActionButton.addClass("gbbCustomerUploadPreviewButton")
                                    // gbbCustomerUploadsActionButton.removeClass("gbbCustomerUploadButton")

                                    // gbbCustomerUploadsActionButton.off("click");
                                    previewButton.on("click", function () {
                                        gbb.utility.debugConsole("Clicked on preview from current Item");
                                        window.open(currentItem, '_blank')
                                    });

                                    if (removeButton.length > 0 == false) {
                                        removeButton = gbb.$("<div>").addClass("gbbCustomerUploadsRemoveButton")
                                    }

                                    removeButton.html(CONSTANT_CLOSE_ICON_SVG)


                                    //add a remove button
                                    removeButton.on("click", function () {
                                        gbb.utility.debugConsole("remove button clicked")
                                        currentListItem.find(".gbbCustomerUploadsListItemInput").val("");
                                        gbb.gbbPersonalizePage.f.deleteCustomerUploadsError(currentKey);
                                        gbb.gbbPersonalizePage.f.deleteCustomerUploadsResponse(currentKey);

                                        gbb.gbbPersonalizePage.action.refreshCustomerUploadsList();
                                    });
                                    gbbCustomerUploadsActionButton.html(previewButton)
                                    currentListItem.append(removeButton);
                                }
                            } else {
                                gbb.utility.debugConsole("currentListItem not found")
                                gbbCustomerUploadsActionButton.removeClass("gbbDisabled");
                                // gbbCustomerUploadsActionButton.text(customerUploadsTextFields.uploadText.value || "Upload");
                                // gbbCustomerUploadsActionButton.removeClass("")
                                // gbbCustomerUploadsActionButton.addClass("gbbCustomerUploadButton")
                                //remove the previous click event
                                // gbbCustomerUploadsActionButton.off("click");
                                let gbbCustomerUploadButton = gbb.$("<label>").addClass("gbbCustomerUploadButton").text(customerUploadsTextFields.uploadText.value || "Upload").attr("for", `file-upload-${currentKey}`);
                                // gbbCustomerUploadButton.on("click",function(event){
                                //     gbb.utility.debugConsole("Clicked on upload from current Item");
                                //     event.preventDefault();
                                //     currentListItem.find(".gbbCustomerUploadsListItemInput").trigger("click");
                                // });
                                gbbCustomerUploadsActionButton.html(gbbCustomerUploadButton);
                                gbb.$(currentListItem).find(".gbbCustomerUploadsRemoveButton").remove();
                            }
                        }
                    }
                    gbb.utility.debugConsole("list refreshed")
                } catch (error) {
                    gbb.utility.debugConsole(error)
                }
            },
        }
    },
    gbbProductFormStep: {
        state: {
            formSubmissionData: {},
        },
        components: {
            prepareTextHTML: function (formData, productData) {

                gbb.gbbProductFormStep.f.initFormSubmissionData(formData, productData);

                // Container creation
                let container = gbb.$("<div>").addClass("gbbProductFormTextContainer").attr("fieldKey", formData.fieldKey)

                // Label creation
                let label = gbb.$("<div>").addClass("gbbProductFormTextLabel").text(formData.fieldLabel);
                container.append(label);

                // Validation message and character count
                let validationContainer = gbb.$("<div>").addClass("gbbProductFormValidationContainer");
                let validationMessage = gbb.$("<div>").addClass("gbbRequiredFieldMessage").text(formData.validationMessage)

                validationMessage.hide();


                let isRenderMultiLineInput = formData?.allowMultiLineText || false;

                // Input field creation
                let inputField;
                if (isRenderMultiLineInput) {
                    inputField = gbb.$("<textarea>").addClass("gbbProductFormText").attr({
                        placeholder: formData.placeholderText,
                        fieldKey: formData.fieldKey,
                        isMandatory: formData.isMandatory,
                        minCharacterLimit: formData?.minCharacterLimit || 0,
                        maxCharacterLimit: formData?.maxCharacterLimit || 99999
                    });
                } else {
                    inputField = gbb.$("<input>").addClass("gbbProductFormText").attr({
                        placeholder: formData.placeholderText,
                        type: "text",
                        fieldKey: formData.fieldKey,
                        isMandatory: formData.isMandatory,
                        minCharacterLimit: formData?.minCharacterLimit || 0,
                        maxCharacterLimit: formData?.maxCharacterLimit || 99999
                    });
                }
               // Initial value and character count
                let initialValue = gbb.gbbProductFormStep.state.formSubmissionData[formData.fieldKey]?.value || "";
                inputField.val(initialValue);

                // Character count display creation
                let characterCount = gbb.$("<div>").addClass("gbbProductFormTextCharacterCount").text(initialValue.length + "/" + formData.maxCharacterLimit);
                if (!formData?.maxCharacterLimit) {
                    characterCount.hide();
                }

                // On key up event
                inputField.on("keyup", function (e) {
                    gbb.gbbProductFormStep.f.handleInputChange(gbb.$(this), validationMessage, characterCount);
                });

                container.append(inputField);
                validationContainer.append(validationMessage, characterCount);
                container.append(validationContainer);

                return container;
            },

            prepareImageSelectorHTML: function (formData, productData) {
                gbb.gbbProductFormStep.f.initFormSubmissionData(formData, productData);

                // Initialize variables
                let formSubmissionData = gbb.gbbProductFormStep.state.formSubmissionData;
                let fieldKey = formData.fieldKey;
                let images = formData.images;
                let selectedImage = formSubmissionData[fieldKey]?.value || "";

                // Create main container
                // // let gbbProductFormImageSelectorContainer = createContainer("gbbProductFormImageSelectorContainer", formData.fieldLabel);
                // let gbbProductFormImageSelectorContainer = gbb.$("<div>").addClass("gbbProductFormImageSelectorContainer");


                // // Create image list container
                // let gbbProductFormImageSelectorListContainer = createContainer("gbbProductFormImageSelectorListContainer");

                let gbbProductFormImageSelectorContainer = gbb.$("<div>").addClass("gbbProductFormImageSelectorContainer").attr("fieldKey", fieldKey)
                let gbbProductFormImageSelectorLabel = gbb.$("<div>").addClass("gbbProductFormImageSelectorLabel").text(formData.fieldLabel);
                let gbbProductFormImageSelectorListContainer = gbb.$("<div>").addClass("gbbProductFormImageSelectorListContainer");

                // Create image list
                let gbbProductFormImageSelectorListItems = gbb.$("<div>").addClass("gbbProductFormImageSelectorListItems");


                // Validation message and character count
                let validationContainer = gbb.$("<div>").addClass("gbbProductFormValidationContainer");
                let validationMessage = gbb.$("<div>").addClass("gbbRequiredFieldMessage").text(formData.validationMessage)

                validationMessage.hide();


                // If mandatory, select first image
                if (false && formData.isMandatory && images.length > 0) {
                    selectedImage = images[0].imageCaption;
                }

                // Create image list items
                images.forEach(image => {
                    let currentImageListItem = gbb.gbbProductFormStep.f.createImageListItem(image, fieldKey, selectedImage);
                    gbbProductFormImageSelectorListItems.append(currentImageListItem);
                });

                // Append list items to the list container
                let gbbProductFormImageSelectorList = gbb.$("<div>").addClass("gbbProductFormImageSelectorList");
                gbbProductFormImageSelectorList.append(gbbProductFormImageSelectorListItems);

                // Append list container to the main container
                validationContainer.append(validationMessage);

                gbbProductFormImageSelectorListContainer.append(gbbProductFormImageSelectorList);
                gbbProductFormImageSelectorContainer.append(gbbProductFormImageSelectorLabel);
                gbbProductFormImageSelectorContainer.append(gbbProductFormImageSelectorListContainer);
                gbbProductFormImageSelectorContainer.append(validationContainer);

                return gbbProductFormImageSelectorContainer;


            },
            prepareRadioHTML: function (formData) {

                gbb.gbbProductFormStep.f.initFormSubmissionData(formData);

                // Initialize variables
                let formSubmissionData = gbb.gbbProductFormStep.state.formSubmissionData;
                let fieldKey = formData.fieldKey;
                let options = formData.options;
                let selectedOption = formSubmissionData[fieldKey]?.value || "";

                // Create main container
                let gbbProductFormRadioContainer = gbb.$("<div>").addClass("gbbProductFormRadioContainer").attr("fieldKey", fieldKey);
                let gbbProductFormRadioLabel = gbb.$("<div>").addClass("gbbProductFormRadioLabel");
                gbbProductFormRadioLabel.text(formData.fieldLabel);
                gbbProductFormRadioContainer.append(gbbProductFormRadioLabel);

                // Create radio list container
                let gbbProductFormRadioListContainer = gbb.$("<div>").addClass("gbbProductFormRadioListContainer");

                // Create radio list
                let gbbProductFormRadioListItems = gbb.$("<div>").addClass("gbbProductFormRadioListItems");

                // If mandatory, select first option
                if (formData.isMandatory && options.length > 0) {
                    selectedOption = options[0].value;
                }

                // Create radio list items
                options.forEach((option) => {
                    let currentRadioListItem = gbb.gbbProductFormStep.f.createRadioListItem(option, fieldKey, selectedOption);
                    gbbProductFormRadioListItems.append(currentRadioListItem);
                });

                // Append list items to the list container
                let gbbProductFormRadioList = gbb.$("<div>").addClass("gbbProductFormRadioList");
                gbbProductFormRadioList.append(gbbProductFormRadioListItems);

                // Append list container to the main container
                gbbProductFormRadioListContainer.append(gbbProductFormRadioList);
                gbbProductFormRadioContainer.append(gbbProductFormRadioListContainer);

                return gbbProductFormRadioContainer;



            },

        },
        f: {
            prepareFormToBeRenderedHTML: function (form, product) {

                gbb.gbbProductFormStep.state.formSubmissionData = {};

                // gbb.gbbAddProductsPage.state.productPersonalizationData has a block known as formblock
                //formBlocks: [
                // {
                //     type: "text",
                //     fieldLabel: "Your Name",
                //     fieldKey: "customerNameKey", // this will be used in SF as product attribute.
                //     placeholderText: "Enter your name",
                //     isMandatory: true,
                //     min and max character limit
                //     minCharacterLimit: 2,
                //     maxCharacterLimit: 10,
                //     validationMessage: "Name field is required"
                // },
                // 
                let gbbProductFormContainer = gbb.$("<div>").addClass("gbbProductFormContainer");
                let formComponentDiv;
                let productPersonalizationDataFormBlocks = gbb.gbbAddProductsPage.state.productPersonalizationData?.formBlocks || [];
                productPersonalizationDataFormBlocks.forEach((formBlock) => {
                    switch (formBlock.type) {
                        case "TEXT":
                            formComponentDiv = gbb.gbbProductFormStep.components.prepareTextHTML(formBlock, product);
                            break;
                        case "IMAGE_SELECTOR":
                            formComponentDiv = gbb.gbbProductFormStep.components.prepareImageSelectorHTML(formBlock, product);
                            break;
                        case "RADIO":
                            formComponentDiv = gbb.gbbProductFormStep.components.prepareRadioHTML(formBlock, product);
                            break;

                        // case "radio":
                        //     formComponentDiv = gbb.f.prepareRadioHTML(formBlock);
                        //     break;
                        // case "checkbox":
                        //     formComponentDiv = gbb.f.prepareCheckboxHTML(formBlock);
                        //     break;
                        // case "imageSelector":
                        //     formComponentDiv = gbb.f.prepareImageSelectorHTML(formBlock);
                        //     break;
                        // case default:
                        //     break;
                    }
                    gbbProductFormContainer.append(formComponentDiv);
                })

                return gbbProductFormContainer;

            },
            // formSubmissionData
            initFormSubmissionData: function (formData, productData) {
                try {
                    let formSubmissionData = gbb.gbbProductFormStep.state.formSubmissionData;
                    let fieldKey = formData.fieldKey;
                    formSubmissionData[fieldKey] = {
                        ...gbb.gbbProductFormStep.state.formSubmissionData[fieldKey],
                        fieldLabel: formData.fieldLabel,
                        type: formData.type,
                        value: "",
                        isValid: formData.isMandatory ? false : true,
                        isMandatory: formData.isMandatory,
                        showValueOnSummaryPage: formData?.showValueOnSummaryPage || false,
                    }

                    // let retreiveProductFormTextFromCart = gbb.gbbProductFormStep.f.retreiveProductFormTextFromCart(fieldKey,productData);

                    // if(retreiveProductFormTextFromCart){
                    //     formSubmissionData[fieldKey] = {
                    //         value : retreiveProductFormTextFromCart,
                    //         isValid: true,
                    //         isMandatory : formData.isMandatory,
                    //     }
                    // }

                    gbb.gbbProductFormStep.state.formSubmissionData = formSubmissionData;
                } catch (error) {
                    gbb.utility.debugConsole(error)
                }
            },
            handleFormSubmissionData: function (key, data) {
                gbb.utility.debugConsole("Data to be updated is", data);
                let formSubmissionData = gbb.gbbProductFormStep.state.formSubmissionData;
                formSubmissionData[key] = {
                    // value: value,
                    ...formSubmissionData[key],
                    ...data,
                }
                gbb.gbbProductFormStep.state.formSubmissionData = formSubmissionData;

                // let currentVariantData = JSON.parse(JSON.stringify(gbb.state.variantCustomProperties));
                // currentVariantData[key] = value;
                // gbb.state.variantCustomProperties = currentVariantData;
            },
            checkFormValidationForProduct: function () {
                let formSubmissionData = gbb.gbbProductFormStep.state.formSubmissionData || {};
                let isFormValid = true;
                let formSubmissionDataKeys = Object.keys(formSubmissionData);
                for (let i = 0; i < formSubmissionDataKeys.length; i++) {
                    let currentKey = formSubmissionDataKeys[i];
                    let currentData = formSubmissionData[currentKey];
                    if (currentData.isValid == false) {
                        isFormValid = false;
                        break;
                    }
                }
                return isFormValid;
            },
            displayRequiredFieldMessage: function () {
                let formSubmissionData = gbb.gbbProductFormStep.state.formSubmissionData || {};
                let formSubmissionDataKeys = Object.keys(formSubmissionData);
                for (let i = 0; i < formSubmissionDataKeys.length; i++) {
                    let currentKey = formSubmissionDataKeys[i];
                    let currentData = formSubmissionData[currentKey];
                    let currentInput = gbb.$(`[fieldKey="${currentKey}"]`);
                    let currentInputRequiredFieldMessage = currentInput.find(".gbbRequiredFieldMessage");
                    if (currentData.isValid == false) {
                        currentInputRequiredFieldMessage.css("display", "block");
                    } else {
                        currentInputRequiredFieldMessage.css("display", "none");
                    }
                }
            },
            retreiveProductFormTextFromCart: function (key, product) {
                // let cartData = gbb.gbbBrowser.getCartDataFromSessionStorage();
                let cartData = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage(gbb.state.activeBoxId)
                let productFormText = "";
                if (cartData && cartData.items.length > 0) {
                    // let itemsInTheCart = cartData.boxes[gbb.state.activeBoxId].items;
                    let itemsInTheCart = cartData.items;
                    let productInCart = itemsInTheCart.find((item) => {
                        return item.product_id == product.id;
                    })
                    if (productInCart && productInCart.properties) {
                        let properties = productInCart.properties;
                        if (properties && properties[key]) {
                            productFormText = properties[key];
                        }
                    }
                }
                return productFormText;
            },
            handleInputChange: function (currentInput, validationMessage, characterCount) {
                let currentValue = currentInput.val();
                let minLimit = parseInt(currentInput.attr("minCharacterLimit")) || 1;
                let maxLimit = currentInput.attr("maxCharacterLimit");
                let isMandatory = currentInput.attr("isMandatory") == "true";
                let fieldKey = currentInput.attr("fieldKey");
                let isValidationPassed = true;
                let characterCountText = currentValue.length + "/" + maxLimit;

                if (isMandatory && (currentValue.length < minLimit || currentValue.length > maxLimit)) {
                    isValidationPassed = false;
                    //dont show validation message now, we will show it later
                    //when user clicks on Add TO box
                    // validationMessage.show();
                } else {
                    validationMessage.hide();
                }

                if (currentValue.length > maxLimit) {
                    currentInput.val(currentValue.substring(0, maxLimit));
                    currentValue = currentInput.val();
                    characterCountText = maxLimit + "/" + maxLimit;
                }

                characterCount.text(characterCountText);
                gbb.gbbProductFormStep.f.handleFormSubmissionData(fieldKey, { value: currentValue, isValid: isValidationPassed });
            },
            createImageListItem: function (image, fieldKey, selectedImage) {
                let currentImageListItem = gbb.$("<div>").addClass("gbbProductFormImageSelectorListItem");
                let currentImageLabel = gbb.$("<label>").addClass("gbbPersonalizationImageLabel").attr("fieldKey", fieldKey)
                let captionSpan = gbb.$("<span>").addClass("gbbPersonalizationImageCaption").text(image.imageCaption);
                let currentImageListItemRadio = gbb.$("<input>").addClass("personalizationImageInput").attr("type", "radio").attr("name", fieldKey).attr("value", image.imageCaption).attr("fieldKey", fieldKey);
                let currentImageListItemImage = gbb.$("<img>").addClass("personalizationImage").attr("src", image.url).attr("fieldKey", fieldKey);

                currentImageLabel.append(currentImageListItemRadio, currentImageListItemImage);
                currentImageLabel.append(captionSpan);

                currentImageListItem.append(currentImageLabel);


                currentImageListItemRadio.on("click", function (event) {
                    gbb.gbbProductFormStep.f.handleImageSelection(gbb.$(this), currentImageListItem);
                });

                if (selectedImage == image.imageCaption) {
                    currentImageListItemRadio.trigger("click");
                }

                return currentImageListItem;
            },
            handleImageSelection: function (selectedRadio, currentListItem) {
                let radioValue = selectedRadio.val();
                let radioName = selectedRadio.attr("name");

                gbb.gbbProductFormStep.f.handleFormSubmissionData(radioName, { value: radioValue, isValid: true });

                currentListItem.addClass("gbbActiveImageSelectorListItem");
                currentListItem.siblings().removeClass("gbbActiveImageSelectorListItem");

                currentListItem.find(".gbb_checkmark").remove();
                gbb.gbbPersonalizePage.action.addCheckMarkDivs(currentListItem);
                gbb.gbbPersonalizePage.action.removeCheckmarkDivsFromSiblings(currentListItem);
            },
            createRadioListItem: function (option, fieldKey, selectedOption) {
                let currentRadioListItem = gbb.$("<div>").addClass("gbbProductFormRadioListItem");
                let currentRadioLabel = gbb.$("<label>").addClass("gbbpersonalizationRadioLabel").attr("fieldKey", fieldKey);
                let currentRadioItemRadio = gbb.$("<input>").addClass("personalizationRadioInput").attr("type", "radio").attr("name", fieldKey).attr("value", option.value).attr("fieldKey", fieldKey);
                let currentRadioListItemLabel = gbb.$("<span>").addClass("personalizationRadioLabel").text(option.label).attr("fieldKey", fieldKey);

                currentRadioLabel.append(currentRadioItemRadio, currentRadioListItemLabel);
                currentRadioListItem.append(currentRadioLabel);

                currentRadioItemRadio.on("click", function (event) {
                    gbb.gbbProductFormStep.f.handleRadioSelection(gbb.$(this), currentRadioListItem);
                });

                if (selectedOption == option.value) {
                    currentRadioItemRadio.trigger("click");
                }

                return currentRadioListItem;
            },

            handleRadioSelection: function (selectedRadio, currentListItem) {
                let radioValue = selectedRadio.val();
                let radioName = selectedRadio.attr("name");

                gbb.gbbProductFormStep.f.handleFormSubmissionData(radioName, { value: radioValue, isValid: true });

                currentListItem.addClass("gbbActiveRadioSelectorListItem");
                currentListItem.siblings().removeClass("gbbActiveRadioSelectorListItem");
            }

        }
    },
    gbbReviewPage: {
        state: {
            buildBoxButtonAction: undefined,
            ReviewPageBody: ""
        },
        init: async function (settings, parent) {
            if (true || gbb.state.currentPageId !== 'reviewPage') {
                gbb.gbbBrowser.emitCustomEvent({
                    eventName: 'gbb-page-init',
                    detail: {
                        prevPageId: gbb.state.currentPageId,
                        activePageId: 'reviewPage'
                    }
                })
            }
            gbb.state.currentPageId = "reviewPage"
            if (gbb?.gbbAddProductsPage?.state?.productPageData) {
                gbb.gbbAddProductsPage.state.productPageData = undefined
            }
            let navItem = gbb.utility.getNavItem(gbb.state.currentPageId)
            gbb.f.markPreviousNavigationItemsAsCompleted(navItem)
            let cartData = gbb.gbbBrowser.getCartDataFromSessionStorage();
            if (cartData && Object.keys(cartData.boxes).length > 0 && gbb.gbbBrowser.getProductsFromAllBoxesFromCart()?.length > 0 && !gbb.gbbReviewPage.f.checkIfAllBoxesHaveZeroPrice(cartData)) {
                await gbb.gbbReviewPage.initialize(settings, parent)
                await gbb.utility.getGiftBoxProductsFromCart(); //#TBD
            } else {
                await gbb.gbbReviewPage.renderEmptyState();
            }
            gbb.utility.renderTemporaryLoadingSpinner("hide")

            gbb.gbbReviewPage.f.registerEvents(settings)


            // gbb.gbbModel.init(settings)
        },
        renderEmptyState: async function () {

            let gbbEmptySummaryPageWrapper = gbb.$("<div>").addClass("gbbEmptySummaryPageWrapper");
            let gbbSummaryPageHTML = gbb.$("<div>").addClass("gbbSummaryPageBodyHTML");
            const EmptySummaryPageBanner = gbb.$("<div>").addClass("gbbEmptySummaryPageBanner");
            //all the text and button goes in this div
            const EmptySummaryPageBannerImage = gbb.$("<img>").addClass("gbbEmptySummaryPageBannerImage");
            const EmptySummaryPageBannerTextWrapper = gbb.$("<div>").addClass("gbbEmptySummaryPageBannerTextWrapper")
                .css("color", gbb.settings?.pageCustomizationData?.SummaryPage?.bannerTextColor)
                .css("width", "100%");
            const EmptySummaryPageBannerText = gbb.$("<div>").addClass("gbbEmptySummaryPageBannerText");
            const EmptySummaryPageAction = gbb.$("<div>").addClass("EmptySummaryPageAction");

            EmptySummaryPageAction.text(gbb.settings?.stepsConfigurationData?.summaryPageData?.reviewPageEmptyStateBannerButtonText || DEFAULT_EMPTY_REVIEWPAGE_BUTTONTEXT);
            EmptySummaryPageAction.on("click", function (event) {
                gbb.gbbBrowser.initializeRelevantBoxQuantity();
                gbb.state.currentPageId = gbb.state.navigationItems[0]['id'];
                let firstPageItem = gbb.f.getNavItem(gbb.state.currentPageId);
                firstPageItem.initFn();
                gbb.f.addParamsToUrl("page", firstPageItem.id)
            })
            //subtext
            const EmptySummaryPageBannerSubText = gbb.$("<div>").addClass("gbbEmptySummaryPageBannerSubText");
            EmptySummaryPageBannerImage.attr("src", gbb.settings?.stepsConfigurationData?.summaryPageData?.reviewPageEmptyStateBanner || DEFAULT_EMPTY_REVIEWPAGE_BANNER);

            EmptySummaryPageBannerText.text(gbb.settings?.stepsConfigurationData?.summaryPageData?.reviewPageEmptyStateBannerText);
            EmptySummaryPageBannerSubText.text(gbb.settings?.stepsConfigurationData?.summaryPageData?.reviewPageEmptyStateBannerSubText);

            EmptySummaryPageBannerTextWrapper.append(EmptySummaryPageBannerText);
            EmptySummaryPageBannerTextWrapper.append(EmptySummaryPageAction);
            EmptySummaryPageBannerTextWrapper.append(EmptySummaryPageBannerSubText);

            EmptySummaryPageBanner.append(EmptySummaryPageBannerImage);

            gbbSummaryPageHTML.append(EmptySummaryPageBanner);
            gbbSummaryPageHTML.append(EmptySummaryPageBannerTextWrapper);
            gbbEmptySummaryPageWrapper.append(gbbSummaryPageHTML);

            gbb.state.ReviewPageBody = gbbEmptySummaryPageWrapper;
            gbb.gbbReviewPage.f.insertIntoMainPageWrapper();
        },
        initialize: async function (settings, parent) {

            // gbb.utility.debugConsole("settings:",settings.giftwrap);
            // let {isEnabledOnProductPage, isEnabledOnCartPage} = gbb.gbbLandingPage.f.checkifGiftWrapEnabled(settings.giftwrap, productHandle, parent)
            // if (isEnabledOnProductPage) {
            const isPurchaseTypeSubscription = gbb.gbbSubscriptionProductsPage.f.checkIfPurchaseTypeIsSubscription()
            let gbbSummaryPageWrapper = gbb.$("<div>").addClass("gbbSummaryPageWrapper");
            if (isPurchaseTypeSubscription) { 
                gbbSummaryPageWrapper.addClass('gbbSubscriptionBundle')
            }
            const gbbSummaryPageHeaderHTML = gbb.gbbReviewPage.f.prepareHeader();
            const gbbDiscountComponent = gbb.$("<div>").addClass("gbbDiscountComponent");
            const gbbSummaryPageBodyHTML = await gbb.gbbReviewPage.f.prepareUIV2();
            // const gbbReviewPageFooterHTML = gbb.gbbReviewPage.f.prepareFooter();

            gbbSummaryPageWrapper.append(gbbSummaryPageHeaderHTML);
            gbbSummaryPageWrapper.append(gbbDiscountComponent);
            gbbSummaryPageWrapper.append(gbbSummaryPageBodyHTML);
            // gbbSummaryPageWrapper.append(gbbReviewPageFooterHTML);

            gbb.state.ReviewPageBody = gbbSummaryPageWrapper;
            gbb.gbbReviewPage.f.insertIntoMainPageWrapper();

            gbb.$("body").attr("data-page", gbb.state.currentPageId)

            // const gbbScheduleDeliveryWrapper = gbb.$();
            //find the selector which is in DEFAULT_scheduleDeliveryPickerSelector
            let gbbSummaryPageDeliveryAndOrderDetailsUI = gbb.$(document).find(".gbbSummaryPageDeliverOrderDetailsDiv");
            gbbSummaryPageDeliveryAndOrderDetailsUI.append(await gbb.gbbReviewPage.f.prepareDeliveryAndOrderDetailsUI());
            gbb.gbbReviewPage.f.reRenderDiscountAndSubTotalV2()

        },
        f: {

            prepareHeader: function () {
                //this is a header
                const gbbSummaryPageHeaderHTML = gbb.$("<div>").addClass("gbbSummaryPageHeader");
                // gbbSummaryPageHeaderHTML.append("<div> <h1> Header Gift Box Builder</h1> </div>");
                // return gbbSummaryPageHeaderHTML;
            },
            prepareUIV2: async function () {

                let gbbSummaryPageHTML = gbb.$("<div>").addClass("gbbSummaryPageHTML");

                const SummaryPageBanner = gbb.$("<div>").addClass("gbbSummaryPageBanner");
                //all the text and button goes in this div
                const SummaryPageBannerImage = gbb.$("<img>").addClass("gbbSummaryPageBannerImage");

                const gbbSummaryPageBannerTextWrapper = gbb.$("<div>").addClass("gbbSummaryPageBannerTextWrapper")
                    .css("color", gbb.settings?.pageCustomizationData?.SummaryPage?.bannerTextColor)
                    .css("width", "100%");
                const SummaryPageBannerText = gbb.$("<div>").addClass("gbbSummaryPageBannerText");
                //subtext
                const SummaryPageBannerSubText = gbb.$("<div>").addClass("gbbSummaryPageBannerSubText");

                SummaryPageBannerImage.attr("src", gbb.settings.pageCustomizationData.banners.productReviewImageSrc);
                SummaryPageBannerText.text(gbb.settings?.stepsConfigurationData?.summaryPageData?.reviewPageBannerText);
                SummaryPageBannerSubText.html(gbb.settings?.stepsConfigurationData?.summaryPageData?.reviewPageBannerSubtext);

                gbbSummaryPageBannerTextWrapper.append(SummaryPageBannerText);
                gbbSummaryPageBannerTextWrapper.append(SummaryPageBannerSubText);

                SummaryPageBanner.append(SummaryPageBannerImage);

                let gbbSummaryPageBodyWrapper = gbb.$("<div>").addClass("gbbSummaryPageBodyWrapper");

                let gbbSummaryPageBundlesContainer = await gbb.gbbReviewPage.f.prepareBundleDetailsContainerUI();
                // if(gbbSummaryPageBundlesContainer.length == 0) {
                //     gbbSummaryPageBundlesContainer = gbb.$("<div>").addClass("gbbSummaryPageBundlesContainer");
                // } else {
                //     gbbSummaryPageBundlesContainer.html("");
                // }

                // let allBoxes = gbb.gbbBrowser.getCartDataFromSessionStorage();
                // allBoxes = allBoxes?.boxes || {}
                // let allBoxesKeys = Object.keys(allBoxes) || [];
                // for(let i=0; i < allBoxesKeys.length; i++) {
                //     let box = allBoxes[allBoxesKeys[i]];
                //     gbbSummaryPageBundlesContainer.append(await gbb.gbbReviewPage.f.prepareBundleDetailsUI(box));
                // }

                let gbbSummaryPageSubsriptionDiv = await gbb.gbbReviewPage.f.prepareSubscriptionUI();
                let gbbSummaryPageDeliverOrderDetailsDiv = gbb.$("<div>").addClass("gbbSummaryPageDeliverOrderDetailsDiv");
                let gbbSummaryPageOrderDetailsUI = gbb.$("<div>").addClass("gbbSummaryPageOrderDetailsUI");

                let gbbCustomHTMLBlock = gbb.gbbReviewPage.f.customHTMLBlock()


                gbbSummaryPageBodyWrapper.append(gbbSummaryPageBundlesContainer);

                if (gbb.settings?.stepsConfigurationData?.isOrderSubscriptionsEnabled) {
                    // gbbSummaryPageBodyWrapper.append(gbbSummaryPageSubsriptionDiv);
                    gbbSummaryPageDeliverOrderDetailsDiv.append(gbbSummaryPageSubsriptionDiv);
                }
                gbbSummaryPageBodyWrapper.append(gbbSummaryPageDeliverOrderDetailsDiv);
                gbbSummaryPageBodyWrapper.append(gbbSummaryPageOrderDetailsUI);

                //gbbSummaryPageHTML.append(SummaryPageBanner);
                gbbSummaryPageHTML.append(gbbSummaryPageBannerTextWrapper);
                gbbSummaryPageHTML.append(gbbSummaryPageBodyWrapper);
                gbbSummaryPageHTML.append(gbbCustomHTMLBlock);
                return gbbSummaryPageHTML;
            },
            prepareSubscriptionUI: async function () {
                //initialize subscriptionValues
                const isOneTimePurchaseEnabled = gbb.settings?.stepsConfigurationData?.isOneTimePurchaseEnabled;

                if (isOneTimePurchaseEnabled == undefined || isOneTimePurchaseEnabled == true) {
                    gbb.gbbBrowser.updateSubscriptionType("oneTimeSubscription");
                } else {
                    gbb.gbbBrowser.updateSubscriptionType("saveSubscription");
                }

                if (gbb.gbbBrowser.getSubscriptionPlan()) {
                    gbb.gbbBrowser.removeSubscriptionPlan();
                }
                let gbbSummaryPageSubscriptionHTML = gbb.$("<div>").addClass("gbbSummaryPageSubscriptionHTML");
                // let gbbSummaryPageSubscriptionContainer = gbb.$("<div>").addClass("gbbSummaryPageSubscriptionContainer");

                let gbbSummaryPageOneTimeSubscriptionDiv = gbb.$("<div>").addClass("gbbSummaryPageOneTimeSubscriptionDiv");
                let gbbSummaryPageOneTimeSubscriptionInput = gbb.$("<input>").attr("id", "oneTimeSubscription").attr("type", "radio").attr("value", "oneTimeSubscription").addClass("gbbSummaryPageOneTimeSubscriptionInput");
                let gbbSummaryPageOneTimeSubscriptionLabel = gbb.$("<label>").attr("for", "oneTimeSubscription").addClass("gbbSummaryPageOneTimeSubscriptionLabel").text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.reviewPage?.oneTimePurchaseLabel) || "One-Time Purchase");

                let gbbSummaryPageSubscriptionAndSaveDiv = gbb.$("<div>").addClass("gbbSummaryPageSubscriptionAndSaveDiv");
                let gbbSummaryPageSubscriptionAndSaveInputAndLabel = gbb.$("<div>").addClass("gbbSummaryPageSubscriptionAndSaveInputAndLabel");
                let gbbSummaryPageSubscriptionAndSaveInput = gbb.$("<input>").attr("id", "saveSubscription").attr("type", "radio").attr("value", "saveSubscription").addClass("gbbSummaryPageSubscriptionAndSaveInput");
                let gbbSummaryPageSubscriptionAndSaveLabel = gbb.$("<label>").attr("for", "saveSubscription").addClass("gbbSummaryPageSubscriptionAndSaveLabel").text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.reviewPage?.subscribeAndSaveLabel) || "Subscribe and save");

                if (isOneTimePurchaseEnabled == undefined || isOneTimePurchaseEnabled) {
                    gbbSummaryPageOneTimeSubscriptionInput.prop("checked", gbb.gbbBrowser.getSubscriptionType() == "oneTimeSubscription" ? true : false);
                } else {
                    gbbSummaryPageSubscriptionAndSaveInput.prop("checked", true);
                }



                gbbSummaryPageSubscriptionAndSaveInputAndLabel.append(gbbSummaryPageSubscriptionAndSaveInput);
                gbbSummaryPageSubscriptionAndSaveInputAndLabel.append(gbbSummaryPageSubscriptionAndSaveLabel);
                gbbSummaryPageSubscriptionAndSaveInput.prop("checked", gbb.gbbBrowser.getSubscriptionType() == "saveSubscription" ? true : false);

                gbbSummaryPageOneTimeSubscriptionInput.on("change", () => {
                    gbb.gbbBrowser.updateSubscriptionType("oneTimeSubscription");
                    if (gbb.gbbBrowser.getSubscriptionPlan()) {
                        gbb.gbbBrowser.removeSubscriptionPlan();
                    }
                    gbb.$(".gbbSummaryPageNoSellingPlanFoundContainer").remove();
                    gbb.$(".gbbSummaryPageSubscriptionPlansDropdownContainer").remove();
                    gbb.gbbReviewPage.f.reRenderUiOnSubscriptionChange();
                    gbbSummaryPageSubscriptionAndSaveInput.prop("checked", false);
                })

                gbbSummaryPageSubscriptionAndSaveInput.on("change", async () => {
                    gbb.gbbBrowser.updateSubscriptionType("saveSubscription");
                    gbbSummaryPageOneTimeSubscriptionInput.prop("checked", false);
                    gbbSummaryPageSubscriptionAndSaveDiv.append(await gbb.gbbReviewPage.f.prepareSellingsPlansDropDown());

                    const subscriptionPlanExists = gbb.gbbReviewPage.f.checkIfSubscriptionPlanExists();
                    if (subscriptionPlanExists) {
                        gbb.gbbReviewPage.f.reRenderUiOnSubscriptionChange();
                    }
                })
                gbbSummaryPageOneTimeSubscriptionDiv.append(gbbSummaryPageOneTimeSubscriptionInput);
                gbbSummaryPageOneTimeSubscriptionDiv.append(gbbSummaryPageOneTimeSubscriptionLabel);

                gbbSummaryPageSubscriptionAndSaveDiv.append(gbbSummaryPageSubscriptionAndSaveInputAndLabel);

                if (isOneTimePurchaseEnabled != undefined && isOneTimePurchaseEnabled != true) {
                    gbbSummaryPageSubscriptionAndSaveDiv.append(await gbb.gbbReviewPage.f.prepareSellingsPlansDropDown("initialize"));
                    gbb.gbbBrowser.updateSubscriptionType("saveSubscription");
                    gbbSummaryPageOneTimeSubscriptionInput.prop("checked", false);
                    gbb.gbbReviewPage.f.reRenderUiOnSubscriptionChange();
                }

                if (isOneTimePurchaseEnabled == undefined || isOneTimePurchaseEnabled == true) {
                    gbbSummaryPageSubscriptionHTML.append(gbbSummaryPageOneTimeSubscriptionDiv);
                }

                gbbSummaryPageSubscriptionHTML.append(gbbSummaryPageSubscriptionAndSaveDiv);
                return gbbSummaryPageSubscriptionHTML;
            },
            prepareSellingsPlansDropDown: async function (type) {
                let gbbSummaryPageSubscriptionPlansDropdownContainer = gbb.$("<div>").addClass("gbbSummaryPageSubscriptionPlansDropdownContainer");
                let cartProducts = gbb.gbbBrowser.getProductsFromAllBoxesFromCart();

                for (let i = 0; i < cartProducts.length; i++) {
                    cartProducts[i].sellingPlanDetails = gbb.gbbReviewPage.f.getSellingPlanDetailsForVariant(cartProducts[i]?.selling_plan_groups, cartProducts[i]?.selling_plan_allocations);
                    gbb.gbbBrowser.updateCartItemSellingDetails(cartProducts[i]["variant_id"], cartProducts[i]?.sellingPlanDetails);
                }

                let isAllItemsHaveASellingPlan = gbb.gbbReviewPage.f.checkIfAllItemsHasASellingPlan();
                let allAvailableSubscriptions = gbb.gbbReviewPage.f.getAllSubscriptionPlans();
                allAvailableSubscriptions = Object.values(allAvailableSubscriptions) || [];

                if (!isAllItemsHaveASellingPlan || allAvailableSubscriptions.length == 0) {
                    let gbbSummaryPageNoSellingPlanFoundContainer = gbb.$("<div>").addClass("gbbSummaryPageNoSellingPlanFoundContainer");
                    gbbSummaryPageNoSellingPlanFoundContainer.text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.reviewPage?.noSubscriptionFoundLabel) || "Oops! No Subscription Plans were found");
                    gbbSummaryPageSubscriptionPlansDropdownContainer.append(gbbSummaryPageNoSellingPlanFoundContainer);
                    if (gbb.gbbBrowser.getSubscriptionPlan()) {
                        gbb.gbbBrowser.removeSubscriptionPlan();
                    }
                } else {
                    const gbbSubscriptionDeliveryFrequencyLabel = gbb.$("<div>").addClass("gbbSubscriptionDeliveryFrequencyLabel");
                    gbbSubscriptionDeliveryFrequencyLabel.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.reviewPage?.deliveryFrequencyLabel) || "Delivery Frequency");
                    const gbbSubscriptionDropDownSelect = gbb.$("<select>").addClass("gbbSubscriptionDropDownSelect");
                    allAvailableSubscriptions.forEach((plan, index) => {
                        if (plan) {
                            //let planName = plan?.selling_plan_name + " " + "( " + gbb.utility.getCurrencySymbol() + plan?.per_delivery_price + "/" + (gbb.utility.renderLanguageValue(gbb.settings?.languageData?.reviewPage?.deliveryLabel) || "delivery") + " )" || "";
                            let planName = plan?.selling_plan_name;
                            let optionEle = gbb.$("<option>").attr("value", plan?.selling_plan_id)
                                .text(planName);
                            if (index == 0 && (!gbb.gbbBrowser.getSubscriptionPlan() || type == "initialize")) {
                                optionEle.attr("selected", "selected");
                                gbb.gbbBrowser.updateSubscriptionPlan(parseInt(plan?.selling_plan_id))
                            }
                            if (gbb.gbbBrowser.getSubscriptionPlan() == plan?.selling_plan_id) {
                                optionEle.attr("selected", "selected");
                            }
                            gbbSubscriptionDropDownSelect.append(optionEle)
                        }
                    })
                    gbbSubscriptionDropDownSelect.change(async (event) => {
                        gbb.gbbBrowser.updateSubscriptionPlan(parseInt(event.target.value));
                        gbb.gbbReviewPage.f.reRenderUiOnSubscriptionChange();
                    })
                    gbbSummaryPageSubscriptionPlansDropdownContainer.append(gbbSubscriptionDeliveryFrequencyLabel);
                    gbbSummaryPageSubscriptionPlansDropdownContainer.append(gbbSubscriptionDropDownSelect);
                }
                return gbbSummaryPageSubscriptionPlansDropdownContainer;
            },
            getSellingPlanDetailsForVariant: function (selling_plan_groups, selling_plan_allocations) {
                try {
                    // gbb.utility.debugConsole("inside getSellingPlanDetailsForVariant");
                    let result = {};
                    if (selling_plan_groups?.length > 0 && selling_plan_allocations?.length > 0) {
                        //loop through all the selling_plan_allocations
                        for (let i = 0; i < selling_plan_allocations.length; i++) {
                            let sellingPlanId = selling_plan_allocations[i]?.selling_plan_id; //current selling_plan_id from selling_plan_allocations of the variant
                            let sellingPlanName;
                            let perDeliveryPrice = selling_plan_allocations[i]?.per_delivery_price;
                            let price = selling_plan_allocations[i]?.price;
                            let sellingPlanGroup = selling_plan_groups.find(group => group.id == selling_plan_allocations[i]?.selling_plan_group_id); //find the selling plan group to which this plan belongs to get the name of the plan

                            for (let j = 0; j < sellingPlanGroup?.selling_plans.length; j++) { //loop through all the selling_plans of this group

                                let currentSellingPlan = sellingPlanGroup?.selling_plans[j];
                                if (currentSellingPlan && currentSellingPlan.id == sellingPlanId) {
                                    sellingPlanName = currentSellingPlan?.name || "";
                                    break;
                                }
                            }
                            result[sellingPlanId] = {
                                selling_plan_id: sellingPlanId,
                                selling_plan_name: sellingPlanName,
                                per_delivery_price: perDeliveryPrice,
                                price: price
                            }
                            //result.push(obj);
                        }
                    }
                    // gbb.utility.debugConsole("result inside getSellingPlanDetailsForVariant", result);
                    return result;
                } catch (err) {
                    gbb.utility.debugConsole(err);
                }
            },
            getAllSubscriptionPlans: function () {
                try {
                    let items = gbb.gbbBrowser.getProductsFromAllBoxesFromCart();
                    let uniquePlans = {};
                    for (let i = 0; i < items.length; i++) {
                        if (items[i]?.sellingPlanDetails) {
                            let sellingPlanDetails = Object.values(items[i]?.sellingPlanDetails) || [];
                            for (let j = 0; j < sellingPlanDetails?.length; j++) {
                                let currPlan = sellingPlanDetails[j] || "";
                                if (currPlan && !uniquePlans[currPlan.selling_plan_id]) {
                                    uniquePlans[currPlan.selling_plan_id] = {
                                        selling_plan_id: currPlan?.selling_plan_id || "",
                                        selling_plan_name: currPlan?.selling_plan_name || "",
                                        per_delivery_price: currPlan?.per_delivery_price || ""
                                    }
                                }
                            }
                        }
                    }

                    let tempUniquePlans = Object.values(uniquePlans) || [];

                    for (let i = 0; i < tempUniquePlans.length; i++) {
                        for (let j = 0; j < items.length; j++) {
                            let planToTest = items[j].sellingPlanDetails[tempUniquePlans[i]["selling_plan_id"]] || undefined;
                            if (!planToTest) {
                                delete uniquePlans[tempUniquePlans[i]["selling_plan_id"]]
                                break;
                            }
                        }
                    }
                    // gbb.utility.debugConsole("uniquePlans:", uniquePlans);
                    return uniquePlans;
                } catch (err) {
                    gbb.utility.debugConsole(err);
                    return {};
                }
            },
            checkIfAllItemsHasASellingPlan: function () {
                let result = true;
                let products = gbb.gbbBrowser.getProductsFromAllBoxesFromCart();
                // gbb.utility.debugConsole("products inside checkIfAllItemsHasASellingPlan:", products);
                for (let i = 0; i < products?.length; i++) {
                    if (!products[i]?.sellingPlanDetails || Object.values(products[i]?.sellingPlanDetails)?.length == 0) {
                        result = false;
                        break;
                    }
                }
                // gbb.utility.debugConsole("result inside checkIfAllItemsHasASellingPlan", result);
                return result;
            },
            prepareBundleDetailsContainerUI: async function (boxesData) {
                try {
                    let gbbSummaryPageBundlesContainer = gbb.$(".gbbSummaryPageBundlesContainer");
                    if (gbbSummaryPageBundlesContainer.length == 0) {
                        gbbSummaryPageBundlesContainer = gbb.$("<div>").addClass("gbbSummaryPageBundlesContainer");
                    } else {
                        gbbSummaryPageBundlesContainer.html("");
                    }
                    let allBoxes;
                    if (!boxesData) {
                        allBoxes = gbb.gbbBrowser.getCartDataFromSessionStorage();
                        allBoxes = allBoxes?.boxes || {};
                    } else {
                        allBoxes = boxesData?.boxes || {}
                    }

                    let allBoxesKeys = Object.keys(allBoxes) || [];
                    for (let i = 0; i < allBoxesKeys.length; i++) {
                        let box = allBoxes[allBoxesKeys[i]];
                        if (gbb.gbbReviewPage.f.checkIfCurrentBoxPriceIsZero(box)) {
                            continue;
                        }
                        gbbSummaryPageBundlesContainer.append(await gbb.gbbReviewPage.f.prepareBundleDetailsUI(box));
                    }
                    return gbbSummaryPageBundlesContainer;
                } catch (err) {
                    gbb.utility.debugConsole(err + "in prepareBundleDetailsContainerUI");
                }
            },
            prepareBundleDetailsUI: async function (box) {
                //items:
                const isPurchaseTypeSubscription = gbb.gbbSubscriptionProductsPage.f.checkIfPurchaseTypeIsSubscription()
                let gbbSummaryPageBundleDetailsHTML = gbb.$(".gbbSummaryPageBundleDetailsHTML");

                // if(true || gbbSummaryPageBundleDetailsHTML.length == 0) {
                gbbSummaryPageBundleDetailsHTML = gbb.$("<div>").addClass("gbbSummaryPageBundleDetailsHTML");
                // } else {
                //     //empty the div if found, below we will append the new content
                //     gbbSummaryPageBundleDetailsHTML.html("");
                // }

                let gbbSummaryPageBundleDetailsWithProducts = gbb.$("<div>").addClass("gbbSummaryPageBundleDetailsWithProducts");

                let gbbSummaryPageBundleImageTitleContainer = gbb.$("<div>").addClass("gbbSummaryPageBundleImageTitleContainer");
                let gbbSummaryPageBundleImageContainer = gbb.$("<div>").addClass("gbbSummaryPageBundleImageContainer");
                let gbbSummaryPageBundleImage = gbb.$("<img>").addClass("gbbSummaryPageBundleImage")
                    .attr("src", gbb.settings?.stepsConfigurationData?.bundleImg || DEFAULT_BUNDLE_IMAGE);
                gbbSummaryPageBundleImageContainer.append(gbbSummaryPageBundleImage);

                let gbbSummaryPageBundleDetailsContainer = gbb.$("<div>").addClass("gbbSummaryPageBundleDetailsContainer");
                let gbbSummaryPageBundleDetails = gbb.$("<div>").addClass("gbbSummaryPageBundleDetails");

                let gbbSummaryPageBundleActions = gbb.$("<div>").addClass("gbbSummaryPageBundleActions");

                let gbbSummaryPageBundleTitleContainer = gbb.$("<div>").addClass("gbbSummaryPageBundleTitleContainer");
                let gbbSummaryPageBundleTitle = gbb.$("<div>").addClass("gbbSummaryPageBundleTitle");
                gbbSummaryPageBundleTitle.text(gbb?.settings?.stepsConfigurationData?.bundleName || "BundleX");

                //this will be rendered with gbbSummaryPageBundlePriceContainer
                let gbbSummaryPageBundleQuantity = gbb.$("<div>").addClass("gbbSummaryPageBundleQuantity");
                // gbbSummaryPageBundleQuantity.text("x"+gbb.gbbBrowser.getRelevantBoxQuantity(box?.boxId));
                gbbSummaryPageBundleQuantity.text("x" + box?.boxQuantity || 1);

                let noOfItems = 0;
                let cartData = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage(box?.boxId);
                if (cartData && cartData.items) {
                    noOfItems = cartData.items.length;
                }
                let gbbSummaryPageBundleItemsLabel = gbb.$("<div>").addClass("gbbSummaryPageBundleItemsLabel")
                    .text(noOfItems)
                gbbSummaryPageBundleItemsLabel.append(" ").append(gbb.settings?.languageData?.reviewPage?.itemsLabel?.value || "item(s)")
                gbbSummaryPageBundleTitleContainer.append(gbbSummaryPageBundleTitle);
                gbbSummaryPageBundleTitleContainer.append(gbbSummaryPageBundleItemsLabel);

                let gbbSummaryPageBundleQuantityContainer = gbb.$("<div>").addClass("gbbSummaryPageBundleQuantityContainer");
                let gbbSummaryPageBundleQuantityText = gbb.$("<div>").addClass("gbbSummaryPageBundleQuantityText");
                // gbbSummaryPageBundleQuantityText.text(gbb.gbbBrowser.getRelevantBoxQuantity(box?.boxId));
                gbbSummaryPageBundleQuantityText.text(box?.boxQuantity || 1);

                let gbbSummaryPageBundleQuantityAddButton = gbb.$("<div>").addClass("gbbSummaryPageBundleQuantityAddButton");
                gbbSummaryPageBundleQuantityAddButton.css("background", gbb.settings.pageCustomizationData?.productCard?.productCardButtonColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                gbbSummaryPageBundleQuantityAddButton.css("color", gbb.settings.pageCustomizationData?.productCard?.productCardButtonTextColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor);

                let gbbSummaryPageQuantityAddButtonWrapper = gbb.$("<div>").addClass("gbbSummaryPageQuantityAddButtonWrapper");
                gbbSummaryPageQuantityAddButtonWrapper.html("+");
                gbbSummaryPageBundleQuantityAddButton.append(gbbSummaryPageQuantityAddButtonWrapper);

                let gbbSummaryPageBundleQuantityRemoveButton = gbb.$("<div>").addClass("gbbSummaryPageBundleQuantityRemoveButton");
                gbbSummaryPageBundleQuantityRemoveButton.css("background", gbb.settings.pageCustomizationData?.productCard?.productCardButtonColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                gbbSummaryPageBundleQuantityRemoveButton.css("color", gbb.settings.pageCustomizationData?.productCard?.productCardButtonTextColor || gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor);
                let gbbSummaryPageQuantityRemoveButtonWrapper = gbb.$("<div>").addClass("gbbSummaryPageQuantityRemoveButtonWrapper");
                gbbSummaryPageQuantityRemoveButtonWrapper.html("-");
                gbbSummaryPageBundleQuantityRemoveButton.append(gbbSummaryPageQuantityRemoveButtonWrapper);

                gbbSummaryPageBundleQuantityContainer.append(gbbSummaryPageBundleQuantityRemoveButton);
                gbbSummaryPageBundleQuantityContainer.append(gbbSummaryPageBundleQuantityText);
                gbbSummaryPageBundleQuantityContainer.append(gbbSummaryPageBundleQuantityAddButton);

                gbbSummaryPageBundleQuantityAddButton.on("click", (event) => {
                    setTimeout(function () {
                        //   gbb.utility.debugConsole("after timeeout");
                        gbbSummaryPageBundleQuantityAddButton.prop("disabled", false);
                        gbbSummaryPageBundleQuantityAddButton.removeClass("gbbDisabled");
                    }, 500);
                    let currentBundleQuantity = gbb.gbbBrowser.getRelevantBoxQuantity(box?.boxId);
                    currentBundleQuantity = gbb.gbbBrowser.updateRelevantBoxQuantity(currentBundleQuantity + 1, box?.boxId);
                    gbbSummaryPageBundleQuantityText.text(currentBundleQuantity);
                    gbbSummaryPageBundleQuantity.text("x" + currentBundleQuantity);

                    gbb.gbbReviewPage.f.reRenderDiscountAndSubTotalV2()
                })

                gbbSummaryPageBundleQuantityRemoveButton.on("click", (event) => {
                    setTimeout(function () {
                        // gbb.utility.debugConsole("after timeeout")
                        gbbSummaryPageBundleQuantityRemoveButton.prop('disabled', false);
                        gbbSummaryPageBundleQuantityRemoveButton.removeClass("gbbDisabled");
                    }, 500);
                    let currentBundleQuantity = gbb.gbbBrowser.getRelevantBoxQuantity(box?.boxId);
                    if (currentBundleQuantity > 1) {
                        currentBundleQuantity = gbb.gbbBrowser.updateRelevantBoxQuantity(currentBundleQuantity - 1, box?.boxId);
                        gbbSummaryPageBundleQuantityText.text(currentBundleQuantity);
                        gbbSummaryPageBundleQuantity.text("x" + currentBundleQuantity);
                        gbb.gbbReviewPage.f.reRenderDiscountAndSubTotalV2()
                    }
                })

                gbbSummaryPageBundleDetails.append(gbbSummaryPageBundleTitleContainer);
                if (isPurchaseTypeSubscription) {
                    let gbbSummaryPageBundleSubscriptionDetails = gbb.$("<div>").addClass("gbbSummaryPageBundleSubscriptionDetails");
                    const subscriptionDataFromSessionStorage = gbb.gbbSubscriptionProductsPage.f.getSubscriptionDataFromSessionStorage()
                    let activeSellingPlanDetails = subscriptionDataFromSessionStorage.activeSellingPlanDetails || {}
                    gbbSummaryPageBundleSubscriptionDetails.text(activeSellingPlanDetails?.displayTitle || "");
                    gbbSummaryPageBundleDetails.append(gbbSummaryPageBundleSubscriptionDetails);
                }
                gbbSummaryPageBundleDetails.append(gbbSummaryPageBundleQuantityContainer);
                // gbbSummaryPageBundleDetails.append(gbbSummaryPageBundleProductsContainer);

                let gbbSummaryPageBundlePriceContainer = gbb.$("<div>").addClass("gbbSummaryPageBundlePriceContainer");

                let gbbSummaryPageBundleOriginalPrice = gbb.$("<div>").addClass("gbbSummaryPageBundleOriginalPrice").css("color", "#625f5f");
                gbbSummaryPageBundleOriginalPrice.append(gbb.utility.formatPrice(box.total_price));

                let gbbSummaryPageBundlePriceLabel = gbb.$("<div>").addClass("gbbSummaryPageBundlePriceLabel").text("Price");

                let gbbSummaryPageBundleDiscountedPrice = gbb.$("<div>").addClass("gbbSummaryPageBundleDiscountedPrice");

                if (gbb.settings?.discountsData?.isDiscountEnabled && gbb.settings?.discountsData?.isShowDiscountsEnabled && gbb.utility.getGiftBoxProductsDiscountedTotal(box?.boxId) != parseFloat(box.total_price / 100)) {
                    gbbSummaryPageBundlePriceContainer.css("grid-template-columns", "1fr 1fr min-content")
                    gbbSummaryPageBundlePriceContainer.append(gbbSummaryPageBundleOriginalPrice);
                }

                // gbbSummaryPageBundlePriceContainer.append(gbbSummaryPageBundlePriceLabel);

                // gbbSummaryPageBundleDiscountedPrice.append(gbb.gbbBrowser.getRelevantGiftBoxProductsTotalWithCurrency(box?.boxId))
                let formattedDiscountedPrice = gbb.utility.formatPrice(box.total_price);
                let discountedTotal = gbb.utility.getGiftBoxProductsDiscountedTotal(box?.boxId);

                if (gbb.settings?.discountsData?.isDiscountEnabled && gbb.settings?.discountsData?.isShowDiscountsEnabled && gbb.utility.getGiftBoxProductsDiscountedTotal(box?.boxId) != parseFloat(box.total_price / 100)) {
                    discountedTotal = gbb.utility.getGiftBoxProductsDiscountedTotal(box?.boxId);
                    let discountedTotalInShopifyFormat = discountedTotal * 100;
                    formattedDiscountedPrice = gbb.utility.formatPrice(discountedTotalInShopifyFormat);
                }
                gbbSummaryPageBundleDiscountedPrice.append(formattedDiscountedPrice);

                gbbSummaryPageBundlePriceContainer.append(gbbSummaryPageBundleDiscountedPrice);
                gbbSummaryPageBundlePriceContainer.append(gbbSummaryPageBundleQuantity);
                gbbSummaryPageBundleActions.append(gbbSummaryPageBundlePriceContainer);


                let gbbSummaryPageBundleEditRemoveButtons = gbb.$("<div>").addClass("gbbSummaryPageBundleEditRemoveButtons");
                let gbbSummaryPageBundleRemoveButton = gbb.$("<div>").addClass("gbbSummaryPageBundleRemoveButton")
                    .text(gbb.settings?.languageData?.general?.removeButtonText?.value || "Remove");
                let gbbSummaryPageBundleEditButton = gbb.$("<div>").addClass("gbbSummaryPageBundleEditButton")
                    .text(gbb.settings?.languageData?.reviewPage?.editButtonText?.value || "Edit");

                gbbSummaryPageBundleEditButton.on("click", (event) => {
                    gbb.gbbBrowser.activateRelevantBoxInSessionStorage(box?.boxId, { redirectToFirstProductPage: true });
                })

                gbbSummaryPageBundleRemoveButton.on("click", async (event) => {
                    await gbb.gbbBrowser.clearRelevantBoxFromSessionStorage(box?.boxId);
                })

                gbbSummaryPageBundleEditRemoveButtons.append(gbbSummaryPageBundleEditButton);
                gbbSummaryPageBundleEditRemoveButtons.append(gbbSummaryPageBundleRemoveButton);
                gbbSummaryPageBundleActions.append(gbbSummaryPageBundleEditRemoveButtons);

                gbbSummaryPageBundleDetailsContainer.append(gbbSummaryPageBundleDetails);
                gbbSummaryPageBundleDetailsContainer.append(gbbSummaryPageBundleActions);

                // gbbSummaryPageBundleImageTitleContainer.append(gbbSummaryPageBundleImageContainer);
                // gbbSummaryPageBundleImageTitleContainer.append(gbbSummaryPageBundleDetailsContainer);

                let gbbSummaryPageBundleProductsMainContainer = gbb.$("<div>").addClass("gbbSummaryPageBundleProductsMainContainer");
                //let gbbSummaryPageBundleProductEmptyDiv =  gbb.$("<div>").addClass("gbbSummaryPageBundleProductEmptyDiv");
                let gbbSummaryPageBundleProductsContainer = gbb.$("<div>").addClass("gbbSummaryPageBundleProductsContainer");
                gbb.gbbReviewPage.f.populateIteminGiftBoxProductListV2(gbbSummaryPageBundleProductsContainer, box);
                //gbbSummaryPageBundleProductsMainContainer.append(gbbSummaryPageBundleProductEmptyDiv);
                gbbSummaryPageBundleProductsMainContainer.append(gbbSummaryPageBundleProductsContainer);

                //gbbSummaryPageBundleDetailsHTML.append(gbbSummaryPageBundleImageTitleContainer);
                gbbSummaryPageBundleDetailsHTML.append(gbbSummaryPageBundleImageContainer);
                gbbSummaryPageBundleDetailsWithProducts.append(gbbSummaryPageBundleDetailsContainer);
                gbbSummaryPageBundleDetailsWithProducts.append(gbbSummaryPageBundleProductsMainContainer);
                gbbSummaryPageBundleDetailsHTML.append(gbbSummaryPageBundleDetailsWithProducts);

                return gbbSummaryPageBundleDetailsHTML;
            },
            prepareBundleProductsUI: async function (products) {

                let gbbSummaryPageBundleProductsHTML = gbb.$("<div>").addClass("gbbSummaryPageBundleProductsContainer");

                let gbbSummaryPageBundleProductsContainer = gbb.$("<div>").addClass("gbbSummaryPageBundleProductsContainer");
                let gbbSummaryPageBundleProductTitlesContainer = gbb.$("<div>").addClass("gbbSummaryPageBundleProductTitlesContainer");
                let gbbSummaryPageBundleProductQtysPricesContainer = gbb.$("<div>").addClass("gbbSummaryPageBundleProductQtysPricesContainer");

                products?.forEach((product) => {
                    let gbbSummaryPageBundleProductTitle = gbb.$("<div>").addClass("gbbSummaryPageBundleProductTitle");

                    let gbbSummaryPageBundleProductQtyPriceContainer = gbb.$("<div>").addClass("gbbSummaryPageBundleProductQtyPriceContainer");
                    let gbbSummaryPageBundleProductPrice = gbb.$("<div>").addClass("gbbSummaryPageBundleProductPrice");
                    let gbbSummaryPageBundleProductQuantity = gbb.$("<div>").addClass("gbbSummaryPageBundleProductQuantity");
                    gbbSummaryPageBundleProductQtyPriceContainer.append(gbbSummaryPageBundleProductPrice);
                    gbbSummaryPageBundleProductQtyPriceContainer.append(gbbSummaryPageBundleProductQuantity);

                    gbbSummaryPageBundleProductTitlesContainer.append(gbbSummaryPageBundleProductTitle);
                    gbbSummaryPageBundleProductQtysPricesContainer.append(gbbSummaryPageBundleProductQtyPriceContainer);
                })
                gbbSummaryPageBundleProductsContainer.append(gbbSummaryPageBundleProductTitlesContainer);
                gbbSummaryPageBundleProductsContainer.append(gbbSummaryPageBundleProductQtysPricesContainer);

                gbbSummaryPageBundleProductsHTML.append(gbbSummaryPageBundleProductsContainer);
                return gbbSummaryPageBundleProductsHTML;
            },
            prepareDeliveryAndOrderDetailsUI: async function () {
                let gbbSummaryPageDeliveryAndOrderDetailsHTML = gbb.$("<div>").addClass("gbbSummaryPageDeliveryAndOrderDetailsHTML");
                let gbbSummaryPageDeliverDetails = await gbb.gbbReviewPage.f.prepareDeliveryDetailsUI();
                let gbbSummaryPageOrderDetails = await gbb.gbbReviewPage.f.prepareOrderDetailsUI();
                gbbSummaryPageDeliverDetails.append(gbbSummaryPageOrderDetails)

                //gbbSummaryPageDeliveryAndOrderDetailsHTML.append(gbbSummaryPageDeliverDetails);
                gbbSummaryPageDeliveryAndOrderDetailsHTML.append(gbbSummaryPageOrderDetails);
                return gbbSummaryPageDeliveryAndOrderDetailsHTML;
            },
            prepareDeliveryDetailsUI: async function () {
                let gbbScheduleDeliveryWrapper = gbb.$(document).find(gbb.selectors.scheduleDeliveryPickerSelector);
                let gbbScheduleDeliveryHeadingLabel = gbb.$("<div>").addClass("gbbScheduleDeliveryHeadingLabel");
                //gbbScheduleDeliveryHeadingLabel.text(gbb.settings?.languageData?.reviewPage?.deliveryDetails || "Delivery Details");

                if (gbb.settings?.scheduleDelivery?.isScheduleDeliveryEnabled) {
                    //gbbScheduleDeliveryWrapper.append(gbbScheduleDeliveryHeadingLabel);
                    let scheduleDeliveryHTML = await gbb.gbbPersonalizePage.components.scheduleDelivery();
                    gbbScheduleDeliveryWrapper.append(scheduleDeliveryHTML);
                }
                if (gbb.settings?.scheduleDelivery?.isScheduleDeliveryEnabled) {
                    gbb.gbbPersonalizePage.f.useDatePickerLibrary();
                }
                return gbbScheduleDeliveryWrapper;
            },
            prepareOrderDetailsUI: async function () {
                let gbbOrderDetailsHTMl = gbb.$("<div>").addClass("gbbOrderDetailsHTMl");
                let gbbOrderDetailsHeading = gbb.$("<div>").addClass("gbbOrderDetailsHeading");
                gbbOrderDetailsHeading.text(gbb.settings.languageData.reviewPage?.orderDetailsLabel?.value || "Order Details");

                let gbbOrderSubtotalTotalContainer = gbb.$("<div>").addClass("gbbOrderSubtotalTotalContainer");
                gbbOrderSubtotalTotalContainer.append(gbb.gbbReviewPage.f.prepareSubtotalContainerV2());

                let gbbDiscountContainer = gbb.$("<div>").addClass("gbbSummaryPageDiscountAppliedWrapper");
                if (gbb.gbbDiscountComponent.state.isAtleastOneDiscountActive) {
                    gbbDiscountContainer.html(gbb.gbbReviewPage.f.prepareDiscountContainerV2())
                }

                let gbbSummaryPageActionButtons = gbb.$("<div>").addClass("gbbSummaryPageActionButtons");
                // let gbbSummaryPageBackButton = gbb.$("<div>").addClass("gbbSummaryPageBackButton").text(gbb.settings?.languageData?.general?.backButtonText?.value || "Back")
                // gbbSummaryPageBackButton.css("background", gbb.settings.pageCustomizationData.cartFooter.cartFooterBackButtonColor);
                // gbbSummaryPageBackButton.css("color", gbb.settings.pageCustomizationData.cartFooter.cartFooterBackButtonTextColor);

                // gbbSummaryPageBackButton.on("click", function (event) {
                //     gbb.giftboxbuilderPage.action.onPrevNavigationBYOB();
                // })

                let checkoutButtonText = gbb?.settings?.languageData?.general?.checkoutButtonText?.value || "Checkout";

                if (gbb.settings.app.redirectToCartEnabled && !gbb.settings.app.redirectToCheckoutEnabled) {
                    checkoutButtonText = gbb?.settings?.languageData?.general?.addToCartButtonText?.value || "Add to Cart";
                }


                let gbbSummaryPageCheckoutButton = gbb.$("<div>").addClass("gbbSummaryPageCheckoutButton").text(checkoutButtonText);
                gbbSummaryPageCheckoutButton.css("background", gbb.settings.pageCustomizationData.summaryBlock.summaryBlockAddToCartButtonColor)
                gbbSummaryPageCheckoutButton.css("color", gbb.settings.pageCustomizationData.summaryBlock.summaryBlockAddToCartButtonTextColor)

                gbbSummaryPageCheckoutButton.on("click", async function (event) {
                    event.preventDefault();
                    event.stopPropagation();
                    gbbSummaryPageCheckoutButton.addClass("gbbDisabled")
                    gbbSummaryPageCheckoutButton.text(gbb.settings.languageData.general?.loadingCheckoutButtonText?.value || "Loading ...1")
                    if (gbb.gbbPersonalizePage.state.scheduleDeliveryDate) {
                        // await gbb.utility.updateCart({ attributes: { ["gbbScheduleDelivery"]: gbb.gbbPersonalizePage.state.scheduleDeliveryDate } });
                        gbb.gbbBrowser.updateCartAttributes({ "gbbScheduleDelivery": gbb.gbbPersonalizePage.state.scheduleDeliveryDate })
                    }
                    //if gbb.gbbDiscountComponent.state.currentDiscountRule

                    // let cartData = await gbb.utility.getCart();
                    // gbb.state.giftBoxCartData = cartData; //TBD
                    gbb.gbbBrowser.emitCustomEvent({
                        eventName: "gbb-checkout-button-click",
                        attachEventTo: gbbSummaryPageCheckoutButton[0]
                    })
                    await gbb.utility.handleCheckoutClick()
                    // setTimeout(()=>{
                    //     gbbSummaryPageCheckoutButton.removeClass("gbbDisabled");
                    //     gbbSummaryPageCheckoutButton.text(gbb?.settings?.languageData?.general?.checkoutButtonText?.value || "Checkout");
                    // },4000)
                    // await gbb.shopifyUtility.addToCart();

                    //check if discount is enabled
                })
                let gbbSummaryPageCreateNewBoxButton = gbb.$("<div>").addClass("gbbSummaryPageCreateNewBoxButton")
                    .text(gbb.utility.renderLanguageValue(gbb?.settings?.languageData?.reviewPage?.createNewBoxLabel) || "Create a new Box");

                gbbSummaryPageCreateNewBoxButton.css("background", gbb.settings.pageCustomizationData.cartFooter.cartFooterBackButtonColor);
                gbbSummaryPageCreateNewBoxButton.css("color", gbb.settings.pageCustomizationData.cartFooter.cartFooterBackButtonTextColor);

                gbbSummaryPageCreateNewBoxButton.on("click", () => {
                    setTimeout(function () {
                        gbbSummaryPageCreateNewBoxButton.prop('disabled', false);
                        gbbSummaryPageCreateNewBoxButton.removeClass("gbbDisabled");
                    }, 500);
                    let isRedirectAllowed = true;
                    gbb.gbbBrowser.createNewBoxInSessionStorage(isRedirectAllowed);
                    gbb.gbbBrowser.emitCustomEvent({
                        eventName: "gbb-create-new-box-click",
                        attachEventTo: gbbSummaryPageCreateNewBoxButton[0]
                    })
                })
                //gbbSummaryPageActionButtons.append(gbbSummaryPageBackButton)
                gbbSummaryPageActionButtons.append(gbbSummaryPageCheckoutButton);

                if (gbb?.settings?.merchantInfo?.bundleSettings?.allowMultipleBoxesFromSameBundle) {
                    gbbSummaryPageActionButtons.append(gbbSummaryPageCreateNewBoxButton)
                }

                gbbOrderDetailsHTMl.append(gbbOrderDetailsHeading);
                gbbOrderDetailsHTMl.append(gbbOrderSubtotalTotalContainer);
                gbbOrderDetailsHTMl.append(gbbDiscountContainer);
                gbbOrderDetailsHTMl.append(gbbSummaryPageActionButtons);
                if (gbb.utility.checkIfBrandingShouldBeVisible()) {
                    gbbOrderDetailsHTMl.append(gbb.utility.renderPoweredByLabel());
                }
                return gbbOrderDetailsHTMl;
            },
            prepareDiscountContainerV2: function (cartData) {
                let discountContainerArray = []
                const boxQuantity = gbb.state.giftBoxCartData.boxQuantity
                let cartTotal;
                // if(!cartData){
                //      cartTotal = gbb.utility.calculateCartDiscount().cartTotalAmount;
                // }else{
                //     cartTotal = gbb.utility.calculateCartDiscount(cartData).cartTotalAmount;
                // }
                cartTotal = gbb.utility.calculateCartDiscount(cartData).cartTotalAmount + gbb.utility.calculateCartDiscount(cartData).cartBlacklistedItemsTotal;


                cartTotal = gbb.utility.formatPrice(cartTotal);

                let discountOffered = gbb.utility.calculateCartDiscount(cartData).cartDiscount;
                discountOffered = gbb.utility.formatPrice(discountOffered);

                discountOffered = "-" + discountOffered;

                let gbbSummaryPageDiscountAppliedContainer = gbb.$("<div>").addClass("gbbSummaryPageDiscountAppliedContainer")
                let gbbSummaryPageDiscountAppliedLabel = gbb.$("<div>").addClass("gbbSummaryPageDiscountAppliedLabel").text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.reviewPage?.discountAppliedLabel) || "Discount")

                let gbbSummaryPageDiscountAppliedValue = gbb.$("<span>").addClass("gbbSummaryPageDiscountAppliedValue")
                gbbSummaryPageDiscountAppliedValue.append(discountOffered)

                gbbSummaryPageDiscountAppliedContainer.append(gbbSummaryPageDiscountAppliedLabel);
                gbbSummaryPageDiscountAppliedContainer.append(gbbSummaryPageDiscountAppliedValue);
                // let gbbSummaryPageDiscountAppliedValue = gbb.$("<span>").addClass("gbbSummaryPageDiscountAppliedValue")
                // gbbSummaryPageDiscountAppliedValue.append("      ").append(gbb.gbbDiscountComponent.state.currentDiscountRule.discountValue)

                let gbbSummaryPageTotalCartValueContainer = gbb.$("<div>").addClass("gbbSummaryPageTotalCartValueContainer")

                let gbbSummaryPageTotalCartValueLabel = gbb.$("<div>").addClass("gbbSummaryPageTotalCartValueLabel").text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.reviewPage?.totalLabel) || "Total1")
                let gbbSummaryPageTotalCartValue = gbb.$("<div>").addClass("gbbSummaryPageTotalCartValue")
                gbbSummaryPageTotalCartValue.append(cartTotal)

                gbbSummaryPageTotalCartValueContainer.append(gbbSummaryPageTotalCartValueLabel);
                gbbSummaryPageTotalCartValueContainer.append(gbbSummaryPageTotalCartValue);

                discountContainerArray.push(gbbSummaryPageDiscountAppliedContainer)

                discountContainerArray.push(gbbSummaryPageTotalCartValueContainer)
                return discountContainerArray;
            },
            prepareSubtotalContainerV2: function (allBoxesData) {
                let gbbSummaryPageSubTotalCart = gbb.$("<div>").addClass("gbbSummaryPageSubTotalCart")
                //let gbbSummaryPageSubTotalCart = gbb.$("<div>").addClass("gbbSummaryPageSubTotalCart")
                let gbbSummaryPageSubTotalCartLabel = gbb.$("<div>").addClass("gbbSummaryPageSubTotalCartLabel").text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.reviewPage?.subtotalLabel) || "Sub Total1")
                let gbbSummaryPageSubTotalValue = gbb.$("<div>").addClass("gbbSummaryPageSubTotalValue")
                // gbbSummaryPageSubTotalValue.append(gbb.utility.getGiftBoxProductsTotalWithCurrency())

                let _allBoxesData;
                if (allBoxesData) {
                    _allBoxesData = JSON.parse(JSON.stringify(allBoxesData));
                }
                let subtotalValue = gbb.utility.calculateCartDiscount(_allBoxesData).cartSubTotal + gbb.utility.calculateCartDiscount(_allBoxesData).cartBlacklistedItemsTotal;

                subtotalValue = gbb.utility.formatPrice(subtotalValue);

                gbbSummaryPageSubTotalValue.append(subtotalValue)


                gbbSummaryPageSubTotalCart.append(gbbSummaryPageSubTotalCartLabel)
                gbbSummaryPageSubTotalCart.append(gbbSummaryPageSubTotalValue)

                return gbbSummaryPageSubTotalCart;
            },
            // prepareSubtotalContainer: function () {
            //     let gbbSubTotalCartValue = gbb.$("<div>").addClass("gbbReviewPageSubTotalCart")
            //     let gbbSubTotalLabel = gbb.$("<div>").addClass("gbbReviewPageSubTotalCartLabel").text(gbb.utility.renderLanguageValue(gbb.settings?.languageData?.reviewPage?.subtotalLabel) || "Sub Total1")
            //     gbbSubTotalLabel.append("      ").append(gbb.utility.getGiftBoxProductsTotalWithCurrency())
            //     gbbSubTotalCartValue.append(gbbSubTotalLabel)
            //     return gbbSubTotalCartValue;
            // },
            prepareFooter: function () {
                //this is a footer
                const gbbSummaryPageFooterHTML = gbb.$("<div>").addClass("gbbSummaryPageFooter");
                gbbSummaryPageFooterHTML.append("<div> <h1>Footer Gift Box Builder</h1> </div>");
                return gbbSummaryPageFooterHTML;
            },
            reRenderDiscountAndSubTotalV2: function (allBoxesData) {
                let gbbSummaryPageSubTotalCart = gbb.$(".gbbOrderSubtotalTotalContainer")

                gbbSummaryPageSubTotalCart.html(gbb.gbbReviewPage.f.prepareSubtotalContainerV2(allBoxesData))

                let gbbSummaryPageDiscountAppliedWrapper = gbb.$(".gbbSummaryPageDiscountAppliedWrapper")

                if (!gbbSummaryPageDiscountAppliedWrapper.length > 0) {
                    gbbSummaryPageDiscountAppliedWrapper = gbb.$("<div>").addClass("gbbSummaryPageDiscountAppliedWrapper")
                }
                //if theres an active discount rule
                if (gbb.gbbDiscountComponent.state.isAtleastOneDiscountActive) {
                    if (gbbSummaryPageDiscountAppliedWrapper.length > 0) {
                        // gbb.utility.debugConsole("->gbbreviewPage Code here works");

                        gbbSummaryPageDiscountAppliedWrapper.html(gbb.gbbReviewPage.f.prepareDiscountContainerV2(allBoxesData))
                    } else {
                        // gbb.utility.debugConsole("->came in else block");
                        gbb.$(".gbbSummaryPageDiscountAppliedWrapper").html(gbb.gbbReviewPage.f.prepareDiscountContainerV2(allBoxesData))
                    }
                }

                //if there is no active discount rule. remove the discount container
                else {
                    gbbSummaryPageDiscountAppliedWrapper.remove();
                }
            },
            renderChangeQuantity: async function () {
                // this is the increasedecrease comp
                let variantQuantity = 1;
                let gbbBundleQuantityHTMLContainer = gbb.$("<div>").addClass("gbbBundleQuantityHTMLContainer")

                let gbbBundleQuantityHTML = gbb.$("<div>").addClass("gbbBundleQuantityHTML");

                let gbbBundleQuantityHeading = gbb.$("<div>").addClass("gbbBundleQuantityHeading")
                // let gbbProductQuantityAddButton = gbb.$("<button>").addClass("gbbProductQuantityAddButton")
                let gbbBundleQuantityAddButton = gbb.$("<div>").addClass("gbbBundleChangeButton")
                    .css("background", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                    .css("color", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor)
                    .html("+")
                // let gbbProductQuantityRemoveButton = gbb.$("<button>").addClass("gbbProductQuantityRemoveButton")
                let gbbBundleQuantityRemoveButton = gbb.$("<div>").addClass("gbbBundleChangeButton")
                    .css("background", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonBgColor)
                    .css("color", gbb.settings.pageCustomizationData?.quickSettings?.colors?.buttonTextColor)
                    .html("-")
                let gbbBundleQuantityLabel = gbb.$("<div>").addClass("gbbBundleQuantityLabel");
                // gbbProductQuantityAddButton.append(gbb.$("<div>").addClass("gbbProductQuantityAddButtonWrapper").html("+"));
                // gbbProductQuantityRemoveButton.append(gbb.$("<div>").addClass("gbbProductQuantityRemoveButtonWrapper").html("-"));

                gbbBundleQuantityAddButton.on("click", async (event) => {
                    variantQuantity += 1;
                    gbbBundleQuantityLabel.text(variantQuantity);
                })

                gbbBundleQuantityRemoveButton.on("click", async (event) => {
                    if (variantQuantity > 0) {
                        variantQuantity -= 1;
                        gbbBundleQuantityLabel.text(variantQuantity);
                    }
                })

                gbbBundleQuantityLabel.text(variantQuantity);

                gbbBundleQuantityHeading.text(gbb.utility.renderLanguageValue(gbb.settings?.languageData.general.quantity) || "Quantity");

                gbbBundleQuantityHTML.append(gbbBundleQuantityRemoveButton)
                gbbBundleQuantityHTML.append(gbbBundleQuantityLabel);
                gbbBundleQuantityHTML.append(gbbBundleQuantityAddButton);
                gbbBundleQuantityHTMLContainer.append(gbbBundleQuantityHTML);

                return gbbBundleQuantityHTMLContainer;
            },
            insertIntoMainPageWrapper: function () {

                gbb.$(".gbbBodyWrapper").html(gbb.state.ReviewPageBody);
                gbb.$(".gbbBodyWrapper").children().first().hide();
                gbb.$(".gbbBodyWrapper").children().first().fadeIn(700);
                return

            },
            registerEvents: function (settings) {
                gbb.gbbLandingPage.state.buildBoxButtonAction = function () {
                    gbb.utility.debugConsole("build box button clicked");
                    // window.alert("build box button clicked");
                };
            },
            populateTotalInTotalBlock: async function (ele) {
                let total = gbb.utility.getGiftBoxProductsTotalWithCurrency()
                ele.text(total)

            },
            populateIteminGiftBoxProductListV2: function (gbbSummaryPageProductListItems, box) {

                try {
                    // let productData = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage(boxId);
                    let productData = box;
                    if (productData && productData.items && productData.items.length && productData.items.length > 0) {
                        let products = productData.items
                        for (let i = 0; i < products.length; i++) {
                            let product = products[i]
                            let productProperties = product.properties
                            if (productProperties) {

                                let updateProductTitleOfMessage = gbb.gbbReviewPage.f.getProductTitleModifiedIfMessageOrUpload(product) || "";
                                let updateProductTitleOfProductsThatHavePersonalization = gbb.gbbReviewPage.f.getProductTitleModifiedForPersonalizedProducts(product) || "";

                                if (updateProductTitleOfMessage || updateProductTitleOfProductsThatHavePersonalization) {
                                    product.title = product?.product_title || product?.title || product?.public_title || "";
                                    product.title = product.title + updateProductTitleOfMessage + updateProductTitleOfProductsThatHavePersonalization || "";
                                }



                            }
                            let gbbSummaryPageProductListItem = gbb.$("<div>").addClass("gbbSummaryPageProductListItem")
                            let gbbSummaryPageProductTitleQtyPriceContainer = gbb.$("<div>").addClass("gbbSummaryPageProductTitleQtyPriceContainer");

                            let gbbSummaryPageProductTitleWrapper = gbb.$("<div>").addClass("gbbSummaryPageProductTitleWrapper")
                            let gbbSummaryPageProductQtyPriceContainer = gbb.$("<div>").addClass("gbbSummaryPageProductQtyPriceContainer")

                            let gbbSummaryPageProductListItemName = gbb.$("<div>").addClass("gbbSummaryPageProductListItemName").html(product.title)
                            let qtyHtml1 = gbb.$("<span>").css("font-size", "10px").text("x")
                            let qtyHtml2 = gbb.$("<span>").text("x" + product.quantity)
                            let gbbSummaryPageProductListItemQty = gbb.$("<div>").addClass("gbbSummaryPageProductListItemQty")
                            gbbSummaryPageProductListItemQty.append(qtyHtml2)

                            let gbbSummaryPageProductListItemPrice = gbb.$("<div>").addClass("gbbSummaryPageProductListItemPrice")
                            gbbSummaryPageProductListItemPrice.html(gbb.utility.formatPrice(product.price))
                            let gbbSummaryPageProductListItemRemoveBtn = gbb.$("<span>").addClass("gbbSummaryPageProductListItemRemoveBtn").text(`(${gbb.utility.renderLanguageValue(gbb.settings?.languageData.general.removeButtonText)})`)
                                .attr("data-variant_id", product.variant_id)
                                .attr("data-product_id", product.product_id)

                            gbbSummaryPageProductListItemRemoveBtn.on("click", async function (event) {

                                event.preventDefault();
                                event.stopPropagation();

                                //find the parent element gbbSummaryPageProductListItem and remove it
                                let listItemToBeRemoved = gbb.$(this).parents(".gbbSummaryPageProductListItem")
                                listItemToBeRemoved.remove()

                                gbb.$('.gbbSummaryPageProductListItemRemoveBtn').prop('disabled', true);
                                //add a disabled class
                                // gbb.$('.gbbSummaryPageProductListItemRemoveBtn').addClass('gbbDisabled');
                                setTimeout(function () {
                                    gbb.$('.gbbSummaryPageProductListItemRemoveBtn').prop('disabled', false);
                                    //    gbb.$('.gbbSummaryPageProductListItemRemoveBtn').removeClass('gbbDisabled');
                                }, 500);

                                await gbb.utility.updateCartV2({ updates: { [event.target.dataset.variant_id]: 0 }, attributes: { [event.target.dataset.variant_id]: "reviewPage" } })

                                gbb.gbbReviewPage.f.reRenderDiscountAndSubTotalV2()

                                // gbb.gbbReviewPage.init(gbb.settings, "SUMMARY_PAGE")

                            })

                            // let renderChangeQuantity = await gbb.gbbSummaryPage.f.renderChangeQuantity()

                            //add gbbSummaryPageProductListItemRemoveBtn inside gbbSummaryPageProductListItemName
                            // gbbSummaryPageProductListItemName.append("  ").append(gbbSummaryPageProductListItemRemoveBtn)
                            gbbSummaryPageProductTitleWrapper.append(gbbSummaryPageProductListItemName)
                            // gbbSummaryPageProductTitleWrapper.append(gbbSummaryPageProductListItemRemoveBtn)

                            gbbSummaryPageProductQtyPriceContainer.append(gbbSummaryPageProductListItemPrice)
                            gbbSummaryPageProductQtyPriceContainer.append(gbbSummaryPageProductListItemQty)

                            gbbSummaryPageProductTitleQtyPriceContainer.append(gbbSummaryPageProductTitleWrapper);
                            gbbSummaryPageProductTitleQtyPriceContainer.append(gbbSummaryPageProductQtyPriceContainer);
                            gbbSummaryPageProductListItem.append(gbbSummaryPageProductTitleQtyPriceContainer)


                            gbbSummaryPageProductListItems.append(gbbSummaryPageProductListItem)
                        }
                    }
                } catch (error) {
                    gbb.utility.debugConsole("error", error)
                }
            },
            getProductTitleModifiedIfMessageOrUpload: function (product) {
                try {
                    let titleResult = ""
                    if (product.properties) {
                        //find the value of Message
                        let messageKey = Object.keys(product.properties).find(key => key == "Message");
                        let message = product.properties[messageKey];
                        let recipientEmailKey = Object.keys(product.properties).find(key => key == "Recipient Email");
                        let recipientEmail = product.properties[recipientEmailKey];

                        let attachmentFields = gbb.settings.customerUploads && gbb.settings.customerUploads.attachmentFields && gbb.settings.customerUploads.attachmentFields.map(field => field.label);

                        let customerUploads = attachmentFields && Object.keys(product.properties).filter(key => attachmentFields.includes(key));
                        let videoRecordedKey = Object.keys(product.properties).find(key => key == "Video Recorded");
                        let videoRecordedValue = product.properties[videoRecordedKey];

                        if (message) {
                            titleResult = titleResult + " - " + message;
                        }
                        if (recipientEmail) {
                            titleResult = titleResult + " | Email: " + recipientEmail;
                        }
                        if (videoRecordedValue) {
                            titleResult = titleResult + " | Video Recorded: " + videoRecordedValue;
                        }
                        if (customerUploads) {
                            for (let i = 0; i < customerUploads.length; i++) {
                                let customerUpload = customerUploads[i];
                                customerUpload = gbb.utility.removeFirstCharacterIfUnderscore(customerUpload);
                                titleResult = titleResult + " | " + customerUpload;
                            }
                        }
                    }
                    return titleResult;
                } catch (error) {
                    gbb.utility.debugError("error in getProductTitleModifiedIfMessageOrUpload", error);
                }
            },
            getProductTitleModifiedForPersonalizedProducts: function (product) {
                try {
                    // initialize an empty string to hold the final title result
                    let titleResult = "";

                    // use destructuring to access product properties more directly
                    const productProps = product.properties;

                    if (productProps) {
                        // find the key for "productPersonalizationMetaData" from product properties
                        let personalizationKey = Object.keys(productProps).find(key => key === "productPersonalizationMetaData");

                        // if the key exists
                        if (personalizationKey) {
                            // clone product personalization metadata
                            let metaData = JSON.parse(JSON.stringify(productProps[personalizationKey]));

                            // get the keys of the product personalization metadata
                            let metaDataKeys = Object.keys(metaData);

                            // iterate over each key in product personalization metadata
                            metaDataKeys.forEach(key => {
                                // get the associated value or use empty string if undefined
                                let metaValue = metaData[key] || "";

                                // get field label and value from the metadata value
                                let fieldLabel = metaValue.fieldLabel;
                                let fieldValue = metaValue.value;

                                // create the result to be appended to title using field label and value (if value exists)
                                let appendResult = fieldValue ? `${fieldLabel}: ${fieldValue}` : "";

                                // add the result to the title string with a leading " | "
                                titleResult += ` | ${appendResult}`;
                            });
                        }
                    }

                    // return the final title result
                    return titleResult;
                } catch (error) {
                    // if an error occurs, log it as an error in the console
                    gbb.utility.debugError("error in getProductTitleModifiedForPersonalizedProducts", error);
                }
            },
            reRenderUiOnSubscriptionChange: async function () {
                let allBoxesData = await gbb.utility.getCart(); //TBD
                gbb.gbbReviewPage.f.reRenderDiscountAndSubTotalV2(allBoxesData);
                gbb.gbbReviewPage.f.prepareBundleDetailsContainerUI(allBoxesData);
            },
            checkIfSubscriptionPlanExists: function () {
                const checkIfAllItemsHasASellingPlan = gbb.gbbReviewPage.f.checkIfAllItemsHasASellingPlan()
                const getAllSubscriptionPlans = Object.values(gbb.gbbReviewPage.f.getAllSubscriptionPlans()).length > 0;
                return checkIfAllItemsHasASellingPlan && getAllSubscriptionPlans;
            },
            checkIfAllBoxesHaveZeroPrice: function (cartData) { //this function checks if the items added to cart are only free items
                try {
                    let allBoxesZeroPrice = true;
                    for (const boxId in cartData.boxes) {
                        const box = cartData.boxes[boxId];
                        if (box.total_price != 0) {
                            allBoxesZeroPrice = false;
                            break;
                        }
                    }
                    return allBoxesZeroPrice;
                } catch (err) {
                    gbb.utility.debugConsole(err);
                    return false;
                }
            },
            checkIfCurrentBoxPriceIsZero: function (box) { //this function checks if the items added to cart are only free items
                try {
                    if (box && box?.items?.length > 0 && box?.total_price == 0) {
                        return true;
                    }
                    return false;
                } catch (err) {
                    gbb.utility.debugConsole(err);
                    return false;
                }
            },
            customHTMLBlock: function () {
                let customHTMLBlock = gbb.settings?.stepsConfigurationData?.summaryPageData?.customHTMLBlock || "";
                return customHTMLBlock;
            },
        },
        events: function (settings) {
        },
        action: {
        }
    },


    gbbKite: {
        state: {
            isKiteEnabled: false,
        },
        init: function (settings) {
            gbb.gbbKite.initialize();
        },
        initialize: function () {
            try {
                gbb.gbbKite.f.overWriteDiscountMessaging();
                gbb.gbbKite.f.setMapForDiscountProducts();
            } catch (e) {
                gbb.utility.debugConsole("error in gbbKite initialize", e);
            }
            // gbb.utility.debugConsole("gbbKite initialized");
        },
        f: {
            setMapForDiscountProducts: function () {
                try {
                    if (!gbb.settings.gbbKiteData) {
                        return;
                    }

                    let discounts = gbb.settings.gbbKiteData?.discounts || [];
                    // Initialize a map for discount products
                    let discountMap = {};

                    // Loop through each discount object
                    for (let i = 0; i < discounts.length; i++) {
                        const discountObj = discounts[i];

                        // Check if isEBIntegrationEnabled is false
                        if (!discountObj.isEBIntegrationEnabled) {
                            continue;
                        }

                        // Get the first discount value from the rules
                        const discountValue = discountObj.rules[0].disValue;

                        // Get the discount type
                        const discountType = discountObj.disValueType;

                        // Get the products
                        const products = gbb.gbbKite.f.flattenProductsDataInDesiredFormat(discountObj);

                        // Loop through each product
                        for (let j = 0; j < products.length; j++) {
                            const product = products[j];

                            // Store the discount value and type for this product in the map
                            discountMap[product.productId] = { discountValue, discountType };
                        }
                    }
                    // Return the discount map
                    // return discountMap;
                    gbb.gbbKite.state.mapForDiscountProducts = discountMap;
                } catch (e) {
                    gbb.utility.debugConsole("error in setMapForDiscountProducts", e);
                }
            },
            modifyProductDataWithDiscountedPrice: function (productData) {
                try {
                    // Get the product id
                    const productId = productData.id;

                    //isDiscountToBeAppliedOnThisProduct(productData)

                    // Get the discount map
                    const discountMap = gbb.gbbKite.state.mapForDiscountProducts;



                    // Check if the product id exists in the discount map
                    if (discountMap && discountMap[productId]) {
                        // Get the discount value and type
                        const discountValue = discountMap[productId].discountValue;
                        const discountType = discountMap[productId].discountType;

                        // Get the product price

                        productData.compare_at_price = productData.price;
                        productData.price = gbb.gbbKite.f.modifyPriceBasedOnType(productData.price, { discountValue, discountType });


                        for (let i = 0; i < productData.variants.length; i++) {
                            let variant = productData.variants[i];
                            // variant.price = productPrice;
                            variant.compare_at_price = variant.price;
                            // variant.price = productPrice;
                            variant.price = gbb.gbbKite.f.modifyPriceBasedOnType(variant.price, { discountValue, discountType });
                        }



                    }

                    // Return the modified product data
                    return productData;
                } catch (e) {
                    gbb.utility.debugConsole("error in modifyProductDataWithDiscountedPrice", e);

                    // Return the original product data

                    return productData;
                }
            },
            modifyPriceBasedOnType: function (originalPrice, discountSettings) {
                let { discountValue, discountType } = discountSettings;

                // Apply the discount to the price
                if (discountType === 'PERCENTAGE_DIS') {
                    return originalPrice * (1 - (discountValue / 100));
                } else if (discountType === 'FIXED_DIS') {
                    // multiply by 100 to convert to shopify api original way
                    discountValue = discountValue * 100;
                    return Math.max(originalPrice - discountValue, 0);
                } else {
                    // If the discount type is not recognized, return the original price
                    return originalPrice;
                }
            },

            overWriteDiscountMessaging: function() {
                try {
                    if (gbb.settings.discountsData.isKiteDiscountMessagingEnabled) {
                        gbb.settings.discountsData.rules = gbb.settings.discountsData.kiteDiscountMessaging.rules;
                        gbb.settings.discountsData.discountTextBody = gbb.settings.discountsData.kiteDiscountMessaging.discountTextBody;
                        gbb.settings.discountsData.discountTextForSuccess = gbb.settings.discountsData.kiteDiscountMessaging.discountTextForSuccess;
                    }    
                } catch (error) {
                     gbb.utility.debugConsole("error in overWriteDiscountMessaging", error);
                }
            },
            flattenProductsDataInDesiredFormat: function (discountsObj) {
                try {
                    // Initialize an empty array to hold the normalized products data
                    let flattenedData = [];

                    let productsContainerObj = discountsObj.disProducts;

                    let discountType = productsContainerObj.type;



                    // if the type is "ALL_PRODUCTS", all products are discounted
                    // if (discountType === 'ALL_PRODUCTS') {
                    //     return [];
                    // }

                    // if the type is "COLLECTIONS", check if the product's ID is in the selected collections
                    if (discountType === 'COLLECTIONS') {
                        // Flatten array of product objects in each collection into a single array of product IDs
                        let productsListFromAllCollections = productsContainerObj.collectionsData.map(collection => collection.productList).flat();

                        flattenedData = [...new Set(productsListFromAllCollections)]

                        // Filter products data based on collectionProductIds
                        // flattenedData = productsData.filter(product => collectionProductIds.includes(product.productId));
                    }

                    // if the type is "SELECTED_PRODUCTS", check if the product's ID is in the selected products
                    if (discountType === 'SELECTED_PRODUCTS') {
                        // create an array of product IDs
                        // let selectedProductIds = discountsObj.products.map(product => product.productId);

                        flattenedData = productsContainerObj.products
                        // Filter products data based on selectedProductIds
                        // flattenedData = productsData.filter(product => selectedProductIds.includes(product.productId));
                    }

                    // Return flattened data
                    return flattenedData;
                } catch (error) {
                    gbb.utility.debugError('Error occurred while flattening the products data: ', error);
                    return [];
                }
            },




            isDiscountToBeAppliedOnThisProduct: function (productData, discountObj) {
                try {

                    const discountType = discountObj.type;



                    // return false if none of the above conditions are met
                    return false;
                } catch (e) {
                    gbb.utility.debugConsole("error in isDiscountToBeAppliedOnThisProduct", e);
                }
            }
        }
    },

    gbbDiscountComponent: {
        state: {
            currentDiscountRule: {},
            discountCode: "",
            discountCodePrefix: "",
            isAtleastOneDiscountActive: false,
        },
        init: function (settings) {
            gbb.gbbDiscountComponent.events(settings)
            gbb.gbbDiscountComponent.render(settings)
        },
        render: function (settings) {
            const discountComponentHTML = gbb.gbbDiscountComponent.f.prepareProgressBar()
            //attach all this to the first component of gbbBodyWrapper
            // gbb.$(".gbbBodyWrapper").first().prepend(discountComponentHTML)
            // gbb.elements.cartPageWrapperV2.append(gbbDiscountComponent)
            // return discountComponentHTML;

            //find the gbbDiscountComponent on the page and insert it
            gbb.$(".gbbDiscountComponent").html(discountComponentHTML)
        },
        events: function (settings) {
        },
        f: {
            prepareProgressBar: function (settings) {
                settings = gbb.settings;

                let discountRules = settings.discountsData.rules;
                let isDiscountProgressBarEnabled = settings.discountsData.isDiscountProgressBarEnabled;

                if (isDiscountProgressBarEnabled == false) {
                    return;
                }

                let gbbDiscountComponent = gbb.$("<div>").addClass("gbbDiscountComponent")
                let gbbDiscountComponentTitle = gbb.$("<div>").addClass("gbbDiscountComponentTitle")

                // if(discountD)
                //sort rules by their rule amount in ascending order
                // discountRules = discountRules.sort(function (a, b) {
                //     return a.value - b.value
                // })

                let gbbDiscountComponentProgressBarContainer = gbb.$("<div>").addClass("gbbDiscountComponentProgressBarContainer")

                let gbbDiscountComponentProgressBar = gbb.$("<div>").addClass("gbbDiscountComponentProgressBar")

                let gbbDiscountComponentProgressBarRuleWrapper = gbb.$("<div>").addClass("gbbDiscountComponentProgressBarRuleWrapper")
                let gbbDiscountComponentProgressBarRule = gbb.$("<div>").addClass("gbbDiscountComponentProgressBarRule")
                let gbbDiscountComponentProgressBarRuleText = gbb.$("<span>").addClass("gbbDiscountComponentProgressBarRuleText")


                let maxDiscountValue = discountRules[discountRules.length - 1].amount;
                for (let i = 0; i < discountRules.length; i++) {
                    let rule = discountRules[i]
                    let ruleItemWrapper = gbbDiscountComponentProgressBarRule.clone()
                    let ruleItemText = gbbDiscountComponentProgressBarRuleText.clone()

                    let ruleOffer = gbb.utility.renderLanguageValue(eval(`gbb.settings.languageData.discountRules.rule${i + 1}.text`))
                    let ruleAmount = gbb.utility.renderLanguageValue(eval(`gbb.settings.languageData.discountRules.rule${i + 1}.amount`))
                    ruleItemText.text(ruleOffer + " " + ruleAmount)

                    // let starSvg = gbb.$("<svg>").addClass("gbbDiscountComponentProgressBarRuleStar").attr("src", CONSTANT_SVG_STAR)

                    // let starSvg = gbb.$("<div>").addClass("gbbStarSvgContainer").append(CONSTANT_SVG_STAR)
                    let starSvg = gbb.$("<div>").addClass("gbbStarSvgContainer").append(CONSTANT_SVG_CIRCLE)

                    //add data attribut to this starSvg of discount amount
                    starSvg.attr("data-discount-amount", rule.amount)
                    //.gbbStarSvgContainer polygon.svgStar
                    //the max discount gets the left: 100% and the rest get the left: with a calculated percentage
                    if (rule.amount == maxDiscountValue) {
                        ruleItemText.css("left", "95%")
                        starSvg.css("left", "97%")
                    } else {
                        starSvg.css("left", `${((rule.amount / maxDiscountValue) * 100) - parseInt(2)}%`)
                        ruleItemText.css("left", `${((rule.amount / maxDiscountValue) * 100) - parseInt(5)}%`)
                    }

                    //attach the rule to the progress bar
                    ruleItemWrapper.append(starSvg)
                    ruleItemWrapper.append(ruleItemText)
                    gbbDiscountComponentProgressBarRuleWrapper.append(ruleItemWrapper)

                }
                gbbDiscountComponentProgressBarContainer.append(gbbDiscountComponentProgressBar)
                gbbDiscountComponentProgressBarContainer.append(gbbDiscountComponentProgressBarRuleWrapper)

                gbbDiscountComponent.append(gbbDiscountComponentProgressBarContainer)

                return gbbDiscountComponent;
            },
            updateCurrentDiscountRule: async function () {
                try {

                    if (gbb.settings.discountsData.rules == undefined || gbb.settings.discountsData.isDiscountEnabled == false) {
                        return;
                    }
                    let currentDiscountMode = gbb.settings.discountsData.discountMode;

                    if (gbb.settings.discountsData.isKiteDiscountMessagingEnabled){
                        currentDiscountMode = gbb.settings.discountsData.kiteDiscountMessaging.discountMode
                    }

                    let currentDiscountRuleKeys = [];
                    //get all keys from gbb.gbbDiscountComponent.state.currentDiscountRule = {}
                    if (gbb.gbbDiscountComponent.state.currentDiscountRule) {
                        currentDiscountRuleKeys = Object.keys(gbb.gbbDiscountComponent.state.currentDiscountRule)
                    } else {
                        gbb.gbbDiscountComponent.state.currentDiscountRule = {}
                    }



                    let cartDataFromSessionStorage = gbb.gbbBrowser.getCartDataFromSessionStorage();

                    if (!cartDataFromSessionStorage) {
                        return;
                    }
                    //for loop for each box.  discountEligibleCartData(b)

                    let allBoxes = cartDataFromSessionStorage.boxes

                    let allBoxKeys = Object.keys(allBoxes)

                    for (let i = 0; i < currentDiscountRuleKeys.length; i++) {
                        let boxKey = currentDiscountRuleKeys[i];
                        if (allBoxKeys.includes(boxKey) == false) {
                            delete gbb.gbbDiscountComponent.state.currentDiscountRule[boxKey];
                        }
                    }


                    Object.keys(allBoxes).forEach(function (boxKey) {


                        let box = allBoxes[boxKey];

                        let cartData = gbb.gbbDiscountComponent.f.discountEligibleCartData(box);
                        const cartQuantity = cartData.item_count;

                        // let currentCartValue = gbb.state.giftBoxCartData.total_price / 100
                        let currentCartValue = cartData.total_price / 100;

                        let activeCurrencyRate = gbb.utility.getActiveCurrencyRate();

                        let totalCartValue = currentCartValue / activeCurrencyRate;

                        let applicableRule;
                        let applicableDiscountValue = 0;

                        const rulesArr = JSON.parse(JSON.stringify(gbb.settings.discountsData.rules));
                        // const rulesArr = (gbb.settings.discountsData.rules)
                        if (currentDiscountMode != "FIXED_BUNDLE_PRICE") {
                            for (let i = 0; i < rulesArr.length; i++) {
                                if (rulesArr[i].type == "quantity") {
                                    if (cartQuantity >= rulesArr[i].value) {
                                        let curDiscountValue;
                                        if (currentDiscountMode == "PERCENTAGE") {
                                            curDiscountValue = rulesArr[i].discountValue * (totalCartValue / 100);
                                        } else {
                                            curDiscountValue = rulesArr[i].discountValue;
                                        }
                                        // if (!applicableRule || applicableDiscountValue < curDiscountValue) {
                                        applicableRule = rulesArr[i];
                                        applicableDiscountValue = curDiscountValue;
                                        // }
                                    }
                                } else if (rulesArr[i].type == "amount") {
                                    if (totalCartValue >= rulesArr[i].value) {
                                        let curDiscountValue;
                                        if (currentDiscountMode == "PERCENTAGE") {
                                            curDiscountValue = rulesArr[i].discountValue * (totalCartValue / 100);
                                        } else {
                                            curDiscountValue = rulesArr[i].discountValue;
                                        }
                                        // if (!applicableRule || applicableDiscountValue < curDiscountValue) {
                                        applicableRule = rulesArr[i];
                                        applicableDiscountValue = curDiscountValue;
                                        // }
                                    }
                                }
                            }
                            if (!applicableRule) {
                                applicableRule = null;
                            }
                        } else if (currentDiscountMode == "FIXED_BUNDLE_PRICE") {
                            for (let i = 0; i < rulesArr.length; i++) {
                                //store discount only if cartQuantity is equal to the rule value
                                if (cartQuantity == rulesArr[i].value && totalCartValue >= rulesArr[i].discountValue) {
                                    applicableRule = rulesArr[i];
                                    applicableDiscountValue = rulesArr[i].discountValue;
                                }
                            }
                            if (!applicableRule) {
                                applicableRule = null;
                            }
                        }

                        const cartValue = totalCartValue;

                        //   gbb.utility.debugConsole("cartValue= ", cartValue);

                        //get the last rule from the eligible rules
                        //   gbb.utility.debugConsole("applicable rule: ", applicableRule);
                        if (!applicableRule) {
                            gbb.gbbDiscountComponent.state.currentDiscountRule[box.boxId] = null;
                        } else {
                            gbb.gbbDiscountComponent.state.currentDiscountRule[box.boxId] = applicableRule;
                        }
                    });


                    //check all the objects in the currentDiscountRule object and see if they are all null
                    let isDiscountsExist = false;
                    //use a for loop to check if any of the values are not null
                    for (let key in gbb.gbbDiscountComponent.state.currentDiscountRule) {
                        if (gbb.gbbDiscountComponent.state.currentDiscountRule[key] != null) {
                            gbb.gbbDiscountComponent.state.discountCodePrefix = gbb.gbbDiscountComponent.state.currentDiscountRule[key].discountCodePrefix;
                            isDiscountsExist = true;
                            break;
                        }
                    }

                    gbb.gbbDiscountComponent.state.isAtleastOneDiscountActive = isDiscountsExist;

                } catch (e) {
                    gbb.utility.debugError("error in updateCurrentDiscountRule: ", e)
                    gbb.utility.triggerSlackNotification(e)
                }
            },
            discountEligibleCartData: function (cartData) {
                try {

                    // let gbbPagesWhereDiscountIsDisabled = ["addProductsPage2"];
                    // let gbbPagesWhereDiscountIsDisabled = [];
                    //get the current cart items
                    // let cartData = {...gbb.state.giftBoxCartData};
                    // let cartData = gbb.gbbBrowser.getCartDataFromSessionStorage()
                    // let items = gbb.gbbBrowser.getProductsFromAllBoxesFromCart()

                    // cartData.items = items

                    // cartData  = gbb.utility.multiplyByBundleQuantity(cartData)


                    //blacklist a bunch of products which should be filtered out when calculating the discount

                    const messageProductId = gbb.settings?.giftMessage?.messageProduct?.product?.id || null;

                    // const greetingcardProductId = gbb?.settings?.greetingCard?.greetingCardProducts.length ? gbb?.settings?.greetingCard?.greetingCardProducts[0]?.productId : null;

                    // if the length is more than 1, then there are multiple greeting cards
                    // MAKE A LIST OF ALL THE GREETING CARDS

                    let productIdstoFilterForGreetingCards = [];
                    if (gbb?.settings?.greetingCard?.greetingCardProducts.length > 0) {
                        for (let i = 0; i < gbb?.settings?.greetingCard?.greetingCardProducts.length; i++) {
                            productIdstoFilterForGreetingCards.push(gbb?.settings?.greetingCard?.greetingCardProducts[i]?.productId)
                        }
                    }



                    let quantityToRemove = 0;
                    let blackListedIds = [];
                    let blackListedItemsTotalPrice = 0;

                    for (let i = 0; i < cartData.items.length; i++) {
                        if (cartData.items[i].price == 0) {
                            blackListedIds.push(cartData.items[i].product_id)
                        }
                        // if (gbbPagesWhereDiscountIsDisabled.includes(cartData.items[i].properties._boxProduct)) {
                        //     blackListedIds.push(cartData.items[i].product_id)
                        // }
                    }

                    // push items with value zero to the blacklist

                    if (messageProductId) {
                        blackListedIds.push(messageProductId);
                    }
                    if (productIdstoFilterForGreetingCards.length > 0) {
                        productIdstoFilterForGreetingCards.forEach(id => {
                            blackListedIds.push(id);
                        })
                        // blackListedIds.push(greetingcardProductId);
                    }

                    let newCartValue = 0;

                    // each blackListedId should be a number
                    blackListedIds = blackListedIds.map(id => parseInt(id))

                    let blackListedBoxProductKeys = ['addonProduct']  
                    let applicableProducts = cartData.items.map((item, index) => {
                        item.product_id = parseInt(item.product_id);
                        let isProductIdBlackListed = blackListedIds.includes(item?.product_id)
                        let isProductHavingBlackListedProperty = blackListedBoxProductKeys.includes(item?.properties?._boxProduct)

                        if(isProductIdBlackListed || isProductHavingBlackListedProperty){
                            if (item.price > 0 && item.quantity > 0) {
                                blackListedItemsTotalPrice = blackListedItemsTotalPrice + (item.price * item.quantity)
                            }
                            quantityToRemove = item.quantity + quantityToRemove;
                            return;
                        }
                        else{
                            //new cartValue
                            newCartValue = newCartValue + (item.price * item.quantity)
                            return item;
                        } 
                    })

                    //filter out the undefined values
                    applicableProducts = applicableProducts.filter(item => item != undefined)

                    cartData.blackListedItemsTotalPrice = blackListedItemsTotalPrice;
                    cartData.items = applicableProducts;
                    cartData.total_price = newCartValue
                    cartData.item_count = cartData.item_count - quantityToRemove
                    // gbb.utility.debugConsole("applicableProducts quantity ", cartData.item_count)
                    return cartData

                } catch (e) {
                    gbb.utility.debugError("error in discountEligibleCartData: ", e)
                    return
                }
            },
            calculateNextApplicableDiscountRuleForFixedBundlePrice: function () {
                try {
                    let result = {
                        nextDiscountRuleForFBP: undefined,
                        isFirstDiscountRule: false,
                        nextDiscountRuleIndexForFBP: null
                    }
                    // let allDiscountsData = {...gbb?.settings?.discountsData} || {};
                    let allDiscountsData = JSON.parse(JSON.stringify(gbb?.settings?.discountsData)) || {};

                    // let discountRules = [...gbb?.settings?.discountsData?.rules] || [];
                    let discountRules = JSON.parse(JSON.stringify(gbb?.settings?.discountsData?.rules)) || [];

                    // allDiscountsData?.rules now here go through the rules and convert the discountValue to currency of the customer
                    // allDiscountsData.rules = allDiscountsData.rules.map((rule) => {
                    //     rule.value = gbb.utility.convertFromStoreCurrencyToCustomer(rule.value);
                    //     return rule;
                    // })

                    let boxItemsCount = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage();
                    boxItemsCount = boxItemsCount.item_count || 0;
                    let noOfRulesCleared = 0
                    if (boxItemsCount == 0) {
                        result.nextDiscountRuleForFBP = undefined;
                    } else {
                        for (let i = 0; i < discountRules.length; i++) {
                            let currentDiscountRuleValue = parseInt(discountRules[i].value)
                            if (boxItemsCount >= currentDiscountRuleValue) {
                                noOfRulesCleared += 1
                            }
                            if (currentDiscountRuleValue > boxItemsCount) {
                                result.nextDiscountRuleForFBP = discountRules[i];
                                if (i == 0) {
                                    result.isFirstDiscountRule = true;
                                } else {
                                    result.isFirstDiscountRule = false;
                                }
                                break;
                            }
                        }
                    }
                    if (result.isFirstDiscountRule || !result.nextDiscountRuleForFBP) {
                        result.nextDiscountRuleForFBP = allDiscountsData?.rules[0];
                        result.nextDiscountRuleIndexForFBP = 1
                    } else {
                        for (let i = 0; i < allDiscountsData?.rules?.length; i++) {
                            let currRule = allDiscountsData?.rules[i];
                            if (result.nextDiscountRuleForFBP && result.nextDiscountRuleForFBP.discountValue == currRule.discountValue) {
                                // if(i != allDiscountsData?.rules?.length - 1) {
                                result.nextDiscountRuleForFBP = allDiscountsData?.rules[i] //? allDiscountsData?.rules[i+1] : allDiscountsData?.rules[i];
                                result.nextDiscountRuleIndexForFBP = i; //allDiscountsData?.rules[i+1] ? i+1 : i;
                                // } else {
                                // result.nextDiscountRuleForFBP = undefined;
                                // }
                                break;
                            }
                        }
                        result.nextDiscountRuleIndexForFBP += 1;
                    }
                    if (noOfRulesCleared >= discountRules.length) {
                        result.nextDiscountRuleForFBP = undefined;
                        result.nextDiscountRuleIndexForFBP = discountRules.length;
                        result.isAllRuleSatisfied = true
                    }
                    return result;
                } catch (err) {
                    gbb.utility.debugError(err + "inside calculateCurrentDiscountRuleForFixedBundlePrice");
                }
            },
            calculateDiscountProgressBarValue: function () {
                try {
                    let { item_count: totalQuantity, total_price: totalCartValue } = gbb.state.giftBoxCartData
                    let { rules: discountRules } = JSON.parse(JSON.stringify(gbb.settings.discountsData))
                    totalCartValue = totalCartValue / 100
                    let discountRulesType = discountRules[0].type
                    let calculateDiscountOnValue = discountRulesType == 'amount' ? totalCartValue : totalQuantity
                    if (discountRulesType == 'amount') {
                        discountRules = discountRules.map((rule) => {
                            rule.value = gbb.utility.convertFromStoreCurrencyToCustomer(rule.value)
                            return rule
                        })
                    }
                    let highestDiscountValue = 0
                    discountRules.forEach((rule) => highestDiscountValue = Math.max(highestDiscountValue, parseInt(rule.value)))
                    let progressPercentage = (calculateDiscountOnValue / highestDiscountValue) * 100
                    return progressPercentage
                } catch (error) {
                    gbb.utility.debugError("error in calculateDiscountProgressBarValue", error);
                }
            },
            OldcalculateDiscountProgressBarValue: function () {
                // this function can return value when you have mixed discount type for eg: mix type of discount amount and quantity
                try {
                    let { item_count: totalQuantity, total_price: totalCartValue } = gbb.state.giftBoxCartData
                    let { rules: discountRules } = gbb.settings.discountsData
                    totalCartValue = totalCartValue / 100
                    let lastClearedRuleNo = 0


                    discountRules.forEach((rule, idx) => {
                        let searchDb = rule.type == 'amount' ? totalCartValue : totalQuantity
                        if (searchDb >= Number(rule.value)) {
                            lastClearedRuleNo = idx + 1
                            // LastClearedRuleNo is nothing but the index of the last discount rule that was cleared -> this will help us to calculate the distance between the last cleared rule and the next rule
                        }
                    });

                    let nextRule = discountRules[lastClearedRuleNo]// ? discountRules[lastClearedRuleNo + 1] : undefined
                    let nextRuleProgress = 0

                    if (nextRule) {
                        let nextRuleValue = Number(nextRule.value)
                        let valeOfEachShare = 100 / discountRules.length // valueOfEachShare is the percentage of the progress bar that each rule will take -> for Eg : 5 rules then each rule will take 20% -> 100/5 = 20
                        let searchDb = nextRule.type == 'amount' ? totalCartValue : totalQuantity
                        nextRuleProgress = (searchDb / nextRuleValue) * valeOfEachShare // using this formulate we calculate the progress of the next rule
                    }

                    let progressPercentage = (lastClearedRuleNo * 100) / discountRules.length;
                    // first calculate the progress of the last cleared rule and then add the progress of the next rule for Eg: lastClearedRuleNo 3 and we have 4 discount rules -> 300/4 = 75% -> now we add the progress of the next rule to this 75% -> 75% + 10% = 85%
                    progressPercentage += nextRuleProgress
                    return progressPercentage
                } catch (error) {
                    gbb.utility.debugError("error in calculateDiscountProgressBarValue", error);
                }
            },
            isEveryDiscountRulehaveSameType: function () {
                try {
                    let discountRulesArray = gbb.settings.discountsData.rules || []
                    if (discountRulesArray.length == 0) return false
                    for (let i = 0; i < discountRulesArray.length; i++) {
                        if (discountRulesArray[i].type != discountRulesArray[0].type) {
                            return false
                        }
                    }
                    return true
                } catch (error) {
                    gbb.utility.debugError("error in isEveryDiscountRulehaveSameType", error);
                }
            },
            discountStatusFooterHTML: function () {
                try {
                    let gbbDiscountFooterHTML = gbb.$("<div>").addClass('gbbDiscountFooterHTML');
                    let gbbDiscountMessage = gbb.$("<div>").addClass('gbbDiscountMessage');
                    let renderAddonsMessaging = gbb.gbbAddonProducts.f.checkIfAddonsMessagingNeeded()
                    if (renderAddonsMessaging) {
                        let messageToDisplay = gbb.gbbAddonProducts.f.getAddonsMessageToRender()
                        gbbDiscountMessage.html(messageToDisplay)
                        gbbDiscountFooterHTML.append(gbbDiscountMessage)
                    } else {
                        let currentDiscountRuleObj = JSON.parse(JSON.stringify(gbb.gbbDiscountComponent.state.currentDiscountRule[gbb.state.activeBoxId]));
                        // let allDiscountsData = {...gbb?.settings?.discountsData} || {};
                        let allDiscountsData = JSON.parse(JSON.stringify(gbb?.settings?.discountsData)) || {};
                        let nextDiscountRule;
                        let nextDiscountRuleIndex;
                        let discountMessageToBeShown = "";
                        let isAllRuleSatisfied = false // this variable will keep track if user has cleared all the discount rules or not / based on this we will show the discount success message 

                        let currentDiscountMode = gbb.settings.discountsData.discountMode;


                        if (gbb.settings.discountsData.isKiteDiscountMessagingEnabled) {
                            currentDiscountMode = gbb.settings.discountsData.kiteDiscountMessaging.discountMode
                        }

                        //the goal is to find next applicable discoune
                        //for FBP we need to get the currentDiscountRule that can be applied
                        if (currentDiscountMode == "FIXED_BUNDLE_PRICE") {
                            let result = gbb.gbbDiscountComponent.f.calculateNextApplicableDiscountRuleForFixedBundlePrice();
                            nextDiscountRule = result.nextDiscountRuleForFBP;
                            nextDiscountRuleIndex = result.nextDiscountRuleIndexForFBP;
                            if (result.isAllRuleSatisfied) {
                                isAllRuleSatisfied = true
                            }
                        } else {
                            //the purpose of nextDiscountRuleIndex is to use this to show the respective message on ui

                            if (!currentDiscountRuleObj) {
                                nextDiscountRule = allDiscountsData?.rules[0];
                                nextDiscountRuleIndex = 1
                            } else {
                                //if it's not the first rule then we iterate through all the rules and check for the next applicable discount rule
                                for (let i = 0; i < allDiscountsData?.rules?.length; i++) {
                                    let currRule = allDiscountsData?.rules[i];
                                    //if currentDiscountRuleObj discount value that is applied is equal to the currRule (rule that is currently)
                                    //being iterated then we need to get the rule right after that -> i+1
                                    if (currentDiscountRuleObj && currentDiscountRuleObj.discountValue == currRule.discountValue && i + 1 <= allDiscountsData?.rules?.length) {
                                        //if the currentDiscountRuleObj is the maximum discount rule that's there
                                        //then we don't do anything, otherwise:
                                        if (i != allDiscountsData?.rules?.length - 1) {
                                            nextDiscountRule = allDiscountsData?.rules[i + 1] //? allDiscountsData?.rules[i+1] : allDiscountsData?.rules[i];
                                            nextDiscountRuleIndex = i + 1; //allDiscountsData?.rules[i+1] ? i+1 : i;
                                            break;
                                        } else {
                                            isAllRuleSatisfied = true
                                            nextDiscountRule = undefined;
                                        }
                                        break;
                                    }
                                }
                                nextDiscountRuleIndex = nextDiscountRuleIndex + 1;
                            }
                        }

                        if (nextDiscountRule?.discountValue && currentDiscountMode == "FIXED_BUNDLE_PRICE") {
                            discountMessageToBeShown = gbb.settings.discountsData.discountTextBody.fixedBundlePrice;
                            nextDiscountRule.discountValue = gbb.utility.convertFromStoreCurrencyToCustomer(nextDiscountRule.discountValue);
                            //round off to the ceiling
                            // nextDiscountRule.discountValue = Math.ceil(nextDiscountRule.discountValue);
                        } else {
                            if (nextDiscountRule && nextDiscountRule?.type == "amount") {
                                nextDiscountRule.value = gbb.utility.convertFromStoreCurrencyToCustomer(nextDiscountRule?.value);
                                // nextDiscountRule.value = Math.ceil(nextDiscountRule.value);
                            }

                            if (nextDiscountRule && currentDiscountMode == "FIXED") {
                                nextDiscountRule.discountValue = gbb.utility.convertFromStoreCurrencyToCustomer(nextDiscountRule?.discountValue);
                                // nextDiscountRule.discountValue = Math.ceil(nextDiscountRule.discountValue);
                            }
                            discountMessageToBeShown = gbb.settings.discountsData.discountTextBody.percentageAndFixed;
                        }
                        discountMessageToBeShown = nextDiscountRuleIndex ? discountMessageToBeShown["rule" + nextDiscountRuleIndex]["text"] : '';

                        let message = ''
                        if (nextDiscountRule && discountMessageToBeShown) {
                            message = gbb.gbbDiscountComponent.f.replaceDiscountVariables(discountMessageToBeShown, nextDiscountRule);
                        }
                        // gbbDiscountMessage.text(message);
                        // whenever user exhausts all the discount rules -> we store undefined in the nextDiscountRule variable till now so to show the success message we need to check if the nextDiscountRule is undefined and all the rules are satisfied
                        if (!nextDiscountRule && isAllRuleSatisfied) {
                            message = gbb.settings.discountsData?.discountTextForSuccess?.value;
                        }
                        let doesThisContainNextLineKeyword = true
                        if (message && (doesThisContainNextLineKeyword)) {
                            gbbDiscountMessage.html(message);
                        } else {
                            gbbDiscountMessage.text(message);
                        }

                        gbbDiscountMessage.css("color", gbb.settings?.pageCustomizationData?.cartFooter?.cartFooterDiscountTextColor || "black")


                        let gbbDiscountMessageContainer = gbb.$('<div>').addClass('gbbDiscountMessageContainer')

                        gbbDiscountMessageContainer.append(gbbDiscountMessage)
                        gbbDiscountFooterHTML.append(gbbDiscountMessageContainer)
                        let isEveryDiscountRulehaveSameType = gbb.gbbDiscountComponent.f.isEveryDiscountRulehaveSameType();
                        if (gbb.settings?.discountsData?.isDiscountProgressBarEnabled && isEveryDiscountRulehaveSameType) {
                            let filledPercentage = gbb.gbbDiscountComponent.f.calculateDiscountProgressBarValue();// get the filled percentage value for the progress bar
                            let progressBarConfigOptions = {
                                filledColor: gbb.settings.pageCustomizationData?.cartFooter?.cartFooterDiscountProgressBarFilledColor || '#4caf50',
                                emptyColor: gbb.settings.pageCustomizationData?.cartFooter?.cartFooterDiscountProgressBarEmptyColor || '#C1E7C5',
                                filledPercentage: filledPercentage || 0
                            }
                            let progressBarHTML = gbb.gbbAddProductsPage.f.renderProgressBarHTML(progressBarConfigOptions)
                            gbbDiscountFooterHTML.append(progressBarHTML)
                        }

                    }
                    return gbbDiscountFooterHTML;
                } catch (err) {
                    gbb.utility.debugError(err + "inside discountStatusFooterHTML");
                }
            },
            replaceDiscountVariables: function (message, nextDiscountRule) {
                if (nextDiscountRule) {
                    let boxCartData = gbb.gbbBrowser.getRelevantBoxDataFromSessionStorage();
                    let discountConditionDiff;
                    let discountUnit;
                    let discountValue;
                    let currentCartValue;
                    let discountValueUnit;
                    let currentDiscountMode = gbb.settings.discountsData.discountMode;


                    if (gbb.settings.discountsData.isKiteDiscountMessagingEnabled){
                        currentDiscountMode = gbb.settings.discountsData.kiteDiscountMessaging.discountMode
                    }

                    if (nextDiscountRule.type == "amount") {
                        currentCartValue = parseFloat(boxCartData?.total_price / 100).toFixed(2);
                        currentCartValue = Math.round(currentCartValue);
                        discountUnit = gbb.utility.getCurrencySymbol();
                        // let activeCurrencyRate = gbb.utility.getActiveCurrencyRate();
                        // currentCartValue = currentCartValue / activeCurrencyRate;
                    } else if (nextDiscountRule.type == "quantity") {
                        // currentCartValue = boxCartData.item_count || 0;
                        let cartValue = JSON.parse(JSON.stringify(boxCartData.items));
                        //find cart item only that have more than 0 price
                        cartValue = boxCartData.items.filter(item => item.price > 0);
                        // 
                        // get me cartValue, boxCartData
                        currentCartValue = 0;
                        cartValue.forEach(item => {
                            currentCartValue = currentCartValue + item.quantity;
                        })
                        discountUnit = " product(s)";
                        if (parseInt(currentCartValue) >= parseInt(nextDiscountRule.value)) {
                            return "";
                        }
                    }

                    if (currentDiscountMode == "FIXED_BUNDLE_PRICE") {
                        discountUnit = " product(s)";
                        discountValueUnit = gbb.utility.getCurrencySymbol();
                        // discountValueUnit = gbb.utility.getStoreCurrencySymbol();
                    }

                    let isDiscountFromKiteAndPercentage = false;
                    let isDiscountFromKiteAndFixed = false;

                    if (gbb.settings.discountsData.isKiteIntegrationEnabled) {
                        const discounts = gbb.settings.gbbKiteData?.discounts;
                        if (discounts && discounts.length > 0) {
                            const fixedDiscountsType = ["FIXED_TOTAL", "FIXED_DIS"];
                            const percentageDiscountsType = ["PERCENTAGE_DIS"];
                            if (fixedDiscountsType.includes(discounts[0].disValueType)) {
                                isDiscountFromKiteAndFixed = true;
                            } else if (percentageDiscountsType.includes(discounts[0].disValueType)) {
                                isDiscountFromKiteAndPercentage = true;
                            }
                        }
                    }


                    if (currentDiscountMode == "FIXED" || isDiscountFromKiteAndFixed) {
                        discountValueUnit = gbb.utility.getCurrencySymbol();
                        // discountValueUnit = gbb.utility.getStoreCurrencySymbol();
                    } else if (currentDiscountMode == "PERCENTAGE" || isDiscountFromKiteAndPercentage) {
                        discountValueUnit = "%"
                    }



                    discountConditionDiff = Math.round(nextDiscountRule.value) - Math.round(currentCartValue); //include item that was just added
                    discountValue = nextDiscountRule.discountValue;

                    let variableValues = {
                        discountConditionDiff,
                        discountUnit,
                        discountValue,
                        discountValueUnit
                    }

                    let variables;
                    if (currentDiscountMode == "PERCENTAGE") {
                        variables = ["discountConditionDiff", "discountUnit", "discountValue", "discountValueUnit"]
                    } else {
                        variables = ["discountConditionDiff", "discountUnit", "discountValueUnit", "discountValue"]
                    }

                    for (let i = 0; i < variables.length; i++) {
                        let VariableName = "##" + variables[i] + "##";
                        let value = variableValues[variables[i]];
                        message = message.replace(new RegExp(`${VariableName}`, 'g'), value);
                    }
                } else {
                    message = "";
                }
                return message;
            },

        }
    },
    gbbVideoMsg: {
        init: function (settings, parent, element) {
            gbb.gbbVideoMsg.initialize(settings, parent, element)
        },
        state: {
            elements: {},
            uploadedVideoId: null,
            recordingTimeMS: 60000,
            recordingTime: "1:00",
            recordedBlob: "",
            mediaRecorder: null,
            interval: undefined,
            emailId: null,
            gbbVideoMsgPlayerWrapper: null,
        },
        initialize: function (settings, parent, element) {
            // let productHandle = gbb.f.getProductPageHandle(settings)
            gbb.utility.debugConsole("videoMesageInitialize");
            //todo
            if (true || gbb.settings.videoMessage.isVideoMessageEnabled) {
                gbb.gbbVideoMsg.f.registerEvents()
                gbb.gbbVideoMsg.f.prepareVideoMsgPlayer(element)
                // // let oneClickUpsellProductPageHTML = gbb.gbbOneClickUpsell.f.prepareUI(settings, variantListToBeShownOnProductPage, parent)
                // let giftMessageProductPageHTML = gbb.gbbMessage.f.prepareUI(settings, productHandle, parent)
                // gbb.gbbMessage.f.insertIntoProductPageWrapper(settings, giftMessageProductPageHTML)
                // gbb.utility.overWriteBuyNowBtn()
                // gbb.state.isOverWriteBuyNowBtnTriggered = true
            }

        },
        f: {
            registerEvents: function () {
                gbb.$(document).on("click", ".gbbVideoMsgButton", gbb.gbbVideoMsg.actions.gbbVideoMsgButton)
            },
            prepareVideoMsgPlayer: function (element) {

                let gbbVideoMsgPlayerWrapper = gbb.$("<div>").addClass("gbbVideoMsgPlayerWrapper");

                gbb.gbbVideoMsg.state.gbbVideoMsgPlayerWrapper = gbbVideoMsgPlayerWrapper;
                let gbbRecorder = gbb.$("<div>").addClass("gbbRecorder")
                gbb.utility.debugConsole("prepareVideoMsgPlayer");
                let gbbRecorderCloseBtn = gbb.$("<button>").addClass("gbbRecorderCloseBtn").on("click", function (e) { gbb.gbbVideoMsg.f.clickClose(e) })

                //: change s3 url
                let gbbRecorderCloseBtnImg = gbb.$("<img>").attr("src", "https://db07ji0eqime4.cloudfront.net/public/videoMessage/close-video.svg")
                gbbRecorderCloseBtn.append(gbbRecorderCloseBtnImg)

                //: change s3 url
                let gbbRecord = gbb.$("<div>").addClass("gbbRecord")
                let gbbVideoPlayer = gbb.$("<video>").addClass("gbbVideoPlayer")
                    .attr("autoplay", true)
                    .prop("muted", true)
                    .attr("poster", "https://db07ji0eqime4.cloudfront.net/public/videoMessage/free-video.jpg")
                let gbbPermissionDenied = gbb.$("<div>").addClass("gbbPermissionDenied gbbVideoPlayerHide").text(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage.permissionDenied))
                let gbbVideoPlayerStatus = gbb.$("<div>").addClass("gbbVideoPlayerStatus").html(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage.pressToRecord))

                //let gbbVideoPlayerEmptyPTag = gbb.$("<p>");

                let gbbVideoPlayerStartBtn = gbb.$("<button>").addClass("gbbVideoPlayerStartBtn").on("click", function (e) { gbb.gbbVideoMsg.f.clickStart(e) })
                let gbbVideoPlayerRedDot = gbb.$("<div><p></p></div>").addClass("gbbVideoPlayerRedDot")
                //gbbVideoPlayerRedDot.append(gbbVideoPlayerEmptyPTag);
                gbbVideoPlayerStartBtn.append(gbbVideoPlayerRedDot)

                let gbbVideoPlayerStopBtn = gbb.$("<button>").addClass("gbbVideoPlayerStopBtn").on("click", function (e) { gbb.gbbVideoMsg.f.clickStop(e) })
                let gbbVideoPlayerRedSquare = gbb.$("<div><p></p></div>").addClass("gbbVideoPlayerRedSquare")
                //gbbVideoPlayerRedSquare.append(gbbVideoPlayerEmptyPTag);
                gbbVideoPlayerStopBtn.append(gbbVideoPlayerRedSquare)


                let gbbVideoPlayerTimeLeft = gbb.$("<div>").addClass("gbbVideoPlayerTimeLeft gbbVideoPlayerHide")

                gbbRecord.append(gbbVideoPlayer)
                gbbRecord.append(gbbPermissionDenied)
                gbbRecord.append(gbbVideoPlayerStatus)
                gbbRecord.append(gbbVideoPlayerStartBtn)
                gbbRecord.append(gbbVideoPlayerStopBtn)
                gbbRecord.append(gbbVideoPlayerTimeLeft)


                let gbbRecorded = gbb.$("<div>").addClass("gbbRecorded")

                let gbbVideoPlayerRecording = gbb.$("<video>").addClass("gbbVideoPlayerRecording")
                    .attr("preload", "none")
                    .attr("poster", "https://db07ji0eqime4.cloudfront.net/public/videoMessage/free-video.jpg")

                let gbbLoadingHeading = gbb.$("<div>").addClass("gbbLoadingHeading gbbVideoPlayerHide").html(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage.loading))
                let gbbUploadingVideoHeading = gbb.$("<div>").addClass("gbbUploadingVideoHeading gbbVideoPlayerHide").html(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage.uploading))

                let gbbVideoPlayerControls = gbb.$("<div>").addClass("gbbVideoPlayerControls")

                let gbbVideoPlayerControlsAcceptBtnDiv = gbb.$("<div>").addClass("gbbVideoPlayerControlsAcceptBtnDiv");

                let gbbVideoPlayerControlsAcceptBtnDivInfo = gbb.$("<p>").addClass("gbbVideoPlayerControlsBtnDivInfo").html(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage.startUploadText));

                gbbVideoPlayerControlsAcceptBtnDiv.append(gbbVideoPlayerControlsAcceptBtnDivInfo);

                let gbbVideoPlayerControlsAcceptBtn = gbb.$("<button>").addClass("gbbVideoPlayerControlsAcceptBtn").on("click", function (e) { gbb.gbbVideoMsg.f.clickAccept(e) })

                //CHORE : change s3 url
                let gbbVideoPlayerControlsAcceptBtnImg = gbb.$("<img>").addClass("gbbVideoPlayerControlsAcceptBtnImg")
                    .attr("src", "https://db07ji0eqime4.cloudfront.net/public/videoMessage/confirm-video.png")
                gbbVideoPlayerControlsAcceptBtn.append(gbbVideoPlayerControlsAcceptBtnImg)
                gbbVideoPlayerControlsAcceptBtnDiv.append(gbbVideoPlayerControlsAcceptBtn);



                let gbbVideoPlayerControlsPlayBtnDiv = gbb.$("<div>").addClass("gbbVideoPlayerControlsPlayBtnDiv");

                let gbbVideoPlayerControlsPlayBtnDivInfo = gbb.$("<p>").addClass("gbbVideoPlayerControlsBtnDivInfo").html(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage.playText));

                gbbVideoPlayerControlsPlayBtnDiv.append(gbbVideoPlayerControlsPlayBtnDivInfo);

                let gbbVideoPlayerControlsPlayBtn = gbb.$("<button>").addClass("gbbVideoPlayerControlsPlayBtn").on("click", function (e) { gbb.gbbVideoMsg.f.clickPlay(e) })
                let gbbVideoPlayerControlsPlayBtnImg = gbb.$("<img>").addClass("gbbVideoPlayerControlsPlayBtnImg")
                    .attr("src", "https://db07ji0eqime4.cloudfront.net/public/videoMessage/play-video.png")
                gbbVideoPlayerControlsPlayBtn.append(gbbVideoPlayerControlsPlayBtnImg)
                gbbVideoPlayerControlsPlayBtnDiv.append(gbbVideoPlayerControlsPlayBtn);


                let gbbVideoPlayerControlsReStartBtnDiv = gbb.$("<div>").addClass("gbbVideoPlayerControlsReStartBtnDiv");

                let gbbVideoPlayerControlsReStartBtnDivInfo = gbb.$("<p>").addClass("gbbVideoPlayerControlsBtnDivInfo").html(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage.reRecordVideoText));

                gbbVideoPlayerControlsReStartBtnDiv.append(gbbVideoPlayerControlsReStartBtnDivInfo);

                let gbbVideoPlayerControlsReStartBtn = gbb.$("<button>").addClass("gbbVideoPlayerControlsReStartBtn").on("click", function (e) { gbb.gbbVideoMsg.f.clickReStart(e) })
                let gbbVideoPlayerControlsReStartBtnImg = gbb.$("<img>").addClass("gbbVideoPlayerControlsReStartBtnImg")
                    .attr("src", "https://db07ji0eqime4.cloudfront.net/public/videoMessage/redo-video.png")
                gbbVideoPlayerControlsReStartBtn.append(gbbVideoPlayerControlsReStartBtnImg)
                gbbVideoPlayerControlsReStartBtnDiv.append(gbbVideoPlayerControlsReStartBtn);

                gbbVideoPlayerControls.append(gbbVideoPlayerControlsReStartBtnDiv)
                gbbVideoPlayerControls.append(gbbVideoPlayerControlsPlayBtnDiv)
                gbbVideoPlayerControls.append(gbbVideoPlayerControlsAcceptBtnDiv)


                gbbRecorded.append(gbbVideoPlayerRecording)
                gbbRecorded.append(gbbLoadingHeading)
                gbbRecorded.append(gbbUploadingVideoHeading)
                gbbRecorded.append(gbbVideoPlayerControls)


                gbbRecorder.append(gbbRecorderCloseBtn)
                gbbRecorder.append(gbbRecord)
                gbbRecorder.append(gbbRecorded)

                gbbVideoMsgPlayerWrapper.append(gbbRecorder)
                element.after(gbbVideoMsgPlayerWrapper);
                //attach it to the body
                // gbb.$("body").append(gbbVideoMsgPlayerWrapper);
                // .after(gbbVideoMsgPlayerWrapper);

                gbb.gbbVideoMsg.state.elements.gbbRecorder = gbbRecorder
                gbb.gbbVideoMsg.state.elements.gbbRecord = gbbRecord
                gbb.gbbVideoMsg.state.elements.gbbRecorded = gbbRecorded
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayer = gbbVideoPlayer
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerStartBtn = gbbVideoPlayerStartBtn
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerStopBtn = gbbVideoPlayerStopBtn
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerControlsReStartBtn = gbbVideoPlayerControlsReStartBtn
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerControlsPlayBtn = gbbVideoPlayerControlsPlayBtn
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerRecording = gbbVideoPlayerRecording
                gbb.gbbVideoMsg.state.elements.gbbRecorderCloseBtn = gbbRecorderCloseBtn
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerControlsAcceptBtn = gbbVideoPlayerControlsAcceptBtn
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerControls = gbbVideoPlayerControls
                gbb.gbbVideoMsg.state.elements.gbbLoadingHeading = gbbLoadingHeading
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerTimeLeft = gbbVideoPlayerTimeLeft
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerStatus = gbbVideoPlayerStatus
                gbb.gbbVideoMsg.state.elements.gbbPermissionDenied = gbbPermissionDenied
                gbb.gbbVideoMsg.state.elements.gbbUploadingVideoHeading = gbbUploadingVideoHeading


            },
            createRecorder: function () {
                gbb.gbbVideoMsg.state.elements.gbbRecorder.removeClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbRecord.removeClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerStartBtn.removeClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerStatus.removeClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbPermissionDenied.addClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbRecorded.addClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerStopBtn.addClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerControls.addClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerTimeLeft.html(gbb.gbbVideoMsg.state.recordingTime);
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerStatus.html(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage.pressToRecord));
                gbb.gbbVideoMsg.state.recordingTime = "1:00";
                gbb.gbbVideoMsg.state.elements.gbbUploadingVideoHeading.html(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage.uploading));
                navigator.mediaDevices
                    .getUserMedia({
                        audio: true,
                        video: true,
                    })
                    .then((stream) => {
                        gbb.gbbVideoMsg.state.elements.gbbVideoPlayer[0].srcObject = stream;
                    })
                    .catch((error) => {
                        gbb.utility.debugConsole("navigator", error)
                        gbb.utility.debugConsole(error);
                        gbb.gbbVideoMsg.state.elements.gbbVideoPlayerStartBtn.addClass("gbbVideoPlayerHide");
                        gbb.gbbVideoMsg.state.elements.gbbVideoPlayerStatus.addClass("gbbVideoPlayerHide");
                        gbb.gbbVideoMsg.state.elements.gbbPermissionDenied.removeClass("gbbVideoPlayerHide");
                    });
            },
            clickClose: function (e) {
                e.preventDefault();
                gbb.gbbVideoMsg.state.gbbVideoMsgPlayerWrapper.css('display', 'none')
                // gbb.gbbVideoMsg.state.elements.gbbRecorder.addClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.f.stopRecording(gbb.gbbVideoMsg.state.elements.gbbVideoPlayer[0].srcObject);
                gbb.gbbVideoMsg.f.revokeObjectUrl();
            },
            stopRecording: function (stream) {
                if (gbb.gbbVideoMsg.state.interval) {
                    clearInterval(gbb.gbbVideoMsg.state.interval);
                }
                if (gbb.gbbVideoMsg.state.mediaRecorder && gbb.gbbVideoMsg.state.mediaRecorder.state !== "inactive") {
                    gbb.gbbVideoMsg.state.mediaRecorder.stop();
                }
                stream.getTracks().forEach(function (track) {
                    if (track.readyState == "live") {
                        gbb.utility.debugConsole("hello - stop");
                        track.stop();
                    }
                })
            },

            clearTracks: function (stream) {
                if (stream) {
                    stream.getTracks().forEach(function (track) {
                        if (track.readyState == "live") {
                            gbb.utility.debugConsole("hello - stop");
                            track.stop();
                        }
                    })

                }

            },
            revokeObjectUrl: function () {
                URL.revokeObjectURL(gbb.gbbVideoMsg.state.elements.gbbVideoPlayerRecording.src);
            },
            clickStart: function async(e) {
                e.preventDefault();
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerStartBtn.addClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbRecorderCloseBtn.addClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerStopBtn.removeClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerTimeLeft.removeClass("gbbVideoPlayerHide");

                // the below field for the text
                //hide the toggle
                //gbbVideoMsgCheckboxWrapper

                gbb.gbbVideoMsg.f.clearTracks(gbb.gbbVideoMsg.state.elements.gbbVideoPlayer[0].srcObject);

                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerStatus.html(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage.recording));
                navigator.mediaDevices
                    .getUserMedia({
                        video: true,
                        audio: true,
                    })
                    .then((stream) => {
                        gbb.utility.debugConsole("1 - navigator");
                        gbb.gbbVideoMsg.state.elements.gbbVideoPlayer[0].srcObject = stream;
                        gbb.gbbVideoMsg.state.elements.gbbVideoPlayer[0].captureStream = gbb.gbbVideoMsg.state.elements.gbbVideoPlayer[0].captureStream || gbb.gbbVideoMsg.state.elements.gbbVideoPlayer[0].mozCaptureStream;
                        return new Promise((resolve) => (
                            gbb.gbbVideoMsg.state.elements.gbbVideoPlayer[0].onplaying = resolve
                        ));
                    })
                    .then(() => {
                        gbb.utility.debugConsole("2 - onplaying");
                        return gbb.gbbVideoMsg.f.startRecording(e, gbb.gbbVideoMsg.state.elements.gbbVideoPlayer[0].captureStream())
                    })
                    .then((recordedChunks) => {
                        gbb.utility.debugConsole("3 - startRecording");
                        gbb.utility.debugConsole(recordedChunks);
                        gbb.gbbVideoMsg.state.justNowRecorded = true
                        gbb.gbbVideoMsg.state.elements.gbbVideoPlayerControls.removeClass("gbbVideoPlayerHide");
                        gbb.gbbVideoMsg.state.elements.gbbUploadingVideoHeading.addClass("gbbVideoPlayerHide");
                        gbb.gbbVideoMsg.state.elements.gbbLoadingHeading.addClass("gbbVideoPlayerHide");
                        gbb.gbbVideoMsg.state.recordedBlob = new Blob(recordedChunks, { type: "video/webm" });
                        gbb.gbbVideoMsg.state.elements.gbbVideoPlayerRecording.attr("src", URL.createObjectURL(gbb.gbbVideoMsg.state.recordedBlob));
                        gbb.gbbVideoMsg.state.elements.gbbVideoPlayerRecording[0].load();
                    })
                    .catch(
                        (error) =>
                            gbb.utility.debugConsole(error)
                    );
            },
            startRecording: function (e, stream) {
                return new Promise((resolve, reject) => {

                    let mediaRecorder = new MediaRecorder(stream);
                    gbb.gbbVideoMsg.state.mediaRecorder = mediaRecorder;
                    let parts = [];
                    mediaRecorder.ondataavailable = (event) => {
                        parts.push(event.data);
                    };
                    mediaRecorder.start(1000);

                    mediaRecorder.onerror = (event) => reject(event.name);

                    gbb.gbbVideoMsg.f.wait(mediaRecorder);

                    mediaRecorder.onstop = function () {
                        gbb.utility.debugConsole("mediaRecorder.onstop() func called");
                        resolve(parts);
                    }
                })
            },
            clickStop: function (e) {
                e.preventDefault();
                gbb.gbbVideoMsg.state.elements.gbbRecord.addClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbRecorded.removeClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerControls.addClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerTimeLeft.addClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerStatus.addClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbRecorderCloseBtn.removeClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.state.elements.gbbLoadingHeading.removeClass("gbbVideoPlayerHide");
                gbb.gbbVideoMsg.f.stopRecording(gbb.gbbVideoMsg.state.elements.gbbVideoPlayer[0].srcObject);
            },
            covertBlobToBase64: async function (recordedBlob) {
                const reader = new FileReader();
                reader.readAsDataURL(recordedBlob);

                reader.onloadend = function () {

                    var arrayBuffer = reader.result;

                    gbb.utility.debugConsole(arrayBuffer);

                    var formData = new FormData();

                    formData.append("upload_data", recordedBlob, "video.txt");
                    formData.append("shopName", gbb.settings.merchantInfo.shopName);

                    // fetch("http://"+gbb.settings.SERVER_URL+"/api/proxy/upload/video?shopName="+gbb.settings.merchantInfo.shopName,{
                    // fetch("/apps/gbb/upload/video", {
                    fetch("/apps/" + gbb.state.gbbUrl + "/upload/video", {
                        method: 'POST',
                        body: formData
                    }).then(
                        response => response.json() // if the response is a JSON object
                    ).then(
                        success => {
                            if (success.responseCode == 200) {
                                gbb.gbbVideoMsg.state.uploadedVideoId = success.data.videoMsgId;
                                gbb.utility.debugConsole(success) // Handle the success response object
                                gbb.gbbVideoMsg.state.elements.gbbUploadingVideoHeading.html(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage?.uploadConfirmation) || "Successfully uploaded1");
                                //gbb.$('.gbbVideoMsgPlayerWrapper').css('display', 'none')
                                // Show feedback that it got uploaded
                                // gbb.gbbVideoMsg.state.elements.gbbRecorder.addClass("gbbVideoPlayerHide");
                            }
                            /*
                            * @Abhishek, the below if else condition is added to handle the
                            * condition where the api fails in sending over responseCode 200.
                            */
                            else {
                                gbb.utility.debugConsole(success) // Handle the error response object
                                gbb.gbbVideoMsg.state.elements.gbbUploadingVideoHeading.html(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage.errorMessage));
                            }

                        }
                    ).catch(
                        error => {
                            gbb.utility.debugConsole(error) // Handle the error response object
                            gbb.gbbVideoMsg.state.elements.gbbUploadingVideoHeading.html(gbb.utility.renderLanguageValue(gbb.settings.languageData.videoMessage.errorMessage));
                        }
                    );
                }
            },
            clickAccept: function (e) {
                e.preventDefault();
                gbb.gbbVideoMsg.state.elements.gbbVideoPlayerControls.addClass("gbbVideoPlayerHide")
                gbb.gbbVideoMsg.state.elements.gbbUploadingVideoHeading.removeClass("gbbVideoPlayerHide")
                gbb.gbbVideoMsg.f.covertBlobToBase64(gbb.gbbVideoMsg.state.recordedBlob);
            },
            wait: function (mediaRecorder) {
                var now = new Date().getTime();
                var deadline = new Date(now + gbb.gbbVideoMsg.state.recordingTimeMS).getTime();
                var interval = setInterval(() => {
                    now = new Date().getTime();
                    var t = deadline - now;
                    gbb.utility.debugConsole(t);
                    var minutes = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60));
                    var seconds = Math.floor((t % (1000 * 60)) / 1000);
                    if (t < 0) {
                        gbb.$('.gbbVideoPlayerStopBtn').click();
                    }
                    gbb.gbbVideoMsg.state.elements.gbbVideoPlayerTimeLeft.html(minutes + " : " + seconds)
                }, 1000);
                gbb.gbbVideoMsg.state.interval = interval;
            },
            clickReStart: function (e) {
                e.preventDefault();
                gbb.gbbVideoMsg.f.revokeObjectUrl()
                gbb.gbbVideoMsg.f.createRecorder();
            },
            clickPlay: async function (e) {
                e.preventDefault();
                try {
                    gbb.gbbVideoMsg.state.elements.gbbVideoPlayerControls.addClass("gbbVideoPlayerHide");
                    gbb.gbbVideoMsg.state.elements.gbbVideoPlayerRecording[0].play();
                    let isEnded = new Promise((resolve, reject) => {
                        gbb.gbbVideoMsg.state.elements.gbbVideoPlayerRecording[0].onended = resolve;
                    });
                    await isEnded;
                    gbb.gbbVideoMsg.state.elements.gbbVideoPlayerRecording[0].load();
                    gbb.gbbVideoMsg.state.elements.gbbVideoPlayerControls.removeClass("gbbVideoPlayerHide");

                } catch (error) {
                    gbb.utility.debugConsole(error)
                }
            },
            scrollToVideoDiv: function () {
                // gbb.$(".gbbPersonalizePageMessageContent").animate({scrollTop: 9999},1000);
                gbb.$(".giftMessageV2MainContent").animate({ scrollTop: 360 }, 2000, 'swing');
            },
        },
        actions: {
            gbbVideoMsgButton: function (e) {
                e.preventDefault()
                gbb.gbbVideoMsg.state.gbbVideoMsgPlayerWrapper.css('display', 'grid')
                gbb.gbbVideoMsg.f.createRecorder()
                gbb.gbbVideoMsg.f.scrollToVideoDiv()
            },
        },
        events: {

        },

    },
    gbbIntegrations: {
        judgeme: {
            state: {
                public_token: null,
                baseURL: null,
                reviewStarsHTMLbyProductIds: null,
            },
            init: async function (productsData) {
                try {
                    let params = {}
                    gbb.gbbIntegrations.judgeme.state.public_token = gbb?.settings?.app?.integrations?.judgeme?.public_token
                    gbb.gbbIntegrations.judgeme.state.baseURL = `https://cache.judge.me/widgets/shopify/${gbb?.settings?.merchantInfo?.shopName}?publictoken=${gbb?.settings?.app?.integrations?.judgeme?.public_token}`
                    let productIdsToSend = productsData?.map((product) => Number(product.productId) || product.id).join(',')
                    if (productIdsToSend && productIdsToSend.length > 0) {
                        params = {
                            preview_badge_product_ids: productIdsToSend
                        }
                    }
                    await gbb.gbbIntegrations?.judgeme?.initialize(params)
                } catch (error) {
                    gbb.utility.debugError("error in judgeme init", error);
                }
            },
            initialize: async function (options) {
                try {
                    let judgemeData = await gbb.gbbIntegrations?.judgeme?.f?.getJudgeMeData(options)
                    let judgemeStyle = judgemeData?.html_miracle;
                    gbb.gbbIntegrations?.judgeme?.f?.appendJudgeMeStyle(judgemeStyle)
                    gbb.gbbIntegrations.judgeme.state.reviewStarsHTMLbyProductIds = judgemeData?.preview_badges || []
                } catch (error) {
                    gbb.utility.debugError('error in judgeme initialize', error)
                }
            },
            f: {
                getJudgeMeData: function (options = {}) {
                    try {
                        let params = ''
                        for (const key in options) {
                            params += `&${key}=${options[key]}`
                        }
                        let fetchUrl = gbb.gbbIntegrations?.judgeme?.state?.baseURL + params;

                        let judgemeData = new Promise((resolve, reject) => {
                            fetch(fetchUrl)
                                .then((response) => {
                                    return response.json()
                                }).then((response) => {
                                    gbb.utility.debugConsole("judgeme-data:", response);
                                    resolve(response)
                                })
                                .catch((error) => {
                                    reject(error)
                                })
                        })
                        return judgemeData
                    } catch (error) {
                        gbb.utility.debugError("error in getJudgeMeData", error);
                    }
                },
                appendJudgeMeStyle: function (style) {
                    try {
                        gbb.$('html > head').append(style);
                        return style;
                    } catch (error) {
                        gbb.utility.debugError("error in appendJudgeMeStyle", error);
                    }
                },
                getStarsHTMLByProductId: function (productId) {
                    try {
                        let judgemeProductData = gbb.gbbIntegrations?.judgeme?.state?.reviewStarsHTMLbyProductIds || {}
                        let starsHTML = judgemeProductData[productId]
                        return starsHTML
                    } catch (error) {
                        gbb.utility.debugError('error in getStarsHTMLByProductId', error)
                    }
                },
                applyJudgemeStyleAndLanguage : function(){
                    try{
                        const starRatingTexts = document.querySelectorAll(".jdgm-prev-badge__text");
                        const starRatingWrappers = document.querySelectorAll(".jdgm-prev-badge");
                        const starIcons = document.querySelectorAll(".jdgm-prev-badge__stars .jdgm-star");

                        if (jdgmSettings.badge_star_color) {
                        starIcons.forEach((icon) => {
                            icon.style.color = jdgmSettings.badge_star_color;
                        });
                        } else {
                        starIcons.forEach((icon) => {
                            icon.style.color = jdgmSettings.widget_primary_color ?? "#339999";
                        });
                        }

                        if (jdgmSettings.badge_n_reviews_text) {
                        const textFormat = jdgmSettings.badge_n_reviews_text;

                        starRatingWrappers.forEach((wrapper, idx) => {
                            const reviewCount = parseInt(wrapper.dataset.numberOfReviews);
                            const avgRatingFull = wrapper.dataset.averageRating;
                            const avgRatingShort = Math.round(
                            (parseFloat(wrapper.dataset.averageRating) * 10) / 10
                            );

                            if (reviewCount > 0) {
                            const qntyRegex = /([a-z]+)\/([a-z]+)/;
                            let newText = textFormat.replace(/\{\{\s?n\s?\}\}/g, reviewCount);
                            const qntyTexts = qntyRegex.exec(textFormat);

                            if (qntyTexts != null) {
                                if (reviewCount == 1) {
                                newText = newText.replace(qntyRegex, qntyTexts[1]);
                                } else {
                                newText = newText.replace(qntyRegex, qntyTexts[2]);
                                }
                            } else {
                                if (reviewCount == 1) {
                                starRatingTexts[idx].textContent = `${reviewCount} review`;
                                } else {
                                starRatingTexts[idx].textContent = `${reviewCount} reviews`;
                                }
                            }

                            newText = newText.replace(
                                /\{\{\s?average_rating\s\}\}/g,
                                avgRatingFull
                            );
                            newText = newText.replace(
                                /\{\{\s?average_rating_1_decimal\s\}\}/g,
                                avgRatingShort
                            );
                            starRatingTexts[idx].textContent = newText;

                            if (!jdgmSettings.badge_hide_text) {
                                starRatingTexts[idx].style.visibility = "visible";
                            }
                            }
                        });
                        } else {
                        starRatingWrappers.forEach((wrapper, idx) => {
                            const reviewCount = parseInt(wrapper.dataset.numberOfReviews);

                            if (reviewCount > 0) {
                            if (reviewCount == 1) {
                                starRatingTexts[idx].textContent = `${reviewCount} review`;
                            } else {
                                starRatingTexts[idx].textContent = `${reviewCount} reviews`;
                            }
                            }

                            if (!jdgmSettings.badge_hide_text) {
                            starRatingTexts[idx].style.visibility = "visible";
                            }
                        });
                        }
                    } catch(e){
                        gbb.utility.debugConsole("error in applyJudgemeStyleAndLanguage", e)
                    }

                }
            }
        }

    }
    // gbb Code start
}
window.gbb = gbb;
/*
* start the program
*/
gbbUtils.f.loadJquery(function (jqueryRefObj) {
    gbb.$ = jqueryRefObj;

    gbb.$(document).ready(function () {
        gbb.utility.debugConsole("document-ready-gbb", gbb.$);
        gbb.f.initialize(gbb.$);
        gbb.utility.debugConsole("gbb-page-load-event")
        let event = new CustomEvent('gbb-page-load', {});
        document.dispatchEvent(event);
    })
})


// comment at the end of line
</script>
    <style>.flatpickr-calendar {
  background: transparent;
  opacity: 0;
  display: none;
  text-align: center;
  visibility: hidden;
  padding: 0;
  -webkit-animation: none;
  animation: none;
  direction: ltr;
  border: 0;
  font-size: 14px;
  line-height: 24px;
  border-radius: 5px;
  position: absolute;
  width: 307.875px;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  -ms-touch-action: manipulation;
  touch-action: manipulation;
  background: #fff;
  -webkit-box-shadow: 1px 0 0 #e6e6e6, -1px 0 0 #e6e6e6, 0 1px 0 #e6e6e6,
    0 -1px 0 #e6e6e6, 0 3px 13px rgba(0, 0, 0, 0.08);
  box-shadow: 1px 0 0 #e6e6e6, -1px 0 0 #e6e6e6, 0 1px 0 #e6e6e6,
    0 -1px 0 #e6e6e6, 0 3px 13px rgba(0, 0, 0, 0.08);
}
.flatpickr-calendar.open,
.flatpickr-calendar.inline {
  opacity: 1;
  max-height: 640px;
  visibility: visible;
}
.flatpickr-calendar.open {
  display: inline-block;
  z-index: 99999;
}
.flatpickr-calendar.animate.open {
  -webkit-animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);
  animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);
}
.flatpickr-calendar.inline {
  display: block;
  position: relative;
  top: 2px;
}
.flatpickr-calendar.static {
  position: absolute;
  top: calc(100% + 2px);
}
.flatpickr-calendar.static.open {
  z-index: 999;
  display: block;
}
.flatpickr-calendar.multiMonth
  .flatpickr-days
  .dayContainer:nth-child(n + 1)
  .flatpickr-day.inRange:nth-child(7n + 7) {
  -webkit-box-shadow: none !important;
  box-shadow: none !important;
}
.flatpickr-calendar.multiMonth
  .flatpickr-days
  .dayContainer:nth-child(n + 2)
  .flatpickr-day.inRange:nth-child(7n + 1) {
  -webkit-box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;
  box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;
}
.flatpickr-calendar .hasWeeks .dayContainer,
.flatpickr-calendar .hasTime .dayContainer {
  border-bottom: 0;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
}
.flatpickr-calendar .hasWeeks .dayContainer {
  border-left: 0;
}
.flatpickr-calendar.hasTime .flatpickr-time {
  height: 40px;
  border-top: 1px solid #e6e6e6;
}
.flatpickr-calendar.noCalendar.hasTime .flatpickr-time {
  height: auto;
}
.flatpickr-calendar:before,
.flatpickr-calendar:after {
  position: absolute;
  display: block;
  pointer-events: none;
  border: solid transparent;
  content: "";
  height: 0;
  width: 0;
  left: 22px;
}
.flatpickr-calendar.rightMost:before,
.flatpickr-calendar.arrowRight:before,
.flatpickr-calendar.rightMost:after,
.flatpickr-calendar.arrowRight:after {
  left: auto;
  right: 22px;
}
.flatpickr-calendar.arrowCenter:before,
.flatpickr-calendar.arrowCenter:after {
  left: 50%;
  right: 50%;
}
.flatpickr-calendar:before {
  border-width: 5px;
  margin: 0 -5px;
}
.flatpickr-calendar:after {
  border-width: 4px;
  margin: 0 -4px;
}
.flatpickr-calendar.arrowTop:before,
.flatpickr-calendar.arrowTop:after {
  bottom: 100%;
}
.flatpickr-calendar.arrowTop:before {
  border-bottom-color: #e6e6e6;
}
.flatpickr-calendar.arrowTop:after {
  border-bottom-color: #fff;
}
.flatpickr-calendar.arrowBottom:before,
.flatpickr-calendar.arrowBottom:after {
  top: 100%;
}
.flatpickr-calendar.arrowBottom:before {
  border-top-color: #e6e6e6;
}
.flatpickr-calendar.arrowBottom:after {
  border-top-color: #fff;
}
.flatpickr-calendar:focus {
  outline: 0;
}
.flatpickr-wrapper {
  position: relative;
  display: inline-block;
}
.flatpickr-months {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}
.flatpickr-months .flatpickr-month {
  background: transparent;
  color: rgba(0, 0, 0, 0.9);
  fill: rgba(0, 0, 0, 0.9);
  height: 34px;
  line-height: 1;
  text-align: center;
  position: relative;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  overflow: hidden;
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
}
.flatpickr-months .flatpickr-prev-month,
.flatpickr-months .flatpickr-next-month {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  text-decoration: none;
  cursor: pointer;
  position: absolute;
  top: 0;
  height: 34px;
  padding: 10px;
  z-index: 3;
  color: rgba(0, 0, 0, 0.9);
  fill: rgba(0, 0, 0, 0.9);
}
.flatpickr-months .flatpickr-prev-month.flatpickr-disabled,
.flatpickr-months .flatpickr-next-month.flatpickr-disabled {
  display: none;
}
.flatpickr-months .flatpickr-prev-month i,
.flatpickr-months .flatpickr-next-month i {
  position: relative;
}
.flatpickr-months .flatpickr-prev-month.flatpickr-prev-month,
.flatpickr-months .flatpickr-next-month.flatpickr-prev-month {
  /*
      /*rtl:begin:ignore*/
  left: 0; /*
      /*rtl:end:ignore*/
} /*
      /*rtl:begin:ignore*/
/*
      /*rtl:end:ignore*/
.flatpickr-months .flatpickr-prev-month.flatpickr-next-month,
.flatpickr-months .flatpickr-next-month.flatpickr-next-month {
  /*
      /*rtl:begin:ignore*/
  right: 0; /*
      /*rtl:end:ignore*/
} /*
      /*rtl:begin:ignore*/
/*
      /*rtl:end:ignore*/
.flatpickr-months .flatpickr-prev-month:hover,
.flatpickr-months .flatpickr-next-month:hover {
  color: #959ea9;
}
.flatpickr-months .flatpickr-prev-month:hover svg,
.flatpickr-months .flatpickr-next-month:hover svg {
  fill: #f64747;
}
.flatpickr-months .flatpickr-prev-month svg,
.flatpickr-months .flatpickr-next-month svg {
  width: 14px;
  height: 14px;
}
.flatpickr-months .flatpickr-prev-month svg path,
.flatpickr-months .flatpickr-next-month svg path {
  -webkit-transition: fill 0.1s;
  transition: fill 0.1s;
  fill: inherit;
}
.numInputWrapper {
  position: relative;
  height: auto;
}
.numInputWrapper input,
.numInputWrapper span {
  display: inline-block;
}
.numInputWrapper input {
  width: 100%;
}
.numInputWrapper input::-ms-clear {
  display: none;
}
.numInputWrapper input::-webkit-outer-spin-button,
.numInputWrapper input::-webkit-inner-spin-button {
  margin: 0;
  -webkit-appearance: none;
}
.numInputWrapper span {
  position: absolute;
  right: 0;
  width: 14px;
  padding: 0 4px 0 2px;
  height: 50%;
  line-height: 50%;
  opacity: 0;
  cursor: pointer;
  border: 1px solid rgba(57, 57, 57, 0.15);
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.numInputWrapper span:hover {
  background: rgba(0, 0, 0, 0.1);
}
.numInputWrapper span:active {
  background: rgba(0, 0, 0, 0.2);
}
.numInputWrapper span:after {
  display: block;
  content: "";
  position: absolute;
}
.numInputWrapper span.arrowUp {
  top: 0;
  border-bottom: 0;
}
.numInputWrapper span.arrowUp:after {
  border-left: 4px solid transparent;
  border-right: 4px solid transparent;
  border-bottom: 4px solid rgba(57, 57, 57, 0.6);
  top: 26%;
}
.numInputWrapper span.arrowDown {
  top: 50%;
}
.numInputWrapper span.arrowDown:after {
  border-left: 4px solid transparent;
  border-right: 4px solid transparent;
  border-top: 4px solid rgba(57, 57, 57, 0.6);
  top: 40%;
}
.numInputWrapper span svg {
  width: inherit;
  height: auto;
}
.numInputWrapper span svg path {
  fill: rgba(0, 0, 0, 0.5);
}
.numInputWrapper:hover {
  background: rgba(0, 0, 0, 0.05);
}
.numInputWrapper:hover span {
  opacity: 1;
}
.flatpickr-current-month {
  font-size: 135%;
  line-height: inherit;
  font-weight: 300;
  color: inherit;
  position: absolute;
  width: 75%;
  left: 12.5%;
  padding: 7.48px 0 0 0;
  line-height: 1;
  height: 34px;
  display: inline-block;
  text-align: center;
  -webkit-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
}
.flatpickr-current-month span.cur-month {
  font-family: inherit;
  font-weight: 700;
  color: inherit;
  display: inline-block;
  margin-left: 0.5ch;
  padding: 0;
}
.flatpickr-current-month span.cur-month:hover {
  background: rgba(0, 0, 0, 0.05);
}
.flatpickr-current-month .numInputWrapper {
  width: 6ch;
  width: 7ch\0;
  display: inline-block;
}
.flatpickr-current-month .numInputWrapper span.arrowUp:after {
  border-bottom-color: rgba(0, 0, 0, 0.9);
}
.flatpickr-current-month .numInputWrapper span.arrowDown:after {
  border-top-color: rgba(0, 0, 0, 0.9);
}
.flatpickr-current-month input.cur-year {
  background: transparent;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  color: inherit;
  cursor: text;
  padding: 0 0 0 0.5ch;
  margin: 0;
  display: inline-block;
  font-size: inherit;
  font-family: inherit;
  font-weight: 300;
  line-height: inherit;
  height: auto;
  border: 0;
  border-radius: 0;
  vertical-align: initial;
  -webkit-appearance: textfield;
  -moz-appearance: textfield;
  appearance: textfield;
}
.flatpickr-current-month input.cur-year:focus {
  outline: 0;
}
.flatpickr-current-month input.cur-year[disabled],
.flatpickr-current-month input.cur-year[disabled]:hover {
  font-size: 100%;
  color: rgba(0, 0, 0, 0.5);
  background: transparent;
  pointer-events: none;
}
.flatpickr-current-month .flatpickr-monthDropdown-months {
  appearance: menulist;
  background: transparent;
  border: none;
  border-radius: 0;
  box-sizing: border-box;
  color: inherit;
  cursor: pointer;
  font-size: inherit;
  font-family: inherit;
  font-weight: 300;
  height: auto;
  line-height: inherit;
  margin: -1px 0 0 0;
  outline: none;
  padding: 0 0 0 0.5ch;
  position: relative;
  vertical-align: initial;
  -webkit-box-sizing: border-box;
  -webkit-appearance: menulist;
  -moz-appearance: menulist;
  width: auto;
}
.flatpickr-current-month .flatpickr-monthDropdown-months:focus,
.flatpickr-current-month .flatpickr-monthDropdown-months:active {
  outline: none;
}
.flatpickr-current-month .flatpickr-monthDropdown-months:hover {
  background: rgba(0, 0, 0, 0.05);
}
.flatpickr-current-month
  .flatpickr-monthDropdown-months
  .flatpickr-monthDropdown-month {
  background-color: transparent;
  outline: none;
  padding: 0;
}
.flatpickr-weekdays {
  background: transparent;
  text-align: center;
  overflow: hidden;
  width: 100%;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
  height: 28px;
}
.flatpickr-weekdays .flatpickr-weekdaycontainer {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
}
span.flatpickr-weekday {
  cursor: default;
  font-size: 90%;
  background: transparent;
  color: rgba(0, 0, 0, 0.54);
  line-height: 1;
  margin: 0;
  text-align: center;
  display: block;
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  font-weight: bolder;
}
.dayContainer,
.flatpickr-weeks {
  padding: 1px 0 0 0;
}
.flatpickr-days {
  position: relative;
  overflow: hidden;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: start;
  -webkit-align-items: flex-start;
  -ms-flex-align: start;
  align-items: flex-start;
  width: 307.875px;
}
.flatpickr-days:focus {
  outline: 0;
}
.dayContainer {
  padding: 0;
  outline: 0;
  text-align: left;
  width: 307.875px;
  min-width: 307.875px;
  max-width: 307.875px;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  display: inline-block;
  display: -ms-flexbox;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-wrap: wrap;
  flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  -ms-flex-pack: justify;
  -webkit-justify-content: space-around;
  justify-content: space-around;
  -webkit-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
  opacity: 1;
}
.dayContainer + .dayContainer {
  -webkit-box-shadow: -1px 0 0 #e6e6e6;
  box-shadow: -1px 0 0 #e6e6e6;
}
.flatpickr-day {
  background: none;
  border: 1px solid transparent;
  border-radius: 150px;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  color: #393939;
  cursor: pointer;
  font-weight: 400;
  width: 14.2857143%;
  -webkit-flex-basis: 14.2857143%;
  -ms-flex-preferred-size: 14.2857143%;
  flex-basis: 14.2857143%;
  max-width: 39px;
  height: 39px;
  line-height: 39px;
  margin: 0;
  display: inline-block;
  position: relative;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
  justify-content: center;
  text-align: center;
}
.flatpickr-day.inRange,
.flatpickr-day.prevMonthDay.inRange,
.flatpickr-day.nextMonthDay.inRange,
.flatpickr-day.today.inRange,
.flatpickr-day.prevMonthDay.today.inRange,
.flatpickr-day.nextMonthDay.today.inRange,
.flatpickr-day:hover,
.flatpickr-day.prevMonthDay:hover,
.flatpickr-day.nextMonthDay:hover,
.flatpickr-day:focus,
.flatpickr-day.prevMonthDay:focus,
.flatpickr-day.nextMonthDay:focus {
  cursor: pointer;
  outline: 0;
  background: #e6e6e6;
  border-color: #e6e6e6;
}
.flatpickr-day.today {
  border-color: #959ea9;
}
.flatpickr-day.today:hover,
.flatpickr-day.today:focus {
  border-color: #959ea9;
  background: #959ea9;
  color: #fff;
}
.flatpickr-day.selected,
.flatpickr-day.startRange,
.flatpickr-day.endRange,
.flatpickr-day.selected.inRange,
.flatpickr-day.startRange.inRange,
.flatpickr-day.endRange.inRange,
.flatpickr-day.selected:focus,
.flatpickr-day.startRange:focus,
.flatpickr-day.endRange:focus,
.flatpickr-day.selected:hover,
.flatpickr-day.startRange:hover,
.flatpickr-day.endRange:hover,
.flatpickr-day.selected.prevMonthDay,
.flatpickr-day.startRange.prevMonthDay,
.flatpickr-day.endRange.prevMonthDay,
.flatpickr-day.selected.nextMonthDay,
.flatpickr-day.startRange.nextMonthDay,
.flatpickr-day.endRange.nextMonthDay {
  background: #569ff7;
  -webkit-box-shadow: none;
  box-shadow: none;
  color: #fff;
  border-color: #569ff7;
}
.flatpickr-day.selected.startRange,
.flatpickr-day.startRange.startRange,
.flatpickr-day.endRange.startRange {
  border-radius: 50px 0 0 50px;
}
.flatpickr-day.selected.endRange,
.flatpickr-day.startRange.endRange,
.flatpickr-day.endRange.endRange {
  border-radius: 0 50px 50px 0;
}
.flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n + 1)),
.flatpickr-day.startRange.startRange + .endRange:not(:nth-child(7n + 1)),
.flatpickr-day.endRange.startRange + .endRange:not(:nth-child(7n + 1)) {
  -webkit-box-shadow: -10px 0 0 #569ff7;
  box-shadow: -10px 0 0 #569ff7;
}
.flatpickr-day.selected.startRange.endRange,
.flatpickr-day.startRange.startRange.endRange,
.flatpickr-day.endRange.startRange.endRange {
  border-radius: 50px;
}
.flatpickr-day.inRange {
  border-radius: 0;
  -webkit-box-shadow: -5px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;
  box-shadow: -5px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;
}
.flatpickr-day.flatpickr-disabled,
.flatpickr-day.flatpickr-disabled:hover,
.flatpickr-day.prevMonthDay,
.flatpickr-day.nextMonthDay,
.flatpickr-day.notAllowed,
.flatpickr-day.notAllowed.prevMonthDay,
.flatpickr-day.notAllowed.nextMonthDay {
  color: rgba(57, 57, 57, 0.3);
  background: transparent;
  border-color: transparent;
  cursor: default;
}
.flatpickr-day.flatpickr-disabled,
.flatpickr-day.flatpickr-disabled:hover {
  cursor: not-allowed;
  color: rgba(57, 57, 57, 0.1);
}
.flatpickr-day.week.selected {
  border-radius: 0;
  -webkit-box-shadow: -5px 0 0 #569ff7, 5px 0 0 #569ff7;
  box-shadow: -5px 0 0 #569ff7, 5px 0 0 #569ff7;
}
.flatpickr-day.hidden {
  visibility: hidden;
}
.rangeMode .flatpickr-day {
  margin-top: 1px;
}
.flatpickr-weekwrapper {
  float: left;
}
.flatpickr-weekwrapper .flatpickr-weeks {
  padding: 0 12px;
  -webkit-box-shadow: 1px 0 0 #e6e6e6;
  box-shadow: 1px 0 0 #e6e6e6;
}
.flatpickr-weekwrapper .flatpickr-weekday {
  float: none;
  width: 100%;
  line-height: 28px;
}
.flatpickr-weekwrapper span.flatpickr-day,
.flatpickr-weekwrapper span.flatpickr-day:hover {
  display: block;
  width: 100%;
  max-width: none;
  color: rgba(57, 57, 57, 0.3);
  background: transparent;
  cursor: default;
  border: none;
}
.flatpickr-innerContainer {
  display: block;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  overflow: hidden;
}
.flatpickr-rContainer {
  display: inline-block;
  padding: 0;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.flatpickr-time {
  text-align: center;
  outline: 0;
  display: block;
  height: 0;
  line-height: 40px;
  max-height: 40px;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  overflow: hidden;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}
.flatpickr-time:after {
  content: "";
  display: table;
  clear: both;
}
.flatpickr-time .numInputWrapper {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  width: 40%;
  height: 40px;
  float: left;
}
.flatpickr-time .numInputWrapper span.arrowUp:after {
  border-bottom-color: #393939;
}
.flatpickr-time .numInputWrapper span.arrowDown:after {
  border-top-color: #393939;
}
.flatpickr-time.hasSeconds .numInputWrapper {
  width: 26%;
}
.flatpickr-time.time24hr .numInputWrapper {
  width: 49%;
}
.flatpickr-time input {
  background: transparent;
  -webkit-box-shadow: none;
  box-shadow: none;
  border: 0;
  border-radius: 0;
  text-align: center;
  margin: 0;
  padding: 0;
  height: inherit;
  line-height: inherit;
  color: #393939;
  font-size: 14px;
  position: relative;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  -webkit-appearance: textfield;
  -moz-appearance: textfield;
  appearance: textfield;
}
.flatpickr-time input.flatpickr-hour {
  font-weight: bold;
}
.flatpickr-time input.flatpickr-minute,
.flatpickr-time input.flatpickr-second {
  font-weight: 400;
}
.flatpickr-time input:focus {
  outline: 0;
  border: 0;
}
.flatpickr-time .flatpickr-time-separator,
.flatpickr-time .flatpickr-am-pm {
  height: inherit;
  float: left;
  line-height: inherit;
  color: #393939;
  font-weight: bold;
  width: 2%;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
  align-self: center;
}
.flatpickr-time .flatpickr-am-pm {
  outline: 0;
  width: 18%;
  cursor: pointer;
  text-align: center;
  font-weight: 400;
}
.flatpickr-time input:hover,
.flatpickr-time .flatpickr-am-pm:hover,
.flatpickr-time input:focus,
.flatpickr-time .flatpickr-am-pm:focus {
  background: #eee;
}
.flatpickr-input[readonly] {
  cursor: pointer;
}

@-webkit-keyframes fpFadeInDown {
  from {
    opacity: 0;
    -webkit-transform: translate3d(0, -20px, 0);
    transform: translate3d(0, -20px, 0);
  }
  to {
    opacity: 1;
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}
@keyframes fpFadeInDown {
  from {
    opacity: 0;
    -webkit-transform: translate3d(0, -20px, 0);
    transform: translate3d(0, -20px, 0);
  }
  to {
    opacity: 1;
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}
.gbbDiscountComponentProgressBarContainer{
    background: gray;
    display: block;
    position: relative;
    height:20px;
    border-radius:5px;
    width: 100%;
    margin: auto;
    width: 80%;
}

.gbbDiscountComponentProgressBar{
    /* background: rgb(0, 217, 255); */
    background: rgb(26, 240, 58);
    position: absolute;
    display: block !important;
    /* max-width: 100%; */
    height: 100%;
    border-radius:5px;
}
.gbbDiscountComponentProgressBarAnimation{
    animation: progressAnimation 1s forwards;
    width: 100%;
}

.gbbDiscountComponentProgressBarRuleText{
    position: absolute;
    top: 22px;
    width: 6ch;
}

/* progressAnimation based on time */
@keyframes progressAnimation {
    0% { width: 0%; }
    10%{ width: 10%; }
    20%{ width: 20%; }
    30%{ width: 30%; }
    40%{ width: 40%; }
    50%{ width: 50%; }
    60%{ width: 60%; }
    70%{ width: 70%; }
    80%{ width: 80%; }
    90%{ width: 90%; }
    100% { width: 100%; }
}


.gbbDiscountComponentProgressBarContainer{
    height: 10px;
}

.gbbDiscountComponent:not(:empty){
    height: 40px;
}

.gbbStarSvgContainer{
    width: 24px;
    height: 24px;
    position: absolute;
    top: -15px;
}


.gbbReviewPageDiscountAppliedLabel{
    display: grid;
    justify-content: end;
    grid-template-columns: max-content;
    font-size: 14px;
    font-weight: 600;
}

.gbbReviewPageDiscountAppliedWrapper:not(empty){
    display: grid;
    justify-content: end;
}

.gbbReviewPageTotalCartValueLabel{
    display: grid;
    justify-content: end;
    grid-template-columns: max-content;
    font-size: 16px;
    font-weight: 600;
    text-align: end;
}


/* .gbbStarSvgContainer polygon.svgInnerBody{
    fill: white;
} */

.gbbStarActive polygon.svgInnerBody{
    fill: rgb(255, 255, 0) !important;
    /* add animation */
    /* animation: starAnimation 1s infinite; */
    /* put a transform and translate animation */
    
    transition: fill 0.5s;
}

@keyframes starAnimation {
    0% { fill: white; }
    50% { fill: rgb(58, 10, 232); }
    100% { fill: rgb(255, 255, 0); }
}


@media screen and (min-width: 1023px) {
    .gbbDiscountComponentProgressBarRuleText{
        position: absolute;
        top: 22px;
        width: max-content;
    }

    .gbbDiscountComponentProgressBarContainer{
        width: 80%;
    }  
    
    .gbbReviewPageTotalCartValueLabel{

        font-size: 24px;
    
    }
    .gbbReviewPageDiscountAppliedLabel{
        font-size: 16px;
    }
       
}



.gbbCategoryHeaderContainer {
  display: grid;
  /* grid-auto-flow: column; */
  align-items: center;
  justify-content: start;
  grid-template-columns: 0.3fr 1fr 2fr;
}
.gbbCategoryImage {
  width: 150px;
  height: 100px;
  object-fit: contain;
}
.gbbCategoryContainer {
  padding: 5px;
  /* background: #f5f5f5; */
  border: 2px solid #C0C0C0;
  border-radius: 10px;
}
.gbbMultipleCategoriesContainerHTML{
  display: grid;
  grid-gap: 20px;
}
.gbbMultipleCategoriesPageHTML{
  margin: 20px 0;
}
.gbbCategoryHeaderContainer{
  cursor: pointer;
}
.gbbCategoryTitle{
  font-weight: 600;
}

.gbbCategoryContainerTab{
  width: fit-content;
  padding: 5px;
  border-radius: 6px;
  display: grid;
  place-items: center;
}

.gbbCategoryTitlesContainer.gbbCategoryContainerTabUI{
  width: fit-content;
  display: grid;
  place-items: center;
}

.gbbMultipleCategoriesRibbonContainer, .gbbMultipleCategoriesDropdownContainer{
  padding: 21px 15px;
  display: flex;
  place-content: start;
  flex-wrap: wrap;
  grid-gap: 10px;
  overflow-x: auto;
  top: 0;
  z-index: 2;
}

.gbbMultipleCategoriesDropdownContainer{
  border-radius: 4px;
}


.gbbCategoryContainer.gbbCategoryContainerTabUI , .gbbMutipleCategoriesDropdown{
  padding: 5px 15px;
  border-radius: 5px;
  border: 1px solid #3c3c3c;
 
  display: grid;
  flex-grow: 1;
}


.gbbMutipleCategoriesDropdown{
  background: black;
  color: white;
  padding: 10px;
  border-radius: 4px;
}


.gbbCategoryContainer.gbbCategoryContainerTabUI.gbbCategoryContainerTabUIActive{
  background-color: black;
  color: #F6F6F6;
}

.gbbCategorySubTitleForTabUI{
  display: none;
}

.gbbMultipleCategoriesActiveCategorySubtitle{
  display: grid;
  place-items: center;
  grid-template-columns: 1fr;
  font-weight: 900;
}

.gbbCategoryImageForTabUI{
  display: none;
}

.gbbCategoryTitlesContainer.gbbCategoryTitlesContainerForTabUI{
  display: grid;
  place-content: center;
}

.gbbCategoryHeaderContainerTabUI.gbbCategoryHeaderContainer{
  display: grid;
  place-items: center;
  grid-template-columns: 1fr;
}

/* .gbbMultipleCategoriesPageHTMLForTabUI{
  overflow-y: auto;
  max-height: 80vh;
} */
.gbbMultipleCategoriesContainerHTMLForTabUI{
  position: relative;
}
 .gbbFiltersMainButtonWrapper{
  z-index: 1;
}
@media (min-width:600px){
  .gbbCategoryContainer {
      padding: 10px 20px;
  }
  .gbbCategoryHeaderContainer {
      grid-template-columns: unset;
      grid-auto-flow: column;
  }
  .gbbCategoryTitlesContainer.gbbCategoryTitlesContainerForTabUI{
    display: grid;
    place-content: center;
  }
  
  .gbbCategoryHeaderContainerTabUI.gbbCategoryHeaderContainer{
    display: grid;
    place-items: center;
    grid-template-columns: 1fr;
  }
}

@media only screen and (max-width: 600px) {
  .gbbMultipleCategoriesRibbonContainer , .gbbMultipleCategoriesDropdownContainer{
    padding: 21px 15px;
    place-content: start;
  }
 
  .gbbMultipleCategoriesDropdownContainer{
      display: flex;
    }


    .gbbMultipleCategoriesRibbonContainer{
      display: none;
    }

}

@media only screen and (min-width: 601px) {
  .gbbMultipleCategoriesDropdownContainer{
    display: none;
  }
}

.gbbMultipleCategoriesDropdownArrow{
    align-self: center;
    display: grid;
    position: absolute;
    right: 4%;
    pointer-events: none;
}

.gbbMultipleCategoriesDropdownArrow svg path{ 
  fill: white;
}

.gbbMutipleCategoriesDropdown{
  -webkit-appearance: none; /* Remove default arrow for WebKit browsers */
  -moz-appearance: none; /* Remove default arrow for Firefox */
  appearance: none; /* Remove default arrow for modern browsers */
}



.bannerAttached .gbbCategoryHeaderContainer :first-child, .bannerAttached .gbbCategorySubTitle{
  display : none;
}
.bannerAttached .gbbCategoryImage{
  width: unset !important;
  height: unset !important;
  max-width: 100%;
}
.bannerAttached .gbbCategoryHeaderContainer{
  grid-template-columns: unset;
}

.gbbCategoryContainer.bannerAttached {
  background: #FFFFFF;
  border: unset;
}.gbbProductsContainer,.gbbProductsContainerV2{
  margin: 15px 10px;
  
}
.gbbProductsItemsContainer{
  display: grid;
  grid-template-columns: repeat(2,1fr);
  grid-gap: 15px;
  font-size: 14px;
}
.gbbProductItem {
  display: grid;
  grid-template-rows: 2fr 0.1fr 0.5fr;
  background: #f1f2f3;
  /* padding: 10px; */
  position: relative;
  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
  transition: all 0.3s cubic-bezier(.25,.8,.25,1);
}


.gbbProductItem {
    display: grid;
    grid-template-rows: 1fr 0.1fr 0.1fr;
    background: #F1F2F3;
    /* padding: 10px; */
    position: relative;
    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
    transition: all 0.3s cubic-bezier(.25,.8,.25,1);
}
  


.gbbProductReadMore{
  display: grid;
  justify-self: end;
  padding: 10px;
  color: red;
  cursor: pointer;
}
.gbbProductDescriptionContainer{
  width: 100%;
}
.gbbProductDescriptionText{
  display: -webkit-box;
  max-width: 100%;
  margin: 0 auto;
  font-size: 14px;
  -webkit-box-orient: vertical;
  overflow: hidden;
  font-weight: 400;
  max-height: 200px;
  overflow-y: auto;
  /* -webkit-line-clamp: 4;
  text-overflow: ellipsis; */
}
.gbbProductVariantModalDetailsContainer{
  display: grid;
  grid-gap: 15px;
}
.gbbProductCardActionContainer{
  display: grid;
  grid-template-rows: min-content;
  grid-gap: 10px;
  grid-template-columns: 1fr 1fr;
}
.gbbProductCardActionContainer .gbbProductButtonWrapper{
  width: 50%;
  justify-self: end;
  user-select: none;
}
.gbbProductVariantModalContentContainer{
  display: grid;
  grid-gap: 20px;
}
.gbbProductItemPrice{
}
.gbbProductImageContainer{
  /* width: 140px;
  height: 140px; */
  position: relative;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
}
.gbbProductSliderNavigatior{
  position: absolute;
  bottom: 5px;
  right:5px;
}
.gbbPrevImage,.gbbNextImage{
  margin-left:5px;
  position: absolute;
  top: 50%;
  width: 2px;
  padding: 16px;
  margin-top: -22px;
  color: #777676;
  font-weight: bold;
  font-size: 18px;
  transition: 0.6s ease;
  border-radius: 0 3px 3px 0;
  user-select: none;
  margin-left: 5px;
  font-size: 16px;
  cursor: pointer !important;
}
.gbbNextImage{
  right: 3%;
}
.gbbPrevImage:hover, .gbbNextImage:hover {
  /* background-color: rgb(124 121 121 / 80%);
  color: #ffff; */
  scale: 1.1;
}
.gbbFade {
  animation-name: gbbFade;
  animation-duration: 1.5s;
}

@keyframes gbbFade {
  from {opacity: .4} 
  to {opacity: 1}
}
.gbbProductImageContainerImg{
  width: 100%;
  height: 100%;
  object-fit: cover;
  max-height: 150px;
  background: white;
}
.gbbProductVariantModalContentContainer .gbbProductImageContainerImg{
  max-height: 300px;
}
.gbbAddedToCartText{
  position: absolute;
  top: 5%;
  left: 5%;
  background: #000;
  color: #fff;
  border-radius: 5px;
  padding: 5px;
}
.gbbProductQtyContainer{
  width: 60%;
  margin: 0% 10%;
}
.gbbProductQuantityHTML{
  width: 100%;
  display: grid;
  grid-auto-flow: column;
  grid-gap: 15px;
  align-items: center;
}
.gbbProductQuantityAddButton, .gbbProductQuantityRemoveButton{
  background: #000000;
  color:#ffffff;
  border: none;
  border-radius: 5px;
  width: 35px;
  height: 35px;
  font-size: 24px;
  justify-self: center;
  cursor: pointer;
  position: relative;
  user-select: none;
  
  
}

.gbbProductQuantityAddButtonWrapper, .gbbProductQuantityRemoveButtonWrapper{
  position: absolute;
  top: 16px;
  left: 18px;
  transform: translate(-50%, -50%);
  -webkit-tap-highlight-color: transparent;
  user-select: none;
}


.gbbProductQuantityAddButton{
  justify-self: right;
  -webkit-tap-highlight-color: transparent;
}
.gbbProductQuantityRemoveButton{
  justify-self: left;
  -webkit-tap-highlight-color: transparent;
}
.gbbProductQuantityLabel{
  text-align: center;
  font-size: 16px;
  user-select: none;
}
.gbbProductActionContainer{
  width: 100%;
  padding: 10px 10px;
  align-items: center;
  display: grid;
  grid-gap:5px;
  padding-top: 5px;
}
.gbbProductAddButton{
  -webkit-tap-highlight-color: transparent;
  padding: 10px;
  width: 100%;
  background: #000000;
  color: #ffffff;
  border-radius: 5px;
  border: none;
  font-size: 14px;
  cursor: pointer;
  text-align: center;
}

.gbbProductAddButton:active, .gbbProductQuantityAddButton:active, .gbbProductQuantityRemoveButton:active {
  transform: scale(0.95);
}
.gbbProductTextContainer, .gbbProductCardTextContainer,.gbbProductDynamicContentContainer{
  text-align: left;
  width: 100%;
  font-size: 12px;
  align-self: center;
  padding: 5px 10px;
}
.gbbProductCardTextContainer > div{
  font-weight: bold;
  padding: 0;
  font-size: 14px;
}
.gbbProductItemPrice{
  font-size: 12px;
  /* color: black; */
}
.gbbProductItemTitle{
  /* color: black; */
}
.gbbProductsLabel{
  margin: 0 5px;
  font-size: 16px;
  font-weight: 600;
  color: #4f4b4b;
  margin-bottom: 20px;
}
.gbbProductQuantityHTMLContainer{
  display: grid;
  grid-auto-flow: column;
  grid-template-columns: 0.2fr 0.2fr;
  grid-gap: 15px;
  -webkit-tap-highlight-color: transparent;
}
.gbbPageBannerImage{
  width: 100%;
}
.gbbAddProductsPageNavigationContainer, .gbbChooseGiftBoxPageNavigationContainer, .gbbPersonalizePageNavigationContainer{
  /* width: 100%; */
  position: relative;
  /* top: 15%; */
  /* transform: translate(0px, -45%); */
}
.gbbAddProductsPageHTML, .gbbChooseGiftBoxPageHTML, .gbbPersonalizePageHTML{
  /* position: relative;  */
  /* transform: translate(0px, -150px); */
}
.gbbPrecuratedBoxPageHTML{
  position: relative; 
  transform: translate(0px, -100px);
}
/* .gbbAddProductsPageNavigationContainer .gbbNavigationItemsContainer::before{
  content: none;
}
.gbbChooseGiftBoxPageNavigationContainer .gbbNavigationItemsContainer::before{
  content: none;
}
.gbbPersonalizePageNavigationContainer .gbbNavigationItemsContainer::before{
  content: none;
} */
/* do it for other pages also */
/* .gbbAddProductsPageNavigationContainer .gbbNavigationItemsContainer{ 
  margin: 0 10%;
}
.gbbChooseGiftBoxPageNavigationContainer .gbbNavigationItemsContainer{ 
  /* margin: 0 10%; */
  /* margin: 10%; */
/* } */
/* .gbbPersonalizePageNavigationContainer .gbbNavigationItemsContainer{ 
  margin: 0 10%;
}  */

.gbbChooseGiftBoxPageHeader, .gbbAddProductsPageHeader{
  
}

.gbbProductRemoveButton{
  background: rgb(237 159 159);
}
.gbbProductSoldOutButton{
  background: #d2cccc;
  pointer-events: none;
}
/********************PRODUCT VARIANTS MODAL*********************************/
.gbbDisabled {
  pointer-events: none;
  opacity: 0.2;
  /* background-color: black; */
}
.gbbProductVariantModalMainContainer{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  background-color: rgba(24,24,24,0.8);
  z-index: 1000000000;
}
.gbbProductVariantModalContainer{
  position: fixed;
  /* top: 30%;
  left: 5% !important;
  right: 5% !important;
transform: translate(0%, -50%); */
  /* width: 100%;
  margin: 0 25px; */
  height: 100%;
  background: #ffff;
  overflow-y: auto;
  z-index: 100;
  display: grid;
  /* grid-template-rows: 0.1fr 0.6fr 0.1fr;; */
  padding: 20px;
  border: 2px solid #b2b5b9;
  border-radius: 5px;
  grid-gap: 20px;
  overflow-x: hidden;
  /* animation: zoom-in-zoom-out 0.2s ease; */

}
.gbbCartProductsMainContainer{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  background-color: rgba(24,24,24,0.8);
  z-index: 1000000000;
}
.gbbCartProductsContainerModal{
  position: fixed;
  z-index: 1000000000;
  transform: translate(0, -50%);
  background: #ffff;
  border-radius: 5px;
  text-align: center;
  padding: 10px;
  max-height: 95vh;
  /* left: 5vw;
  top: 5vh;
  right: 5vw; */
  left: 5vw;
  right: 5vw;
  top: 50vh;
}
.gbbCartProductsContainerHeader{
  display: grid;
  grid-template-columns: 1fr 0.2fr;
  justify-content: space-between;
  align-items: center;
}
.gbbCartProductsModalClose{
  justify-self: end;
  padding: 12px 10px;
  font-weight: bold;
  transform: rotate(45deg);
  font-size: 35px;
  position: absolute;
  top: -8px;
  right: 0px;
  color: #B2B5B9;
  cursor: pointer;
  user-select: none;
}
.gbbModalTotalContainer{
  display: grid;
  grid-template-columns: 1fr 1fr;
  justify-content: space-between;
  align-items: center;
  padding: 0 5px;
}
.gbbModalTotalContainer .gbbFooterTotalContainer{
  text-align: unset;
}
.gbbModalTotalContainer .gbbFooterTotalLabel{
  justify-self: start;
  font-size: 16px;
  font-weight: 600;
}
.gbbModalTotalContainer .gbbFooterTotalValue{
  justify-self: end;
}
.gbbConditionNotificationToastMainContainer{
  position: fixed;
  top: 80%;
transform: translate(-50%, -50%);
  background: #ffff;
  padding: 20px;
  border-radius: 5px;
  text-align: center;
  z-index: 300;
}
.gbbConditionNotificationToast {
  position: absolute;
  left: 50%;
  bottom: 80%;
  right: 5%;
  transform: translate(-50%, -50%);
  background: #ffff;
  z-index: 99999999999;
  padding: 5px 15px;
  border-radius: 5px;
  width: 80%;
  display: grid;
  grid-auto-flow: column;
  grid-gap: 20px;
  align-items: center;
  justify-content: center;
}
@keyframes zoom-in-zoom-out {
  0% {
    transform: scale(0, 0);
  }
  50% {
    transform: scale(0.5, 0.5);
  }
  100% {
    transform: scale(1, 1);
  }
}



.gbbProductVariantOptionValue{
  padding: 5px 15px;
  border: none;
  background: #f1f2f3;
  font-size: 14px;
  border-radius: 5px;
  cursor: pointer;
}
.gbbProductVariantModalHeader{
  display: grid;
  grid-auto-flow: column;
}
.gbbProductVariantOptionLabel, .gbbProductQuantityHeading{
  font-weight: bold;
  font-size: 14px;
}
.gbbProductVariantNotAvailableWarning{
  font-size: 14px;
  color: red;
  font-weight: bold;
  display: none;
}
.gbbProductVariantOptionValuesContainer{
  /* padding: 10px 0; */
  display: flex;
  flex-wrap: wrap;
  row-gap: 10px;
  column-gap: 10px;
}
.gbbProductVariantAddButton{
  padding: 5px 10px;
  width: 100%;
  display: grid;
  justify-self: end;
  border: none;
  border-radius: 5px;
  background: #000000;
  color: #ffffff;
  cursor: pointer;
  text-align: center;
  align-items: center;
}
.gbbProductVariantAddButton:active {
  transform: scale(0.95);
}
.gbbProductVariantModalClose{
  justify-self: end;
  padding: 2px 10px;
  font-weight: bold;
  transform: rotate(45deg);
  font-size: 35px;
  position: absolute;
  top: -5px;
  right: 0px;
  color: #B2B5B9;
  cursor: pointer;
  user-select: none;
}
.gbbConditionNotificationClose{
  justify-self: end;
  transform: rotate(45deg);
  font-size: 35px;
  color: #ffff;
  cursor: pointer;
}
.gbbFooterProductPrice, .gbbCartModalProductPrice{
  font-weight: bold;
}
.gbbFooterTotalValueContainer{
  display: grid;
  grid-auto-flow: column;
  grid-gap: 5px;
  grid-template-columns: repeat(2, min-content);
  justify-content: end;
}
.gbbFooterOriginalTotalValue, .gbbSummaryPageBundleOriginalPrice{
  text-decoration: line-through;
}
.gbbFooterProductsContainer{

}
.gbbDiscountMessage{
  text-align: center;
  font-size: 16px;
  color: black;
}
/* .gbbFooterProductsContainer::-webkit-scrollbar {
  width: 0.3rem;
}

.gbbFooterProductsContainer::-webkit-scrollbar-track {
  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
}

.gbbFooterProductsContainer::-webkit-scrollbar-thumb {
  background-color: darkgrey;
} */

/********FILTER PRODUCTS*******************************/
.gbbProductsFilterContainer{
  margin: 0 20px;
  cursor: pointer;
  /* margin-top: 70px; */
}
.gbbFiltersDropDownWrapper{
  display: grid;
  grid-template-columns: 1fr 50px;
  margin: 10px 0px;
  align-items: center;
}

.gbbFiltersDropDownButton{
/* transform: rotate(180deg); */
/* height: 30px; */
    display: grid;
width: auto;
cursor: pointer
}
.gbbProductsFilterHeader{
  cursor: pointer !important;
}
.gbbProductsFilterButton{
  color: #796c6c;
  padding: 10px 15px;
  font-size: 16px;
  border: none;
  background: #f1f2f3;
  font-weight: 500;
  font-weight: bold;
  margin: 10px 0;
  border-radius: 5px;
  cursor: pointer;
}
.gbbProductsFilterTagsContainer{
  /* width: min-content; */
  /* display: grid;
  grid-template-columns: repeat(3,1fr);
  grid-gap: 30px; */
  display: flex;
  flex-flow: row wrap;
  gap: 10px;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #f1f2f3;
}
.gbbActiveFilter{
  background: #000000;
  color: #ffffff;
}
.gbbFilterTagContainer{
  /* padding: 0 10px; */
  background: #f1f2f3;
  border-radius: 5px;
  /* display: grid;
  grid-auto-flow: column;
  grid-gap: 10px;
  height: min-content;
  justify-items: center; */
}
.gbbFilterTagText{
  color: black;
  padding: 5px 10px;
}
.gbbFilterTagRemoveSymbol{
  font-size: 14px;
  align-self: center;
}
.gbbFiltersSideBarContainer, .gbbProductsFiltersMainContainer{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  z-index: 999999999;
  transition: transform 2s;
}
.gbbProductsFiltersMainContainer{
  background-color: rgba(24,24,24,0.8);
  height: 100%;
}
.gbbProductsFiltersContainer{
  background: white;
  padding: 4%;
  height: 100%;
  width: 70%;
  transition: 0.5s;
  transform: translateX(-100%);
  overflow-y: auto;
  animation: slide-in 0.5s forwards;
  -webkit-animation: slide-in 0.5s forwards;
}
.gbbProductsFiltersContainerHeader{
  display: flex;
  justify-content: space-between;
  margin: 10px 0px;
  position: relative;
}
.gbbFilterDropDownButton{
  transform: rotate(180deg);
  height: 30px;
  width: auto;
  cursor: pointer;
}
.gbbProductsFiltersContainerHeaderLabels{
  display: grid;
  grid-auto-flow: column;
  grid-gap: 10px;
  align-items: center;
}
.gbbProductsFiltersClearLabel{
  font-size: 10px;
  text-decoration: underline;
  cursor: pointer;
}
.gbbProductsFiltersContainerLabel{
  font-weight: 600;
  font-size: 16px;
}
.gbbFilterModalClose{
  justify-self: end;
  transform: rotate(45deg);
  font-size: 45px;
  position: absolute;
  top: -30px;
  right: 0px;
  color: #B2B5B9;
  cursor: pointer;
}
.gbbProductsFilterTagContainer{
  display: flex;
  gap: 10px;
  align-items: center;
}
.gbbProductsFilterTagCheckbox{
  width: 16px;
  height: 16px;
}
.gbbFilterContainer {
  border-top: 1px solid #d5cccc;
  padding-bottom: 15px;
  cursor: pointer; 
}

.gbbFilterTagsContainer{
  height: 85%;
  /* overflow-y: scroll; */
  overflow-y: auto;
}

.gbbFiltersSearchSortHeader{
  margin: 5px 10px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-gap: 10px;
}
.gbbFiltersMainButtonWrapper{
  display: grid;
  grid-auto-flow: column;
  grid-gap: 15px;
  align-items: center;
  font-size: 14px;
  border: 1px solid #f1f2f3;
  padding: 0 20px;
  cursor: pointer;
}
/* Filters sidebar animation */
.gbbFiltersSideBarContainerSlideIn {
  animation: slide-in 0.5s forwards;
  -webkit-animation: slide-in 0.5s forwards;
}

.gbbFiltersSideBarContainerSlideOut {
  animation: slide-out 0.5s forwards;
  -webkit-animation: slide-out 0.5s forwards;
}
  
@keyframes slide-in {
  100% { transform: translateX(0%); }
}

@-webkit-keyframes slide-in {
  100% { -webkit-transform: translateX(0%); }
}
  
@keyframes slide-out {
  0% { transform: translateX(0%); }
  100% { transform: translateX(-100%); }
}

@-webkit-keyframes slide-out {
  0% { -webkit-transform: translateX(0%); }
  100% { -webkit-transform: translateX(-100%); }
}
/* code for price filter from codepen ->  https://codepen.io/sln/pen/bqzRMq */
.gbbFilterPriceContainer {
  width: 100%;
  border: 0;
  padding: 0;
  margin: 0; 
}

.gbbPriceFieldContainer {
  position: relative;
  width: 100%;
  height: 36px;
  box-sizing: border-box;
  background: rgba(248, 247, 244, 0.2);
  padding-top: 15px;
  border-radius: 3px;
}

.gbbPriceFieldContainer input[type=range] {
    position: absolute;
}

/* Reset style for input range */

.gbbPriceFieldContainer input[type=range] {
  width: 100%;
  height: 2px; 
  border: 0;
  outline: 0;
  box-sizing: border-box;
  border-radius: 5px;
  pointer-events: none;
  -webkit-appearance: none;
}

.gbbPriceFieldContainer input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
}

.gbbPriceFieldContainer input[type=range]:active,
.gbbPriceFieldContainer input[type=range]:focus {
  outline: 0;
}

.gbbPriceFieldContainer input[type=range]::-ms-track {
  width: 100%;
  height: 2px; 
  border: 0;
  outline: 0;
  box-sizing: border-box;
  border-radius: 5px;
  pointer-events: none;
  background: transparent;
  border-color: transparent;
  color: transparent;
  border-radius: 5px;
}

/* Style toddler input range */

.gbbPriceFieldContainer input[type=range]::-webkit-slider-thumb { 
  /* WebKit/Blink */
    position: relative;
    -webkit-appearance: none;
    margin: 0;
    border: 0;
    outline: 0;
    border-radius: 50%;
    height: 15px;
    width: 15px;
    margin-top: -6px;
    background-color: #686662;
    cursor: pointer;
    cursor: pointer;
    pointer-events: all;
    z-index: 100;
}

.gbbPriceFieldContainer input[type=range]::-moz-range-thumb { 
  /* Firefox */
  position: relative;
  appearance: none;
  margin: 0;
  border: 0;
  outline: 0;
  border-radius: 50%;
  height: 10px;
  width: 10px;
  margin-top: -5px;
  background-color: #686662;
  cursor: pointer;
  cursor: pointer;
  pointer-events: all;
  z-index: 100;
}

.gbbPriceFieldContainer input[type=range]::-ms-thumb  { 
  /* IE */
  position: relative;
  appearance: none;
  margin: 0;
  border: 0;
  outline: 0;
  border-radius: 50%;
  height: 10px;
  width: 10px;
  margin-top: -5px;
  background-color: #686662;
  cursor: pointer;
  cursor: pointer;
  pointer-events: all;
  z-index: 100;
}

/* Style track input range */

.gbbPriceFieldContainer input[type=range]::-webkit-slider-runnable-track { 
  /* WebKit/Blink */
  width: 188px;
  height: 2px;
  cursor: pointer;
  background: #686662;
  border-radius: 5px;
}

.gbbPriceFieldContainer input[type=range]::-moz-range-track { 
  /* Firefox */
  width: 188px;
  height: 2px;
  cursor: pointer;
  background: #686662;
  border-radius: 5px;
}

.gbbPriceFieldContainer input[type=range]::-ms-track { 
  /* IE */
  width: 188px;
  height: 2px;
  cursor: pointer;
  background: #686662;
  border-radius: 5px;
}

/* Style for input value block */

.gbbPriceTextWrap {
  display: flex;
  justify-content: space-between;
  color: #686662;
  font-size: 14px;
  line-height: 1.2em;
  font-weight: 400;
  margin: 5px 0;
}

.gbbPriceWrap1, 
.gbbPriceWrap1 {
  display: flex;
}



.gbbPriceTextWrap #gbbPriceWrap1Input, 
.gbbPriceTextWrap #gbbPriceWrap2Input {
  width: 30px;
  text-align: right;
  margin: 0;
  padding: 0;
  margin:0 2px;
  background:  0;
  border: 0;
  outline: 0;
  color: #fff;
  font-size: 14px;
  line-height: 1.2em;
  font-weight: 400;
}

.gbbPriceTextWrap label {
  text-align: right;
}

/* Style for active state input */
    
.gbbPriceFieldContainer input[type=range]:hover::-webkit-slider-thumb {
  box-shadow: 0 0 0 0.5px #686662;
  transition-duration: 0.3s;
}

.gbbPriceFieldContainer input[type=range]:active::-webkit-slider-thumb {
  box-shadow: 0 0 0 0.5px #686662;
  transition-duration: 0.3s;
}
.gbbSortByDropDownSelect{
  cursor: pointer;
  padding: 5px 25px;
  border: 2px solid #f1f2f3;
  font-size: 14px;
}
/* style for search box */
.gbbSearchBarMainWrapper{
display: grid;
  grid-template-columns: 0.1fr 1fr;
  align-items: center;
  grid-column: 2;
  margin: 10px 0;
  justify-self: end;
  /* border-bottom: 1px solid #f1f2f3; */
  border-bottom: 1px solid #000000;
}
.gbbSearchBarIcon{
  width: fit-content;
  display: grid;
}
.gbbSearchBarInput{
  padding: 10px;
  font-size: 14px;
  border: none;
  box-shadow: none;
    outline: none;
        width: 100%;
    background-color: transparent;
}
.gbbSearchBarInput::placeholder{
  color: #c4c4c4;
}
/* .gbbSearchBarMainWrapper:focus-within{
  border-bottom: 1px solid #000000;
} */
 .gbbProductsNotAvailable{
  text-align: center;
  font-size: 2rem;
  grid-column: 1 / -1;
 }
/*******************FOOTER HTML****************************/
.gbbAddProductsPageFooterHTML,.gbbChooseGiftBoxPageFooterHTML, .gbbPersonalizePageFooterHTML, .gbbPrecuratedBoxPageFooterHTML, .gbbMultipleCategoriesPageFooterHTML{
  background: #D7D7D7;
  padding: 5px;
  position: sticky;
  bottom: 0;
  /* z-index: 999999; */
}
.gbbProductsFooterHTML{
  display: grid;
  grid-template-columns: 1fr 0.2fr;
  grid-gap: 20px;
  padding: 10px;
  position: relative;
  background: #D7D7D7;
  /* background: #f1f2f3;
  padding: 5px;
  position: sticky;
  bottom: 0; */
}
.gbbFooterProductsContainer{
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: min-content;
  grid-gap: 5px;
  overflow-x: auto;
  overflow-y: hidden;
}
.gbbCartModalProductsContainer{
  display: grid;
  grid-auto-flow: column;
  grid-gap: 5px;
  /* overflow-x: auto; */
  overflow-y: auto;
  max-height: 70vh;
}
.gbbCartModalProductsContainer{
  grid-auto-flow: row;
}
.gbbFooterProductContainer, .gbbCartModalProductContainer{
  display: grid;
  grid-auto-flow: column;
  grid-gap: 10px;
  position: relative;
  padding: 5px;
}
.gbbCartModalProductContainer{
  grid-template-columns: 0.5fr 3fr;
}


.gbbFooterProductImageContainer{
  display: grid;
  width: 50px;
  height: 50px;
  border: 1px solid #cfc9c9;
  overflow: hidden;
}
.gbbCartProductImageContainer{
  display: grid;
  width: 80px;
  height: 80px;
  border: 1px solid #cfc9c9;
  overflow: hidden;
}
.gbbViewCartProductsLink{
  text-decoration: underline;
  cursor: pointer; 
}
.gbbCartModalProductImage{
  width: 100%;
  height: 100%;
}

.gbbFooterProductRemoveButton, .gbbCartModalProductRemoveButton{
  position: absolute;
  cursor: pointer;
}
.gbbCartProductImageContainer{
  object-fit: contain;
}
.gbbFooterProductImage{
  /* max-width: 50px; */
  /* max-width: 40px;
  min-height: 40px; */
  width: 100%;
  height: 100%;
  object-fit: contain;
}
.gbbFooterProductTextContainer{
  font-size: 12px;
  width: 100px;
}
.gbbCartModalProductTextContainer{
  font-size: 14px;
  /* width: 165px; */
  display: grid;
  grid-template-columns: 1fr 0.2fr;
  justify-content: space-between;
  align-items: start;
  grid-gap: 10px;
}
.gbbCartProductsContainerHeaderLabel{
  justify-self: start;
  font-size: 16px;
  font-weight: bold;
}
.gbbProductsFooterHTMLForMobile .gbbFooterButtonsWrapper{
  grid-template-columns: 1fr 2fr;
}
.gbbFooterProductTitle{
  width: 100px;
  white-space: nowrap;
  text-overflow: ellipsis;
  display: block;
  overflow: hidden;
}
.gbbCartModalProductTitle{
  width: 100%;
  text-align: left;
}
.gbbCartModalProductPriceQtyContainer{
  display: grid;
  grid-template-columns: 1fr 2fr;
  grid-gap: 5px;
}
.gbbFooterTotalLabel{
  color: black;
  font-size: 14px;
  line-height: 8px;
}
.gbbFooterTotalValue{
  color: black;
  font-weight: 600;
  font-size: 16px;
  white-space: nowrap;
}
.gbbFooterButtonsWrapper{
  display: grid;
  grid-gap: 15px;
  grid-template-columns: auto auto;
}
.gbbFooterBackButton, .gbbFooterNextButton {
  font-size: 12px;
  padding: 10px 15px;
  border: none;
  border-radius: 5px;
  text-align: center;
  font-weight: 600;
  cursor: pointer;
  user-select: none;
}
.gbbFooterBackButton{
  background: grey;
  color: #ffff;
}
.gbbFooterBackButton:active {
  transform: scale(0.95);
}
.gbbFooterNextButton {
  color: #000;
  background: #000000;
  color: #ffffff;
  grid-column: 2 /-1;
}

.gbbFooterNextButton:active {
  transform: scale(0.95);
}

.gbbFooterTotalContainer{
  text-align: right;
}
.gbbFooterProductQtyPriceContainer, .gbbCartModalProductQtyPriceContainer{
  display: flex;
  gap: 5px;
}
.gbbCartModalProductTitleQty{
  display: grid;
  justify-content: start;
  width: unset;
}
.gbbCartModalProductQuantity{
  justify-self: start;
}
.gbbAddedToCartText{
  position: absolute;
  top: 5%;
  left: 5%;
  background: black;
  color: #ffff;
  padding: 0 4px;
  border-radius: 5px;
  font-size: 12px;
}
.gbbViewProductsLabelAndTotalContainer{
  display: grid;
  grid-template-columns: 1fr 0.4fr;
}
.gbbCartProductsContainerModal{
  display: grid;
  grid-gap: 10px;
}
.gbbAddProductsPageHTML .gbbProductsFilterContainer, .gbbChooseGiftBoxPageHTML .gbbProductsFilterContainer, .gbbPrecuratedBoxPageHTML .gbbProductsFilterContainer{
  /* margin-top: 120px; */
}

.gbbLoadMoreProductsButton{
  text-align: center;
  margin: 20px;
  padding: 10px;
  border: 1px solid black;
  cursor: pointer;
  font-size: 16px;
  font-weight: 600;
}
.gbbProductAllImagesContainer{
  display: none;
  max-height: 200px;
}
.gbbProductVariantModalImageTitleContainer{
  display: grid;
  grid-gap: 15px;
}
.gbbProductTileImageContainer{
  display: grid;
  justify-items: center;
  align-items: center;
}


@media (min-width:600px){

  .gbbProductsItemsContainer{
      grid-template-columns: repeat(3,1fr);
   
  }
  /* .gbbProductItem{
      grid-template-rows: 3fr 0.8fr 0.8fr;
  } */
  .gbbProductImageContainerImg{
      max-height: 180px;
  }
  
  .gbbAddProductsPageNavigationContainer,.gbbPersonalizePageNavigationContainer,.gbbChooseGiftBoxPageNavigationContainer{
  }
  .gbbAddProductsPageNavigationContainer, .gbbChooseGiftBoxPageNavigationContainer, .gbbPersonalizePageNavigationContainer{
      /* transform: translate(0px, -35%); */
  } 
  .gbbProductTextContainer, .gbbProductItemPrice,.gbbProductDynamicContentContainer{
      font-size: 14px;
  }
  .gbbProductCardTextContainer > div{
      font-size: 18px;
  }
  .gbbProductActionContainer{
      display: grid;
      grid-template-columns: auto auto;
      justify-content: space-between;
      grid-gap: max-content;
      width: 100%;
  } 
  .gbbProductsFilterTagsContainer{
  }
  .gbbAddedToCartText{
      font-size: 14px;
  }
  .gbbAddProductsPageHeader, .gbbChooseGiftBoxPageHeader{
  }
  .gbbProductsFiltersContainerLabel{
      font-size: 20px;
  }
  .gbbFiltersMainButtonWrapper{
      font-size: 18px;
  }
  .gbbSortByDropDownSelect{
      font-size: 18px;
  }
  .gbbFiltersMainButtonWrapper{
      justify-self: start;
      padding: 5px 20px;
  }
  .gbbSortByDropDownContainer{
      justify-self: end;
  }
  .gbbProductsFiltersClearLabel{
      font-size: 14px;
  }
  .gbbProductVariantModalBodyContainer{
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      align-items: center;
      grid-gap: 15px;
  }
  .gbbProductVariantModalDetailsContainer{
      display: grid;
      grid-gap: 20px;
  }
  .gbbProductVariantOptionsContainer{
      display: grid;
      grid-gap: 15px;
  }
  .gbbProductVariantOptionLabel, .gbbProductQuantityHeading{
      font-weight: bold;
      font-size: 16px;
  }
  .gbbProductVariantOptionValue{
      font-size: 16px;
  }
  .gbbProductVariantAddButton{
      /* width: 50%; */
  }
  .gbbProductDescriptionText{
      max-height: 150px;
  }
  .gbbProductAllImagesContainer{
      display: grid;
      grid-gap: 5px;
      grid-auto-columns: min-content;
      grid-template-columns: repeat(4, 1fr);
      overflow-y: auto;
  }
  .gbbProductTileImageContainer{
      object-fit: contain;
  }
  .gbbProductTileImage {
      max-height: 70px;
  }
}
/* @media (min-width:768px) and (max-widthx:1023px){
  .gbbAddProductsPageNavigationContainer, .gbbChooseGiftBoxPageNavigationContainer{
      transform: translate(0px, -55%);
  }    
} */
@media (min-width:1024px){
  .gbbProductVariantModalContainer{
      top: 40vh;
      left: 50vw !important;
      transform: translate(-50%, -50%);
      margin: 10vh 0;
      height: unset;
      grid-gap: 15px;
      max-height: 95vh;
  }
  .gbbProductImageContainerImg{
      max-height: 200px;
  }

  .gbbPrevImage,.gbbNextImage{
      font-size: 20px;
  }

  .gbbProductItem:hover {
      box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
  }

  .gbbProductItem{
      grid-template-rows: 3fr 0.8fr 0.8fr;
  }

  .gbbProductImageContainer{
      /* width: 235px;
      height: 235px; */
  }
  .gbbProductsLabel{
      margin: 0 10px;
      font-size: 18px;
      margin-bottom: 20px;
  }
  .gbbPageBannerImage{
      width: 100%;
      height: 10vw;
  }
  .gbbProductButton{
      padding: 10px;
  }
  .gbbFooterProductTextContainer{
      width: 150px;
      font-size: 12px;
  }
  .gbbFooterProductTitle{
      width: 150px;
  }
  .gbbFooterProductImage{
      /* min-height: 50px;
      max-width: 50px; */
  }
  .gbbFooterBackButton, .gbbFooterNextButton {
      font-size: 14px;
  }
  .gbbFooterTotalValue{
      font-size: 16px;
  }
  .gbbFooterTotalContainer{
      text-align: right;
  }
  .gbbFooterProductsContainer{
      grid-gap: 0;
  }
  .gbbProductsFilterContainer{
      margin: 0 20px;
      cursor: pointer;
      /* margin-top: 80px; */

  }
  .gbbChooseGiftBoxPageHTML .gbbProductsFilterContainer{
      /* margin-top: 0 !important; */
  }
  .gbbProductsFilterButton{
      color: #796c6c;
      padding: 10px 15px;
      font-size: 16px;
      border: none;
      background: #f1f2f3;
      font-weight: 500;
      font-weight: bold;
      margin: 10px 0;
      border-radius: 5px;
      cursor: pointer;
  }
  .gbbProductsFilterTagsContainer{
      /* width: min-content; */
      
  }
  .gbbFilterTagContainer{
      /* padding: 0 10px; */
      background: #f1f2f3;
      border-radius: 5px;
      /* display: grid;
      grid-auto-flow: column;
      grid-gap: 10px;
      height: min-content; */
  }
  .gbbFilterTagText{
      color: black;
      padding: 5px 10px;
  }
  .gbbFilterTagRemoveSymbol{
      font-size: 14px;
      align-self: center;
  }
  .gbbProductsFilterTagsContainer{
      padding: 20px;
      border-radius: 5px;
  }
  .gbbPrevImage,.gbbNextImage{
      width: 5px;
  }
  .gbbAddProductsPageNavigationContainer, .gbbChooseGiftBoxPageNavigationContainer, .gbbPersonalizePageNavigationContainer{
      /* transform: translate(0px, -40%); */
  }  
  .gbbProductTextContainer, .gbbProductItemPrice, .gbbProductCardTextContainer,.gbbProductDynamicContentContainer{
      font-size: 14px;
  }

  .gbbProductDynamicContentContainer{
    font-weight: 600;
  }

  .gbbChooseGiftBoxPageHeader{
  }
  .gbbAddProductsPageHeader {
  }
  .gbbProductsFiltersContainer{
      background: white;
      width: 25%;
  }
  .gbbConditionNotificationToast{
      width: max-content;
  }
}
@media(min-width:1192px){
  .gbbProductsItemsContainer{
      grid-template-columns: repeat(4,1fr);
  }
  .gbbProductImageContainerImg{
      max-height: 240px;
  }
  .gbbLoadMoreProductsButton{
      border: none;
      border-bottom: 1px solid black;
  }
}

@media(min-width:1600px){
  .gbbProductsItemsContainer{
      grid-template-columns: repeat(5,1fr);
  }
  
}

@media(min-width:1920px){
  .gbbProductsItemsContainer{
      grid-template-columns: repeat(6,1fr);
  }
}

@media(min-width:2560px){
  .gbbProductsItemsContainer{
      grid-template-columns: repeat(8,1fr);
  }
}

@media(min-width:3840px){
  .gbbProductsItemsContainer{
      grid-template-columns: repeat(12,1fr);
  }
}

@media(min-width: 1023px){

  .gbbProductItemOverLay{
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex !important;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
    cursor: pointer;
  }
  
  
  .gbbOverLayIconContainer{
    display: block !important;
    width:100%;
    height: 100%;
    background-image: url("https://d3ks0ngva6go34.cloudfront.net/storefront/overlay-image.svg");
    background-repeat: no-repeat;
    background-size: 25%;
    background-position: center;
  }


  /* .gbbProductItem:hover .gbbProductItemOverLay{
    opacity: 0.8;
    display: flex !important;
  } */

  .gbbProductImageContainer:hover .gbbProductItemOverLay{
    opacity: 0.8;
    display: flex !important;
  }
}


.gbbProductFormText{
  margin: 0px;
  padding: 10px 18px;
  width: 100%;
  background-color: #ffffff;
  color: #000000;
  max-width: 100%;
  line-height: 1.2;
  border-radius: 2px;
  padding-bottom: 10px;
  border: 1px solid #A2A2A2;
  font-size: 14px !important;
}

.gbbProductVariantModalContainerWithPersonalization .gbbProductDescriptionContainer{
  display: none;
}

.gbbRequiredFieldMessage{
    color: red;
    margin: 0;
    padding: 0;
    font-size: 12px;

}

.gbbProductFormTextCharacterCount {
  font-size: 12px;
  color: #8c8c8c;
  text-align: end;
  grid-column: 2/-1;
}
.gbbProductFormValidationContainer{
  display: grid;
  grid-template-columns: 1fr 1fr;
}


/* For the main list container */
/* .gbbProductFormImageSelectorListContainer {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-gap: 10px;
} */

/* For individual list items within the list container */
.gbbProductFormImageSelectorListItems {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

/* For the label element */
.gbbProductFormImageSelectorListLabel {
  width: 100%;
  height: 125px;
  position: relative;
  cursor: pointer;
  display: inline-block;
  align-self: center;
}

/* For individual list items */
.gbbProductFormImageSelectorListItem {
  position: relative;
}

/* For the input (radio button) element */
.personalizationImageInput {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  visibility: hidden;
}

/* For the image element */
.personalizationImage {
  width: 100%;
  height: auto;
  height: 100%;
}

.gbbActiveImageSelectorListItem{
  border: 1px solid #000000;
  opacity: 0.5;
  padding : 10px;
  padding : 5px;
}

.gbbProductFormContainer{
  display: grid;
  grid-gap: 10px;
}

.gbbPersonalizationImageCaption {
  position: absolute;
  bottom: 5%;
  width: 100%;
  opacity: 0;
  background-color: rgba(0,0,0,0.5);
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: opacity 0.5s;
  cursor: pointer;
  font-size: 1.5rem;
  font-weight: bold;
  text-align: center;
}

.gbbActiveImageSelectorListItem .gbbPersonalizationImageCaption{
  opacity: 0;
  padding: 10px;
}


.gbbProductFormRadioListItems{
  display: flex;
  gap: 20px;
}

.personalizationRadioLabel{
  padding-left: 5px;
}

/* =============== NEW PRODUCT CARD DESIGN ============== */
.gbbProductsCardLayoutV2 .gbbProductTextContainer,.gbbProductsCardLayoutV2 .gbbProductItemPricesContainer{
  text-align: center;
}
.gbbProductsCardLayoutV2 .gbbProductActionContainer{
  grid-template-columns: 1fr;
  padding: 0px;
  grid-template-rows: .5fr 45px;
  place-self: end;
}
.gbbProductsCardLayoutV2 .gbbProductItemPricesContainer{
  display: grid;
  grid-template-columns: auto auto;
  justify-self: center;
  gap:10px;
}
.gbbProductsCardLayoutV2 .gbbProductItem{
  background: white;  
  padding: 8px;
  grid-gap: 5px;
  border-radius: 12px;
  border: 1px solid #E3E3E3;
}
.gbbProductsCardLayoutV2 .gbbProductItem:has(.gbbReviewStarsContainer){
    grid-template-rows: min-content;
}
.gbbProductsCardLayoutV2 .gbbProductItem:not(:hover){
  box-shadow: none;
}
.gbbProductsCardLayoutV2 .gbbProductImageContainer{
  border-radius: 8px;
  overflow: hidden;
}
.gbbProductsCardLayoutV2 .gbbProductQuantityHTML,.gbbProductVariantModalLayoutV2 .gbbProductQuantityHTML{
  height: 100%;
  padding: 5px;
  border-radius: 9px;
  place-items: center;
  background: #eeeeee;
}
.gbbProductsCardLayoutV2 .gbbProductTitleOnly{
  font-weight: bold;
    font-size: 18px;
    line-height: 22px;
}
.gbbProductsCardLayoutV2 .gbbFooterButtonsWrapper{
      grid-template-columns: .5fr 1fr .5fr;
        width: 100%;
}
.gbbProductsCardLayoutV2 .gbbDiscountMessage{
  font-weight: bold;
}
.gbbProductsCardLayoutV2 .gbbFooterButtonsContainer{
  display: grid;
    justify-items: center;
    background: #f6f6f6;
    padding: 8px;
    border-radius: 12px;
}
.gbbProductsCardLayoutV2 .gbbFooterTotalContainer{
    display: grid;
      grid-template-columns: repeat(2, min-content);
      align-items: center;
      grid-gap: 10px;
      font-weight: bold;
      place-content: center;
}
.gbbProductsCardLayoutV2 .gbbFooterTotalValueContainer{
  justify-content: start;
}
.gbbProductsCardLayoutV2 .gbbFooterBackButton{
  color: black ;
    border: 2px solid black;
    background: white ;
}
.gbbProductsCardLayoutV2 .gbbFooterNextButton{
  grid-column: 3;
}
.gbbProductsCardLayoutV2 .gbbProductsFooterHTML{
  grid-template-columns: 1fr;
  padding: 10px 0px;
  grid-gap: 8px;
}
.gbbProductsCardLayoutV2 .gbbDiscountFooterHTML{
  padding-top: 5px;
}
.gbbDiscountFooterHTML:has(.progressBarContainer) {
  display: grid;
  grid-gap: 10px;
}
.gbbProductsCardLayoutV2 .gbbDiscountMessageContainer{
      display: grid;
        grid-template-columns: repeat(2, max-content);
        place-content: center;
        grid-gap: 10px;
        align-items: center;
        /* cursor: pointer; */
}
.gbbProductsCardLayoutV2 .gbbProductAddButton{
  border-radius: 10px;
  font-weight:  bold;
}

.gbbProductsCardLayoutV2 .gbbShowBoxProductsToggle{
  height: 25px;
}
.gbbProductsCardLayoutV2 .gbbShowBoxProductsToggleContainer{
  display: flex;
  align-items: center;
}
.gbbProductsCardLayoutV2 .gbbShowBoxProductsToggleContainer>svg{
  height: 30px;
  width: 30px;
}
.gbbProductsCardLayoutV2 .gbbProductQuantityRemoveButton,.gbbProductsCardLayoutV2 .gbbProductQuantityAddButton{
        border-radius: 6px;
        width: 100%;
}
.gbbProductsCardLayoutV2 .gbbProductQuantityAddButtonWrapper,.gbbProductsCardLayoutV2 .gbbProductQuantityRemoveButtonWrapper{
  top: 50%;
  left: 50%;
}
.gbbProductsCardLayoutV2 .showBoxProductsInFooter{
  display: grid;
  grid-template-columns: repeat(2, max-content);
  justify-content: center;
  align-items: center;
  cursor: pointer;
  grid-gap: 10px;
  padding-top: 5px;
}
/* .gbbProductsCardLayoutV2 .gbbFooterProductsContainer{
  display: none;
} */
 .gbbProductsCardLayoutV2 .gbbFooterTotalLabel{
  font-size: 16px;
 }
 .gbbProductsCardLayoutV2 .gbbPageFooterHTML{
  width: 80%;
 }
 .gbbProductsCardLayoutV2 .gbbProductsFooterHTMLForMobile .gbbFooterButtonsWrapper{
  grid-template-columns: .5fr 1.5fr .5fr;
  grid-gap: 10px;
 }
 .gbbProductsCardLayoutV2 .gbbAddProductsPageFooterHTML, .gbbProductsCardLayoutV2 .gbbPersonalizePageFooterHTML{
  display: grid;
  justify-items: center;
  z-index: 2;
 }
.gbbAddProductsPageFooterHTML{
  border-top: 1px solid #E3E3E3;
 }
.progressBarContainer {
      display: flex;
        justify-content: center;
 }
.progressBar {
        background-color: #C1E7C5;
        height: 7px;
        border-radius: 25px;
        overflow: hidden;
        width: 80%;
 }
.gbbProductsCardLayoutV2 .progressBar{
width: 100%;
}
.progressBarFill {
        height: 100%;
        width: 0%;
        background-color: #4caf50;
        transition: width 1s;
        /* animation: fillAnimation 2s forwards; */
        display: block !important;
 }
 .gbbProductsCardLayoutV2 .gbbFooterOriginalTotalValue{
  grid-column: 2;
 }
 .gbbProductsCardLayoutV2 .gbbFooterBackButton, .gbbProductsCardLayoutV2 .gbbFooterNextButton{
  border-radius: 5px;
  font-weight: bold;
 }
 .gbbProductsCardLayoutV2 .gbbOverLayIconContainer{
  background-image: url("https://d3ks0ngva6go34.cloudfront.net/storefront/magnifier_new.svg");
 }
 .gbbProductsCardLayoutV2 .gbbProductItemPrice,
 .gbbProductsCardLayoutV2 .gbbProductItemCompareAtPrice {
   font-size: 16px !important;
   font-weight: bold;
 }
  .gbbProductsCardLayoutV2 .gbbProductItem:hover {
    box-shadow: 0 14px 28px rgba(0, 0, 0, 0.12), 0 10px 10px rgba(0, 0, 0, 0.12);
  }
  .gbbProductsCardLayoutV2 .gbbProductTextContainer{
    padding: 0px;
  }
  .gbbProductsCardLayoutV2 .gbbProductItem .gbbReviewStarsContainer{
    text-align: center;
  }
  .gbbProductVariantModalContainer .gbbReviewStarsContainer{
    font-size: 13px;
  }

 @media (max-width: 900px){
  .gbbProductsCardLayoutV2 .gbbPageFooterHTML{
    width: 100%;
  }
  .gbbProductsCardLayoutV2 .gbbDiscountMessageContainer{
    display: flex;
  }
  .gbbProductsCardLayoutV2 .gbbDiscountMessage,.gbbProductsCardLayoutV2 .gbbFooterTotalContainer{
    font-size: 14px;
  }
  .gbbProductsCardLayoutV2 .gbbProductTitleOnly {
  font-size: 14px;
    line-height: 18px;
  }
  .gbbProductsCardLayoutV2 .gbbProductItemPrice,
    .gbbProductsCardLayoutV2 .gbbProductItemCompareAtPrice {
    font-size: 14px !important;
  }
  .gbbProductsCardLayoutV2 .gbbProductAddButton{
    font-size: 12px;
  }
  .gbbProductsCardLayoutV2 .gbbProductItem{
    grid-gap: 8px;
  }
 }
.gbbProductsCardLayoutV2 .gbbProductsFooterHTMLForMobile .gbbFooterProductsContainer {
    display: grid;
      max-height: 60vh;
      overflow-y: auto;
      grid-template-columns: 1fr;
      grid-auto-columns: unset;
      grid-auto-flow: unset;
          padding-top: 5px;
}
.gbbProductsCardLayoutV2 .gbbProductsFooterHTMLForMobile .gbbFooterProductContainer {
  grid-template-columns: 65px 1fr;
  align-items: center;
  padding: 0px;
}
.gbbProductsCardLayoutV2 .gbbProductsFooterHTMLForMobile .gbbFooterProductImageContainer {
  height: 60px;
    width: 65px;
  border-radius: 8px;
}
.gbbProductsCardLayoutV2 .gbbProductsFooterHTMLForMobile .gbbFooterProductImage{
  height: 100%;
  object-fit: contain;
  width: 100%;
}
.gbbProductsCardLayoutV2 .gbbProductsFooterHTMLForMobile .gbbFooterProductRemoveButton {
    align-items: center;
      position: absolute;
      cursor: pointer;
      top: 0;
      height: 15px;
      display: flex;
}
.gbbProductsCardLayoutV2 .gbbProductsFooterHTMLForMobile .gbbFooterProductTextContainer{
  width: 100%;
  overflow: auto;
}
 .gbbProductsCardLayoutV2 .gbbProductsFooterHTMLForMobile .gbbFooterProductTitle{
  font-size: 14px;
  width: 100%;
}
 .gbbProductsCardLayoutV2 .gbbCartIconWithQuantityContainer {
  position: absolute;
  left: 50%;
  transform: translate(-50%, -50%);
  top: 0px;
  display: flex;
    padding: 0px 10px;
    border-radius: 10px;
    font-size: 14px;
    align-items: center;
 }
/* .gbbProductsCardLayoutV2 .gbbProductsFooterHTMLForMobile .gbbCartIconWithQuantityContainer {
  display: flex;
  padding: 0px 10px;
  border-radius: 10px;
  font-size: 14px;
  align-items: center;
} */
.gbbProductsCardLayoutV2 .gbbCartIconWithQuantityContainer>svg {
 height: 20px;
}
/* .gbbProductsCardLayoutV2 .gbbProductsFooterHTML.gbbProductsFooterHTMLForMobile {
  padding: 0px;
} */
/* NEW VARIANT MODAL */
.gbbProductVariantModalLayoutV2 .gbbProductItemPricesContainer {
  display: grid;
  grid-template-columns: repeat(2,max-content);
  align-items: center;
  gap: 5px;
}
.gbbProductVariantModalLayoutV2 .gbbProductItemCompareAtPrice{
  grid-column: -1;
  grid-row: 1;
}
.gbbProductVariantModalLayoutV2 .gbbProductItemPrice{
  grid-column: 1;
  grid-row: 1;
}
.gbbProductVariantModalLayoutV2 .gbbProductQuantityHTMLContainer{
  grid-template-columns: .8fr 1.5fr;
  align-items: center;
}
.gbbProductVariantModalLayoutV2 .gbbProductQuantityAddButton,
.gbbProductVariantModalLayoutV2 .gbbProductQuantityRemoveButton{
  width: 55px;
  height: 30px;
}
.gbbProductVariantModalLayoutV2 .gbbProductQuantityAddButtonWrapper,
.gbbProductVariantModalLayoutV2 .gbbProductQuantityRemoveButtonWrapper{
  top: 50%;
  left: 50%;
}
.gbbProductVariantModalLayoutV2 .gbbProductCardTextContainer{
  display: grid;
    grid-gap: 5px;
}
.gbbProductVariantModalLayoutV2 .gbbProductDescriptionText{
  scrollbar-width: thin;
}
.gbbProductVariantModalLayoutV2 .gbbProductItemTitle{
  font-size: 20px;
}
.gbbProductVariantModalLayoutV2 .gbbProductItemCompareAtPrice{
  font-size: 15px;
}
.gbbProductVariantModalLayoutV2 .gbbProductItemPrice{
  font-size: 16px;
}
.gbbProductVariantModalLayoutV2 .gbbNextBtnContainer,.gbbProductVariantModalLayoutV2 .gbbPrevBtnContainer{
      background: #eeee;
        display: grid;
        place-items: center;
        cursor: pointer;
}
.gbbProductVariantModalLayoutV2 .gbbNextBtnContainer{
  border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;
}
.gbbProductVariantModalLayoutV2 .gbbPrevBtnContainer {
  border-top-left-radius: 6px;
  border-top-right-radius: 6px;
}
.gbbProductVariantModalLayoutV2 .gbbProductImageContainerImg{
  border-radius: 10px;
}
.gbbProductVariantModalLayoutV2 .gbbProductTabImageContainer ,.gbbProductVariantModalLayoutV2 .gbbProductTabImageContainer img{
  border-radius: 8px;
}
.gbbProductVariantModalLayoutV2 .gbbProductCardActionContainer{
grid-template-columns: 1fr;
grid-gap: 0px;
}
.gbbProductVariantModalLayoutV2 .gbbProductVariantModalContainer{
  border: none;
}
.gbbProductVariantModalContainer.gbbVariantInventoryNotAvailable .gbbProductVariantAddButton{
  pointer-events: none;
  opacity: 0.5;
}
.gbbInventoryText{
  font-style: italic;
  font-size: 14px;
}

@media (max-width:430px) {
  .gbbProductsCardLayoutV2 .gbbProductItemPricesContainer{
    grid-template-columns: 1fr;
    gap: 0px;
  }
 
}
@media (max-width:330px) {
  .gbbProductsItemsContainer{
      grid-template-columns: repeat(1,1fr);
    }
}

@media screen and (min-width: 1800px) {
  .gbbProductImageContainer img {
    object-fit: contain;
  }
}
/* @media (min-width: 486px) {
.gbbProductsItemsContainer[data-total-products="1"],
  .gbbProductsItemsContainer[data-total-products="2"],
  .gbbProductsItemsContainer[data-total-products="3"],
  .gbbProductsItemsContainer[data-total-products="4"] {
    display: flex;
    justify-content: center;
  } -- not using this block
.gbbProductsItemsContainerLessProducts{
  display: flex;
  justify-content: center;
}
  .gbbProductsItemsContainerLessProducts .gbbProductTitleOnly {
    word-wrap: break-word;
    max-width: 240px;
  }

  .gbbProductsItemsContainerLessProducts .gbbProductItem {
    min-width: 250px;
  }
} */

/* SLOTS */
.gbbSlotFooterProductsContainer {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: min-content;
  grid-gap: 10px;
  padding: 5px 0px;
  overflow-x: auto;
  overflow-y: hidden;
  /* place-content: center; */
}
.gbbSlotFooterProductContainer {
      position: relative;
      height: 70px;
      width: 75px;
      border-radius: 8px;
      display: grid;
      place-content: center;
}
img.gbbSlotFooterProductImage {
  height: 100%;
  object-fit: contain;
  width: 100%;
}
.gbbSlotFooterProductImageContainer {
        height: 70px;
        width: 75px;
        margin: 0;
            border: 1px solid #cfc9c9;
              overflow: hidden;
              border-radius: 8px;
}
.gbbSlotFooterProductContainerEmpty {
  border: 1px dashed;
  background: #f1f1f1;
}
.gbbSlotFooterProductQuantity {
  position: absolute;
  bottom: 5%;
  font-size: 12px;
  right: 2%;
  background: black;
  color: white;
  padding: 0px 10px;
  border-radius: 10px;
}
.gbbSlotFooterProductRemoveButton{
  align-items: center;
  position: absolute;
  cursor: pointer;
  top: 0;
  /* right: -5px; */
  height: 15px;
  display: flex;
}
.gbbSlotFooterProductsContainerWrapper {
  display: grid;
  justify-content: center;
}
  .gbbProductsFooterHTMLForMobile .gbbSlotFooterProductContainer ,
  .gbbProductsFooterHTMLForMobile .gbbSlotFooterProductImageContainer{
    height: 60px;
    width: 65px;
  }
  .gbbProductsFooterHTMLForMobile .gbbSlotFooterProductQuantity {
    font-size: 10px;
}
.gbbDiscountRibbon {
  background: red;
  color: white;
  font-weight: bold;
  width: fit-content;
  padding: 2px 8px;
  position: absolute;
  top: 25px;
  right: 0;
  font-size: 12px;
}/***************************************************Landing page CSS*******************************************************************/
* {
  margin: 0;
  padding: 0;
}
.gbbReviewPageHTMLContent {
  display: grid;
  grid-gap: 20px;
}
/* review page banner css */
.gbbReviewPageBanner {
  display: grid;
  position: relative;
}
.gbbReviewPageBannerImage {
  display: grid;
  object-fit: cover;
  width: 100%;
  /* width: 100vw; */
  height: 40vw; /*20vw for desktop*/
}
.gbbReviewPageBannerText {
  font-size: 14px;
  /* color: #fff; */
}
.gbbReviewPageBannerSubText {
  font-size: 12px;
  /* color: #fff; */
}
.ReviewPageBannerButton {
  padding: 10px;
  font-size: 12px;
  width: 100%;
  border-radius: 8px;
  border: 2px solid #ffff;
  cursor: pointer;
}
.gbbReviewPageBannerTextWrapper {
  /* position: absolute; */
  top: 55%;
  left: 8%;
  /* top: 20%;
    left: 10%; */
  width: max-content;
  display: grid;
  grid-template-rows: 0.2fr 0.4fr;
  grid-gap: 10px;
  grid-gap: 5px;
  justify-items: center;
  text-align: center;
  width: 70vw;
  padding: 10px;
}

.gbbReviewPageBodyContainer {
  display: grid;
  justify-self: center;
  width: 95%;
}

.gbbReviewPageTotalBlock {
  display: grid;
  grid-auto-flow: column;
  grid-template-columns: auto auto 2fr;
  border-radius: 5px;
  color: #000;
}
.gbbReviewPageTotalBlockPrice {
  display: grid;
  justify-self: center;
  align-self: center;
  padding: 5px 5px;
}
.gbbReviewPageTotalBlockPriceTitle {
  font-size: 12px;
}

.gbbReviewPageTotalBlockPriceValue {
  font-weight: 700;
}
.gbbReviewPageTotalBlockDelivery {
  display: grid;
  justify-self: center;
  align-self: center;
  padding: 5px 5px;
}
.gbbReviewPageTotalBlockDeliveryTitle {
  font-size: 12px;
}
.gbbReviewPageTotalBlockDeliveryTitleValue {
  font-weight: 700;
}

.gbbReviewPageTotalBlockActions {
  display: grid;
  /* grid-template-columns: 1fr auto auto; */
  grid-template-columns: 1fr 1fr;
  grid-auto-flow: column;
  justify-items: end;
  grid-gap: 5px;
  /* padding: 5px 5px; */
  margin-top: 10px;
  justify-items: right;
  align-items: center;
}

.gbbReviewPageTotalBlockActionsBack {
  background-color: grey;
  padding: 5px 10px;
  text-align: center;
  color: #fff;
  border-radius: 5px;
  justify-self: left;
  font-size: 12px;
  cursor: pointer;
}

.gbbReviewPageTotalBlockActionsCheckout {
  padding: 5px 10px;
  text-align: center;
  color: #000;
  border-radius: 5px;
  font-size: 12px;
  cursor: pointer;
  width: 100%;
  font-weight: 500;
}
.gbbReviewPageProductList {
  /* padding-top: 20px; */
}
.gbbReviewPageProductListItems {
  display: grid;
  margin: 10px 0px;
  /* padding: 0px 10px; */
  border-top: 2px solid #f1f2f3;
  border-bottom: 2px solid #f1f2f3;
}
.gbbReviewPageProductListItem,
.gbbReviewPageProductItemsHeaders {
  display: grid;
  grid-auto-flow: column;
  grid-template-columns: 2fr 1fr 1fr;
}
.gbbReviewPageProductListItem {
  font-size: 12px;
}

.gbbReviewPageProductListItemName,
.gbbReviewPageProductItemsHeadersProduct,
.gbbReviewPageProductItemsHeadersQuantity,
.gbbReviewPageProductItemsHeadersPrice {
  padding: 5px 5px;
  font-weight: 600;
}
.gbbReviewPageProductItemsHeadersProduct {
  text-align: left;
}
.gbbReviewPageProductItemsHeadersQuantity {
  text-align: center;
}
.gbbReviewPageProductItemsHeadersPrice {
  text-align: right;
}
.gbbReviewPageProductListItemQty {
  padding: 5px 5px;
  text-align: center;
}
.gbbReviewPageProductListItemPrice {
  padding: 5px 5px;
  text-align: right;
  display: grid;
  grid-template-columns: max-content;
  justify-content: end;
}
.gbbReviewPageProductListItemRemoveBtn {
  padding: 5px 5px;
  font-size: 12px;
  justify-self: end;
  cursor: pointer;
  color: #aba6a6;
}
.gbbReviewPageProductListTitle {
  font-size: 15px;
  font-weight: 600;
}
/**********ADD ON PRODUCTS HTML ****/
.gbbReviewPageHTMLContent .gbbProductItem {
  /* width: auto; */
  display: grid;
  width: 140px;
  grid-template-rows: 90px 0.1fr 0.1fr;
  grid-gap: 5px;
}
.gbbReviewPageHTMLContent .gbbProductsContainer {
  overflow-x: auto;
  display: grid;
  justify-self: center;
}
.gbbReviewPageHTMLContent .gbbProductsItemsContainer {
  display: grid;
  grid-auto-flow: column;
  grid-template-columns: auto;
  grid-gap: 10px;
  overflow-x: auto;
}
.gbbReviewPageHTMLContent .gbbProductTextContainer {
  align-self: normal;
}
.gbbReviewPageHTMLContent .gbbProductItemTitle {
  color: black;
  white-space: nowrap;
  text-overflow: ellipsis;
  width: 120px;
  display: block;
  overflow: hidden;
}
.gbbReviewPageHTMLContent .gbbProductImageContainer {
  position: relative;
  width: 100%;
  height: 100%;
  border: 1px solid #cfc9c9;
  overflow: hidden;
}

.gbbReviewPageSubTotalCartWrapper {
  display: grid;
  grid-template-columns: 1fr 1fr;
}

.gbbReviewPageSubTotalCart {
  text-align: end;
  grid-column: 2/3;
}

.gbbReviewPageSubTotalCartLabel {
  display: grid;
  font-size: 14px;
  font-weight: 600;
  justify-content: end;
  grid-template-columns: max-content;
}
.gbbReviewPageHTMLContent .gbbProductQuantityRemoveButton,
.gbbReviewPageHTMLContent .gbbProductQuantityAddButton {
  height: 25px;
  width: 25px;
  font-size: 14px;
}
.gbbReviewPageHTMLContent .gbbProductActionContainer {
  grid-auto-flow: row !important;
  grid-gap: 10px !important;
}
.gbbReviewPageHTMLContent .gbbPrevImage,
.gbbReviewPageHTMLContent .gbbNextImage {
  padding: 0;
  width: 2px;
  margin-top: 0;
  top: 40%;
  background: none;
  color: grey;
}
.gbbReviewPageBodyContainer {
  margin: 20px;
}
.gbbReviewPageHTMLContent .gbbNextImage {
  right: 10px;
}
@media only screen and (min-width: 600px) {
  .gbbReviewPageProductListTitle {
    font-size: 20px;
  }
  .gbbReviewPageProductListItem {
    font-size: 15px;
  }

  .gbbReviewPageBannerImage {
    height: 22vw;
  }
  .gbbReviewPageBannerTextWrapper {
    /* width: 30vw;
        top: 15%; */
    width: 40vw;
    top: 50%;
    left: 20%;
  }
  .gbbReviewPageBodyContainer {
    width: 80%;
    margin: 20px;
  }
  .gbbReviewPageTotalBlockPrice {
    padding: 5px 20px;
  }
  .gbbReviewPageTotalBlockDelivery {
    padding: 5px 20px;
  }
  .gbbReviewPageTotalBlockActionsBack {
    font-size: 14px;
    /* grid-column: 2/2; */
  }

  .gbbReviewPageTotalBlockActionsCheckout {
    font-size: 16px;
    width: 80%;
    /* grid-column: 3/3; */
  }

  .gbbReviewPageTotalBlockActions {
    /* grid-template-columns: 2fr auto auto; */
    grid-template-columns: 1fr 1fr;
    grid-gap: 15px;
    /* padding: 5px 15px; */
    /* padding: 5px 5px; */
  }

  /* .gbbReviewPageHTMLContent .gbbProductItem{
        grid-template-rows: auto;
    } */
  .gbbReviewPageHTMLContent .gbbProductItem {
    display: grid;
    width: 170px;
    grid-template-rows: 110px 0.1fr 0.1fr;
    grid-gap: 5px;
  }
}

@media (min-width: 1023px) {
  .gbbReviewPageProductListItem {
    font-size: 16px;
  }
  .gbbReviewPageTotalBlockActionsBack {
    font-size: 16px;
  }

  .gbbReviewPageSubTotalCartLabel {
    font-size: 16px;
  }

  .gbbReviewPageDiscountAppliedLabel {
    font-size: 16px;
  }
  .gbbReviewPageTotalBlockActionsCheckout {
    font-size: 16px;
    width: 60%;
  }
  .gbbReviewPageBannerTextWrapper {
    width: 35vw;
  }
  .gbbReviewPageBannerImage {
    height: 18vw;
  }

  .gbbBodyWrapper {
    margin: 0 10%;
  }
  .gbbReviewPageBannerTextWrapper {
    /* grid-gap: 14px; */
    top: 55%;
    left: 20%;
  }
  .gbbReviewPageBannerText {
    font-size: 22px;
  }
  .gbbReviewPageBannerSubText {
    font-size: 15px;
    /* width: 45%; */
  }
  .gbbReviewPageBannerButtonWrapper {
  }
  .ReviewPageBannerButton {
    padding: 12px;
    font-size: 18px;
    width: 100%;
  }

  .gbbReviewPageTotalBlockActions {
    /* grid-template-columns: 3fr auto auto; */
    grid-template-columns: 1fr 1fr;
    grid-gap: 15px;
    margin-top: 10px;
    /* padding: 5px 15px; */
    /* padding: 5px 5px; */
  }

  .gbbReviewPageHTMLContent .gbbProductsItemsContainer {
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  }

  .gbbReviewPageHTMLContent .gbbProductItem {
  }
}

@media (min-width: 1192px) {
  .gbbReviewPagePrecuratedBoxesLabel {
    font-size: 18px;
  }
  /* .gbbNavigationItemsContainer::before{
        top: 45px;
    } */
}

/* this  {is the css code */
.gbbBundleQuantityHTMLContainer {
  grid-template-columns: 0fr 0fr;
  grid-gap: 0px;
  display: grid;
  grid-auto-flow: column;
  -webkit-tap-highlight-color: transparent;
}

.gbbBundleChangeButton {
  padding-left: 9px;
  background: #51d5c7;
  border: none;
  border-radius: 5px;
  width: 35px;
  height: 35px;
  font-size: 24px;
  justify-self: center;
  cursor: pointer;
  position: relative;
  user-select: none;
}

.gbbBundleQuantityWrapper {
  width: 100%;
  display: flex;
  justify-content: end;
  flex-direction: row;
}

/* bundle from product */
.gbbBundleQuantityHTML {
  width: 100%;
  display: grid;
  grid-auto-flow: column;
  grid-gap: 15px;
  align-items: center;
}

.gbbBundleQuantityHeading {
  font-weight: bold;
  font-size: 14px;
}

.gbbBundleQuantityLabel {
  text-align: center;
  font-size: 16px;
  user-select: none;
}
.gbbSummaryPageHTML{
  margin-bottom: 100px;
}
.gbbSummaryPageBodyWrapper{
    display: grid;
    grid-gap: 10px;
}
.gbbSummaryPageBundleDetailsContainer{
    display: grid;
    grid-template-columns: 1fr 0.2fr;
    align-items: start;
}
.gbbSummaryPageBundleDetails{
    display: grid;
    grid-gap: 5px;
}
.gbbSummaryPageBundleDetailsHTML{
    display: grid;
    grid-template-columns: 0.1fr 1fr;
    grid-gap: 10px;
    padding: 10px;
    border:2px solid #f1f2f3;
    margin-bottom: 10px;
    /* grid-column: 1/3; */
}
.gbbSummaryPageBundleImage{
    width: 60px;
    height: 60px;
    object-fit: contain;
}
.gbbSummaryPageBundleImageContainer{
    display: grid;
    justify-content: center;
}
.gbbSummaryPageProductListItemName{
  color: #848484;
  font-weight: 600;
}
.gbbSummaryPageProductListItemName, .gbbSummaryPageProductQtyPriceContainer{
    /* padding: 5px 5px; */
    font-size: 12px;
    text-wrap: balance;

}

.gbbSummaryPageProductTitleQtyPriceContainer{
    display: grid;
    grid-template-columns: 1fr 0.2fr;
}
.gbbSummaryPageProductQtyPriceContainer{
    display: grid;
    grid-auto-flow: column;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
}
.gbbSummaryPageBundleQuantityAddButton{
    justify-self: right;
    -webkit-tap-highlight-color: transparent;
}
.gbbSummaryPageBundleQuantityRemoveButton{
    justify-self: left;
    -webkit-tap-highlight-color: transparent;
}
.gbbSummaryPageBundleQuantityAddButton:active, .gbbSummaryPageBundleQuantityRemoveButton:active {
    transform: scale(0.95);
}
.gbbSummaryPageQuantityAddButtonWrapper, .gbbSummaryPageQuantityRemoveButtonWrapper{
  position: absolute;
  top: 10px;
  left: 11px;
  transform: translate(-50%, -50%);
  -webkit-tap-highlight-color: transparent;
  user-select: none;
}
.gbbSummaryPageBundleQuantityAddButton, .gbbSummaryPageBundleQuantityRemoveButton{
    background: #000000;
    color:#ffffff;
    border: none;
    border-radius: 5px;
    width: 20px;
    height: 20px;
    font-size: 14px;
    justify-self: center;
    cursor: pointer;
    position: relative;
    user-select: none;
}
.gbbSummaryPageBundleQuantityAddButton{
  justify-self: right;
  -webkit-tap-highlight-color: transparent;
}
.gbbSummaryPageBundleQuantityRemoveButton{
  justify-self: left;
  -webkit-tap-highlight-color: transparent;
}
.gbbSummaryPageBundleQuantityAddButton{

}
.gbbSummaryPageBundleItemsLabel{
  font-size: 14px;
}
.gbbSummaryPageBundleTitle{
    font-size: 14px;
    font-weight: 700;
}
.gbbSummaryPageBundleQuantityContainer{
    display: grid;
    grid-template-columns: auto auto auto;
    grid-gap: 15px;
    align-items: center;
    width: 20px;
}
.gbbSummaryPageBundleQuantityText{
    text-align: center;
}
.gbbSummaryPageProductListItemPrice{
    font-weight: 600;
    justify-self: end;
}
.gbbSummaryPageProductListItemQty{
  justify-self: end;
}
.gbbOrderDetailsHTMl, .gbbSummaryPageSubscriptionHTML{
    padding: 15px;
    display: grid;
    grid-gap: 10px;
    background: #f1f2f3;
}
.gbbOrderDetailsHeading, .gbbScheduleDeliveryHeadingLabel{
    font-weight: 600;
}
.gbbSummaryPageSubTotalCart, .gbbSummaryPageDiscountAppliedContainer, .gbbSummaryPageTotalCartValueContainer{
    display: grid;
    grid-template-columns: 1fr 1fr;
}
.gbbSummaryPageSubTotalCartLabel, .gbbSummaryPageDiscountAppliedLabel, .gbbSummaryPageTotalCartValueLabel{
    font-weight: 600;
    color: #848484;
}
.gbbScheduleDeliveryDateLabel{
    font-weight: 600;
}
.gbbSummaryPageSubTotalValue, .gbbSummaryPageDiscountAppliedValue, .gbbSummaryPageTotalCartValue{
    justify-self: end;
    font-weight: 600;
}
.gbbSummaryPageBundleProductsMainContainer{
    /* display: grid; */
    /* align-items: center; */
    /* grid-column: span 2; */
    /* grid-column-start: 2; */
    white-space: nowrap;
}
.gbbSummaryPageBundleImageTitleContainer{
    display: grid;
    grid-template-columns: 0.2fr 1fr;
    align-items: center;
}
/* .gbbSummaryPageBundleProductsContainer{
    grid-column: 2;
} */
.gbbSummaryPageBundlePriceLabel{
    font-weight: 600;
    text-align: end;
    justify-self: end;
}
.gbbSummaryPageBundleRemoveButton{
    font-size: 14px;
    color: #ce6b6b;
    text-align: end;
    cursor: pointer;
}
.gbbSummaryPageBundlePriceContainer{
    display: grid;
    grid-template-columns: 1fr min-content;
    grid-gap: 5px;
}
.gbbSummaryPageBundleDiscountedPrice{
    font-weight: 600;
    justify-self: end;
}
.gbbSummaryPageActionButtons{
    display: grid;
    /* grid-template-columns: 0.4fr 1fr; */
    grid-gap: 10px;
}
.gbbSummaryPageBackButton{
    background-color: grey;
    padding: 10px;
    text-align: center;
    color: #fff;
    border-radius: 5px;
    font-size: 14px;
    cursor: pointer;
    border: none;
    display: grid;
    align-self: center;
}
.gbbSummaryPageCheckoutButton, .gbbSummaryPageCreateNewBoxButton, .gbbUnavailableProductsModalFooterBackBtn, .gbbUnavailableProductsModalFooterCheckoutBtn{
    padding: 10px 10px;
    text-align: center;
    color: #000;
    border-radius: 5px;
    font-size: 16px;
    cursor: pointer;
    width: 100%;
    font-weight: 500;
    background: black;
    color: white;
    border: none;
}
.gbbUnavailableProductsModalFooter{
  display: grid;
  grid-gap: 10px;
}
.gbbSummaryPageBanner {
    display: grid;
    position: relative;
  }
  .gbbSummaryPageBannerImage {
    display: grid;
    object-fit: cover;
    width: 100%;
    /* width: 100vw; */
    height: 40vw; /*20vw for desktop*/
  }
  .gbbSummaryPageBannerText {
    font-size: 14px;
    /* color: #fff; */
  }
  .gbbSummaryPageBannerSubText {
    font-size: 12px;
    /* color: #fff; */
  }
  .gbbSummaryPageBannerTextWrapper {
    /* position: absolute; */
    top: 55%;
    left: 8%;
    /* top: 20%;
      left: 10%; */
    width: max-content;
    display: grid;
    grid-template-rows: 0.2fr 0.4fr;
    grid-gap: 10px;
    grid-gap: 5px;
    justify-items: center;
    text-align: center;
    width: 70vw;
    padding: 40px 10px;
  }
  .gbbSummaryPageBannerText {
    font-size: 14px;
    /* color: #fff; */
  }
  .gbbSummaryPageBannerSubText {
    font-size: 12px;
    /* color: #fff; */
  }
  .gbbScheduleDeliveryWrapper{
    display: grid;
    grid-gap: 10px;
    padding: 15px;
    background: #f1f2f3;
  }
  .gbbSummaryPageDeliverOrderDetailsDiv{
    /* padding: 10px;
    background: #f1f2f3; */
  }
  .gbbSummaryPageBundleTitleContainer{
    display: flex;
    gap: 10px;
    align-items: center;
  }
  .gbbEmptySummaryPageWrapper{
    margin-bottom: 100px;
  }
  .gbbEmptySummaryPageWrapper, .gbbEmptySummaryPageBannerTextWrapper{
    display: grid;
    justify-content: center;
    align-items: center;
    grid-gap: 10px;
  }
  .EmptySummaryPageAction{
    text-align: center;
    padding: 10px;
    background: black;
    color: white;
    border-radius: 5px;
    cursor: pointer;
  }
  .gbbEmptySummaryPageBannerText{
    text-align: center;
  }
  .gbbEmptySummaryPageBannerImage{
    width: 250px;
    height: 250px;
    object-fit: contain;
  }
  .gbbOrderSubtotalTotalContainer{
    display: grid;
    /* grid-template-columns: 1fr 1fr; */
  }
  .gbbSummaryPageBundleQuantity{
    justify-self: end;
  }
  .gbbSummaryPageBundleItemsLabel{
    color: #848484;
  }
  .gbbSummaryPageBundleItemsLabel{
    display: none;
  }
  .gbbSummaryPageBundleDetailsWithProducts{
    display: grid;
    grid-template-rows: min-content;
    grid-gap: 10px;
    overflow-wrap: break-word;

  }

  .gbbFooterDiscountedTotalValue, .gbbFooterOriginalTotalValue, .gbbFooterTotalLabel {
    white-space: nowrap !important;
  }
  
  .gbbSummaryPageDiscountAppliedWrapper{
    display: grid;
    grid-gap: 10px;
  }
  .gbbSummaryPageOneTimeSubscriptionDiv, .gbbSummaryPageSubscriptionAndSaveInputAndLabel{
    display: grid;
    grid-template-columns: min-content 1fr;
    grid-gap: 10px;
    align-items: center;
  }
  .gbbSubscriptionDropDownSelect{
    width: 100%;
    padding: 8px 10px;
    border: 1px solid #cbc2c2;
    border-radius: 5px;
    border: 1px solid #D3D5D6;
  }
  .gbbSummaryPageSubscriptionAndSaveDiv{
    display: grid;
    grid-gap: 10px;
  }
  .gbbSummaryPageOneTimeSubscriptionInput, .gbbSummaryPageSubscriptionAndSaveInput{
    width: 15px;
  }
  .gbbSummaryPageSubscriptionAndSaveLabel, .gbbSummaryPageOneTimeSubscriptionLabel{
    cursor: pointer;
  }
  .gbbSubscriptionDeliveryFrequencyLabel{
    font-size: 12px;
    text-transform: uppercase;
  }
  /* .gbbSummaryPageCreateNewBoxButtonWrapper{
    padding: 5px 10px;
    width: fit-content;
    background: black;
    color: white;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    /* text-decoration: underline; 
    border-radius: 5px;
  }*/
  .gbbSummaryPageBundleEditButton{
    font-size: 14px;
    text-align: end;
    cursor: pointer;
    /* text-decoration: underline; */
    font-weight: bold;
  }
  .gbbSummaryPageBundleEditRemoveButtons{
    display: grid;
    grid-template-columns: 1fr 1fr;
    align-items: center;
    grid-gap: 10px;
  }
  .gbbPreparingBundleMainContainer, .gbbUnavailableProductsMainContainer, .gbbActivatePricingMainContainer{
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    top: 0;
    background-color: rgba(24,24,24,0.8);
    z-index: 1000000000;
  }
  .gbbPreparingBundleContainerModal{
    position: fixed;
    z-index: 1000000000;
    transform: translate(0, -50%);
    background: #ffff;
    border-radius: 5px;
    text-align: center;
    padding: 10px;
    max-height: 95vh;
    /* left: 5vw;
    top: 5vh;
    right: 5vw; */
    left: 25vw;
    right: 25vw;
    top: 50vh;
    display: grid;
    grid-gap: 10px;
    justify-content: center;
  }

  @media screen and (min-width: 600px) {
    .gbbPreparingBundleContainerModal{
      left: 35vw;
      right: 35vw;
    }
    
  }

  .gbbUnavailableProductsContainerModal{
    position: fixed;
    z-index: 1000000000;
    transform: translate(0, -50%);
    background: #ffff;
    border-radius: 5px;
    text-align: center;
    padding: 10px;
    max-height: 95vh;
    /* left: 5vw;
    top: 5vh;
    right: 5vw; */
    left: 20vw;
    right: 20vw;
    top: 50vh;
    display: grid;
    grid-gap: 10px;
  }
  .gbbPreparingBundleHeader{
    font-weight: 600;
    font-size: 14px;
  }
  .gbbPreparingBundleGif{
    width: 120px;
    max-width: 100%;
  }
  .gbbUnavailableProductsModalDiscountsMayNotApplyText{
    color: grey;
  }
  .gbbActivatePricingContainerModal{
    position: fixed;
    z-index: 1000000000;
    transform: translate(-50%, -50%);
    background: #ffff;
    border-radius: 5px;
    text-align: center;
    padding: 2rem 1rem;
    max-height: 95vh;
    left: 50%;
    top:50%;
    display: grid;
    grid-gap: 10px;
    width:300px;
  }
  .gbbActivatePricingImg{
    width:150px;
    height:150px;
  }
  .gbbActivatePricingHeader{
    font-weight: 600;
    font-size: 1.7rem;
    color:#8C4444;
    line-height:initial;
  }
  .gbbActivatePricingDescription{
    font-size: 1.3rem;
    font-weight:500;
    line-height:initial;
  }
  .gbbActivatePricingButton{
    background-color: #8C4444;
    color: #ffffff;
    border-radius:5px;
    padding:1rem 2.5rem;
    font-weight:550;
    cursor:pointer;
    border:none;
  }
  .gbbActivatePricingNoteContainer{
    font-size: 1.2rem;
  }
  .gbbActivatePricingPoweredByContainer{
    display:grid;
    justify-items:end;
    font-size: 1.1rem;
  }
  

@media (min-width: 600px) {
    .gbbSummaryPageBannerImage {
        height: 22vw;
      }
      .gbbSummaryPageBundleItemsLabel{
        display: block;
      }
      .gbbSummaryPageBannerTextWrapper {
        /* width: 30vw;
            top: 15%; */
        width: 40vw;
        top: 50%;
        left: 20%;
      }
    .gbbSummaryPageProductListItemName, .gbbSummaryPageProductQtyPriceContainer{
        font-size: 14px;
    }

    .gbbSummaryPageBundleTitle{
      font-size: 16px;
    }
    .gbbSummaryPageBundleImage{
      width: 100px;
      height: 100px;
    }
    .gbbSummaryPageBundleQuantityAddButton, .gbbSummaryPageBundleQuantityRemoveButton{
      width: 25px;
      height: 25px;
    }
    .gbbSummaryPageQuantityAddButtonWrapper, .gbbSummaryPageQuantityRemoveButtonWrapper{
      top: 12px;
      left: 13px;
    }
    .gbbSummaryPageOneTimeSubscriptionInput, .gbbSummaryPageSubscriptionAndSaveInput{
      width: 20px;
      height: 20px;
    }
    .gbbPreparingBundleGif{
      width: 150px;
    }
    .gbbActivatePricingContainerModal{
      width:500px;
    }
}
@media (min-width: 1023px) {
      .gbbSummaryPageBodyWrapper{
        margin: 0 20px;
      }
      .gbbSummaryPageBannerImage {
        height: 18vw;
      }
      .gbbSummaryPageBannerText {
        font-size: 22px;
      }
      .gbbSummaryPageBannerSubText {
        font-size: 15px;
        /* width: 45%; */
      }
      .gbbSummaryPageBannerTextWrapper {
        width: 35vw;
        top: 55%;
        left: 20%;
      }
      .gbbSummaryPageBannerText {
        font-size: 22px;
      }
      .gbbSummaryPageBannerSubText {
        font-size: 15px;
        /* width: 45%; */
      }
      .gbbSummaryPageBodyWrapper{
        grid-template-columns: 1fr 0.5fr;
    }
    .gbbSummaryPageBundleDetailsHTML{
        /* grid-row-start: 1;
        grid-row-end: span 2; */
    }
    .gbbSummaryPageDeliverOrderDetailsDiv{
        /* height: 100%; */
    }
    .gbbSummaryPageOrderDetailsUI{
        grid-column-start: 2;
    }
    .gbbSummaryPageBundlePriceContainer{
      /* grid-template-columns: 1fr 0.3fr; */
      grid-gap: 10px;
  }
  .gbbSummaryPageBundlePriceLabel{
    /* text-align: unset; */
  }
  .gbbPreparingBundleGif{
    width: 200px;
  }
  .gbbUnavailableProductsContainerModal{
    left: 30vw;
    right: 30vw;
  }
  .gbbUnavailableProductsModalFooter{
    grid-template-columns: 1fr 1fr;
  }
}
.gbbSummaryPageWrapper.gbbSubscriptionBundle .gbbSummaryPageCreateNewBoxButton {
  display: none;
  /*--- TEMP FIX ----*/
}

.gbbSummaryPageBundleSubscriptionDetails {
  font-size: 14px;
}
:root {
    --gbb-gbbSubscriptionBundle-purchase-option-active-color: #2B2B2B;
    --gbb-gbbSubscriptionBundle-purchase-option-active-bg-color: #FFFFFF;
    --gbb-gbbSubscriptionBundle-purchase-option-inactive-color: #888888;
    --gbb-gbbSubscriptionBundle-purchase-option-inactive-bg-color: #F0F0F0;
    --gbb-gbbSubscriptionBundle-purchase-option-stroke-radius: 8px;
    --gbb-gbbSubscriptionBundle-purchase-option-stroke-color: #D5D5D5;
    --gbb-gbbSubscriptionBundle-purchase-option-stroke-width: 2px;

    --gbb-gbbSubscriptionBundle-selling-plan-navigation-active-bg-color: #FFFFFF;
    --gbb-gbbSubscriptionBundle-selling-plan-navigation-active-title-color: #333333;
    --gbb-gbbSubscriptionBundle-selling-plan-navigation-inactive-title-color: #333333;

    --gbb-gbbSubscriptionBundle-page-title-color: #000000;
    --gbb-gbbSubscriptionBundle-page-title-font-weight: bold;
    --gbb-gbbSubscriptionBundle-header-bg-color: #EDEDED;

    --gbb-gbbSubscriptionBundle-selling-plan-navigation-next-prev-icon-bg-color: #2B2B2B;
    --gbb-gbbSubscriptionBundle-selling-plan-navigation-active-discount-pill-bg-color: #CAE983;
    --gbb-gbbSubscriptionBundle-selling-plan-navigation-active-discount-pill-text-color: #000000;
    --gbb-gbbSubscriptionBundle-selling-plan-navigation-inactive-discount-pill-text-color: #000000;
    --gbb-gbbSubscriptionBundle-selling-plan-navigation-inactive-discount-pill-bg-color: #9D9D9D;

    --gbb-gbbSubscriptionBundle-product-discount-ribbon-bg-color: #FF0000;
    --gbb-gbbSubscriptionBundle-product-discount-ribbon-text-color: #FFFFFF;

    --gbb-gbbSubscriptionBundle-subscription-frequency-label-text-color: #333333;
    --gbb-gbbSubscriptionBundle-subscription-frequency-label-font-weight: bold;
    --gbb-gbbSubscriptionBundle-selling-plans-navigation-stroke-color: #B7B7B7;
    --gbb-gbbSubscriptionBundle-selling-plans-navigation-stroke-width: 2px;
    --gbb-gbbSubscriptionBundle-selling-plans-navigation-stroke-radius: 10px;
}
.gbbPurchaseOptionsWrapper{
    display: grid;
    place-content: center;
    gap: 5px;
}
.gbbPurchaseOptionsTitle{
    color:var(--gbb-gbbSubscriptionBundle-subscription-frequency-label-text-color);
    text-align: center;
    font-weight: var(--gbb-gbbSubscriptionBundle-subscription-frequency-label-font-weight);
}
.gbbPurchaseOptionsButtonWrapper {
    display: grid;
    grid-template-columns: repeat(2, max-content);
    align-items: center;
    place-content: center;
}
.gbbPurchaseOption{
    padding: 6px 14px;
    font-weight: bold;
    text-transform: capitalize;
    cursor: pointer;
    /* border:var(--gbb-gbbSubscriptionBundle-purchase-option-stroke-width) solid var(--gbb-gbbSubscriptionBundle-purchase-option-stroke-color); */
    background-color: var(--gbb-gbbSubscriptionBundle-purchase-option-inactive-bg-color);
    color: var(--gbb-gbbSubscriptionBundle-purchase-option-inactive-color);
}
.gbbPurchaseOption {
    width: fit-content;
    position: relative;
    overflow: hidden;
    cursor: pointer;
    user-select: none;
    background-color: rgba(0, 0, 0, 0.16);
    color: rgba(255, 255, 255, 0.7);
    transition-timing-function: cubic-bezier(0.25, 0.8, 0.25, 1);
    transition-duration: 300ms;
    transition-property: color, background-color, box-shadow;
    display: flex;
    align-items: center;
    box-shadow: rgba(0, 0, 0, 0.15) 0px 2px 1px 0px inset, rgba(255, 255, 255, 0.17) 0px 1px 1px 0px;
    outline: none;
    justify-content: center;
}
.gbbPurchaseOption.active {
        background-color: #2d6737;
        color: white;
        box-shadow: rgba(0, 0, 0, 0.23) 0px -1px 1px 0px inset, rgba(255, 255, 255, 0.17) 0px -1px 1px 0px, rgba(0, 0, 0, 0.17) 0px 2px 4px 1px;
    }
.gbbPurchaseOption.active .gbbPurchaseOptionTextContent {
    transform: translateY(-2px);
}
.gbbPurchaseOption.active:hover {
    /* background-color: #34723f; */
    box-shadow: rgba(0, 0, 0, 0.26) 0px -1px 1px 0px inset, rgba(255, 255, 255, 0.17) 0px -1px 1px 0px, rgba(0, 0, 0, 0.15) 0px;
}
.gbbPurchaseOption:hover .gbbPurchaseOptionTextContent {
    transform: translateY(-2px);
}
.gbbPurchaseOption:hover {
    background-color: #2c2c2c;
    color: white;
    box-shadow: rgba(0, 0, 0, 0.23) 0px -1px 1px 0px inset, rgba(255, 255, 255, 0.17) 0px -1px 1px 0px, rgba(0, 0, 0, 0.17) 0px 2px 4px 1px;
}
.gbbPurchaseOption .gbbPurchaseOptionTextContent {
    font-size: 14px;
    font-weight: 600;
    pointer-events: none;
    transition-timing-function: cubic-bezier(0.25, 0.8, 0.25, 1);
    transition-duration: 300ms;
    transition-property: transform;
    transform: translateY(0px);
}

.gbbPurchaseOption:hover .gbbPurchaseOptionTextContent {
    transform: translateY(-2px);
}
.gbbPurchaseOption:first-child{
    border-top-left-radius: var(--gbb-gbbSubscriptionBundle-purchase-option-stroke-radius);
    border-bottom-left-radius: var(--gbb-gbbSubscriptionBundle-purchase-option-stroke-radius);
}
.gbbPurchaseOption:last-child{
    border-top-right-radius: var(--gbb-gbbSubscriptionBundle-purchase-option-stroke-radius);
    border-bottom-right-radius: var(--gbb-gbbSubscriptionBundle-purchase-option-stroke-radius);
}
.gbbPurchaseOption.active{
    background-color: var(--gbb-gbbSubscriptionBundle-purchase-option-active-bg-color);
    color: var(--gbb-gbbSubscriptionBundle-purchase-option-active-color);
}
.gbbSellingPlansNavigationTabsContainer {
        display: grid;
        grid-auto-flow: column;
        overflow-x: scroll;
        grid-auto-columns: 25%; /* make it dynamic width tabs */
        scrollbar-width: none;
}

.gbbSellingPlanNavigationDiscountText {
    font-size: 12px;
    background: var(--gbb-gbbSubscriptionBundle-selling-plan-navigation-inactive-discount-pill-bg-color);
    color: var(--gbb-gbbSubscriptionBundle-selling-plan-navigation-inactive-discount-pill-text-color);
    width: fit-content;
    padding: 2px 10px;
    border-radius: 12px;
}
.gbbSellingPlanNavigationTab.active .gbbSellingPlanNavigationDiscountText{
    background-color: var(--gbb-gbbSubscriptionBundle-selling-plan-navigation-active-discount-pill-bg-color);
    color: var(--gbb-gbbSubscriptionBundle-selling-plan-navigation-active-discount-pill-text-color);
}
.gbbSellingPlanNavigationTab {
    display: grid;
    place-content: center;
    text-align: center;
    cursor: pointer;
    position: relative;
    padding: 10px;
    place-items: center;
    border-top-left-radius: var(--gbb-gbbSubscriptionBundle-selling-plans-navigation-stroke-radius);
    border-top-right-radius: var(--gbb-gbbSubscriptionBundle-selling-plans-navigation-stroke-radius);
    border-bottom: var(--gbb-gbbSubscriptionBundle-selling-plans-navigation-stroke-width) solid var(--gbb-gbbSubscriptionBundle-selling-plans-navigation-stroke-color);
}

.gbbSellingPlansNavigationTitle{
    color: var(--gbb-gbbSubscriptionBundle-page-title-color);
    font-weight: var(--gbb-gbbSubscriptionBundle-page-title-font-weight);
}
.gbbSellingPlanNavigationTab.active {
    background-color: var(--gbb-gbbSubscriptionBundle-selling-plan-navigation-active-bg-color);
    border: var(--gbb-gbbSubscriptionBundle-selling-plans-navigation-stroke-width) solid var(--gbb-gbbSubscriptionBundle-selling-plans-navigation-stroke-color);
    border-bottom: none;
}
.gbbSellingPlanNavigationTabTitle{
    color:var(--gbb-gbbSubscriptionBundle-selling-plan-navigation-inactive-title-color)
}
.gbbSellingPlanNavigationTabTitle.active{
    color: var(--gbb-gbbSubscriptionBundle-selling-plan-navigation-active-title-color);
}
.gbbSellingPlansNavigationWrapper {
    display: grid;
    text-align: center;
    gap: 10px;
}
.gbbSubscriptionBundleWrapper {
    display: grid;
    gap: 20px;
    margin: 0 -12.5%;
    background: var(--gbb-gbbSubscriptionBundle-header-bg-color);
}
.gbbSellingPlansNavigationItemsWrapper {
    display: grid;
    align-items: center;
    gap: 20px;
}
.gbbSellingPlanNextNavigationIconWrapper{
    transform: rotate(180deg);
}
.gbbSellingPlanNextNavigationIconWrapper,
.gbbSellingPlanPrevNavigationIconWrapper{
    cursor: pointer;
}
.gbbSellingPlanNextNavigationIconWrapper svg g,
.gbbSellingPlanPrevNavigationIconWrapper svg g{
    fill: var(--gbb-gbbSubscriptionBundle-selling-plan-navigation-next-prev-icon-bg-color);
}

.gbbSellingPlansNavigationItemsWrapper:has(.gbbSellingPlanNextNavigationIconWrapper) {
    grid-template-columns: 30px 1fr 30px;
    padding: 0px 20px;
}

.gbbSubscriptionDiscountContent {
    background: var(--gbb-gbbSubscriptionBundle-product-discount-ribbon-bg-color);
    color: var(--gbb-gbbSubscriptionBundle-product-discount-ribbon-text-color);
    font-weight: bold;
    width: fit-content;
    padding: 2px 8px;
    position: absolute;
    top: 25px;
    right: 0;
    font-size: 12px;
}
.gbbPageBody:has(.gbbSubscriptionBundleWrapper){
    padding: 0px !important;
}
.gbbSellingPlansNavigationItemsWrapper[data-total-selling-plans="2"] .gbbSellingPlansNavigationTabsContainer,
.gbbSellingPlansNavigationItemsWrapper[data-total-selling-plans="3"] .gbbSellingPlansNavigationTabsContainer,
.gbbSellingPlansNavigationItemsWrapper[data-total-selling-plans="1"] .gbbSellingPlansNavigationTabsContainer{
    justify-content: center;
}
.gbbSubscriptionBundleWrapper:not(:has(.gbbSellingPlansNavigationWrapper)){
    padding-bottom: 20px;
}
@media only screen and (max-width: 500px) {
    .gbbSubscriptionBundleWrapper{
        margin: 0px;
    }
    .gbbPurchaseOption .gbbPurchaseOptionTextContent{
        font-size: 12px;
    }
    .gbbSellingPlansNavigationTabsContainer{
        grid-auto-columns: 33%;
    }
    .gbbSellingPlansNavigationItemsWrapper:has(.gbbSellingPlanNextNavigationIconWrapper){
        padding: 0px 5px;
    }
    .gbbSellingPlansNavigationItemsWrapper:has(.gbbSellingPlanNextNavigationIconWrapper) .gbbSellingPlansNavigationTabsContainer{
        grid-auto-columns: 100%;
    }
    .gbbSellingPlanNavigationTab{
        padding :5px;
    }
        .gbbSellingPlansNavigationItemsWrapper[data-total-selling-plans="2"] .gbbSellingPlansNavigationTabsContainer,
        .gbbSellingPlansNavigationItemsWrapper[data-total-selling-plans="3"] .gbbSellingPlansNavigationTabsContainer,
        .gbbSellingPlansNavigationItemsWrapper[data-total-selling-plans="1"] .gbbSellingPlansNavigationTabsContainer {
            justify-content: normal;
        }
 }
  @media only screen and (max-width: 1020px) {
      .gbbSubscriptionBundleWrapper {
          margin: 0px;
      }
  }/***************************************************Landing page CSS*******************************************************************/
*{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: inherit;
}
main{
    padding: 0 !important;
}

p{
    padding: 0 ;
    margin: 0 ;
}
/* landing page banner css */
.gbbLandingPageBanner{
    display: grid;
    position: relative;
}
.gbbLandingPageBannerImage {
    display: grid;
    object-fit: cover;
    width: 100vw;
    height: 25vw;  /*20vw for desktop*/
}
.gbbLandingPageBannerText{
    font-size: 14px;
    color: black;
    text-align: center;
    margin: 2% 0%;
}
.gbbLandingPageBannerSubText{
    font-size: 12px;
    color: #fff;
}
.landingPageBannerButton{
    padding: 10px;
    font-size: 12px;
    border-radius: 5px;
    border: none;
    cursor: pointer;
    width: 50%;
    margin: 2% 0%;
}

.landingPageBannerButton:active {
    transform: scale(0.95);
}

.gbbMainPrecuratedBoxesContainer{
    margin: 10% 0%;
}
.gbbLandingPageBannerTextWrapper{
    position: absolute;
    top: 12%;
    left: 7%;
    width: max-content;
    display: grid;
    grid-template-rows: 0.2fr 0.4fr 0.2fr;
    grid-gap: 10px;
    justify-items: center;
    text-align: center;
}
/* landing page - navigation css */
.gbbNavigationItemsContainer{
    display: grid;
    /* grid-template-columns: 1fr 1fr 1fr; */
    grid-template-columns: repeat(auto-fit,minmax(50px,1fr));
    justify-content: center;
    position: relative;
    margin:2% 2%;
}
.gbbLandingPageNavigationItemsContainer{
    margin:2% 2%;
}
.gbbNavigationItem{
    cursor: pointer;
}
.gbbLandingPageNavigationItemsContainer::before{
    /* content: '';
    position: absolute;
    border-top: 5px solid #f1f2f3;
    left: 0;
    right: 0;
    top: 45px;
    z-index: -1; */
}
.gbbNavigationItem{
    justify-content: center;
    z-index: 1;
    display: grid;
    justify-items: center;
}
.gbbNavigationItemsContainer::before{
    content: '';
    position: absolute;
    border-top: 2px solid #d4d5d6;
    left: 0px;
    right: 0px;
    top: 22px;
    z-index: 0;
}


.gbbPreviousNavigationItemsButton , .gbbNextNavigationItemsButton{
    cursor: pointer;
    display: grid;
    justify-items: center;
    align-items: center;
    position: absolute;
    top: 10px;
    border-radius: 50%;
}

.gbbPreviousNavigationItemsButton {
    left:-12px;
}

.gbbNextNavigationItemsButton{
    right: -12px;
   
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);  
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
    /* rotate: 180deg; */
}


.gbbNavigationItemsContainer {
    display: grid;
    justify-items: center;
} 

.gbbNavigationStepContainer {
    display: grid;
    grid-template-rows: 1fr 0.2fr;
    justify-content: center;
    align-items: center;
}
.gbbNavigationImage {
    width: 100%;
    height: 100%;
}
.gbbNavigationStepImgContainer {
    background: white;
    text-align: center;
    border: 2px solid #d4d5d6;
    border-radius: 50%;
    padding: 4px;
    display: grid;
    align-items: center;
    justify-items: center;
    width: 40px;
    height: 40px;
    overflow: hidden;
}
.gbbNavigationTitle{
    font-size: 12px;
    font-weight: 600;
    text-align: center;
}
.gbbNavigationTitleContainer{
    display: grid;
    /* justify-content: center; */
    align-items: center; 
    /* width: 100%; */
    /* padding: 7px 25px; */
    /* text-align: center; */
}
/* landing page - precurated boxes css */
.gbbLandingPagePrecuratedBoxes{
    margin:20px 10px;
    display: grid;
    grid-gap: 20px;
}
.gbbLandingPagePrecuratedBoxesLabel {
    font-size: 16px; 
}
.gbbLandingPagePrecuratedBoxesCardWrapper{
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-gap: 12px;
}
.gbbPrecuratedBoxesCard{
    display: grid;
    grid-template-rows: 1fr 0.2fr;
    justify-content: center;
    background: #f1f2f3;
    padding: 20px;
    font-size: 16px;
    grid-gap: 15px;
}
.gbbPrecuratedBoxesCardImageContainer{
    width: 120px;
    height: 120px;
}
.gbbPrecuratedBoxesCardImage{
    width: 100%;
    height: 100%;
    object-fit: contain;
}
.gbbPrecuratedBoxesCardText{
    text-align: center;
}
.activeNavItem{
    border:  4px solid #ffffff;
}
.gbbLandingPageBannerButtonWrapper{
    text-align: center;
    display: grid;
    place-items: center;
}
.gbbPageHeader{
    position: relative;
}
.gbbPageHeaderText{
    position: absolute;
    top: 10%;
    z-index: 100;
    left: 30%;
    color: white;
    font-size: 16px;
    font-size: 14px;
}
.gbbtickMark {
    border: none;
    position: absolute;
    top: 5px;
}

.gbbtickMarkPseudo::before {
    display: block !important;
    position: absolute;
    left: 0;
    top: 50%;
    height: 50%;
    width: 3px;
    background-color: #ffffff;
    content: "";
    transform: translateX(10px) rotate(-45deg);
    transform-origin: left bottom;
}

.gbbtickMarkPseudo::after {
    display: block !important;
    position: absolute;
    left: 0;
    bottom: 0;
    height: 3px;
    width: 100%;
    background-color: #ffffff;
    content: "";
    transform: translateX(10px) rotate(-45deg);
    transform-origin: left bottom;
}

.checkmark {
    display:inline-block;
    width: 22px;
    height:22px;
    -ms-transform: rotate(45deg); /* IE 9 */
    -webkit-transform: rotate(45deg); /* Chrome, Safari, Opera */
    transform: rotate(45deg);
}

.checkmarkStem {
    position: absolute;
    width:3px;
    height:9px;
    background-color:#ccc;
    left:11px;
    top:6px;
}

.checkmarKick {
    position: absolute;
    width:3px;
    height:3px;
    background-color:#ccc;
    left:8px;
    top:12px;
}
.gbbPageHeader{
    position: relative;
}
.gbbPageHeader:after{
    /* content: " ";
    position: absolute;
    width: 75%;
    left: 10%;
    bottom: 10%;
    height: 50px;
    z-index: -1;
    -moz-box-shadow: 0px 4px #d4d5d6;
    -webkit-box-shadow: 0px 4px #d4d5d6;
    box-shadow: 0px 4px #d4d5d6; */
        /* right: 10px; */

}
/* .gbbPrecuratedPageHeader, .gbbPageHeaderWithoutLine{
    position: relative;
}
.gbbPageHeaderWithoutLine:after{
    display: none !important;
} */
.gbbAddProductPageSubtext,
.gbbPrecuratedBoxPageSubtext,
.gbbPersonalizePageSubtext,
.gbbChooseBoxPageSubtext,
.gbbMultipleCategoriesPageSubtext{
    font-size: 14px;
    color: black;
}

.page-container{
overflow : unset !important;
}
#dummy-chat-button-iframe{
display : none !important;
}

#dummy-chat-button{
display : none !important;
}

@media (min-width:600px){
    .gbbNavigationItemsContainer{
        margin: 2% 10%;  
    }
    .gbbLandingPageBannerImage{
        height: 20vw;
    }
    .gbbNavigationTitleContainer{
        padding: 8px 0px;
    }
    .gbbNavigationTitle{
        font-size: 14px;
    }
    .landingPageBannerButton{
        width: 40%;
    }
    .gbbPageHeaderText{
        top: 15%;
        left: 35%;
        font-size: 16px;
    }
    .gbbPageHeader:after{
        bottom: 7%;
    }

    .gbbAddProductPageSubtext,
    .gbbPrecuratedBoxPageSubtext,
    .gbbPersonalizePageSubtext,
    .gbbChooseBoxPageSubtext,
    .gbbMultipleCategoriesPageSubtext{
        font-size: 18px;
        color: black;
    }

}
@media (min-width:1024px){
    .gbbtickMark{
        /* top: 4%; */
    }
    .gbbLandingPageBannerImage{
        height: 18vw;
        width: 78vw;
    }
    .gbbBodyWrapper{
    margin: 0 10%;
    }
    
.gbbPreviousNavigationItemsButton {
    left:-24px;
}
.gbbNextNavigationItemsButton{
    right: -24px;
}
    .gbbMainPrecuratedBoxesContainer{
        margin: 5% 0%;
    }
    .gbbLandingPageBannerTextWrapper{
        grid-gap: 14px;
        top: 16%;
        left: 8%;
    }
    .gbbLandingPageBannerText{
        font-size: 25px;
    }
    .gbbLandingPageBannerSubText{
        font-size: 17px;
        /* width: 45%; */
    }
    .landingPageBannerButton{
        padding: 12px;
        font-size: 18px;
        width: 40%;
        border-radius: 10px;
    }
    .gbbNavigationItemsContainer{
         margin: 2% 20%;
        /* grid-template-columns: repeat(auto-fit,minmax(200px,1fr)); */ 
    }
    /* .gbbNavigationStepImgContainer{
        height: 100px;
        width: 100px;
    } */
    .gbbNavigationImage{
        width: 100%;
        height: 100%;
    }
    .gbbLandingPagePrecuratedBoxesLabel{
        font-size: 18px;
    }
    .gbbLandingPagePrecuratedBoxesCardWrapper{
        display: grid;
        grid-template-columns: repeat(3,1fr);
        grid-gap: 15px;
    }
    .gbbAddProductPageSubtext,
    .gbbPrecuratedBoxPageSubtext,
    .gbbPersonalizePageWrapper,
    .gbbChooseBoxPageSubtext,
    .gbbMultipleCategoriesPageSubtext{
        font-size: 18px;
    }

    .gbbNavigationItemsContainer::before{
        /* top: 30%; */
    }
    .gbbNavigationItem{
        /* width: 100px;         */
    }
    .gbbNavigationTitleContainer{
        justify-content:normal;
        padding: 4px 2px;
        text-align: center;
    }
    .gbbPrecuratedBoxesCard{
        padding: 10px;
    }
    .gbbPrecuratedBoxesCardImageContainer{
        width: 235px;
        height: 235px;
    }
    .gbbPageHeaderText{
        top: 25%;
        left: 40%;

    }
}

.gbbAddProductPageSubtextWrapper:not(:empty),
.gbbPrecuratedBoxPageSubtextWrapper:not(:empty),
.gbbPersonalizePageSubtextWrapper:not(:empty),
.gbbChooseBoxPageSubtextWrapper:not(:empty),
.gbbMultipleCategoriesPageSubtextWrapper:not(:empty){
    display: grid;  
    margin: 10px;
    justify-content: center;
    text-align: center;
}



.gbbAddProductPageSubtext,
.gbbPrecuratedBoxPageSubtext,
.gbbChooseBoxPageSubtext,
.gbbMultipleCategoriesPageSubtext{
    font-size: 18px;
}

@media(min-width:1192px){
    .gbbLandingPagePrecuratedBoxesLabel{
        font-size: 18px;
    }
    .gbbNavigationItemsContainer::before{
        /* top: 45px; */
    }
}






/* .gbbLoadingScreen {
    display: grid;
    place-items: center;
    height: 80vh;
    margin: 0 auto;
    text-align: -webkit-center;
  } */
  /* .gbbLoadingScreenSpinner {
    border: 16px solid #f3f3f3;
    border-radius: 50%;
    border-top: 16px solid rgb(117, 117, 122);
    border-bottom: 16px solid rgb(117, 117, 122);
    width: 120px;
    height: 120px;
    -webkit-animation: spin 2s linear infinite;
    animation: spin 2s linear infinite;
  }

  @-webkit-keyframes spin {
    0% {
      -webkit-transform: rotate(0deg);
    }

    100% {
      -webkit-transform: rotate(360deg);
    }
  } */
/* 
  .gbbLoadingSkeleon {
    opacity: .7;
    animation: skeleton-loading 1s linear infinite alternate;
  }
  .gbbLoadingSkeleon .skeleton-text {
    width: 100%;
    height: .5rem;
    margin-bottom: .25rem;
    border-radius: .125rem;
  }
  .gbbLoadingSkeleon .skeleton-text:last-child {
    margin-bottom: 0;
    width: 80%;
  }

  @keyframes skeleton-loading {
    0% {
      background-color: hsl(200, 20%, 70%);
    }
  100% {
      background-color: hsl(200, 20%, 95%);
    }
  }

  .gbbLoadingScreenSpinner {    
    width: 100%;
    height: 100%;
    display: block;
    background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0),
        rgba(255, 255, 255, 0.5) 50%,
        rgba(255, 255, 255, 0) 80%
      ),
      lightgray;
    background-repeat: repeat-y;
    background-position: 0 0;
    animation: shine 1s infinite;
  }


  @keyframes shine {
    to {
      background-position: 100% 0;
    } 
  /* } */

  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }


.gbbNavigationStepsContainer{
    max-width: 100%;
    width: 100%;
    table-layout: fixed;
    display: table;
}

.gbbNavigationStep{
    cursor: pointer;
    margin: 0 15px;
    text-align: center;
    display: table-cell;
    opacity: 0.6;
    color: rgba(58,58,58,1);
}

.gbbProgressBar{
    display: block !important;
    border-bottom: solid 2px rgba(217,225,230,1);
}

.gbbStepActive{
    opacity: 1;
    font-family: bold;
}

.gbbStepCompleted{
    opacity: 1;
}

.gbbNavigationStepCircle{
    display: block !important;
    margin: 0 auto;
    margin-top: -7px;
    width: 12px;
    height: 12px;
    background: white;
    border: solid 2px;
    border-radius: 50%;
}

.gbbNavigationContainerV2{
    margin:5% 15px;
}


.landingPageBannerButton,
.gbbProductAddButton,
.gbbProductQuantityRemoveButton,
.gbbProductQuantityAddButton,
.gbbProductVariantOptionValue,
.gbbProductVariantAddButton,
.gbbFooterNextButton,
.gbbFooterBackButton,
.gbbCustomerUploadsActionButton,
.gbbProductAddButton{
    cursor: pointer;
    user-select: none;
}

.gbbLoadingScreen{
    user-select: none;
    z-index: 1;
    /* background: #fff; */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: grid;
    justify-content: center;
    align-items: center;
}




.gbbHideScrollBar{
    overflow: hidden;
}
.gbbPageBody{
    height:100%;
    padding:10px;
}


.gbbProductItemCompareAtPrice{
    text-decoration: line-through;
    color: #999;
    font-size: 12px;
}
.gbbProductVariantOptionContainerHidden{
    display: none;
}

.gbbFooterOriginalTotalValue{
    color : #625f5f;
}


.gbbTagsAndPillHTMLContainer{
    display: inline;
}


.gbbProductTabImageContainer img {
    width: 100%;
    height: 100%;
}

.gbbMobileImageBanner , .gbbDesktopImageBanner {
    width: 100%;
  }

.gbbProductQuantityInput{
  width: 48px;  
  font-size: 16px;
  padding: 4px;
  border-radius: 5px;
}

.gbbProductQuantityInput{
    text-align: center;
}

.gbbProductQuantityInput::-webkit-outer-spin-button,
.gbbProductQuantityInput::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Firefox */
.gbbProductQuantityInput[type=number] {
  -moz-appearance: textfield;
}

/* Mobile styles */
@media (max-width: 600px) {
    .gbbMobileImageBanner {
      display: block;
    }
    .gbbDesktopImageBanner {
      display: none;
    }
    .gbbProductQuantityHTML{
        grid-gap: 8px;
    }
    .gbbProductQuantityInput{
        width: 64px;
    }
    .gbbProductVariantModalDetailsContainer .gbbProductQuantityHTML{
        grid-gap: 8px;
    }
  }
  
  /* Desktop styles */
  @media (min-width: 601px) {
    .gbbMobileImageBanner {
      display: none;
    }
    .gbbDesktopImageBanner {
      display: block;
    }
  }

  .gbbAddProductPageBanners:empty{
     display: none;
  }


.gbbProductsCardLayoutV2 .gbbNavigationItemsContainer::before{
    content: none;
    }
  .gbbProductsCardLayoutV2 .gbbStepsProgressBarContainer{
    width: 100%;
    height: 6px;
    position: absolute;
    border-radius: 20px;
    overflow: hidden;
    top: 17px;
  }
  .gbbProductsCardLayoutV2 .gbbStepsProgressBar{
    width: 100%;
    background: #eeeeee;
    height: 100%;
  }
  .gbbProductsCardLayoutV2 .gbbStepsProgressBarFilled{
    display: block !important;
    background: black;
    width: 10%;
    height: 100%;
  }

  .gbbBundle-HTML footer, .gbbBundle-HTML .footer  {
    opacity: 0;
    visibility: hidden;
    transition: opacity 3s, visibility 3s;
    animation: showElement 3s forwards;
}

@keyframes showElement {
    from {
        opacity: 0;
        visibility: hidden;
    }
    to {
        opacity: 1;
        visibility: visible;
    }
}

.gbbPersonalizePageWrapper{
  /* margin: 10% 25%; */
}
.gbbPersonalizePageHTML{
  margin: 5% 5%;
  display:grid;
  grid-gap:40px;
  position: relative; 
  transform: translate(0px, -5%);
}

.gbbPersonalizePageHTMLContent{
    display:grid;
    grid-gap: 20px;
}

.greetingCardAllImagesContainer{
    display: grid;
    /* grid-template-columns: repeat(2,1fr); */
    grid-gap: 15px;
    padding: 10px;
    background: white;    
}


.gbbGreetingCardContainer,
.gbbGiftWrapContainer{
    display: grid;
    grid-gap: 10px;
}

.gbbGreetingCardImg,
.gbbGiftWrapImg{
    width: 100%;
    height: 100%;
    object-fit: contain;
    background: white;
}

.greetingCardPreviewImage{
    height: 100px;
    width: 150px;
}
/* .greetingCardImage,.gbbGreetingCardListWrapper{ */
.greetingCardImage,
.giftWrapImage{
    width: 100%;
    height: 100%;
    /* object-fit: contain; */
    object-fit: cover;
    /* border: 2px solid white; */
    /* padding: 5px; */
    background: white;
}

.greetingCardWrapper,
.giftWrapWrapper{
    overflow-x: hidden;
    /* overflow-y: auto; */
    /* overflow-y: auto; */
    padding-right:5px;
    height: auto;
    /* max-height: 400px; */
    max-height: 350px;
    /* padding: 5px 10px; */
    /* border: 2px solid #D3D5D6; */
    border-radius: 5px;
}

.gbbGreetingCardShowAllImagesButtonWrapper{
    padding: 10px;
    background: white;
    height: fit-content;
}

.gbbGreetingCardShowAllImagesButton{
    padding:10px;
    border-radius: 5%;
}

.gbbGreetingCardDropDownWrapper,
.gbbGiftWrapDropDownWrapper{
    display: grid;
    /* grid-template-columns : 1fr; */
    grid-template-columns: 2fr 1fr;
    grid-template-rows: 1fr;
    padding: 0px 10px;
    border-radius: 5px;
  /* 
    border: 2px solid #D3D5D6;
    padding: 5px; */
}

.gbb_checkmark {
    display:inline-block;
    position:absolute;
    top:10px;
    left:10px;
    width: 22px;
    height:22px;
    -ms-transform: rotate(45deg); /* IE 9 */
    -webkit-transform: rotate(45deg); /* Chrome, Safari, Opera */
    transform: rotate(45deg);
}
.gbb_checkmark {
    top: 50%;
    left: 50%;
    transform: rotate(45deg) translate(-50%, -50%);
}



.gbb_checkmark_circle {
    /* display:block;
    position: absolute;
    width:22px;
    height:22px;
    background-color: green;
    border-radius:11px;
    left:0;
    top:0;
    opacity:0.5; */

    display: block !important;
    position: absolute;
    width: 36px;
    height: 36px;
    background-color: #026a02;
    border-radius: 50%;
    left: -6px;
    top: 0px;
}




.gbb_checkmark_stem {
    display:block !important;
    position: absolute;
    width:3px;
    height:9px;
    background-color:#fff;
    left:11px;
    top:6px;
}
.gbb_checkmark_stem {
  height: 20px;
}

.gbb_checkmark_kick {
    display:block !important;
    position: absolute;
    width:3px;
    height:3px;
    background-color:#fff;
    left:8px;
    top:12px;
}

.gbb_checkmark_kick{
     width: 9px;
    background-color: #fff;
    left: 3px;
    top: 23px;
}



.gbbGreetingCardImageList .greetingCardLabel input:checked,
.giftWrapImageList .giftWrapLabel input:checked{
    border:2px solid #A96668;
    border-radius:5px;
}

.gbbGreetingCardImageList .gbbGreetingCardImageLabel img, 
.giftWrapImageList .giftWrapImageLabel img{
    max-width:100%;
    width: 100%;
    /* width: -moz-available;           */
    /* WebKit-based browsers will ignore this. */
}

.gbbGreetingCardImageLabel,
.giftWrapImageLabel{
    width: 100%;
    height: 150px;
    height: 125px;
    position:relative;
    cursor:pointer;
    display:inline-block;
    align-self:center;
}


.gbbGreetingCardImageList,
.giftWrapImageList{
    display:grid;
    /* grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); */
    grid-template-columns: repeat(1, 1fr);
    grid-template-columns: repeat(2, 1fr);
    grid-gap:10px;
}

.gbbGreetingCardImageList .gbbGreetingCardImageLabel,
.giftWrapImageList .giftWrapImageLabel{
/* gbbGreetingCardImageList .gbbGreetingCardImageLabel, */
  /* border: 1px solid #D3D5D6; */

}
.gbbActiveGreetingCard{
  opacity: 0.5;
}

.greetingCardImageInput,
.giftWrapImageInput{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    visibility:hidden;
}


.gbbBodyWrapper ::-webkit-scrollbar {
  height: 4px;
  width: 3px;
}
  
  /* Track */
  .gbbBodyWrapper ::-webkit-scrollbar-track {
    background: #f1f1f1; 
  }
   
  /* Handle */
   .gbbBodyWrapper ::-webkit-scrollbar-thumb {
    background: #2c2c2c 0% 0% no-repeat padding-box;
  }
  
  /* Handle on hover */
  .gbbBodyWrapper ::-webkit-scrollbar-thumb:hover {
    background: #000000 0% 0% no-repeat padding-box;
  }



.greetingCardDropDownWrapper{
    cursor: pointer;
}


.gbbDisabled{
    pointer-events: none;
    opacity: 0.5;
}

.gbbEmailAddressWrapper{
  display: grid;
  /* background: white;     */
  background: none;
}



.gbbScheduleDeliveryDatePicker{
  display: grid;
  padding: 5px 10px;
  font-weight: 500;
  background: white;    
  /* width: 100%; */
  border-radius: 5px;
  border: 1px solid #D3D5D6;
}




.greetingCardWrapper::-webkit-scrollbar,.giftWrapWrapper::-webkit-scrollbar{ 
  width: 0.3rem;
}
.greetingCardWrapper::-webkit-scrollbar-track,.giftWrapWrapper::-webkit-scrollbar-track{
  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
}
.greetingCardWrapper::-webkit-scrollbar-thumb,.giftWrapWrapper::-webkit-scrollbar-thumb{
  width: 5px;
  background-color: rgb(26, 24, 24);
}


.gbbGreetingCardDropDownButton,
.gbbGiftWrapDropDownButton{
  transform: rotate(180deg);
  justify-self: self-end;
  height: 30px;
  width: auto;
  cursor: pointer
}


.gbbJustOneProduct{
  display: grid;
  grid-template-columns: 1fr;
  grid-template-rows: 1fr;
  padding: 10px 0px;
  background: white;    
}

.gbbClearSelectionButton{
  border: none;
  text-decoration: underline;
  font-size: 12px;
  cursor: pointer;
  justify-self: end;
}


.greetingCardImgWrapper,.giftWrapImgWrapper{
  height: 250px;
  overflow: hidden;
}


.gbbGreetingCardCheckboxPrice,
.gbbGiftWrapCheckboxPrice{
   justify-self: right;
} 

.gbbVideoHasAlreadyBeenRecorded{
  color: #007F60;
  font-size: 12px;
  font-weight: 600;
  text-align: center;
  background: #f1f2f3;
}


.gbbVideoMsgButtonGroup{
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-gap: 10px;
}

.gbbVideoMsgReRecordButton,
.gbbVideoMsgSaveButton{
  background: #f1f2f3;
  border: 1px solid #D3D5D6;
  border-radius: 5px;
  padding: 5px;
  cursor: pointer;
}

.gbbVideoMsgSaveButton{
  grid-column: 2/3;
  padding: 5px;
}

.gbbVariantDetailsWrapper{
  /* position: absolute;
  bottom: 10%;
  right: 25%;
  background: black;
  color: white; */
  display: grid;
  grid-template-columns: 1fr 1fr;
  /* background-color: rgb(189, 183, 183) ; */
  /* grid-gap: 10px; */
  /* justify-items: center; */
}

.greetingCardImageAndDetailsWrapper{
  display: grid;
  /* grid-template-rows: 3fr 0.5fr; */
  /* grid-gap: 10px; */
  /* border: 2px solid #D3D5D6; */
  border-radius: 5px;
  padding: 5px 5px;
  background-color: rgb(241, 242, 243);
  /* padding: 5px;
  justify-content: center; */
}

.gbbScheduleDeliveryHTML{
  /* grid-column: 2/3; */
}

.gbbScheduleMessageDeliveryWrapper{
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-gap: 10px;
  width: 100%;
  max-width: 100%;
}
.gbbScheduleMessageDeliveryHTML{
  display: grid;
  grid-gap: 10px;
}
.gbbScheduleMessageSendNowContainer, .gbbScheduleMessageSendLaterContainer{
  box-shadow: none;
  display: inline-block;
  justify-content: center;
  cursor: pointer;
  line-height: 30px;
  margin: 0px;
  padding: 6px;
  font-weight: 700;
  text-transform: uppercase;
  font-size: 12px;
  color: #585858;
  border: 1px solid #f3f3f3;
  /* border-top: 0 solid #f3f3f3; */
  transition: transform .2s;
  font-family: inherit;
  /* background: none; */
}
.gbbScheduleMessageSendNowContainer:hover, .gbbScheduleMessageSendLaterContainer:hover{

  transform: scale(0.95);

}
.gbbScheduleMessageDatePicker{
  width: 100%;
  padding: 10px;
  border: 1px solid #a6a6a6;
  display: none;
}
.gbbGiftMessageV2RequiredWarning{
  color: #ff0000;
  font-size: 14px;
}

.gbbGiftMessageV2ToFromContainer {
  width: 100%;
  max-width: 100%;
  display: grid;
  grid-template-columns: 1fr;
  grid-gap: 10px;
  margin-bottom: 10px;
}

.gbbGiftMessageV2FromField,
.gbbGiftMessageV2ToField {
  padding: 10px 18px;
  padding-bottom: 10px;
  border-radius: 2px;
  border: 1px solid #A2A2A2;
  width: unset;
}



@media (min-width:600px){
  .gbbPersonalizePageHTML{
      margin: 10% 0%;
  }
  .gbbGiftMessageV2ToFromContainer{
    grid-template-columns: 1fr 1fr;
  }
  
  .gbbGreetingCardImageLabel, .giftWrapImageLabel{
      width: 100%;
      height: 150px;
  }
  .gbbScheduleDeliveryDatePicker{
    
    padding: 8px 10px;
    
  }
  .gbbGreetingCardImageList{
    grid-template-columns: repeat(3, 1fr);
  }
}


@media (min-width:1024px){  
.gbbPersonalizePageHTML{
  position: relative; 
  transform: translate(0px, -10%);
}
.gbbGiftMessageV2InputFieldsDiv textarea {
  height: 130px;
}

.gbbJustOneProduct .gbbGreetingCardImageLabel,
.gbbJustOneProduct .giftWrapImageLabel{
  width: 100%;
  height: 200px;
}
.gbbGreetingCardImageList, .giftWrapImageList {
  display: grid;
  /* grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); */
  grid-template-columns: repeat(4, 1fr);
  grid-gap: 10px;
}
}


.gbbVariantPrice{
  justify-self: right;
}


.gbbGiftMessageCounterEle:not(:empty),.gbbGiftMessageCounterEle:not(:empty){
  font-size: 12px;
  color: #8c8c8c;
  margin-top: 5px;
  text-align: end;
}


.gbbCustomerUploadsListItemInput{
  display: none;
}


.gbbCustomerUploadsList {
  display: grid;
  grid-gap: 15px;
}

.gbbCustomerUploadsListItem {
  display: grid;
  grid-template-columns: 2fr 1fr 25px;
  grid-gap: 10px;
  margin-bottom: 10px;
}


.gbbCustomerUploadsErrorMsg:not(:empty){
  display: block;
  color:red
}


.gbbCustomerUploadButton{
  font-size: 14px;
  padding: 5px 10px;
  border: none;
  /* width: min-content; */
  border-radius: 5px;
  justify-self: end;
  text-align: center;
  cursor: pointer;
  user-select: none;
}


.gbbCustomerUploadsActionButton {
  font-size: 14px;
  justify-self: end;
}


.gbbCustomerUploadsRemoveButton{
  grid-column: 3/4;
  align-self: end;
  cursor: pointer;
  user-select: none;
}



.gbbCustomerUploadPreviewButton{
  /* underline and blue color */
  font-size: 14px;
  padding: 5px 10px;
  border: none;
  /* width: min-content; */
  border-radius: 5px;
  justify-self: end;
  text-align: center;
  cursor: pointer;
  user-select: none;
  cursor: pointer;
  user-select: none;
  text-decoration: underline;
  color: blue;
}
.gbbCustomerUploadButton{

}

.gbbCustomerUploadsRemoveButton svg {
  /* background: #cf1a1a;
  border-radius: 50%;
  stroke: 0;
  border: 1px solid white;
  fill: white; */
}

.gbbCustomerUploadsMainText{
  /* font-size: 15px; */
  font-weight: 600;
}

.gbbCustomerUploadsDivider{
  display: block !important;
  border: 1px solid #A2A2A2 !important;
  height: 0px;
  opacity: 0.5;
}


/* PRODUCT ADDONS */
.gbbAddonDiscountRibbon{
  background: blue; 
  color: white;
  border-radius: 5px 0px 0px 5px;
}
.notEligibleForAddons .gbbProductItem{
  pointer-events: none;
  opacity: 0.5;
}
.gbbPersonalizePageHTML:has(.gbbAddonProductsWrapper){
  transform: translate(0px, 0px);
  margin: 0% 0%;
}
.gbbAddonProductsSectionTitle{
  font-weight: 600;
}
.gbbProductItem[free-addon-product="true"] .gbbProductItemPricesContainer{
  display: none;
}
.gbbProductItem[free-addon-product="true"] .gbbProductActionContainer {
  grid-template-rows: auto;
}

/* PRODUCT ADDONS */:root {
    /* Banners */
    --gbb-landing-page-image-src: url(https://d3ks0ngva6go34.cloudfront.net/public/banners/landing_page_bannerv2.png);
    --gbb-page-banner-image-src: url(https://d3ks0ngva6go34.cloudfront.net/public/banners/page_banner_temp.png);
    --gbb-product-review-image-src: url(https://d3ks0ngva6go34.cloudfront.net/public/banners/landing_page_bannerv2.png);

    /* Colors */
    --gbb-primary-color: blue;
    --gbb-secondary-color: aqua;
    --gbb-text-color: black;
    --gbb-disabled-color: gray;
    --gbb-product-box-color: blue;

    /* Landing Page */
    --gbb-landing-page-text-color: #000000;
    --gbb-landing-page-button-bg-color: #000000;
    --gbb-landing-page-button-text-color: #ffffff;

    /* Cart Footer */
    --gbb-cart-footer-bg-color: #ffffff;
    --gbb-cart-footer-buttons-container-bg-color: #f6f6f6;
    --gbb-cart-footer-border-radius: 0px;
    --gbb-cart-footer-product-image-border-radius: 0px;
    --gbb-cart-footer-buttons-container-border-radius: 9px;
    --gbb-cart-footer-show-hide-prices: visible;
    --gbb-cart-footer-text-color: #000000;
    --gbb-cart-footer-strikethrough-price-color: #8D8D8D;
    --gbb-cart-footer-final-price-font-thickness: bold;
    --gbb-cart-footer-strikethrough-price-font-thickness: regular;
    --gbb-cart-footer-back-button-color: #6d7175;
    --gbb-cart-footer-back-button-text-color: #FFFFFF;
    --gbb-cart-footer-back-button-border-color: #000000;
    --gbb-cart-footer-back-button-border-thickness: 2px;
    --gbb-cart-footer-next-button-text-color: #ffffff;
    --gbb-cart-footer-next-button-color: #000000;
    --gbb-cart-footer-next-button-border-color: #000000;
    --gbb-cart-footer-next-button-border-thickness: 2px;
    --gbb-cart-footer-buttons-border-radius: 9px;
    --gbb-cart-footer-buttons-padding: 10px;
    --gbb-cart-footer-discount-progress-bar-empty-color: #C1E7C5;
    --gbb-cart-footer-discount-progress-bar-filled-color: #15A524;
    --gbb-cart-footer-discount-text-visibility: visible;

    /* Product Card */
    --gbb-product-card-bg-color: #f1f2f3;
    --gbb-product-card-border-radius: 12px;
    --gbb-product-card-image-border-radius: 8px;
    --gbb-product-card-image-fit: cover;
    --gbb-product-card-per-row-xtra-large-screen: 6;
    --gbb-product-card-per-row-large-screen: 4;
    --gbb-product-card-text-color: #252525;
    --gbb-product-card-title-font-size: 19px;
    --gbb-product-card-title-font-weight: regular;
    --gbb-product-card-final-price-visibility: block;
    --gbb-product-card-compare-at-price-font-size: 20px;
    --gbb-product-card-compare-at-price-font-weight: regular;
    --gbb-product-card-compare-at-price-visibility: block;
    --gbb-product-card-final-price-font-size: 18px;
    --gbb-product-card-final-price-font-color: #252525;
    --gbb-product-card-final-price-font-weight: bold;
    --gbb-product-card-button-color: #000000;
    --gbb-product-card-button-text-color: #ffffff;
    --gbb-product-card-button-border-radius: 10px;
    --gbb-product-card-allow-only-one-quantity: block;
    --gbb-product-card-quantity-selector-bg-color: #EEEEEE;
    --gbb-product-card-quantity-selector-btns-bg-color: #000000;
    --gbb-product-card-quantity-selector-text-color: #000000;
    --gbb-product-card-quantity-selector-border-radius: 8px;
    --gbb-product-card-quantity-selector-button-text-color: #ffffff;

    /* Navigation Banner */
    --gbb-navigation-banner-title-color: #ffffff;
    --gbb-navigation-banner-text-color: #ffffff;
    --gbb-navigation-banner-step-completion-color: #000000;
    --gbb-navigation-banner-step-done-color: #000000;
    --gbb-navigation-banner-step-text-color: #000000;
    --gbb-navigation-banner-step-progress-bar-filled-color: #1E1E1E;
    --gbb-navigation-banner-step-progress-bar-empty-color: #cccccc;
    --gbb-navigation-banner-step-text-font-size: 20px;
    --gbb-navigation-check-color: #ffffff;
    --gbb-navigation-banner-step-completed-border-color: #000000;
    --gbb-navigation-banner-step-completed-border-width: 2px;
    --gbb-navigation-banner-step-incomplete-bg-color: #FFFFFF;
    --gbb-navigation-banner-step-incomplete-border-color: #000000;
    --gbb-navigation-banner-step-incomplete-border-width: 2px;
    --gbb-navigation-banner-tabs-active-bg-color: #000000;
    --gbb-navigation-banner-tabs-active-text-color: #F6f6f6;
    --gbb-navigation-banner-tabs-inactive-bg-color: #FFFFFF;
    --gbb-navigation-banner-tabs-inactive-text-color: #000000;
    --gbb-navigation-banner-tabs-border-color: #3c3c3c;
    --gbb-navigation-banner-tabs-corner-radius: 5px;

    /* Summary Block */
    --gbb-summary-block-add-to-cart-button-color: #000000;
    --gbb-summary-block-add-to-cart-button-text-color: #ffffff;
    --gbb-summary-block-back-button-color: #252525;
    --gbb-summary-block-back-button-text-color: #ffffff;

    /* Category Block */
    --gbb-category-bg-color: #f5f5f5;
    --gbb-tab-active-bg-color: #000000;
    --gbb-tab-active-text-color: #F6f6f6;
    --gbb-tab-inactive-bg-color: #FFFFFF;
    --gbb-tab-inactive-text-color: #000000;

    /* Quick Settings */
    --gbb-quick-settings-primary-color: #000000;
    --gbb-quick-settings-button-bg-color: #000000;
    --gbb-quick-settings-button-text-color: #ffffff;

    /* General Settings */
    --gbb-condition-toast-bg-color: #000000;
    --gbb-condition-toast-text-color: #ffffff;
    --gbb-scroll-bar-color: #F6F6F6;
    --gbb-icon-text-color: #1d1d1b;
    --gbb-icon-bg-color: #ffffff;
    --gbb-product-page-title-color: #000000;
    --gbb-bundle-bg-color: #ffffff;
}


.gbbNewPageCustomization.gbbProductsCardLayoutV2 {

    /* CART FOOTER COLOR CONFIG */
    .gbbProductsFooterHTML,
    .gbbAddProductsPageFooterHTML,
    .gbbPersonalizePageFooterHTML {
        background-color: var(--gbb-cart-footer-bg-color);
        border-radius: var(--gbb-cart-footer-border-radius);
    }

    .gbbFooterButtonsWrapper {
        background-color: var(--gbb-cart-footer-buttons-container-bg-color);
        border-radius: var(--gbb-cart-footer-buttons-container-border-radius);
    }

    .gbbFooterTotalContainer {
        visibility: var(--gbb-cart-footer-show-hide-prices);
    }

    .gbbFooterProductImageContainer {
        border-radius: var(--gbb-cart-footer-product-image-border-radius);
    }

    .gbbFooterDiscountedTotalValue {
        font-weight: var(--gbb-cart-footer-final-price-font-thickness);
        color: var(--gbb-cart-footer-final-price-font-color);
    }
    
    .gbbFooterOriginalTotalValue {
        color: var(--gbb-cart-footer-strikethrough-price-color);
        font-weight: var(---gbb-cart-footer-strikethrough-price-font-thickness);
    }

    .gbbFooterBackButton {
        background-color: var(--gbb-cart-footer-back-button-color);
        color: var(--gbb-cart-footer-back-button-text-color);
        border: var(--gbb-cart-footer-back-button-border-thickness) solid var(--gbb-cart-footer-back-button-border-color);

    }

    .gbbFooterNextButton {
        background-color: var(--gbb-cart-footer-next-button-color);
        color: var(--gbb-cart-footer-back-button-text-color);
        border: var(--gbb-cart-footer-next-button-border-thickness) solid var(--gbb-cart-footer-next-button-border-color);
       
    }
    .gbbFooterBackButton,.gbbFooterNextButton{
        border-radius: var(--gbb-cart-footer-buttons-border-radius);
        padding: var(--gbb-cart-footer-buttons-padding);
    }

    .progressBar {
        background-color: var(--gbb-cart-footer-discount-progress-bar-empty-color);
    }

    .progressBarFill {
        background-color: var(--gbb-cart-footer-discount-progress-bar-filled-color);
    }

    .gbbDiscountMessage {
        color: var(--cart-footer-discount-text-color);
        visibility: var(--gbb-cart-footer-discount-text-visibility)
    }

    
    /* CART FOOTER COLOR CONFIG */

    /* PRODUCT CARD COLOR CONFIG */
    .gbbProductItem {
        background-color: var(--gbb-product-card-bg-color);
        border-radius: var(--gbb-product-card-border-radius);
    }

    .gbbProductQuantityAddButton {
        display: var(--gbb-product-card-allow-only-one-quantity);
        border-radius: var(--gbb-product-card-quantity-selector-border-radius);
    }

    .gbbProductItemPrice {
        display: var(--gbb-product-card-final-price-visibility);
    }

    .gbbProductImageContainer {
        border-radius: var(--gbb-product-card-image-border-radius);
    }

    .gbbProductImageContainerImg {
        object-fit: var(--gbb-product-card-image-fit);
    }

    .gbbProductTextContainer {
        color: var(--gbb-product-card-text-color);
    }

    .gbbProductTitleOnly {
        font-size: var(--gbb-product-card-title-font-size);
        font-weight: var(--gbb-product-card-title-font-weight);
    }

    .gbbProductItemCompareAtPrice {
        color: var(--gbb-product-card-compare-at-price-font-color);
        font-size: var(--gbb-product-card-compare-at-price-font-size);
        font-weight: var(--gbb-product-card-compare-at-price-font-weight);
        display: var(--gbb-product-card-compare-at-price-visibility);
    }

    .gbbProductItemPrice {
        color: var(--gbb-product-card-final-price-font-color);
        font-size: var(--gbb-product-card-final-price-font-size);
        font-weight: var(--gbb-product-card-final-price-font-weight);
    }

    .gbbProductAddButton {
        background-color: var(--gbb-product-card-button-color);
        color: var(--gbb-product-card-button-text-color);
        border-radius: var(--gbb-product-card-button-border-radius);
    }

    .gbbProductQuantityHTML {
        background-color: var(--gbb-product-card-quantity-selector-bg-color);
        color:var(--gbb-product-card-quantity-selector-text-color) ;
        border-radius: var(--gbb-product-card-button-border-radius);
    }
    .gbbProductQuantityRemoveButton{
        background-color: var(--gbb-product-card-quantity-selector-btns-bg-color);
        color: var(--gbb-product-card-quantity-selector-button-text-color);
        border-radius: var(--gbb-product-card-quantity-selector-border-radius);
    }
        /* productCardQuantitySelectorButtonTextColor */
    @media screen and (min-width: 1921px) {
        .gbbProductsItemsContainer {
            grid-template-columns: repeat(var(--gbb-product-card-per-row-xtra-large-screen), 1fr);
        }
    }
        @media screen and (min-width: 768px) and (max-width: 1920px) {
            .gbbProductsItemsContainer {
                grid-template-columns: repeat(var(--gbb-product-card-per-row-large-screen), 1fr);
            }
        }
    /* PRODUCT CARD COLOR CONFIG */

    /* Navigation */

    .gbbNavigationTitle {
        color: var(--gbb-navigation-banner-text-color);
        font-size: var(--gbb-navigation-banner-step-text-font-size);
    }

    .gbbStepsProgressBar {
        background-color: var(--gbb-navigation-banner-step-progress-bar-empty-color);
    }

    .gbbStepsProgressBarFilled {
        background-color: var(--gbb-navigation-banner-step-progress-bar-filled-color);
    }

    .gbbCategoryContainerTabUI {
        background-color: var(--gbb-navigation-banner-tabs-inactive-bg-color);
        color: var(--gbb-navigation-banner-tabs-inactive-text-color);
        border: 1px solid var(--gbb-navigation-banner-tabs-border-color);
        border-radius: var(--gbb-navigation-banner-tabs-corner-radius);
    }

    .gbbCategoryContainerTabUIActive {
        background-color: var(--gbb-navigation-banner-tabs-active-bg-color);
        color: var(--gbb-navigation-banner-tabs-active-text-color);
    }

    .gbbtickMark svg>path {
        fill: var(--gbb-navigation-banner-step-done-color);
    }
 /* gbbNavigationStepImgContainer class which doesnt includes gbbNavigationStepImgContainerActive */

    .gbbNavigationStepImgContainer:not(.gbbNavigationStepImgContainerActive) {
        border: var(--gbb-navigation-banner-step-incomplete-border-width) solid var(--gbb-navigation-banner-step-incomplete-border-color);
        background-color: var(--gbb-navigation-banner-step-incomplete-bg-color);
    }

    .gbbNavigationStepImgContainerActive {
        border: var(--gbb-navigation-banner-step-completed-border-width) solid var(--gbb-navigation-banner-step-completion-color);
        /* background-color: var(--gbb-navigation-banner-step-completion-color); */
    }

    /* Navigation */

/*const cssVariables=[ '
--gbb-navigation-banner-title-color',
'--gbb-navigation-banner-step-text-color',
];*/

}
.gbbNewPageCustomization.gbbProductVariantModalLayoutV2 {
    .gbbProductVariantAddButton{
        background-color: var(--gbb-product-card-button-color);
            color: var(--gbb-product-card-button-text-color);
            border-radius: var(--gbb-product-card-button-border-radius);

    }
    .gbbProductQuantityHTML {
        background-color: var(--gbb-product-card-quantity-selector-bg-color);
        color: var(--gbb-product-card-quantity-selector-text-color);
        border-radius: var(--gbb-product-card-quantity-selector-border-radius);
    }
    .gbbProductQuantityAddButton {
        display: var(--gbb-product-card-allow-only-one-quantity);
        border-radius: var(--gbb-product-card-quantity-selector-border-radius);
    }
    .gbbProductQuantityRemoveButton {
        background-color: var(--gbb-product-card-quantity-selector-btns-bg-color);
        color: var(--gbb-product-card-quantity-selector-button-text-color);
        border-radius: var(--gbb-product-card-quantity-selector-border-radius);
    }
}.gbbGiftMessageV2InputFieldsDiv textarea {
    margin:0px;
    padding: 10px 18px;
    width: 100%;
    border: 1px solid #cccccc;
    /* background-color:#f1f2f3; */
    /* background-color: #ffffff; */
    color: #000000;
    max-width: 100%;
    line-height: 1.2;
    border-radius: 2px;
    padding-bottom: 10px;
    max-height: 170px !important;
    min-height:50px !important;
    border: 1px solid #A2A2A2;
    resize: none;
    width: 100%;
    height: 130px;
    padding: 10px;
    background: none;
}


.gbbGiftMessageV2Divider{
    display: block !important;
    border: 1px solid #A2A2A2 !important;
    height: 0px;
    opacity: 0.5;
 }
.gbbGiftMessageV2Label{
    text-align: left;
    letter-spacing: 0px;
    display: block;
    color: #000000;
    padding-bottom: 10px;
    opacity: 1;
}

.gbbGiftMessageV2{
    display: grid;
    grid-template-rows: 0.6fr;
    grid-gap: 10px;
}
.gbbVideoMessageCheckboxRow{
    display: grid;
    grid-auto-flow: column;
    padding: 5px;
    /* background-color: #f1f2f3; */
}
.gbbVideoMsgCheckboxLabel{
    text-align: left;
    letter-spacing: 0px;
    color: #000000;
}
 .gbbVideoMsgCheckboxWrapper {
    position: relative;
    display: inline-block;
    width: 44px;
    justify-self: end;
    height: 26px;
  }
.gbbVideoMsgCheckboxField { 
  width: 0px;
  height: 0px;
}

.gbbVideoMsgToggle input{ 
    opacity: 0;
    width: 0;
    height: 0;
  }
  
.gbbVideoMsgSlider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #fff;
    border: 1px solid black;    
    -webkit-transition: .4s;
    transition: .4s;
  }
  
 .gbbVideoMsgSlider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 4px;
    bottom: 4px;
    top:2px;
    background-color: white;
    -webkit-transition: .4s;
    transition: .4s;
  }
  
   input:checked + .gbbVideoMsgSlider {
    background-color: black;
  }
  
 input:checked + .gbbVideoMsgSlider:before {
    -webkit-transform: translateX(16px);
    -ms-transform: translateX(16px);
    
    transform: translateX(16px);
  }
  
 
 
  /* Rounded sliders */
  .slider.round, .gbbVideoMsgSlider {
    border-radius: 34px;
  }
  
  .slider.round:before, .gbbVideoMsgSlider:before {
    border-radius: 50%;
    border: 1px solid black;
  }


  /* ============================================================================video message  */
  .gbbVideoPlayerHide {
    display: none !important;
  }

  .gbbVideoMsgPlayerWrapper {
    /* height: 100vh; */
    z-index: 10000000000000;
    display: none;
    align-items: center;
    justify-items: center;
    width: 100%;
    /* position: fixed; */
    top: 30px;
    margin: 10px auto;
  }

  .gbbRecorder {
  
    width: 100%;
    min-height: 250px;
    position: relative;
    border-radius: 2%;
    overflow: hidden;
  }

  .gbbVideoPlayer,
  .gbbVideoPlayerRecording {
    width: 100%;
    height: auto;
  }
 
  .gbbRecorderCloseBtn {
    position: absolute;
    z-index: 1;
    left: 2%;
    top: 5%;
    background: transparent;
    border: none;
    display: none;
  }

  .gbbRecorderCloseBtn img {
    height: 30px;
    width: 30px;
    filter: invert(90%);
    cursor: pointer;
  }

  .gbbVideoPlayerStartBtn,
  .gbbVideoPlayerStopBtn {
    position: absolute;
    bottom: 2%;
    left: 50%;
    transform: translateX(-50%);
    cursor: pointer;
    height: 60px;
    width: 60px;
    border-radius: 50%;
    border: none;
    background-color: transparent;
  }

  .gbbVideoPlayerStartBtn {
    background-color: white;
  }

  .gbbVideoPlayerStopBtn {
    background-color: red;
  }

  .gbbVideoPlayerRedDot,
  .gbbVideoPlayerRedSquare {
    height: 20px;
    width: 20px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  .gbbVideoPlayerRedDot {
    background-color: red;
    border-radius: 50%;
  }

  .gbbVideoPlayerRedSquare {
    background-color: white;
    border-radius: 10%;
  }

  .gbbPermissionDenied {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 16px;
  }

  .gbbVideoPlayerTimeLeft {
    position: absolute;
    bottom: 4%;
    right: 4%;
    color: white;
    font-size: 12px;
    background: black;
    padding: 4px;
    color: white;
    opacity: 0.7;  
  }

  .gbbVideoPlayerStatus {
    position: absolute;
    bottom: 4%;
    left: 4%;
    font-size: 12px;
    padding: 4px;
    background-color: black;
    color: white;
    opacity: 0.7;
  }

  

  .gbbVideoPlayerControls {
    width: 100%;
    text-align: center;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1;
    display: grid;
    /* grid-template-columns: repeat(3, 1fr); */
    justify-content: space-evenly;
    align-items: center;
  }

  .gbbLoadingHeading {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1;
    color: white;
    font-size: 20px;
  }

  .gbbUploadingVideoHeading {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1;
    color: #e3dada;
    font-size: 16px;
    text-align: center;
    line-height: 40px;
  }

  .gbbVideoPlayerControlsAcceptBtnDiv, 
  .gbbVideoPlayerControlsPlayBtnDiv, 
  .gbbVideoPlayerControlsReStartBtnDiv{
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .gbbVideoPlayerControlsReStartBtnDiv,
  .gbbVideoPlayerControlsAcceptBtnDiv{
    display: none;
  }

  .gbbVideoPlayerControlsBtnDivInfo{
    font-size: 12px;
    color: white;
    margin: 0 0 8px 0; 
  }

  .gbbVideoPlayerControlsAcceptBtn,
  .gbbVideoPlayerControlsPlayBtn,
  .gbbVideoPlayerControlsReStartBtn {
    background-color: transparent;
    height: 90px;
    width: 90px;
    border-radius: 50%;
    cursor: pointer;
    border:0;
    /* margin-right: 20px; */
  }

  old.gbbVideoPlayerControlsAcceptBtn {
    border: 5px solid #3ce669;
  }

  old.gbbVideoPlayerControlsPlayBtn {
    border: 5px solid #d3d3d3;
  }

  old.gbbVideoPlayerControlsReStartBtn {
    border: 5px solid #e03838;
  }

  .gbbVideoPlayerControlsAcceptBtnImg,
  .gbbVideoPlayerControlsPlayBtnImg,
  .gbbVideoPlayerControlsReStartBtnImg {
    height: auto;
    width: 100%;
  }

  old.gbbVideoPlayerControlsAcceptBtnImg {
    filter: invert(69%) sepia(59%) saturate(537%) hue-rotate(80deg) brightness(98%) contrast(93%);
  }

  old.gbbVideoPlayerControlsPlayBtnImg {
    filter: invert(100%) sepia(0) saturate(7500%) hue-rotate(116deg) brightness(80%) contrast(109%);
  }

  old.gbbVideoPlayerControlsReStartBtnImg {
    filter: invert(23%) sepia(77%) saturate(3858%) hue-rotate(348deg) brightness(98%) contrast(80%);
  }

  /* 500px and down */
  @media only screen and (max-width: 600px) {
    .gbbVideoPlayerRecording {
      object-fit: cover;
      height: 100%;
    }
    .gbbRecorder {
      min-height: 36vh;
    }
    .gbbVideoPlayer,
  .gbbVideoPlayerRecording{
    width: 100%;
    object-fit: cover;
    position: absolute;
    height: 100%;
  }
    .gbbVideoPlayerControlsAcceptBtn,
    .gbbVideoPlayerControlsPlayBtn,
    .gbbVideoPlayerControlsReStartBtn {
      height: 50px;
      width: 50px;
    }

    .gbbVideoPlayerControlsAcceptBtnImg,
    .gbbVideoPlayerControlsPlayBtnImg,
    .gbbVideoPlayerControlsReStartBtnImg {
      height: 40px;
      width: 40px;
    }
  }

  /* 350px and down */
  @media only screen and (max-width: 600px) {
    .gbbVideoPlayerStartBtn,
    .gbbVideoPlayerStopBtn {
      height: 40px;
      width: 40px;
    }

    .gbbVideoPlayerRedDot,
    .gbbVideoPlayerRedSquare {
      width: 10px;
      height: 10px;
    }
    .gbbGiftMessageV2InputFieldsDiv textarea {
      height: 80px;
    }

  }
  .gbbGiftCardMessageContent{
    overflow-y:auto;
  }

  
  /* Track */
  .gbbGiftCardMessageContent  ::-webkit-scrollbar-track,.gbbGreetingCardListWrapper ::-webkit-scrollbar-track  {
    background: #f1f1f1; 
  }
   
  /* Handle */
   .gbbGiftCardMessageContent  ::-webkit-scrollbar-thumb,.gbbGreetingCardListWrapper ::-webkit-scrollbar-thumb{
    background: #2c2c2c 0% 0% no-repeat padding-box;
  }



  
  /* Handle on hover */
  .gbbGiftCardMessageContent  ::-webkit-scrollbar-thumb:hover, .gbbGreetingCardListWrapper ::-webkit-scrollbar-thumb:hover {
    background: #000000 0% 0% no-repeat padding-box;
  }

  /* Extra small devices (phones, 600px and down) */
  /* @media only screen and (max-width: 800px) {
    .gbbRecorder {
      width: 375px;
      height: 650px;
      background-color: black;
    }

    .gbbVideoPlayer,
    .gbbVideoPlayerRecording {
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .gbbVideoPlayerRecording {
      object-fit: contain;
    }

    .gbbVideoPlayerControls {
      width: 80%;
    }

    .gbbVideoPlayerControlsAcceptBtn,
    .gbbVideoPlayerControlsPlayBtn,
    .gbbVideoPlayerControlsReStartBtn {
      margin-right: 7px;
    }

    .gbbVideoPlayerTimeLeft,
    .gbbVideoPlayerStatus {
      font-size: 18px;
      background-color: rgba(0,0,0,0.2);
      padding: 2px 4px;
    }

  } */


  /* @media only screen and (max-width: 850px) {} */

  /* Small devices (portrait tablets and large phones, 600px and up) */
  /* @media only screen and (min-width: 600px) {} */

  /* Medium devices (landscape tablets, 768px and up) */
  /* @media only screen and (min-width: 768px) {} */

  /* Large devices (laptops/desktops, 992px and up) */
  @media only screen and (min-width: 900px) {
    .gbbRecorder {
      min-height: 180px;
      height: 100%;
    }
    .gbbRecord,.gbbRecorded{
      height: 100%;
    }
    .gbbVideoPlayer, .gbbVideoPlayerRecording{
      width: 100%;
      object-fit: cover;
      height: 100%;
    }
    .gbbVideoMsgPlayerWrapper{
      height: auto;  
    }
   
    .gbbGiftCardMessageContent{
      max-height: 350px;
    } 

  }

  /* Extra large devices (large laptops and desktops, 1200px and up) */
  /* @media only screen and (min-width: 1200px) {}  */


  .giftMessageDeliveryInfo{
    font-size: 12px;
    /* font-style: italic; */
    color: #8c8c8c;    
  }
  
.gbbVideoMsgEmailField{
  margin: 0px;
  padding: 10px 18px;
  /* width: 100%; */
  /* background-color: #ffffff; */
  color: #000000;
  max-width: 100%;
  line-height: 1.2;
  border-radius: 2px;
  padding-bottom: 10px;
  border: 1px solid #A2A2A2;
  font-size: 14px !important;
  background: none;
}



.gbbEmailValidationError{
  color: #ff0000;
  font-size: 14px;
  margin-top: 5px;
}

.gbbVideoMessageHTML{
    height: fit-content;
    /* background: #f1f2f3; */
    /* background-color: white; */
    background: none;
    display: grid;
    grid-gap: 5px;
}


.gbbGreetingCardDropDownWrapper,.gbbGiftWrapDropDownWrapper,
.gbbGiftMessageV2Label,.gbbScheduleDeliveryDateLabel,
.gbbEmailAddressLabelField{
  font-weight: 600;
}</style>
    <style>  </style>
    <style></style>
    <style>.gbbProductItemCompareAtPrice {
display: none;
}

.gbbCategoryContainer.gbbCategoryContainerTabUI.gbbCategoryContainerTabUIActive {
background: #dfedf9;
}

.gbbCategoryContainerTabUIActive .gbbCategoryHeaderContainerTabUI {
color: #000000;
}

.gbbSummaryPageCreateNewBoxButton{
background: rgb(237, 216, 208) !important;
color: #000000 !important;
}</style>
    <script>  </script>
    <style>  </style>
    <script>
      if (!gbb.state.bundleId){
        gbb.state.bundleId = "1";
      }
    </script>
    <style>
    .gbbLoadingScreen{
    user-select: none;
    z-index: 1;
    /* background: #fff; */
    position: unset;
    top: 0;
    left: 0;
    width: 100%;
    height: 1000px;
    display: grid;
    justify-content: center;
    align-items: center;
    }</style>
    </main>

    <div class="group--footer">
      <!-- BEGIN sections: footer-group -->
<footer id="shopify-section-sections--22932443955535__footer" class="shopify-section shopify-section-group-footer-group section--site-footer page-layout__footer"> <style data-shopify="">
  .site-footer a,
  .site-footer summary {
    --color-link: var(--color-site-footer-text);
    --color-link-raw: var(--color-site-footer-text-raw);
  }

  .site-footer .button--icon {
    --button-foreground-color: var(--color-site-footer-text);
    --button-foreground-color-raw: var(--color-site-footer-text-raw);
  }

  .section--site-footer .newsletter-form {
    --newsletter-input-bg-color: var(--color-site-footer-bg);
    --newsletter-border-color: var(--color-site-footer-border);
    --newsletter-text-color: var(--color-site-footer-text);
  }

  
    .site-footer__title {
      font-family: var(--font-heading-family);
      font-size: 1.15rem;
      font-style: var(--font-heading-style);
      font-weight: var(--font-heading-weight);
      letter-spacing: var(--font-heading-letter-spacing);
      line-height: var(--font-heading-line-height);
      text-transform: var(--font-heading-text-transform);
    }
  

  
    .site-footer__title {
      font-weight: bold;
    }
  
</style>
<div class="element--edge-wrapper">
    <div class="element--none" style="background-color: #1c1d1c;"></div>
  </div><div class="site-footer"><div class="site-footer__blocks site-footer__blocks--6-columns space--pv--large space--viewport-sides"><div class="site-footer__block--logo-text align--text-left align--text-center--large-down"><a href="https://laphet.de/">
                <img srcset="//laphet.de/cdn/shop/files/Laphet_3163_x_835_px_4000_x_1500_px.png?v=1738418424&amp;width=185 1x, //laphet.de/cdn/shop/files/Laphet_3163_x_835_px_4000_x_1500_px.png?v=1738418424&amp;width=370 2x" src="./Laphet_files/Laphet_3163_x_835_px_4000_x_1500_px.png" loading="lazy" style="width: 185px;" class="space--mb--small display--inline-block" width="" height="" alt="Laphet">
              </a><div class="rte space--mb--small container--copy-max-width align--block-left align--block-center--large-down line-height--copy">
                <h2><br>Spice it, Spread it, Love it!</h2><p>Teile deine Leidenschaft für Tee und schließe dich unserer Community an. Folge uns auf Social Media und begib dich mit uns auf eine köstliche Reise in die faszinierende, essbare Welt der Teeprodukte. 🍃</p><p></p>
              </div>
<ul class="social-list flex--justify-left list--unstyled space--mt--medium" role="list"><li>
      <a class="button--icon" href="https://www.facebook.com/laphet.de/" aria-describedby="a11y-external-message"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="26px" height="26px" class=""><path d="M14 19h5V5H5v14h7v-5h-2v-2h2v-1.654c0-1.337.14-1.822.4-2.311A2.726 2.726 0 0 1 13.536 6.9c.382-.205.857-.328 1.687-.381.329-.021.755.005 1.278.08v1.9H16c-.917 0-1.296.043-1.522.164a.727.727 0 0 0-.314.314c-.12.226-.164.45-.164 1.368V12h2.5l-.5 2h-2v5zM4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"></path></svg>
<span class="display--hidden">
          Facebook
        </span>
      </a>
    </li><li>
      <a class="button--icon" href="https://www.pinterest.com/laphet_de/" target="_blank" rel="noopener" aria-describedby="a11y-external-message"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="26px" height="26px" class=""><path d="M8.49 19.191c.024-.336.072-.671.144-1.001.063-.295.254-1.13.534-2.34l.007-.03.387-1.668c.079-.34.14-.604.181-.692a3.46 3.46 0 0 1-.284-1.423c0-1.337.756-2.373 1.736-2.373.36-.006.704.15.942.426.238.275.348.644.302.996 0 .453-.085.798-.453 2.035-.071.238-.12.404-.166.571-.051.188-.095.358-.132.522-.096.386-.008.797.237 1.106a1.2 1.2 0 0 0 1.006.456c1.492 0 2.6-1.985 2.6-4.548 0-1.97-1.29-3.274-3.432-3.274A3.878 3.878 0 0 0 9.2 9.1a4.13 4.13 0 0 0-1.195 2.961 2.553 2.553 0 0 0 .512 1.644c.181.14.25.383.175.59-.041.168-.14.552-.176.68a.41.41 0 0 1-.216.297.388.388 0 0 1-.355.002c-1.16-.479-1.796-1.778-1.796-3.44 0-2.985 2.491-5.584 6.192-5.584 3.135 0 5.481 2.329 5.481 5.14 0 3.532-1.932 6.104-4.69 6.104a2.508 2.508 0 0 1-2.046-.959l-.043.177-.207.852-.002.007c-.146.6-.248 1.017-.288 1.174-.106.355-.24.703-.4 1.04a8 8 0 1 0-1.656-.593zM12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10z"></path></svg>
<span class="display--hidden">
          Pinterest
        </span>
      </a>
    </li><li>
      <a class="button--icon" href="https://www.instagram.com/laphet.de/" target="_blank" rel="noopener" aria-describedby="a11y-external-message"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="26px" height="26px" class=""><path d="M12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm0-2a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm6.5-.25a1.25 1.25 0 0 1-2.5 0 1.25 1.25 0 0 1 2.5 0zM12 4c-2.474 0-2.878.007-4.029.058-.784.037-1.31.142-1.798.332-.434.168-.747.369-1.08.703a2.89 2.89 0 0 0-.704 1.08c-.19.49-.295 1.015-.331 1.798C4.006 9.075 4 9.461 4 12c0 2.474.007 2.878.058 4.029.037.783.142 1.31.331 1.797.17.435.37.748.702 1.08.337.336.65.537 1.08.703.494.191 1.02.297 1.8.333C9.075 19.994 9.461 20 12 20c2.474 0 2.878-.007 4.029-.058.782-.037 1.309-.142 1.797-.331.433-.169.748-.37 1.08-.702.337-.337.538-.65.704-1.08.19-.493.296-1.02.332-1.8.052-1.104.058-1.49.058-4.029 0-2.474-.007-2.878-.058-4.029-.037-.782-.142-1.31-.332-1.798a2.911 2.911 0 0 0-.703-1.08 2.884 2.884 0 0 0-1.08-.704c-.49-.19-1.016-.295-1.798-.331C14.925 4.006 14.539 4 12 4zm0-2c2.717 0 3.056.01 4.122.06 1.065.05 1.79.217 2.428.465.66.254 1.216.598 1.772 1.153a4.908 4.908 0 0 1 1.153 1.772c.247.637.415 1.363.465 2.428.047 1.066.06 1.405.06 4.122 0 2.717-.01 3.056-.06 4.122-.05 1.065-.218 1.79-.465 2.428a4.883 4.883 0 0 1-1.153 1.772 4.915 4.915 0 0 1-1.772 1.153c-.637.247-1.363.415-2.428.465-1.066.047-1.405.06-4.122.06-2.717 0-3.056-.01-4.122-.06-1.065-.05-1.79-.218-2.428-.465a4.89 4.89 0 0 1-1.772-1.153 4.904 4.904 0 0 1-1.153-1.772c-.248-.637-.415-1.363-.465-2.428C2.013 15.056 2 14.717 2 12c0-2.717.01-3.056.06-4.122.05-1.066.217-1.79.465-2.428a4.88 4.88 0 0 1 1.153-1.772A4.897 4.897 0 0 1 5.45 2.525c.638-.248 1.362-.415 2.428-.465C8.944 2.013 9.283 2 12 2z"></path></svg>
<span class="display--hidden">
          Instagram
        </span>
      </a>
    </li><li>
      <a class="button--icon" href="https://www.youtube.com/@laphet.teaeat" target="_blank" rel="noopener" aria-describedby="a11y-external-message"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="26px" height="26px" class=""><path d="M19.606 6.995c-.076-.298-.292-.523-.539-.592C18.63 6.28 16.5 6 12 6s-6.628.28-7.069.403c-.244.068-.46.293-.537.592C4.285 7.419 4 9.196 4 12s.285 4.58.394 5.006c.076.297.292.522.538.59C5.372 17.72 7.5 18 12 18s6.629-.28 7.069-.403c.244-.068.46-.293.537-.592C19.715 16.581 20 14.8 20 12s-.285-4.58-.394-5.005zm1.937-.497C22 8.28 22 12 22 12s0 3.72-.457 5.502c-.254.985-.997 1.76-1.938 2.022C17.896 20 12 20 12 20s-5.893 0-7.605-.476c-.945-.266-1.687-1.04-1.938-2.022C2 15.72 2 12 2 12s0-3.72.457-5.502c.254-.985.997-1.76 1.938-2.022C6.107 4 12 4 12 4s5.896 0 7.605.476c.945.266 1.687 1.04 1.938 2.022zM10 15.5v-7l6 3.5-6 3.5z"></path></svg>
<span class="display--hidden">
          YouTube
        </span>
      </a>
    </li></ul>
</div><div class="site-footer__block--menu site-footer__block--align-left"><h2 class="site-footer__title space--mb--small">SUPPORT</h2><ul class="site-footer__menu-list list--unstyled" role="list"><li class="site-footer__menu-item"><a href="https://laphet.de/pages/faq-1" class="site-footer__menu-link link--no-underline">
                          FAQ
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/pages/kontakt-support" class="site-footer__menu-link link--no-underline">
                          Kontakt
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/pages/sendungsverfolgung" class="site-footer__menu-link link--no-underline">
                          Sendungsverfolgung
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/pages/payment-shipping" class="site-footer__menu-link link--no-underline">
                          Versand und Zahlung
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/policies/legal-notice" class="site-footer__menu-link link--no-underline">
                          Impressum
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/policies/terms-of-service" class="site-footer__menu-link link--no-underline">
                          AGB
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/policies/privacy-policy" class="site-footer__menu-link link--no-underline">
                          Datenschutzerklärung
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/policies/refund-policy" class="site-footer__menu-link link--no-underline">
                          Widerrufsbelehrung
                        </a></li></ul></div><div class="site-footer__block--menu site-footer__block--align-left"><h2 class="site-footer__title space--mb--small">LAPHET</h2><ul class="site-footer__menu-list list--unstyled" role="list"><li class="site-footer__menu-item"><a href="https://laphet.de/pages/about-us" class="site-footer__menu-link link--no-underline">
                          Über uns
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/pages/storefinder" class="site-footer__menu-link link--no-underline">
                          Store Finder
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/collections/teepesto" class="site-footer__menu-link link--no-underline">
                          Teepesto
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/collections/knusper-mix-topping" class="site-footer__menu-link link--no-underline">
                          Topping
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/collections/loserbiotee" class="site-footer__menu-link link--no-underline">
                          Bio Tee
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/apps/gbb/easybundle/1?page=addProductsPage1&amp;currentFlow=byob" class="site-footer__menu-link link--no-underline">
                          Erstelle dein Bündel
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/blogs/rezepte" class="site-footer__menu-link link--no-underline">
                          Rezepte
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/blogs/laphet-blog" class="site-footer__menu-link link--no-underline">
                          Blogs
                        </a></li><li class="site-footer__menu-item"><a href="https://laphet.de/pages/sustainability" class="site-footer__menu-link link--no-underline">
                          Nachhaltigkeit
                        </a></li></ul></div><div class="site-footer__block--newsletter container--form-max-width align--text-right align--text-center--large-down align--block-center--large-down align--block-right"><h2 class="site-footer__title space--mb--small">NEWSLETTER</h2><div class="rte space--mb--small line-height--copy">
                  <p>Bleib in Verbindung mit den neuesten Teetrends, exklusiven Angeboten und Neuigkeiten! Wir freuen uns, dich als Teil unserer Community zu haben! 🍃</p>
                </div>
<form method="post" action="https://laphet.de/contact#Contact-sections--22932443955535__footer" id="Contact-sections--22932443955535__footer" accept-charset="UTF-8" class="newsletter-form container--form-max-width "><input type="hidden" name="form_type" value="customer"><input type="hidden" name="utf8" value="✓"><div class="newsletter-form__input-wrapper">
    <label class="display--hidden" for="NewsletterForm--sections--22932443955535__footer">
      E-Mail
    </label>
    <input type="hidden" name="contact[tags]" value="newsletter">
    <input id="NewsletterForm--sections--22932443955535__footer" type="email" name="contact[email]" class="newsletter-form__input" value="" aria-required="true" autocorrect="off" autocapitalize="off" autocomplete="email" placeholder="E-Mail-Adresse eingeben" required="">
    <button type="submit" name="commit" id="Subscribe-sections--22932443955535__footer" class="button--icon newsletter-form__button" aria-label="Abonnieren"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="24" height="24" class="newsletter-form__icon"><path d="M3 3h18a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm17 4.238l-7.928 7.1L4 7.216V19h16V7.238zM4.511 5l7.55 6.662L19.502 5H4.511z"></path></svg>
</button>
  </div></form><div class="footer_badge">
                
                <img loading="lazy" src="./Laphet_files/22cm_512_x_512px_650_x_650px_650_x_650px_800_x_650px_3_300x100.png">
                
                
                <img loading="lazy" src="./Laphet_files/22cm_512_x_512px_650_x_650px_650_x_650px_800_x_650px_300x100.png">
                
                
                <img loading="lazy" src="./Laphet_files/V-Logo_300x100.png">
                
                
                
              </div>
            </div></div><div class="space--pv--medium">
    <div class="site-footer__bottom-bar space--viewport-sides"><div>
            <span class="display--hidden">
              Zahlungsmethoden
            </span>
            <ul class="list--unstyled" role="list"><li class="display--inline-block space--ml--small">
                  <svg class="icon icon--full-color" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="pi-american_express" viewBox="0 0 38 24" width="38" height="24"><title id="pi-american_express">American Express</title><path fill="#000" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3Z" opacity=".07"></path><path fill="#006FCF" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32Z"></path><path fill="#FFF" d="M22.012 19.936v-8.421L37 11.528v2.326l-1.732 1.852L37 17.573v2.375h-2.766l-1.47-1.622-1.46 1.628-9.292-.02Z"></path><path fill="#006FCF" d="M23.013 19.012v-6.57h5.572v1.513h-3.768v1.028h3.678v1.488h-3.678v1.01h3.768v1.531h-5.572Z"></path><path fill="#006FCF" d="m28.557 19.012 3.083-3.289-3.083-3.282h2.386l1.884 2.083 1.89-2.082H37v.051l-3.017 3.23L37 18.92v.093h-2.307l-1.917-2.103-1.898 2.104h-2.321Z"></path><path fill="#FFF" d="M22.71 4.04h3.614l1.269 2.881V4.04h4.46l.77 2.159.771-2.159H37v8.421H19l3.71-8.421Z"></path><path fill="#006FCF" d="m23.395 4.955-2.916 6.566h2l.55-1.315h2.98l.55 1.315h2.05l-2.904-6.566h-2.31Zm.25 3.777.875-2.09.873 2.09h-1.748Z"></path><path fill="#006FCF" d="M28.581 11.52V4.953l2.811.01L32.84 9l1.456-4.046H37v6.565l-1.74.016v-4.51l-1.644 4.494h-1.59L30.35 7.01v4.51h-1.768Z"></path></svg>

                </li><li class="display--inline-block space--ml--small">
                  <svg class="icon icon--full-color" version="1.1" xmlns="http://www.w3.org/2000/svg" role="img" x="0" y="0" width="38" height="24" viewBox="0 0 165.521 105.965" xml:space="preserve" aria-labelledby="pi-apple_pay"><title id="pi-apple_pay">Apple Pay</title><path fill="#000" d="M150.698 0H14.823c-.566 0-1.133 0-1.698.003-.477.004-.953.009-1.43.022-1.039.028-2.087.09-3.113.274a10.51 10.51 0 0 0-2.958.975 9.932 9.932 0 0 0-4.35 4.35 10.463 10.463 0 0 0-.975 2.96C.113 9.611.052 10.658.024 11.696a70.22 70.22 0 0 0-.022 1.43C0 13.69 0 14.256 0 14.823v76.318c0 .567 0 1.132.002 1.699.003.476.009.953.022 1.43.028 1.036.09 2.084.275 3.11a10.46 10.46 0 0 0 .974 2.96 9.897 9.897 0 0 0 1.83 2.52 9.874 9.874 0 0 0 2.52 1.83c.947.483 1.917.79 2.96.977 1.025.183 2.073.245 3.112.273.477.011.953.017 1.43.02.565.004 1.132.004 1.698.004h135.875c.565 0 1.132 0 1.697-.004.476-.002.952-.009 1.431-.02 1.037-.028 2.085-.09 3.113-.273a10.478 10.478 0 0 0 2.958-.977 9.955 9.955 0 0 0 4.35-4.35c.483-.947.789-1.917.974-2.96.186-1.026.246-2.074.274-3.11.013-.477.02-.954.022-1.43.004-.567.004-1.132.004-1.699V14.824c0-.567 0-1.133-.004-1.699a63.067 63.067 0 0 0-.022-1.429c-.028-1.038-.088-2.085-.274-3.112a10.4 10.4 0 0 0-.974-2.96 9.94 9.94 0 0 0-4.35-4.35A10.52 10.52 0 0 0 156.939.3c-1.028-.185-2.076-.246-3.113-.274a71.417 71.417 0 0 0-1.431-.022C151.83 0 151.263 0 150.698 0z"></path><path fill="#FFF" d="M150.698 3.532l1.672.003c.452.003.905.008 1.36.02.793.022 1.719.065 2.583.22.75.135 1.38.34 1.984.648a6.392 6.392 0 0 1 2.804 2.807c.306.6.51 1.226.645 1.983.154.854.197 1.783.218 2.58.013.45.019.9.02 1.36.005.557.005 1.113.005 1.671v76.318c0 .558 0 1.114-.004 1.682-.002.45-.008.9-.02 1.35-.022.796-.065 1.725-.221 2.589a6.855 6.855 0 0 1-.645 1.975 6.397 6.397 0 0 1-2.808 2.807c-.6.306-1.228.511-1.971.645-.881.157-1.847.2-2.574.22-.457.01-.912.017-1.379.019-.555.004-1.113.004-1.669.004H14.801c-.55 0-1.1 0-1.66-.004a74.993 74.993 0 0 1-1.35-.018c-.744-.02-1.71-.064-2.584-.22a6.938 6.938 0 0 1-1.986-.65 6.337 6.337 0 0 1-1.622-1.18 6.355 6.355 0 0 1-1.178-1.623 6.935 6.935 0 0 1-.646-1.985c-.156-.863-.2-1.788-.22-2.578a66.088 66.088 0 0 1-.02-1.355l-.003-1.327V14.474l.002-1.325a66.7 66.7 0 0 1 .02-1.357c.022-.792.065-1.717.222-2.587a6.924 6.924 0 0 1 .646-1.981c.304-.598.7-1.144 1.18-1.623a6.386 6.386 0 0 1 1.624-1.18 6.96 6.96 0 0 1 1.98-.646c.865-.155 1.792-.198 2.586-.22.452-.012.905-.017 1.354-.02l1.677-.003h135.875"></path><g><g><path fill="#000" d="M43.508 35.77c1.404-1.755 2.356-4.112 2.105-6.52-2.054.102-4.56 1.355-6.012 3.112-1.303 1.504-2.456 3.959-2.156 6.266 2.306.2 4.61-1.152 6.063-2.858"></path><path fill="#000" d="M45.587 39.079c-3.35-.2-6.196 1.9-7.795 1.9-1.6 0-4.049-1.8-6.698-1.751-3.447.05-6.645 2-8.395 5.1-3.598 6.2-.95 15.4 2.55 20.45 1.699 2.5 3.747 5.25 6.445 5.151 2.55-.1 3.549-1.65 6.647-1.65 3.097 0 3.997 1.65 6.696 1.6 2.798-.05 4.548-2.5 6.247-5 1.95-2.85 2.747-5.6 2.797-5.75-.05-.05-5.396-2.101-5.446-8.251-.05-5.15 4.198-7.6 4.398-7.751-2.399-3.548-6.147-3.948-7.447-4.048"></path></g><g><path fill="#000" d="M78.973 32.11c7.278 0 12.347 5.017 12.347 12.321 0 7.33-5.173 12.373-12.529 12.373h-8.058V69.62h-5.822V32.11h14.062zm-8.24 19.807h6.68c5.07 0 7.954-2.729 7.954-7.46 0-4.73-2.885-7.434-7.928-7.434h-6.706v14.894z"></path><path fill="#000" d="M92.764 61.847c0-4.809 3.665-7.564 10.423-7.98l7.252-.442v-2.08c0-3.04-2.001-4.704-5.562-4.704-2.938 0-5.07 1.507-5.51 3.82h-5.252c.157-4.86 4.731-8.395 10.918-8.395 6.654 0 10.995 3.483 10.995 8.89v18.663h-5.38v-4.497h-.13c-1.534 2.937-4.914 4.782-8.579 4.782-5.406 0-9.175-3.222-9.175-8.057zm17.675-2.417v-2.106l-6.472.416c-3.64.234-5.536 1.585-5.536 3.95 0 2.288 1.975 3.77 5.068 3.77 3.95 0 6.94-2.522 6.94-6.03z"></path><path fill="#000" d="M120.975 79.652v-4.496c.364.051 1.247.103 1.715.103 2.573 0 4.029-1.09 4.913-3.899l.52-1.663-9.852-27.293h6.082l6.863 22.146h.13l6.862-22.146h5.927l-10.216 28.67c-2.34 6.577-5.017 8.735-10.683 8.735-.442 0-1.872-.052-2.261-.157z"></path></g></g></svg>

                </li><li class="display--inline-block space--ml--small">
                  <svg class="icon icon--full-color" xmlns="http://www.w3.org/2000/svg" role="img" viewBox="0 0 38 24" width="38" height="24" aria-labelledby="pi-google_pay"><title id="pi-google_pay">Google Pay</title><path d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z" fill="#000" opacity=".07"></path><path d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32" fill="#FFF"></path><path d="M18.093 11.976v3.2h-1.018v-7.9h2.691a2.447 2.447 0 0 1 1.747.692 2.28 2.28 0 0 1 .11 3.224l-.11.116c-.47.447-1.098.69-1.747.674l-1.673-.006zm0-3.732v2.788h1.698c.377.012.741-.135 1.005-.404a1.391 1.391 0 0 0-1.005-2.354l-1.698-.03zm6.484 1.348c.65-.03 1.286.188 1.778.613.445.43.682 1.03.65 1.649v3.334h-.969v-.766h-.049a1.93 1.93 0 0 1-1.673.931 2.17 2.17 0 0 1-1.496-.533 1.667 1.667 0 0 1-.613-1.324 1.606 1.606 0 0 1 .613-1.336 2.746 2.746 0 0 1 1.698-.515c.517-.02 1.03.093 1.49.331v-.208a1.134 1.134 0 0 0-.417-.901 1.416 1.416 0 0 0-.98-.368 1.545 1.545 0 0 0-1.319.717l-.895-.564a2.488 2.488 0 0 1 2.182-1.06zM23.29 13.52a.79.79 0 0 0 .337.662c.223.176.5.269.785.263.429-.001.84-.17 1.146-.472.305-.286.478-.685.478-1.103a2.047 2.047 0 0 0-1.324-.374 1.716 1.716 0 0 0-1.03.294.883.883 0 0 0-.392.73zm9.286-3.75l-3.39 7.79h-1.048l1.281-2.728-2.224-5.062h1.103l1.612 3.885 1.569-3.885h1.097z" fill="#5F6368"></path><path d="M13.986 11.284c0-.308-.024-.616-.073-.92h-4.29v1.747h2.451a2.096 2.096 0 0 1-.9 1.373v1.134h1.464a4.433 4.433 0 0 0 1.348-3.334z" fill="#4285F4"></path><path d="M9.629 15.721a4.352 4.352 0 0 0 3.01-1.097l-1.466-1.14a2.752 2.752 0 0 1-4.094-1.44H5.577v1.17a4.53 4.53 0 0 0 4.052 2.507z" fill="#34A853"></path><path d="M7.079 12.05a2.709 2.709 0 0 1 0-1.735v-1.17H5.577a4.505 4.505 0 0 0 0 4.075l1.502-1.17z" fill="#FBBC04"></path><path d="M9.629 8.44a2.452 2.452 0 0 1 1.74.68l1.3-1.293a4.37 4.37 0 0 0-3.065-1.183 4.53 4.53 0 0 0-4.027 2.5l1.502 1.171a2.715 2.715 0 0 1 2.55-1.875z" fill="#EA4335"></path></svg>

                </li><li class="display--inline-block space--ml--small">
                  <svg class="icon icon--full-color" xmlns="http://www.w3.org/2000/svg" role="img" width="38" height="24" viewBox="0 0 38 24" aria-labelledby="pi-klarna"><title id="pi-klarna">Klarna</title><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z" fill="#FFB3C7"></path><path d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32" fill="#FFB3C7"></path><path d="M34.117 13.184c-.487 0-.882.4-.882.892 0 .493.395.893.882.893.488 0 .883-.4.883-.893a.888.888 0 00-.883-.892zm-2.903-.69c0-.676-.57-1.223-1.274-1.223-.704 0-1.274.547-1.274 1.222 0 .675.57 1.223 1.274 1.223.704 0 1.274-.548 1.274-1.223zm.005-2.376h1.406v4.75h-1.406v-.303a2.446 2.446 0 01-1.394.435c-1.369 0-2.478-1.122-2.478-2.507 0-1.384 1.11-2.506 2.478-2.506.517 0 .996.16 1.394.435v-.304zm-11.253.619v-.619h-1.44v4.75h1.443v-2.217c0-.749.802-1.15 1.359-1.15h.016v-1.382c-.57 0-1.096.247-1.378.618zm-3.586 1.756c0-.675-.57-1.222-1.274-1.222-.703 0-1.274.547-1.274 1.222 0 .675.57 1.223 1.274 1.223.704 0 1.274-.548 1.274-1.223zm.005-2.375h1.406v4.75h-1.406v-.303A2.446 2.446 0 0114.99 15c-1.368 0-2.478-1.122-2.478-2.507 0-1.384 1.11-2.506 2.478-2.506.517 0 .997.16 1.394.435v-.304zm8.463-.128c-.561 0-1.093.177-1.448.663v-.535H22v4.75h1.417v-2.496c0-.722.479-1.076 1.055-1.076.618 0 .973.374.973 1.066v2.507h1.405v-3.021c0-1.106-.87-1.858-2.002-1.858zM10.465 14.87h1.472V8h-1.472v6.868zM4 14.87h1.558V8H4v6.87zM9.45 8a5.497 5.497 0 01-1.593 3.9l2.154 2.97H8.086l-2.341-3.228.604-.458A3.96 3.96 0 007.926 8H9.45z" fill="#0A0B09" fill-rule="nonzero"></path></g></svg>
                </li><li class="display--inline-block space--ml--small">
                  <svg class="icon icon--full-color" viewBox="0 0 38 24" xmlns="http://www.w3.org/2000/svg" width="38" height="24" role="img" aria-labelledby="pi-maestro"><title id="pi-maestro">Maestro</title><path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"></path><path fill="#fff" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"></path><circle fill="#EB001B" cx="15" cy="12" r="7"></circle><circle fill="#00A2E5" cx="23" cy="12" r="7"></circle><path fill="#7375CF" d="M22 12c0-2.4-1.2-4.5-3-5.7-1.8 1.3-3 3.4-3 5.7s1.2 4.5 3 5.7c1.8-1.2 3-3.3 3-5.7z"></path></svg>
                </li><li class="display--inline-block space--ml--small">
                  <svg class="icon icon--full-color" viewBox="0 0 38 24" xmlns="http://www.w3.org/2000/svg" role="img" width="38" height="24" aria-labelledby="pi-master"><title id="pi-master">Mastercard</title><path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"></path><path fill="#fff" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"></path><circle fill="#EB001B" cx="15" cy="12" r="7"></circle><circle fill="#F79E1B" cx="23" cy="12" r="7"></circle><path fill="#FF5F00" d="M22 12c0-2.4-1.2-4.5-3-5.7-1.8 1.3-3 3.4-3 5.7s1.2 4.5 3 5.7c1.8-1.2 3-3.3 3-5.7z"></path></svg>
                </li><li class="display--inline-block space--ml--small">
                  <svg class="icon icon--full-color" viewBox="0 0 38 24" xmlns="http://www.w3.org/2000/svg" width="38" height="24" role="img" aria-labelledby="pi-paypal"><title id="pi-paypal">PayPal</title><path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"></path><path fill="#fff" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"></path><path fill="#003087" d="M23.9 8.3c.2-1 0-1.7-.6-2.3-.6-.7-1.7-1-3.1-1h-4.1c-.3 0-.5.2-.6.5L14 15.6c0 .2.1.4.3.4H17l.4-3.4 1.8-2.2 4.7-2.1z"></path><path fill="#3086C8" d="M23.9 8.3l-.2.2c-.5 2.8-2.2 3.8-4.6 3.8H18c-.3 0-.5.2-.6.5l-.6 3.9-.2 1c0 .2.1.4.3.4H19c.3 0 .5-.2.5-.4v-.1l.4-2.4v-.1c0-.2.3-.4.5-.4h.3c2.1 0 3.7-.8 4.1-3.2.2-1 .1-1.8-.4-2.4-.1-.5-.3-.7-.5-.8z"></path><path fill="#012169" d="M23.3 8.1c-.1-.1-.2-.1-.3-.1-.1 0-.2 0-.3-.1-.3-.1-.7-.1-1.1-.1h-3c-.1 0-.2 0-.2.1-.2.1-.3.2-.3.4l-.7 4.4v.1c0-.3.3-.5.6-.5h1.3c2.5 0 4.1-1 4.6-3.8v-.2c-.1-.1-.3-.2-.5-.2h-.1z"></path></svg>
                </li><li class="display--inline-block space--ml--small">
                  <svg class="icon icon--full-color" xmlns="http://www.w3.org/2000/svg" role="img" viewBox="0 0 38 24" width="38" height="24" aria-labelledby="pi-shopify_pay"><title id="pi-shopify_pay">Shop Pay</title><path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z" fill="#000"></path><path d="M35.889 0C37.05 0 38 .982 38 2.182v19.636c0 1.2-.95 2.182-2.111 2.182H2.11C.95 24 0 23.018 0 21.818V2.182C0 .982.95 0 2.111 0H35.89z" fill="#5A31F4"></path><path d="M9.35 11.368c-1.017-.223-1.47-.31-1.47-.705 0-.372.306-.558.92-.558.54 0 .934.238 1.225.704a.079.079 0 00.104.03l1.146-.584a.082.082 0 00.032-.114c-.475-.831-1.353-1.286-2.51-1.286-1.52 0-2.464.755-2.464 1.956 0 1.275 1.15 1.597 2.17 1.82 1.02.222 1.474.31 1.474.705 0 .396-.332.582-.993.582-.612 0-1.065-.282-1.34-.83a.08.08 0 00-.107-.035l-1.143.57a.083.083 0 00-.036.111c.454.92 1.384 1.437 2.627 1.437 1.583 0 2.539-.742 2.539-1.98s-1.155-1.598-2.173-1.82v-.003zM15.49 8.855c-.65 0-1.224.232-1.636.646a.04.04 0 01-.069-.03v-2.64a.08.08 0 00-.08-.081H12.27a.08.08 0 00-.08.082v8.194a.08.08 0 00.08.082h1.433a.08.08 0 00.081-.082v-3.594c0-.695.528-1.227 1.239-1.227.71 0 1.226.521 1.226 1.227v3.594a.08.08 0 00.081.082h1.433a.08.08 0 00.081-.082v-3.594c0-1.51-.981-2.577-2.355-2.577zM20.753 8.62c-.778 0-1.507.24-2.03.588a.082.082 0 00-.027.109l.632 1.088a.08.08 0 00.11.03 2.5 2.5 0 011.318-.366c1.25 0 2.17.891 2.17 2.068 0 1.003-.736 1.745-1.669 1.745-.76 0-1.288-.446-1.288-1.077 0-.361.152-.657.548-.866a.08.08 0 00.032-.113l-.596-1.018a.08.08 0 00-.098-.035c-.799.299-1.359 1.018-1.359 1.984 0 1.46 1.152 2.55 2.76 2.55 1.877 0 3.227-1.313 3.227-3.195 0-2.018-1.57-3.492-3.73-3.492zM28.675 8.843c-.724 0-1.373.27-1.845.746-.026.027-.069.007-.069-.029v-.572a.08.08 0 00-.08-.082h-1.397a.08.08 0 00-.08.082v8.182a.08.08 0 00.08.081h1.433a.08.08 0 00.081-.081v-2.683c0-.036.043-.054.069-.03a2.6 2.6 0 001.808.7c1.682 0 2.993-1.373 2.993-3.157s-1.313-3.157-2.993-3.157zm-.271 4.929c-.956 0-1.681-.768-1.681-1.783s.723-1.783 1.681-1.783c.958 0 1.68.755 1.68 1.783 0 1.027-.713 1.783-1.681 1.783h.001z" fill="#fff"></path></svg>

                </li><li class="display--inline-block space--ml--small">
                  <svg class="icon icon--full-color" viewBox="-36 25 38 24" xmlns="http://www.w3.org/2000/svg" width="38" height="24" role="img" aria-labelledby="pi-unionpay"><title id="pi-unionpay">Union Pay</title><path fill="#005B9A" d="M-36 46.8v.7-.7zM-18.3 25v24h-7.2c-1.3 0-2.1-1-1.8-2.3l4.4-19.4c.3-1.3 1.9-2.3 3.2-2.3h1.4zm12.6 0c-1.3 0-2.9 1-3.2 2.3l-4.5 19.4c-.3 1.3.5 2.3 1.8 2.3h-4.9V25h10.8z"></path><path fill="#E9292D" d="M-19.7 25c-1.3 0-2.9 1.1-3.2 2.3l-4.4 19.4c-.3 1.3.5 2.3 1.8 2.3h-8.9c-.8 0-1.5-.6-1.5-1.4v-21c0-.8.7-1.6 1.5-1.6h14.7z"></path><path fill="#0E73B9" d="M-5.7 25c-1.3 0-2.9 1.1-3.2 2.3l-4.4 19.4c-.3 1.3.5 2.3 1.8 2.3H-26h.5c-1.3 0-2.1-1-1.8-2.3l4.4-19.4c.3-1.3 1.9-2.3 3.2-2.3h14z"></path><path fill="#059DA4" d="M2 26.6v21c0 .8-.6 1.4-1.5 1.4h-12.1c-1.3 0-2.1-1.1-1.8-2.3l4.5-19.4C-8.6 26-7 25-5.7 25H.5c.9 0 1.5.7 1.5 1.6z"></path><path fill="#fff" d="M-21.122 38.645h.14c.14 0 .28-.07.28-.14l.42-.63h1.19l-.21.35h1.4l-.21.63h-1.68c-.21.28-.42.42-.7.42h-.84l.21-.63m-.21.91h3.01l-.21.7h-1.19l-.21.7h1.19l-.21.7h-1.19l-.28 1.05c-.07.14 0 .28.28.21h.98l-.21.7h-1.89c-.35 0-.49-.21-.35-.63l.35-1.33h-.77l.21-.7h.77l.21-.7h-.7l.21-.7zm4.83-1.75v.42s.56-.42 1.12-.42h1.96l-.77 2.66c-.07.28-.35.49-.77.49h-2.24l-.49 1.89c0 .07 0 .14.14.14h.42l-.14.56h-1.12c-.42 0-.56-.14-.49-.35l1.47-5.39h.91zm1.68.77h-1.75l-.21.7s.28-.21.77-.21h1.05l.14-.49zm-.63 1.68c.14 0 .21 0 .21-.14l.14-.35h-1.75l-.14.56 1.54-.07zm-1.19.84h.98v.42h.28c.14 0 .21-.07.21-.14l.07-.28h.84l-.14.49c-.07.35-.35.49-.77.56h-.56v.77c0 .14.07.21.35.21h.49l-.14.56h-1.19c-.35 0-.49-.14-.49-.49l.07-2.1zm4.2-2.45l.21-.84h1.19l-.07.28s.56-.28 1.05-.28h1.47l-.21.84h-.21l-1.12 3.85h.21l-.21.77h-.21l-.07.35h-1.19l.07-.35h-2.17l.21-.77h.21l1.12-3.85h-.28m1.26 0l-.28 1.05s.49-.21.91-.28c.07-.35.21-.77.21-.77h-.84zm-.49 1.54l-.28 1.12s.56-.28.98-.28c.14-.42.21-.77.21-.77l-.91-.07zm.21 2.31l.21-.77h-.84l-.21.77h.84zm2.87-4.69h1.12l.07.42c0 .07.07.14.21.14h.21l-.21.7h-.77c-.28 0-.49-.07-.49-.35l-.14-.91zm-.35 1.47h3.57l-.21.77h-1.19l-.21.7h1.12l-.21.77h-1.26l-.28.42h.63l.14.84c0 .07.07.14.21.14h.21l-.21.7h-.7c-.35 0-.56-.07-.56-.35l-.14-.77-.56.84c-.14.21-.35.35-.63.35h-1.05l.21-.7h.35c.14 0 .21-.07.35-.21l.84-1.26h-1.05l.21-.77h1.19l.21-.7h-1.19l.21-.77zm-19.74-5.04c-.14.7-.42 1.19-.91 1.54-.49.35-1.12.56-1.89.56-.7 0-1.26-.21-1.54-.56-.21-.28-.35-.56-.35-.98 0-.14 0-.35.07-.56l.84-3.92h1.19l-.77 3.92v.28c0 .21.07.35.14.49.14.21.35.28.7.28s.7-.07.91-.28c.21-.21.42-.42.49-.77l.77-3.92h1.19l-.84 3.92m1.12-1.54h.84l-.07.49.14-.14c.28-.28.63-.42 1.05-.42.35 0 .63.14.77.35.14.21.21.49.14.91l-.49 2.38h-.91l.42-2.17c.07-.28.07-.49 0-.56-.07-.14-.21-.14-.35-.14-.21 0-.42.07-.56.21-.14.14-.28.35-.28.63l-.42 2.03h-.91l.63-3.57m9.8 0h.84l-.07.49.14-.14c.28-.28.63-.42 1.05-.42.35 0 .63.14.77.35s.21.49.14.91l-.49 2.38h-.91l.42-2.24c.07-.21 0-.42-.07-.49-.07-.14-.21-.14-.35-.14-.21 0-.42.07-.56.21-.14.14-.28.35-.28.63l-.42 2.03h-.91l.7-3.57m-5.81 0h.98l-.77 3.5h-.98l.77-3.5m.35-1.33h.98l-.21.84h-.98l.21-.84zm1.4 4.55c-.21-.21-.35-.56-.35-.98v-.21c0-.07 0-.21.07-.28.14-.56.35-1.05.7-1.33.35-.35.84-.49 1.33-.49.42 0 .77.14 1.05.35.21.21.35.56.35.98v.21c0 .07 0 .21-.07.28-.14.56-.35.98-.7 1.33-.35.35-.84.49-1.33.49-.35 0-.7-.14-1.05-.35m1.89-.7c.14-.21.28-.49.35-.84v-.35c0-.21-.07-.35-.14-.49a.635.635 0 0 0-.49-.21c-.28 0-.49.07-.63.28-.14.21-.28.49-.35.84v.28c0 .21.07.35.14.49.14.14.28.21.49.21.28.07.42 0 .63-.21m6.51-4.69h2.52c.49 0 .84.14 1.12.35.28.21.35.56.35.91v.28c0 .07 0 .21-.07.28-.07.49-.35.98-.7 1.26-.42.35-.84.49-1.4.49h-1.4l-.42 2.03h-1.19l1.19-5.6m.56 2.59h1.12c.28 0 .49-.07.7-.21.14-.14.28-.35.35-.63v-.28c0-.21-.07-.35-.21-.42-.14-.07-.35-.14-.7-.14h-.91l-.35 1.68zm8.68 3.71c-.35.77-.7 1.26-.91 1.47-.21.21-.63.7-1.61.7l.07-.63c.84-.28 1.26-1.4 1.54-1.96l-.28-3.78h1.19l.07 2.38.91-2.31h1.05l-2.03 4.13m-2.94-3.85l-.42.28c-.42-.35-.84-.56-1.54-.21-.98.49-1.89 4.13.91 2.94l.14.21h1.12l.7-3.29-.91.07m-.56 1.82c-.21.56-.56.84-.91.77-.28-.14-.35-.63-.21-1.19.21-.56.56-.84.91-.77.28.14.35.63.21 1.19"></path></svg>
                </li><li class="display--inline-block space--ml--small">
                  <svg class="icon icon--full-color" viewBox="0 0 38 24" xmlns="http://www.w3.org/2000/svg" role="img" width="38" height="24" aria-labelledby="pi-visa"><title id="pi-visa">Visa</title><path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"></path><path fill="#fff" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"></path><path d="M28.3 10.1H28c-.4 1-.7 1.5-1 3h1.9c-.3-1.5-.3-2.2-.6-3zm2.9 5.9h-1.7c-.1 0-.1 0-.2-.1l-.2-.9-.1-.2h-2.4c-.1 0-.2 0-.2.2l-.3.9c0 .1-.1.1-.1.1h-2.1l.2-.5L27 8.7c0-.5.3-.7.8-.7h1.5c.1 0 .2 0 .2.2l1.4 6.5c.1.4.2.7.2 1.1.1.1.1.1.1.2zm-13.4-.3l.4-1.8c.1 0 .2.1.2.1.7.3 1.4.5 2.1.4.2 0 .5-.1.7-.2.5-.2.5-.7.1-1.1-.2-.2-.5-.3-.8-.5-.4-.2-.8-.4-1.1-.7-1.2-1-.8-2.4-.1-3.1.6-.4.9-.8 1.7-.8 1.2 0 2.5 0 3.1.2h.1c-.1.6-.2 1.1-.4 1.7-.5-.2-1-.4-1.5-.4-.3 0-.6 0-.9.1-.2 0-.3.1-.4.2-.2.2-.2.5 0 .7l.5.4c.4.2.8.4 1.1.6.5.3 1 .8 1.1 1.4.2.9-.1 1.7-.9 2.3-.5.4-.7.6-1.4.6-1.4 0-2.5.1-3.4-.2-.1.2-.1.2-.2.1zm-3.5.3c.1-.7.1-.7.2-1 .5-2.2 1-4.5 1.4-6.7.1-.2.1-.3.3-.3H18c-.2 1.2-.4 2.1-.7 3.2-.3 1.5-.6 3-1 4.5 0 .2-.1.2-.3.2M5 8.2c0-.1.2-.2.3-.2h3.4c.5 0 .9.3 1 .8l.9 4.4c0 .1 0 .1.1.2 0-.1.1-.1.1-.1l2.1-5.1c-.1-.1 0-.2.1-.2h2.1c0 .1 0 .1-.1.2l-3.1 7.3c-.1.2-.1.3-.2.4-.1.1-.3 0-.5 0H9.7c-.1 0-.2 0-.2-.2L7.9 9.5c-.2-.2-.5-.5-.9-.6-.6-.3-1.7-.5-1.9-.5L5 8.2z" fill="#142688"></path></svg>
                </li></ul>
          </div><div>
          <small>
            © 2025, <a class="link--no-underline" href="https://laphet.de/">Laphet</a>.
          </small>
          <small>
            Made with ❤️ in Berlin
          </small>
        </div></div>
  </div>
</div>




</footer>
<!-- END sections: footer-group -->
    </div>

    <!-- BEGIN sections: overlay-group -->

<!-- END sections: overlay-group -->


<cart-notification>
  <div class="container--page cart-notification__wrapper">
    <div id="cart-notification" class="cart-notification color--bg-default" aria-label="" role="dialog" aria-labelledby="CartNotificationTitle" tabindex="-1" hidden="">
      <header class="flex flex--justify-end">
        <button data-modal-close="" class="button--icon" aria-label="Schließen"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24" width="30px" height="30px" class=""><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path></svg>
</button>
      </header>
      <div id="cart-notification-product"></div>
    </div>
  </div>
</cart-notification>
<svg height="0" width="0">
  <defs>
    <clippath id="solid-center-pinch-bottom" clipPathUnits="objectBoundingBox">
      <path d="M0,0.25 S0,0.583,0.23,0.583 C0.5,0.583,0.5,1,0.5,1 S0.5,0.583,0.77,0.5 C1,0.426,1,0.167,1,0.167 V0 H0">
    </path></clippath>
    <clippath id="solid-waves-angle-top-up" clipPathUnits="objectBoundingBox">
      <path d="m0,1 s0,-0.035,0.006,-0.086 c0.008,-0.078,0.025,-0.175,0.038,-0.223 c0.018,-0.064,0.037,-0.083,0.055,-0.056 c0.024,0.035,0.067,0.16,0.112,0.059 c0.042,-0.095,0.065,-0.204,0.111,-0.246 c0,0,0,0,0,0 c0.028,-0.026,0.059,0.025,0.114,0.067 c0,0,0.018,0.025,0.041,-0.012 c0.018,-0.028,0.039,-0.099,0.061,-0.201 c0,0,0.033,-0.139,0.071,-0.17 c0.028,-0.023,0.054,0.036,0.098,0.136 c0,0,0.103,0.269,0.172,-0.116 C0.905,0.008,0.938,-0.011,0.964,0.005 c0,0,0,0,0,0 c0.002,0.002,0.026,0.027,0.035,0.077 v0.917">
    </path></clippath>
    <clippath id="solid-waves-angle-top-down" clipPathUnits="objectBoundingBox">
      <path d="m1,1 s0,-0.035,-0.006,-0.086 c-0.008,-0.078,-0.025,-0.175,-0.038,-0.223 c-0.018,-0.064,-0.037,-0.083,-0.055,-0.056 c-0.024,0.035,-0.067,0.16,-0.112,0.059 c-0.042,-0.095,-0.065,-0.204,-0.111,-0.246 c0,0,0,0,0,0 c-0.028,-0.026,-0.058,0.025,-0.114,0.067 c0,0,-0.018,0.025,-0.041,-0.012 c-0.018,-0.028,-0.039,-0.099,-0.061,-0.201 c0,0,-0.033,-0.139,-0.071,-0.17 c-0.028,-0.023,-0.053,0.036,-0.098,0.136 c0,0,-0.103,0.269,-0.172,-0.116 C0.095,0.008,0.062,-0.011,0.036,0.005 c0,0,0,0,0,0 c-0.002,0.002,-0.026,0.027,-0.035,0.077 v0.917">
    </path></clippath>
    <clippath id="solid-even-waves-top-1" clipPathUnits="objectBoundingBox">
      <path d="M1,1 V0.909 S0.77,0,0.61,0 S0.32,0.455,0.2,0.455 A0.407,3,0,0,1,0,0 V1"></path>
    </clippath>
    <clippath id="solid-even-waves-top-1-reverse" clipPathUnits="objectBoundingBox">
      <path d="M0,1 V0.909 S0.23,0,0.39,0 S0.68,0.455,0.8,0.455 C0.92,0.455,1,0,1,0 V1"></path>
    </clippath>
    <clippath id="solid-uneven-waves-top-1" clipPathUnits="objectBoundingBox">
      <path d="M0.84,0.317 C0.755,0.027,0.745,0.044,0.71,0.011 c-0.11,-0.102,-0.17,0.51,-0.28,0.51 C0.36,0.521,0.35,0.011,0.28,0.011 s-0.07,0.714,-0.13,0.408 C0.052,-0.081,0.004,0.119,0,0.215 v0.785 H1 V0.387 c-0.06,-0.478,-0.04,0.338,-0.16,-0.07">
    </path></clippath>
    <clippath id="solid-uneven-waves-top-1-reverse" clipPathUnits="objectBoundingBox">
      <path d="M0.16,0.317 C0.245,0.027,0.255,0.044,0.29,0.011 c0.11,-0.102,0.17,0.51,0.28,0.51 c0.07,0,0.08,-0.51,0.15,-0.51 s0.07,0.714,0.13,0.408 c0.098,-0.501,0.146,-0.301,0.15,-0.204 v0.785 H0 V0.387 C0.06,-0.09,0.04,0.725,0.16,0.317">
    </path></clippath>
    <clippath id="solid-waves-angle-bottom-down" clipPathUnits="objectBoundingBox">
      <path d="m0,0 s0,0.035,0.005,0.086 c0.008,0.078,0.025,0.174,0.038,0.223 c0.018,0.064,0.037,0.083,0.055,0.056 c0.024,-0.035,0.067,-0.16,0.112,-0.059 c0.042,0.094,0.065,0.203,0.111,0.246 c0,0,0,0,0,0 c0.028,0.026,0.058,-0.025,0.114,-0.067 c0,0,0.018,-0.025,0.041,0.012 c0.018,0.028,0.039,0.099,0.061,0.201 c0,0,0.033,0.139,0.071,0.17 c0.028,0.023,0.053,-0.036,0.098,-0.136 c0,0,0.103,-0.269,0.172,0.116 c0.026,0.144,0.058,0.164,0.085,0.148 c0,0,0,0,0,0 c0.002,-0.002,0.026,-0.027,0.035,-0.077 V0">
    </path></clippath>
    <clippath id="solid-waves-angle-bottom-up" clipPathUnits="objectBoundingBox">
      <path d="m1,0 s0,0.035,-0.005,0.086 c-0.008,0.078,-0.025,0.174,-0.038,0.223 c-0.018,0.064,-0.037,0.083,-0.055,0.056 c-0.024,-0.035,-0.067,-0.16,-0.112,-0.059 c-0.042,0.094,-0.065,0.203,-0.111,0.246 c0,0,0,0,0,0 c-0.028,0.026,-0.058,-0.025,-0.114,-0.067 c0,0,-0.018,-0.025,-0.041,0.012 c-0.018,0.028,-0.039,0.099,-0.061,0.201 c0,0,-0.033,0.139,-0.071,0.17 c-0.028,0.023,-0.053,-0.036,-0.098,-0.136 c0,0,-0.103,-0.269,-0.172,0.116 c-0.026,0.144,-0.058,0.164,-0.085,0.148 c0,0,0,0,0,0 c-0.002,-0.002,-0.026,-0.027,-0.035,-0.077 V0"></path>
    </clippath>
    <clippath id="solid-even-waves-bottom-1" clipPathUnits="objectBoundingBox">
      <path d="M1,1 S0.77,0.091,0.61,0.091 S0.32,0.545,0.2,0.545 A0.407,3,0,0,1,0,0.091 V0 H1"></path>
    </clippath>
    <clippath id="solid-even-waves-bottom-1-reverse" clipPathUnits="objectBoundingBox">
      <path d="M0,1 S0.23,0.091,0.39,0.091 S0.68,0.545,0.8,0.545 C0.92,0.545,1,0.091,1,0.091 V0 H0 V1"></path>
    </clippath>
    <clippath id="solid-uneven-waves-bottom-1" clipPathUnits="objectBoundingBox">
      <path d="M0.84,0.683 c-0.085,0.29,-0.095,0.274,-0.13,0.306 c-0.11,0.102,-0.17,-0.51,-0.28,-0.51 c-0.07,0,-0.08,0.51,-0.15,0.51 c-0.067,0,-0.07,-0.714,-0.13,-0.408 C0.052,1,0.004,0.881,0,0.785 V0 H1 V0.613 c-0.06,0.478,-0.04,-0.338,-0.16,0.07"></path>
    </clippath>
    <clippath id="solid-uneven-waves-bottom-1-reverse" clipPathUnits="objectBoundingBox">
      <path d="M0.16,0.683 c0.085,0.29,0.095,0.274,0.13,0.306 c0.11,0.102,0.17,-0.51,0.28,-0.51 c0.07,0,0.08,0.51,0.15,0.51 c0.067,0,0.07,-0.714,0.13,-0.408 c0.098,0.501,0.146,0.301,0.15,0.204 V0 H0 V0.613 c0.06,0.478,0.04,-0.338,0.16,0.07"></path>
    </clippath>
    <clippath id="waves-angle-top-up" clipPathUnits="objectBoundingBox">
      <path d="M0.044,0.076 c0.018,-0.007,0.037,-0.009,0.055,-0.006 c0.024,0.004,0.067,0.018,0.112,0.007 c0.042,-0.01,0.065,-0.022,0.111,-0.027 h0 c0.028,-0.003,0.059,0.003,0.114,0.007 c0,0,0.018,0.003,0.041,-0.001 c0.018,-0.003,0.039,-0.011,0.061,-0.022 c0,0,0.033,-0.015,0.071,-0.019 c0.028,-0.003,0.054,0.004,0.098,0.015 c0,0,0.103,0.03,0.172,-0.013 C0.905,0.001,0.938,-0.001,0.964,0.001 h0 c0.002,0,0.026,0.003,0.035,0.009 V1 H0 V0.108 c0,-0.003,0,-0.001,0.006,-0.007 c0.008,-0.009,0.025,-0.019,0.038,-0.025">
    </path></clippath>
    <clippath id="waves-angle-top-down" clipPathUnits="objectBoundingBox">
      <path d="M0.956,0.076 c-0.018,-0.007,-0.037,-0.009,-0.055,-0.006 c-0.024,0.004,-0.067,0.018,-0.112,0.007 c-0.042,-0.01,-0.065,-0.022,-0.111,-0.027 h0 c-0.028,-0.003,-0.058,0.003,-0.114,0.007 c0,0,-0.018,0.003,-0.041,-0.001 c-0.018,-0.003,-0.039,-0.011,-0.061,-0.022 c0,0,-0.033,-0.015,-0.071,-0.019 c-0.028,-0.003,-0.053,0.004,-0.098,0.015 c0,0,-0.103,0.03,-0.172,-0.013 C0.095,0.001,0.062,-0.001,0.036,0.001 h0 c-0.002,0,-0.026,0.003,-0.035,0.009 V1 H1 V0.108 c0,-0.003,0,-0.001,-0.006,-0.007 c-0.008,-0.009,-0.025,-0.019,-0.038,-0.025">
    </path></clippath>
    <clippath id="even-waves-top-1" clipPathUnits="objectBoundingBox">
      <path d="M0.61,0 C0.45,0,0.32,0.05,0.2,0.05 A0.407,0.407,0,0,1,0,0 V1 H1 V0.1 S0.77,0,0.61,0"></path>
    </clippath>
    <clippath id="even-waves-top-1-reverse" clipPathUnits="objectBoundingBox">
      <path d="M0.39,0 C0.55,0,0.68,0.05,0.8,0.05 C0.92,0.05,1,0,1,0 V1 H0 V0.1 S0.23,0,0.39,0"></path>
    </clippath>
    <clippath id="uneven-waves-top-1" clipPathUnits="objectBoundingBox">
      <path d="M0.84,0.032 C0.755,0.003,0.745,0.004,0.71,0.001 c-0.11,-0.01,-0.17,0.052,-0.28,0.052 c-0.07,0,-0.08,-0.052,-0.15,-0.052 c-0.067,0,-0.07,0.072,-0.13,0.041 C0.052,-0.008,0.004,0.012,0,0.022 V1 H1 V0.039 c-0.06,-0.048,-0.04,0.034,-0.16,-0.007">
    </path></clippath>
    <clippath id="uneven-waves-top-1-reverse" clipPathUnits="objectBoundingBox">
      <path d="M0.16,0.032 C0.245,0.003,0.255,0.004,0.29,0.001 c0.11,-0.01,0.17,0.052,0.28,0.052 c0.07,0,0.08,-0.052,0.15,-0.052 c0.067,0,0.07,0.072,0.13,0.041 c0.098,-0.051,0.146,-0.03,0.15,-0.021 V1 H0 V0.039 C0.06,-0.009,0.04,0.073,0.16,0.032">
    </path></clippath>
    <clippath id="waves-angle-bottom-down" clipPathUnits="objectBoundingBox">
      <path d="M0.044,0.924 c0.018,0.007,0.037,0.009,0.055,0.006 c0.024,-0.004,0.067,-0.018,0.112,-0.006 c0.042,0.01,0.065,0.022,0.111,0.027 h0 c0.028,0.003,0.058,-0.003,0.114,-0.007 c0,0,0.018,-0.003,0.041,0.001 c0.018,0.003,0.039,0.011,0.061,0.022 c0,0,0.033,0.015,0.071,0.019 c0.028,0.002,0.053,-0.004,0.098,-0.015 c0,0,0.103,-0.03,0.172,0.013 c0.026,0.016,0.058,0.018,0.085,0.016 h0 c0.002,0,0.026,-0.003,0.035,-0.009 V0 H0 V0.892 c0,0.003,0,0.001,0.005,0.007 c0.008,0.009,0.025,0.019,0.038,0.024">
    </path></clippath>
    <clippath id="waves-angle-bottom-up" clipPathUnits="objectBoundingBox">
      <path d="M0.956,0.924 c-0.018,0.007,-0.037,0.009,-0.055,0.006 c-0.024,-0.004,-0.067,-0.018,-0.112,-0.006 c-0.042,0.01,-0.065,0.022,-0.111,0.027 h0 c-0.028,0.003,-0.058,-0.003,-0.114,-0.007 c0,0,-0.018,-0.003,-0.041,0.001 c-0.018,0.003,-0.039,0.011,-0.061,0.022 c0,0,-0.033,0.015,-0.071,0.019 c-0.028,0.002,-0.053,-0.004,-0.098,-0.015 c0,0,-0.103,-0.03,-0.172,0.013 c-0.026,0.016,-0.058,0.018,-0.085,0.016 h0 c-0.002,0,-0.026,-0.003,-0.035,-0.009 V0 H1 V0.892 c0,0.003,0,0.001,-0.005,0.007 c-0.008,0.009,-0.025,0.019,-0.038,0.024"></path>
    </clippath>
    <clippath id="center-pinch-bottom" clipPathUnits="objectBoundingBox">
      <path d="M0,0.91 s0,0.04,0.23,0.04 c0.27,0,0.27,0.05,0.27,0.05 s0,-0.05,0.27,-0.06 c0.24,-0.009,0.23,-0.04,0.23,-0.04 V0 H0">
    </path></clippath>
    <clippath id="even-waves-bottom-1" clipPathUnits="objectBoundingBox">
      <path d="M1,1 S0.77,0.9,0.61,0.9 S0.32,0.95,0.2,0.95 A0.407,0.407,0,0,1,0,0.9 V0 H1"></path>
    </clippath>
    <clippath id="even-waves-bottom-1-reverse" clipPathUnits="objectBoundingBox">
      <path d="M0,1 s0.23,-0.1,0.39,-0.1 c0.16,0,0.29,0.05,0.41,0.05 c0.12,0,0.2,-0.05,0.2,-0.05 V0 H0 V1"></path>
    </clippath>
    <clippath id="uneven-waves-bottom-1" clipPathUnits="objectBoundingBox">
      <path d="M0.84,0.968 c-0.085,0.029,-0.095,0.028,-0.13,0.031 c-0.11,0.01,-0.17,-0.052,-0.28,-0.052 c-0.07,0,-0.08,0.052,-0.15,0.052 c-0.067,0,-0.07,-0.072,-0.13,-0.041 c-0.098,0.051,-0.146,0.03,-0.15,0.021 V0 H1 V0.961 c-0.06,0.048,-0.04,-0.034,-0.16,0.007"></path>
    </clippath>
    <clippath id="uneven-waves-bottom-1-reverse" clipPathUnits="objectBoundingBox">
      <path d="M0.16,0.968 c0.085,0.029,0.095,0.028,0.13,0.031 c0.11,0.01,0.17,-0.052,0.28,-0.052 c0.07,0,0.08,0.052,0.15,0.052 c0.067,0,0.07,-0.072,0.13,-0.041 c0.098,0.051,0.146,0.03,0.15,0.021 V0 H0 V0.961 c0.06,0.048,0.04,-0.034,0.16,0.007"></path>
    </clippath>
    <clippath id="arch-shape" clipPathUnits="objectBoundingBox">
      <path d="M1,0.503 v0.497 H0 V0.503 C0,0.225,0.224,0,0.5,0 s0.5,0.225,0.5,0.503">
    </path></clippath>
    <clippath id="half-arch-top-left" clipPathUnits="objectBoundingBox">
      <path d="M0,0.503 c0,0.132,0,0.497,0,0.497 H1 S1,0,1,0 c0,0,-0.224,0,-0.5,0 C0.224,0,0,0.225,0,0.503">
    </path></clippath>
    <clippath id="half-arch-top-right" clipPathUnits="objectBoundingBox">
      <path d="M1,0.503 v0.497 H0 V0 H0.5 c0.276,0,0.5,0.225,0.5,0.503">
    </path></clippath>
    <clippath id="half-arch-bottom-left" clipPathUnits="objectBoundingBox">
      <path d="M0,0.497 V0 H1 V1 H0.5 C0.224,1,0,0.775,0,0.497">
    </path></clippath>
    <clippath id="half-arch-bottom-right" clipPathUnits="objectBoundingBox">
      <path d="M0.497,1 H0 V0 H1 V0.5 c0,0.276,-0.225,0.5,-0.503,0.5">
    </path></clippath>
    <clippath id="rounded-triangle-up" clipPathUnits="objectBoundingBox">
      <path d="M0.543,0.028 l0.451,0.888 c0.019,0.037,-0.005,0.084,-0.043,0.084 H0.049 c-0.038,0,-0.061,-0.047,-0.043,-0.084 L0.458,0.028 c0.019,-0.037,0.066,-0.037,0.085,0">
    </path></clippath>
    <clippath id="rounded-triangle-down" clipPathUnits="objectBoundingBox">
      <path d="M0.543,0.972 L0.993,0.084 c0.019,-0.037,-0.005,-0.084,-0.043,-0.084 H0.049 C0.011,0,-0.012,0.047,0.007,0.084 L0.458,0.972 c0.019,0.037,0.066,0.037,0.085,0">
    </path></clippath>
    <clippath id="rounded-diamond" clipPathUnits="objectBoundingBox">
      <path d="M0.453,0.981 L0.019,0.547 c-0.026,-0.026,-0.026,-0.067,0,-0.093 L0.453,0.019 c0.026,-0.026,0.067,-0.026,0.093,0 l0.434,0.434 c0.026,0.026,0.026,0.067,0,0.093 l-0.434,0.434 c-0.026,0.026,-0.067,0.026,-0.093,0">
    </path></clippath>
    <clippath id="rounded-hexagon" clipPathUnits="objectBoundingBox">
      <path d="M0.98,0.579 c0.061,0.116,-0.025,0.252,-0.165,0.262 c-0.061,0.004,-0.116,0.033,-0.15,0.079 c-0.079,0.106,-0.251,0.106,-0.33,0 c-0.034,-0.046,-0.089,-0.075,-0.15,-0.079 c-0.14,-0.01,-0.226,-0.146,-0.165,-0.262 c0.026,-0.05,0.026,-0.108,0,-0.159 C-0.041,0.305,0.045,0.169,0.185,0.159 c0.061,-0.004,0.116,-0.033,0.15,-0.079 c0.079,-0.106,0.251,-0.106,0.33,0 c0.034,0.046,0.089,0.075,0.15,0.079 c0.14,0.01,0.226,0.146,0.165,0.262 c-0.026,0.05,-0.026,0.108,0,0.159">
    </path></clippath>
    <clippath id="waves-angle-right" clipPathUnits="objectBoundingBox">
      <path d="M0.995,0 s0.038,0.164,-0.103,0.25 c-0.164,0.1,-0.166,0.215,-0.092,0.35 c0.092,0.17,-0.041,0.24,-0.133,0.29 c-0.115,0.062,-0.082,0.11,-0.082,0.11 H0 V0 S0.999,0,0.995,0">
    </path></clippath>
    <clippath id="waves-angle-left" clipPathUnits="objectBoundingBox">
      <path d="M0.005,1 s-0.038,-0.164,0.103,-0.25 c0.164,-0.1,0.166,-0.215,0.092,-0.35 c-0.092,-0.17,0.041,-0.24,0.133,-0.29 C0.448,0.048,0.415,0,0.415,0 h0.585 V1 s-0.999,0,-0.995,0">
    </path></clippath>
  </defs>
</svg>
<div class="page-layout__overlay"></div>
    <ul hidden="">
      <li id="a11y-refresh-page-message">
        Ao escolher uma seleção, a página inteira é atualizada.
      </li>
    </ul>

    <script src="./Laphet_files/product-form.js.download" defer="defer"></script>
    <script src="./Laphet_files/cart.js.download" defer="defer"></script>
    <script src="./Laphet_files/search-form.js.download" defer="defer"></script>
    <script src="./Laphet_files/button-tabs.js.download" defer="defer"></script>
    <script src="./Laphet_files/details-disclosure.js.download" defer="defer"></script>
    <script src="./Laphet_files/details-modal.js.download" defer="defer"></script>
    <script src="./Laphet_files/cart-notification.js.download" defer="defer"></script><script src="./Laphet_files/cart-drawer.js.download" defer="defer"></script><script src="./Laphet_files/predictive-search.js.download" defer="defer"></script><script>
      window.shopUrl = 'https://laphet.de';
      window.routes = {
        cart_add_url: '/cart/add',
        cart_change_url: '/cart/change',
        cart_update_url: '/cart/update',
        predictive_search_url: '/search/suggest'
      };

      window.cartStrings = {
        error: `Beim Aktualisieren Ihres Warenkorbs ist ein Fehler aufgetreten. Bitte versuche es erneut.`,
        quantityError: `Sie können nur {{ quantity }} dieses Artikels in Ihren Warenkorb legen.`,
      };

      window.variantStrings = {
        addToCart: `In den Warenkorb legen`,
        soldOut: `Bald verfügbar`,
        unavailable: `Nicht verfügbar`,
      };

      window.accessibilityStrings = {
        imageAvailable: `Bild [index] ist nun in der Galerieansicht verfügbar`,
      };

      window.themeSettings = {
        cart_type: 'slide_out_drawer',
        template_name: ''
      };

      
    </script>

    
  <script async="" src="./Laphet_files/loox.1682202239152.js.download"></script>
  <script type="text/javascript">
	</script>
    <script src="./Laphet_files/moment.min.js.download"></script><script async="" src="./Laphet_files/pop-notification.js.download"></script>
<script src="./Laphet_files/moment-with-locales.min.js.download"></script><div tabindex="-1" aria-hidden="true" id="web-pixels-manager-sandbox-container" data-shopify-privacy="exclude" style="height: 0px !important; width: 0px !important; position: fixed !important; visibility: hidden !important; overflow: hidden !important; z-index: -100 !important; margin: 0px !important; padding: 0px !important; border: 0px !important;"><iframe tabindex="-1" aria-hidden="true" name="web-pixel-sandbox-CUSTOM-shopify-custom-pixel-LAX-bb202aaewd7fabeadp1286c7ffm6c4f3798" src="./Laphet_files/1.html" id="web-pixel-sandbox-CUSTOM-shopify-custom-pixel-LAX-bb202aaewd7fabeadp1286c7ffm6c4f3798" sandbox="allow-scripts allow-forms" style="height: 0px !important; width: 0px !important; visibility: hidden !important;"></iframe></div>

<script type="text/javascript">

    var existingScript = document.getElementById('smartbPopper');
  	if (!existingScript) {

		var countrysmartb = 'smartbadgecountry';
        var smartbcountryName = '';

        setTimeout(function(){ 
            checksmartbjquery();
        }, 1000);

  	}

    function getCountryCodesb() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
        var countryData = JSON.parse(xhttp.responseText);
        getCountryNamesb(countryData.country);
        }
        };
        xhttp.open("GET", "https://loc2.thapi.workers.dev/?key=", true);
        xhttp.send();

        }

        function getCountryNamesb(countryCode) {
         var country_data = "AF,Afghanistan|AL,Albania|DZ,Algeria|AD,Andorra|AO,Angola|AI,Anguilla|AQ,Antarctica|AG,Antigua and Barbuda|AR,Argentina|AM,Armenia|AW,Aruba|AU,Australia|AT,Austria|AZ,Azerbaijan|BS,Bahamas|BH,Bahrain|BD,Bangladesh|BB,Barbados|BY,Belarus|BE,Belgium|BZ,Belize|BJ,Benin|BM,Bermuda|BT,Bhutan|BO,Bolivia|BQ,Bonaire,Sint Eustatius and Saba|BA,Bosnia and Herzegovina|BW,Botswana|BV,Bouvet Island|BR,Brazil|IO,British Indian Ocean Territory|BN,Brunei Darussalam|BG,Bulgaria|BF,Burkina Faso|BI,Burundi|CV,Cabo Verde|KH,Cambodia|CM,Cameroon|CA,Canada|KY,Cayman Islands|CF,Central African Republic|TD,Chad|CL,Chile|CN,China|CX,Christmas Island|CC,Cocos (Keeling) Islands|CO,Colombia|KM,Comoros|CG,Congo|CD,Congo,Democratic Republic of the|CK,Cook Islands|CR,Costa Rica|CI,Côte d'Ivoire|HR,Croatia|CU,Cuba|CW,Curaçao|CY,Cyprus|CZ,Czech Republic|DK,Denmark|DJ,Djibouti|DM,Dominica|DO,Dominican Republic|EC,Ecuador|EG,Egypt|SV,El Salvador|GQ,Equatorial Guinea|ER,Eritrea|EE,Estonia|SZ,Eswatini|ET,Ethiopia|FK,Falkland Islands (Malvinas)|FO,Faroe Islands|FJ,Fiji|FI,Finland|FR,France|GF,French Guiana|PF,French Polynesia|TF,French Southern Territories|GA,Gabon|GM,Gambia|GE,Georgia|DE,Germany|GH,Ghana|GI,Gibraltar|GR,Greece|GL,Greenland|GD,Grenada|GP,Guadeloupe|GU,Guam|GT,Guatemala|GG,Guernsey|GN,Guinea|GW,Guinea-Bissau|GY,Guyana|HT,Haiti|HM,Heard Island and McDonald Islands|VA,Holy See|HN,Honduras|HK,Hong Kong|HU,Hungary|IS,Iceland|IN,India|ID,Indonesia|IR,Iran|IQ,Iraq|IE,Ireland|IM,Isle of Man|IL,Israel|IT,Italy|JM,Jamaica|JP,Japan|JE,Jersey|JO,Jordan|KZ,Kazakhstan|KE,Kenya|KI,Kiribati|KP,Korea|KR,Korea|KW,Kuwait|KG,Kyrgyzstan|LA,Lao People's Democratic Republic|LV,Latvia|LB,Lebanon|LS,Lesotho|LR,Liberia|LY,Libya|LI,Liechtenstein|LT,Lithuania|LU,Luxembourg|MO,Macao|MG,Madagascar|MW,Malawi|MY,Malaysia|MV,Maldives|ML,Mali|MT,Malta|MH,Marshall Islands|MQ,Martinique|MR,Mauritania|MU,Mauritius|YT,Mayotte|MX,Mexico|FM,Micronesia|MD,Moldova|MC,Monaco|MN,Mongolia|ME,Montenegro|MS,Montserrat|MA,Morocco|MZ,Mozambique|MM,Myanmar|NA,Namibia|NR,Nauru|NP,Nepal|NL,Netherlands|NC,New Caledonia|NZ,New Zealand|NI,Nicaragua|NE,Niger|NG,Nigeria|NU,Niue|NF,Norfolk Island|MK,North Macedonia|MP, Northern Mariana Islands|NO,Norway|OM,Oman|PK,Pakistan|PW,Palau|PS,Palestine|PA,Panama|PG,Papua New Guinea|PY,Paraguay|PE,Peru|PH,Philippines|PN,Pitcairn|PL,Poland|PT,Portugal|PR,Puerto Rico|QA,Qatar|RE,Réunion|RO,Romania|RU,Russian Federation|RW,Rwanda|BL,Saint Barthélemy|SH,Saint Helena|KN,Saint Kitts and Nevis|LC,Saint Lucia|MF,Saint Martin (French part)|PM,Saint Pierre and Miquelon|VC,Saint Vincent and the Grenadines|WS,Samoa|SM,San Marino|ST,Sao Tome and Principe|SA,Saudi Arabia|SN,Senegal|RS,Serbia|SC,Seychelles|SL,Sierra Leone|SG,Singapore|SX,Sint Maarten (Dutch part)|SK,Slovakia|SI,Slovenia|SB,Solomon Islands|SO,Somalia|ZA,South Africa|GS,South Georgia and the South Sandwich Islands|SS,South Sudan|ES,Spain|LK,Sri Lanka|SD,Sudan|SR,Suriname|SJ,Svalbard and Jan Mayen|SE,Sweden|CH,Switzerland|SY,Syrian Arab Republic|TW,Taiwan|TJ,Tajikistan|TZ,Tanzania|TH,Thailand|TL,Timor-Leste|TG,Togo|TK,Tokelau|TO,Tonga|TT,Trinidad and Tobago|TN,Tunisia|TR,Turkey|TM,Turkmenistan|TC,Turks and Caicos Islands|TV,Tuvalu|UG,Uganda|UA,Ukraine|AE,United Arab Emirates|GB,United Kingdom|US,United States|UM,United States Minor Outlying Islands|UY,Uruguay|UZ,Uzbekistan|VU,Vanuatu|VE,Venezuela|VN,Viet Nam|VG,Virgin Islands|VI,Virgin Islands|WF,Wallis and Futuna|EH,Western Sahara|YE,Yemen|ZM,Zambia|ZW,Zimbabwe";
            var countries = country_data.split("|");
            for (var i = 0; i < countries.length; i++) {
            var country = countries[i].split(",");
            var countryCodedata = country[0];
            var Visitorcountry = country[1];
            if(countryCode== countryCodedata)
            {
               var VisitorCountryName=Visitorcountry;
            }
            }
            var visitorclass = document.getElementsByClassName('smartbVisitorCountry');
                for (var i = 0; i < visitorclass.length; i++) {
                var issetvisitorcountryrule = visitorclass[i].getAttribute('visitorcountryrule');  
                var secondChild = visitorclass[i].querySelector('div:nth-child(1)');
                var thirdChild = secondChild.querySelector('div:nth-child(1)'); 
                if( issetvisitorcountryrule == '1'){
                // $('.primebVisitorCountryName').replaceWith(VisitorCountryName);
                // visitorclass[i].style.display= 'block';
                var elements = document.querySelectorAll('.smartbVisitorCountryName');
                elements.forEach(function(element) {
                element.textContent = VisitorCountryName;
                });
                }
                }
        }


    function checksmartbjquery() {
        if (window.jQuery) {
            checkSmartVariantInventory("","first");
            
            $(document).on("change", ".single-option-selector", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".single-option-selector").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("change", ".ProductForm__Option select", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".ProductForm__Option select").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("click", ".tt-options-swatch li", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".tt-options-swatch li").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("click", ".swatch-element", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".swatch-element").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("change", ".form__input--select", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".form__input--select").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("change", ".sgl-opt-selector-product-template", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".sgl-opt-selector-product-template").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("click", ".tt-options-swatch li", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".tt-options-swatch li").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("change", ".product-option-value-item", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".product-option-value-item").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("click", ".clickyboxes a", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".clickyboxes a").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("change", "[data-product-options-container] .form-field-input", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $("[data-product-options-container] .form-field-input").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("change", "#data-product-option-0", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $("#data-product-option-0").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("click", ".product-options__section .active", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".product-options__section .active").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("click", ".product-options__value", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".product-options__value").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("click", ".variant-input", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".variant-input").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("change", ".product-form__single-selector", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".product-form__single-selector").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("click", ".gt_swatches--select.gf_active", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".gt_swatches--select.gf_active").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("click", ".nt-swatch", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".nt-swatch").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("change", ".disclosure--input", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".disclosure--input").each(function(key) {
                        optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("click", ".product-form__input input", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                $(".product-form__input input[type=radio]:checked").each(function(key) {
                    optionMap[key] = $(this).val();
                });
                checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("click", ".swatch-container input", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".swatch-container input[type=radio]:checked").each(function(key) {
                    optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

            $(document).on("click", ".swatch--gl input", function() {
                var optionMap = [];
                if(optionMap.length == 0){
                    $(".swatch--gl input[type=radio]:checked").each(function(key) {
                    optionMap[key] = $(this).val();
                    });
                    checkSmartVariantInventory(optionMap);
                }
            });

        }else{
            setTimeout(function() { checksmartbjquery() }, 2000);
        }
    }

    window.addEventListener('load', (event) => {
        smartbCountdownTimer();
        resizeFunction();
        getCountryCodesb();
        
        document.getElementById("smart-modal-close").onclick = function() {mymodalsmartb()};
        window.onclick = function(event) {
            if (event.target.classList[1] == 'smart-modal-open') {
                mymodalsmartb();
            }
        }
    });

    // Function to be invoked when the element becomes visible
        function handleVisibleElement(entries, observer) {
        entries.forEach((entry) => {
        if (entry.isIntersecting) {
        // Element is visible, perform desired actions here
        // Call your function here
        smartbCountdownTimer();
        getCountryCodesb(); 
        // Stop observing the target element
        observer.unobserve(entry.target);
        }
        });
        }

        // Target element with the class 'product-recommendations'
        const targetElement = document.querySelector('.product-recommendations');      

        if(targetElement)
            {
            // Create a new Intersection Observer instance
            const observer = new IntersectionObserver(
            (entries) => {
            // Use a debounce function to limit the number of function invocations
            debounce(handleVisibleElement, 100)(entries, observer);
            },
            {
            root: null, // Viewport
            threshold: 0.5, // 50% of the element must be visible to trigger the callback
            }
            );
        observer.observe(targetElement);
        }

        // Debounce function to limit the rate of function invocations
        function debounce(func, delay) {
        let timeoutId;
        return function (...args) {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(() => {
        func.apply(this, args);
        }, delay);
        };
        }


    function smartbCountdownTimer() {

        screensizesmartFunction();
        
        var smartbText2 = document.getElementsByClassName('smartbText');
        if(smartbText2[0]){
            for (var i = 0; i < smartbText2.length; i++) {
                var value = smartbText2[i].innerHTML;
                if( value.indexOf("[[today") != -1  ){
                    expdeliverydatesmart(value,i);
                }
            }
            
        }

        var smartbText = document.getElementsByClassName('smartbText');
        if(smartbText[0]){
            for (var i = 0; i < smartbText.length; i++) {
                var value = smartbText[i].innerHTML;
                if( value.indexOf("CountdownTimer:") != -1  ){
                    myTimer2(value,i);
                }
            }
            
        } 

        var smartbsku = '';
        var skuclass = document.getElementsByClassName('smartbsku');
        if(smartbsku == 0){
            for (var i = 0; i < skuclass.length; i++) {
                if(skuclass[i].dataset.sku == 0){
                    var parentsku = skuclass[i].parentElement;
                    var parent2sku = parentsku.parentElement;
                    parent2sku.style.cssText = 'display:none !important';
                }
            }
        }

        setTimeout(function(){ 
            var smartinstances2 = tippy('[data-tippy-content]');
        }, 1000);

        if(countrysmartb == 'smartbadgecountry'){
            countrysmartb = 'newsmartbadgecountry';
            var countrycount = document.getElementsByClassName('smartbCountry');
            if (countrycount.length > 0) {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                
                    if (xhttp.readyState == 4 && xhttp.status == 200) {
                        var mycountryold = xhttp.responseText;
                        mycountryold = mycountryold.replace("{\n", "");
                        mycountryold = mycountryold.replace("\n}", "");
                        var newvar = mycountryold.split(",");
                        var setcountry = newvar[0].slice(14);
                        var mycountrysmartb = setcountry.replace('"', "");

                        var countryclassSmartb = document.getElementsByClassName('smartbCountry');
                
                        for (var i = 0; i < countryclassSmartb.length; i++) {
                            var counrtylistb = countryclassSmartb[i].getAttribute('data-countryselected');
                            var position = counrtylistb.search(mycountrysmartb);
                            smartbcountryName = mycountrysmartb;
                            if(position < 0){ 
                                countryclassSmartb[i].style.cssText = 'display:none !important';
                                
                            }else{
                                countryclassSmartb[i].style.display= 'block';
                                countryclassSmartb[i].setAttribute('countryrule', '1');

                                if (countryclassSmartb[i].classList.contains('smartbScreenSize')) {
                                    var screenlist = countryclassSmartb[i].getAttribute('data-screensizeselected');
                                    var screensizeArray = screenlist.split(",");
                                    var smdevice = window.matchMedia( "screen and (max-width: 767.98px)" );
                                    var mddevice = window.matchMedia( "screen and (min-width: 768px) and (max-width: 991.98px)" );
                                    var lgdevice = window.matchMedia( "screen and (min-width: 992px) and (max-width: 1199.98px)" );
                                    var xldevice = window.matchMedia( "(min-width: 1200px)" );

                                    if (smdevice.matches ){
                                        if(screensizeArray[0] == '1'){
                                        }else{
                                            countryclassSmartb[i].style.setProperty("display", "none", "important");
                                        }
                                    }else if( mddevice.matches){
                                        if(screensizeArray[1] == '1'){
                                        }else{
                                            countryclassSmartb[i].style.setProperty("display", "none", "important");
                                        }
                                    }else if(lgdevice.matches){
                                        if(screensizeArray[2] == '1'){
                                        }else{
                                            countryclassSmartb[i].style.setProperty("display", "none", "important");
                                        }
                                    }else{
                                        if(screensizeArray[3] == '1'){
                                        }else{
                                            countryclassSmartb[i].style.setProperty("display", "none", "important");
                                        }
                                    }

                                }

                            }
                        }
                    }
                };
                xhttp.open("GET", "https://loc2.thapi.workers.dev/?key=", true);
                // xhttp.open("GET", "https://geoloc.thapi.workers.dev/", true);
                xhttp.send();
            }
            
        }

        var mypage = '';
        var myproductid = '';
        for (var i = 0; i < 6; i++) {
            setTimeout(function(){ 
                smartsetlivevisit(mypage,myproductid);
            }, 500); 
        }

    }

    function expdeliverydatesmart(value,count) {
        var weekdays = '';
        var dateformatselected = '';
        var datelang = 'en';
        var smartbTextdate = document.getElementsByClassName('smartbText');
        var realvalue = value;
        var pos = realvalue.indexOf("[[today");
        var pos2 = realvalue.indexOf("]]");
        var startres = realvalue.slice(pos+8, pos2);
        realvalue = realvalue.replace("[[today,", "" );
        realvalue = realvalue.replace("]]", "" );
        var pos3 = realvalue.indexOf("[[today");
        var pos4 = realvalue.indexOf("]]");
        var endres = realvalue.slice(pos3+8, pos4);
        realvalue = realvalue.replace("[[today,", "" );
        realvalue = realvalue.replace("]]", "" );
        var getlang = startres.split(",");
        var wrongdays = weekdays.split(",");
        var startDate = new Date(new Date().getTime()+(parseInt(startres)*24*60*60*1000));
        var today = new Date(new Date().getTime());
        var firstinc=0;
        while (today <= startDate) {
            var getday = String(today.getDay());
            if(wrongdays.indexOf(getday) != -1){
            startDate.setDate(startDate.getDate() + 1);
            firstinc++;
            }
            today.setDate(today.getDate() + 1);
        }
        var setlang = 'en';
        if(getlang.length > 1){
            setlang = getlang[1];
        }
        moment.locale(setlang);
        value = value.replace("[[today,"+startres+"]]", moment(startDate).locale(setlang).format(dateformatselected));

        var extradays = firstinc+parseInt(endres);
        var endDate = new Date(new Date().getTime()+(extradays*24*60*60*1000));
        var todayend = startDate;
        var secinc=0;
        while (todayend <= endDate) {
            var getday = String(todayend.getDay());
            if(wrongdays.indexOf(getday) != -1){
            endDate.setDate(endDate.getDate() + 1);
            secinc++;
            }
            todayend.setDate(todayend.getDate() + 1);
        }
        value = value.replace("[[today,"+endres+"]]", moment(endDate).locale(setlang).format(dateformatselected));
        smartbTextdate[count].innerHTML = value;
        var getchild = smartbTextdate[count].getElementsByClassName('smart-counter');
        if(getchild[0]){
            getchild[0].classList.remove("smart-counter");
        }
    }

    function checkSmartVariantInventory(optionMap,myfirstone='') {
        var productname = '';  
        var variantproductid = '';   
        var mydomclass = document.getElementsByClassName('smartbVariantInventory');   
        if(mydomclass.length > 0){
            if(optionMap.length > 0){  
                var realval = '';
                if(myfirstone == "first"){
                    realval = optionMap;
                }else{
                    for(var i = 0; i < optionMap.length; i++){
                        var spaces = ' / ';
                        if(i == 0){
                            spaces = '';
                        }
                        realval += spaces+optionMap[i];
                    }
                }
                
                var smartBadgesAll = document.getElementsByClassName('smartBadges');
                for (var i = 0; i < smartBadgesAll.length; i++) {
                    var smartbOuterClass = smartBadgesAll[i].getAttribute('data-smartbOuterClass');
                    var smartbOuterStyle = smartBadgesAll[i].getAttribute('data-smartbOuterStyle');
                    var smartbInnerClass = smartBadgesAll[i].getAttribute('data-smartbInnerClass');
                    var smartbInnerStyle = smartBadgesAll[i].getAttribute('data-smartbInnerStyle');
                    var smartbGroup = smartBadgesAll[i].getAttribute('data-smartbGroup');
                    var smartbProductId = smartBadgesAll[i].getAttribute('data-smartproductsid');
                    if(smartbProductId == variantproductid){
                        hitsmartbpage(productname,variantproductid,smartbOuterClass,smartbOuterStyle,smartbInnerClass,smartbInnerStyle,smartbGroup,realval)
                    }
                }
            }
        }
        setTimeout(function(){ 
        getCountryCodesb();
        },500);
    }


    function hitsmartbpage(productname,variantproductid,smartbOuterClass,smartbOuterStyle,smartbInnerClass,smartbInnerStyle,smartbGroup,realval) {
        
        var result = Math.random().toString(36).substring(2,7);
        if(smartbGroup == 1){
			var urlhit = productname+'/?view=smartbvariant&sort_by='+result+'&outerclass=='+smartbOuterClass+'&outerstyle=='+smartbOuterStyle+'&innerclass=='+smartbInnerClass+'&innerstyle=='+smartbInnerStyle+'&group==1&page=='+realval;
        }else if(smartbGroup == 2){
			var urlhit = productname+'/?view=smartbvarianttwo&sort_by='+result+'&outerclass=='+smartbOuterClass+'&outerstyle=='+smartbOuterStyle+'&innerclass=='+smartbInnerClass+'&innerstyle=='+smartbInnerStyle+'&group==2&page=='+realval;
        }else{
            var urlhit = productname+'/?view=smartbvariantthree&sort_by='+result+'&outerclass=='+smartbOuterClass+'&outerstyle=='+smartbOuterStyle+'&innerclass=='+smartbInnerClass+'&innerstyle=='+smartbInnerStyle+'&group==3&page=='+realval;
        }
        var xhr = new XMLHttpRequest();
        xhr.open("GET", urlhit, true);
        xhr.onreadystatechange  = function() {
            if (this.readyState === XMLHttpRequest.DONE) {
                if (this.status === 200) {
                    if(this.responseText == 0){
                        $('.outersmartb'+variantproductid+'-'+smartbGroup+' .smartbText .smartbVariantInventory').html("0");
                        $('.outersmartb'+variantproductid+'-'+smartbGroup+' .smart-counter').removeClass("smart-counter");
                        $('.outersmartb'+variantproductid+'-'+smartbGroup+' .hidevariant').remove();
                    }else{
                        $('.outersmartb'+variantproductid+'-'+smartbGroup).replaceWith( this.responseText );
                        $('.outersmartb'+variantproductid+'-'+smartbGroup+' .smart-counter').removeClass("smart-counter");
                        var countryclass = document.getElementsByClassName('smartbCountry');
                        for (var i = 0; i < countryclass.length; i++) {
                            var counrtylist = countryclass[i].getAttribute('data-countryselected');
                            var position = counrtylist.search(smartbcountryName);
                            if(position < 0){ 
                                countryclass[i].style.cssText = 'display:none !important';
                            }else{
                                countryclass[i].style.display= 'block';
                            }
                        }
                        setTimeout(function(){ 
                            smartbCountdownTimer();
                        }, 500); 
                    }
                } else {
                    console.log('failed variant req');
                }
            }
        };
        xhr.send();

    }

    function smartsetlivevisit(mypage,myproductid) {
        setTimeout(function(){ 

            var settimelive = '';
            var setvisitlimit = '';

            var d = new Date();
            var time = setcookietimestampsmart(settimelive);
            var mytime = '';
            if(settimelive < 5){
                mytime = (time * 60 );
            }else if(settimelive > 4 && settimelive < 8){
                mytime =(time * 60 * 60 );
            }else if(settimelive > 7){
                mytime = (time * 24 * 60 * 60 );
            }

            var smartloop2 = document.getElementsByClassName('smartbloop');
            for (var i = 0; i < smartloop2.length; i++) {
                var smallloop2 = smartloop2[i].parentElement;
                var parentloop2 = smallloop2.getAttribute('data-smartproductid');
                var myuser = getCookiesmart("smartvisits"+parentloop2);
                if (myuser != "") {
                    myhttpreqsmart(parentloop2,0,mytime,setvisitlimit);
                } else {
                    myhttpreqsmart(parentloop2,1,mytime,setvisitlimit);
                    setCookiesmart("smartvisits"+parentloop2, 'setsmartvisits', settimelive);
                }

            }

            var smartloop = document.getElementsByClassName('smartbloop');
            for (var i = 0; i < smartloop.length; i++) {
                if(mypage == 'product'){
                    var smallloop = smartloop[i].parentElement;
                    var parentloop = smallloop.getAttribute('data-smartproductid');
                    if(parentloop == myproductid){
                        smartloop[i].classList.add("smartvisitsb"+parentloop);
                    }else{
                        var removeloop = smartloop[i].parentElement;
                        var removeloop2 = removeloop.parentElement;
                        var removeloop3 = removeloop2.parentElement;
                        removeloop3.style.visibility = 'hidden';
                        smartloop[i].classList.remove("smartbloop");
                    }
                }else{
                  var oldloop = smartloop[i].parentElement;
                  var newloop = oldloop.parentElement;
                  var newloop2 = newloop.parentElement;
                  newloop2.style.visibility = 'hidden';
                  smartloop[i].classList.remove("smartbloop");
                  newloop2.remove();
                }
            }

        }, 1000);
    }

    function myhttpreqsmart(lastid,mynew,gettime,setvisitlimit) {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                var pageliveview = JSON.parse(this.responseText);
                var smartvisits = document.getElementsByClassName("smartvisitsb"+lastid);
                for (var i = 0; i < smartvisits.length; i++) {
                    if(setvisitlimit < pageliveview.pageviews){
                        smartvisits[i].innerHTML = pageliveview.pageviews;
                        var removeloop = smartvisits[i].parentElement;
                        var removeloop2 = removeloop.parentElement;
                        var removeloop3 = removeloop2.parentElement;
                        removeloop3.style.visibility = 'visible';
                    }else{
                        var removeloop = smartvisits[i].parentElement;
                        var removeloop2 = removeloop.parentElement;
                        var removeloop3 = removeloop2.parentElement;
                        removeloop3.style.visibility = 'hidden';
                        smartvisits[i].classList.remove("smartbloop");
                    }
                        
                }
            }
        };
        xhttp.open("GET","https://visitcounterstaging.thalia-apps.com/?shopifyid="+lastid+"&new="+mynew+"&time="+gettime, true);
        xhttp.send();
    }

    

    function mymodalsmartb() {
      var target = document.getElementById("smart-modal-window");
      var parenttarget = target.parentElement;
      if (parenttarget.classList.contains('smart-modal-open')) {
        parenttarget.classList.remove('smart-modal-open');
        document.getElementById('smart-modal-content').innerHTML = '';
      }
    }

    window.addEventListener('resize', resizeFunction);

    window.addEventListener('resize', screensizesmartFunction);

    function resizeFunction() { 
        var fontadjust = document.getElementsByClassName('smart-font-adjust');
        var heightadjust = document.getElementsByClassName('smart-height-adjust');

        var xsdevice = window.matchMedia( "(max-width: 575.98px)" );
        var smdevice = window.matchMedia( "(max-width: 767.98px)" );
        var mddevice = window.matchMedia( "(max-width: 991.98px)" );
        var lgdevice = window.matchMedia( "(max-width: 1199.98px)" );
        var xldevice = window.matchMedia( "(min-width: 1200px)" );

        for (var i = 0; i < fontadjust.length; i++) {
            var mobilesize = '';
            var tabletsize = '';
            mobilesize = fontadjust[i].getAttribute('data-mobilesize');
            tabletsize = fontadjust[i].getAttribute('data-tabletsize');

            fontadjust[i].style.fontSize = 'inherit';

            if (xsdevice.matches || smdevice.matches ){
                if(mobilesize > 0){
                    fontadjust[i].style.fontSize = mobilesize+'px';

                }
            }else if(mddevice.matches){
                if(tabletsize > 0){
                    fontadjust[i].style.fontSize = tabletsize+'px';

                }
            }
        }
        var heightadjust = document.getElementsByClassName('smart-height-adjust');
        for (var i = 0; i < heightadjust.length; i++) {
            var image = heightadjust[i].getElementsByClassName("smartbImage");
            var mobileheight = '';
            var tabletheight = '';

            var defaultHeight = heightadjust[i].getAttribute('data-defaultheight');
            mobileheight = heightadjust[i].getAttribute('data-mobileheight');
            tabletheight = heightadjust[i].getAttribute('data-tabletheight');

            var imgsrcsvg = image[0].getAttribute("src");
            var present = imgsrcsvg.search("svg");
            if(present > 0){
                image[0].style.height = defaultHeight+'px';
                image[0].style.maxHeight = defaultHeight+'px';
                image[0].style.display = "block";
                if (xsdevice.matches || smdevice.matches ){
                    if(mobileheight > 0){
                        image[0].style.height = mobileheight+'px';
                        image[0].style.maxHeight = mobileheight+'px';
                        image[0].style.display = "block";
                    }
                }else if(mddevice.matches){
                    if(tabletheight > 0){
                        image[0].style.height = tabletheight+'px';
                        image[0].style.maxHeight = tabletheight+'px';
                        image[0].style.display = "block";
                    }
                }

            }else{
                image[0].style.maxHeight = defaultHeight+'px';
                image[0].style.display = "block";
                if (xsdevice.matches || smdevice.matches ){
                    if(mobileheight > 0){
                        image[0].style.maxHeight = mobileheight+'px';
                        image[0].style.display = "block";
                    }
                }else if(mddevice.matches){
                    if(tabletheight > 0){
                        image[0].style.maxHeight = tabletheight+'px';
                        image[0].style.display = "block";
                        
                    }
                }
            }
        }

    } 

    function screensizesmartFunction() { 
        var screensizeclass = document.getElementsByClassName('smartbScreenSize');
        for (var i = 0; i < screensizeclass.length; i++) {

            var issetcountryrule = screensizeclass[i].getAttribute('countryrule');

            if( issetcountryrule == '1'){
            
                var screenlist = screensizeclass[i].getAttribute('data-screensizeselected');
                var screensizeArray = screenlist.split(",");
                
                var smdevice = window.matchMedia( "screen and (max-width: 767.98px)" );
                var mddevice = window.matchMedia( "screen and (min-width: 768px) and (max-width: 991.98px)" );
                var lgdevice = window.matchMedia( "screen and (min-width: 992px) and (max-width: 1199.98px)" );
                var xldevice = window.matchMedia( "(min-width: 1200px)" );

                if (smdevice.matches ){
                    if(screensizeArray[0] == '1'){
                        screensizeclass[i].style.display= 'block';
                    }else{
                        screensizeclass[i].style.setProperty("display", "none", "important");
                    }
                }else if( mddevice.matches){
                    if(screensizeArray[1] == '1'){
                        screensizeclass[i].style.display= 'block';
                    }else{
                        screensizeclass[i].style.setProperty("display", "none", "important");
                    }
                }else if(lgdevice.matches){
                    if(screensizeArray[2] == '1'){
                        screensizeclass[i].style.display= 'block';
                    }else{
                        screensizeclass[i].style.setProperty("display", "none", "important");
                    }
                }else{
                    if(screensizeArray[3] == '1'){
                        screensizeclass[i].style.display= 'block';
                    }else{
                        screensizeclass[i].style.setProperty("display", "none", "important");
                    }
                }

            }
        }

    }

    function smartredirectLink(badgeval,links,smartbannerid,modalsize) {

        if(badgeval != ''){

            var badgelink = badgeval;
            if(links == 0){
                window.location.href = badgelink;
            }else{
                window.open(badgelink,'_blank');
            }

        }

        if(links == 2){
            var target = document.getElementById("smart-modal-outer");
            var myclasses = '';
            if(modalsize == 0){
                myclasses = 'smart-modal-window smart-modal-small';
            }else if(modalsize == 2){
                myclasses = 'smart-modal-window smart-modal-large';
            }else{
                myclasses = 'smart-modal-window';
            }
            
            document.getElementById('smart-modal-outer').classList.add('smart-modal-open');
            var setclass = document.getElementById('smart-modal-window');
            setclass.className = '';
            setclass.className = myclasses;
            var xhr = new XMLHttpRequest();
            var url = '/?view=smartmeta&id==badge-popup-'+smartbannerid;
            xhr.open("GET", url, true);
            xhr.setRequestHeader("Cache-Control", "max-age=3600");
            xhr.onreadystatechange = function() {
                // if (this.readyState === XMLHttpRequest.DONE) {
                    if (this.status === 200) {
                        document.getElementById('smart-modal-content').innerHTML = this.responseText;
                    } else {
                        console.log(this.status, this.statusText);
                    }
                // }
                };
                xhr.send();
        }
    
    }

    function toValidDate2(datestring){
        return datestring.replace(/(\d{2})(\/)(\d{2})/, "$3$2$1");   
    }

    function myTimer2(newvalue,count) {

        var smartbText2 = document.getElementsByClassName('smartbText');
        var againvalue = newvalue;
        var pos3 = newvalue.indexOf("[[ CountdownTimer:");
        var pos4 = newvalue.indexOf("M,");
        if(pos4 < 0){
            pos4 = newvalue.indexOf(" ]]");
            var res = newvalue.slice(pos3+18, pos4);
        }else{
            var res = newvalue.slice(pos3+18, pos4+1);
        }
        var pos5 = newvalue.indexOf(" ]]");
        var pos6 = newvalue.indexOf("|");
        var endres = againvalue.slice(pos3+18, pos5);
        if(pos6 < 0){
            var customtext = '';
        }else{
            var customtext = againvalue.slice(pos6+1, pos5);
        }
        newvalue = newvalue.replace("[[ CountdownTimer:", "" );
        newvalue = newvalue.replace(" ]]", "" );
        endres = endres.replace(" |"+customtext , "" );
        var getlang = endres.split(",");
        var setlang2 = 'en';
        if(getlang.length > 1){
            if(getlang[1] == 'custom'){
                if (getlang[2] == null){
                    var setdays = '';
                }else{
                    var setdays = getlang[2];
                }
                if (getlang[3] == null){
                    var sethours = '';
                }else{
                    var sethours = getlang[3];
                }
                if (getlang[4] == null){
                    var setminutes = '';
                }else{
                    var setminutes = getlang[4];
                }
                if (getlang[5] == null){
                    var setseconds = '';
                }else{
                    var setseconds = getlang[5];
                }
            }else{
            setlang2 = getlang[1];
            var setmoment = moment();
            setmoment.locale(setlang2);
            setmoment.subtract({hours: 0, minutes: 0, seconds: 35});
            var getseconds = setmoment.toNow(true);
            setmoment.subtract({hours: 0, minutes: 10, seconds: 59});
            var getminutes = setmoment.toNow(true);
            setmoment.subtract({hours: 5, minutes: 59, seconds: 59});
            var gethours = setmoment.toNow(true);
            setmoment.subtract({hours: 222, minutes: 59, seconds: 59});
            var getdays = setmoment.toNow(true);
            var setseconds = getseconds.split(" ").pop();
            var setminutes = getminutes.split(" ").pop();
            var sethours = gethours.split(" ").pop();
            var setdays = getdays.split(" ").pop();
            }
        }else{
            var setdays = "days";
            var sethours = "hours";
            var setminutes = "minutes";
            var setseconds = "seconds";
        }

        var x = setInterval(function() { 
            let end = new Date(toValidDate2(res));
            let start = new Date();
            var remaintime = end - start;
            var days = Math.floor(remaintime / (1000 * 60 * 60 * 24));
            var hours = Math.floor((remaintime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((remaintime % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((remaintime % (1000 * 60)) / 1000);
            var realtimeleft = days +" "+ setdays +" "+ hours +" " + sethours +" "+ minutes +" "+ setminutes +" "+ seconds +" " + setseconds + " ";
            if(seconds < 0 && customtext == ''){
                realtimeleft = "0 "+setdays+" 0 "+sethours+" 0 "+setminutes+" 0 "+setseconds;
            }else if(seconds < 0 && customtext != ''){
                newvalue = customtext;
            }else{
                newvalue = newvalue.replace(" |"+customtext , "");
            }
            if(getlang[1] == 'custom'){
                realtimeleft='';
                if(setdays != ''){
                realtimeleft = days +""+ setdays+ " ";
                }
                if(sethours != ''){
                realtimeleft = realtimeleft + hours +"" + sethours +" ";
                }
                if(setminutes != ''){
                realtimeleft = realtimeleft + minutes +""+ setminutes +" ";
                }
                if(setseconds != ''){
                realtimeleft = realtimeleft + seconds +"" + setseconds + " ";
                }
            }
            smartbText2[count].innerHTML = newvalue.replace(endres,realtimeleft);
            smartbText2[count].classList.remove("smart-counter");
            if (remaintime < 0) { 
                clearInterval(x); 
            } 
        }, 1000); 

    }

    function setCookiesmart(cname, cvalue, exdays) {
      var d = new Date();
      var time = setcookietimestampsmart(exdays);
      if(exdays < 5){
        d.setTime(d.getTime() + (time * 60 * 1000));
      }else if(exdays > 4 && exdays < 8){
        d.setTime(d.getTime() + (time * 60 * 60 * 1000));
      }else if(exdays > 7){
        d.setTime(d.getTime() + (time * 24 * 60 * 60 * 1000));
      }
      
      var expires = "expires="+d.toUTCString();
      document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }

    function getCookiesmart(cname) {
      var name = cname + "=";
      var ca = document.cookie.split(';');
      for(var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }

    function setcookietimestampsmart(time) {
        var realtime='';
        if(time==1){
            realtime=1;
        }else if(time==2){
            realtime=5;
        }else if(time==3){
            realtime=10;
        }else if(time==4){
            realtime=30;
        }else if(time==5){
            realtime=1;
        }else if(time==6){
            realtime=6;
        }else if(time==7){
            realtime=12;
        }else if(time==8){
            realtime=1;
        }else if(time==9){
            realtime=7;
        }else if(time==10){
            realtime=15;
        }else if(time==11){
            realtime=30;
        }
        return realtime;
    }

</script>  <script type="text/javascript">
	</script>
    
<script src="./Laphet_files/moment.min.js.download"></script>
<script src="./Laphet_files/moment-with-locales.min.js.download"></script>

<script type="text/javascript">
var userid = '';

    var existingScript = document.getElementById('smarthPopper');
    if (!existingScript) {

        var countrysmarth = 'smarthighlightcountry';
        var smarthcountryName = '';

        setTimeout(function(){ 
            checksmarthjquery();
        }, 1000);

    }

    function getCountryCodesh() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
        var countryData = JSON.parse(xhttp.responseText);
        getCountryNamesh(countryData.country);
        }
        };
        xhttp.open("GET", "https://loc2.thapi.workers.dev/?key=", true);
        xhttp.send();

        }

        function getCountryNamesh(countryCode) {
         var country_data = "AF,Afghanistan|AL,Albania|DZ,Algeria|AD,Andorra|AO,Angola|AI,Anguilla|AQ,Antarctica|AG,Antigua and Barbuda|AR,Argentina|AM,Armenia|AW,Aruba|AU,Australia|AT,Austria|AZ,Azerbaijan|BS,Bahamas|BH,Bahrain|BD,Bangladesh|BB,Barbados|BY,Belarus|BE,Belgium|BZ,Belize|BJ,Benin|BM,Bermuda|BT,Bhutan|BO,Bolivia|BQ,Bonaire,Sint Eustatius and Saba|BA,Bosnia and Herzegovina|BW,Botswana|BV,Bouvet Island|BR,Brazil|IO,British Indian Ocean Territory|BN,Brunei Darussalam|BG,Bulgaria|BF,Burkina Faso|BI,Burundi|CV,Cabo Verde|KH,Cambodia|CM,Cameroon|CA,Canada|KY,Cayman Islands|CF,Central African Republic|TD,Chad|CL,Chile|CN,China|CX,Christmas Island|CC,Cocos (Keeling) Islands|CO,Colombia|KM,Comoros|CG,Congo|CD,Congo,Democratic Republic of the|CK,Cook Islands|CR,Costa Rica|CI,Côte d'Ivoire|HR,Croatia|CU,Cuba|CW,Curaçao|CY,Cyprus|CZ,Czech Republic|DK,Denmark|DJ,Djibouti|DM,Dominica|DO,Dominican Republic|EC,Ecuador|EG,Egypt|SV,El Salvador|GQ,Equatorial Guinea|ER,Eritrea|EE,Estonia|SZ,Eswatini|ET,Ethiopia|FK,Falkland Islands (Malvinas)|FO,Faroe Islands|FJ,Fiji|FI,Finland|FR,France|GF,French Guiana|PF,French Polynesia|TF,French Southern Territories|GA,Gabon|GM,Gambia|GE,Georgia|DE,Germany|GH,Ghana|GI,Gibraltar|GR,Greece|GL,Greenland|GD,Grenada|GP,Guadeloupe|GU,Guam|GT,Guatemala|GG,Guernsey|GN,Guinea|GW,Guinea-Bissau|GY,Guyana|HT,Haiti|HM,Heard Island and McDonald Islands|VA,Holy See|HN,Honduras|HK,Hong Kong|HU,Hungary|IS,Iceland|IN,India|ID,Indonesia|IR,Iran|IQ,Iraq|IE,Ireland|IM,Isle of Man|IL,Israel|IT,Italy|JM,Jamaica|JP,Japan|JE,Jersey|JO,Jordan|KZ,Kazakhstan|KE,Kenya|KI,Kiribati|KP,Korea|KR,Korea|KW,Kuwait|KG,Kyrgyzstan|LA,Lao People's Democratic Republic|LV,Latvia|LB,Lebanon|LS,Lesotho|LR,Liberia|LY,Libya|LI,Liechtenstein|LT,Lithuania|LU,Luxembourg|MO,Macao|MG,Madagascar|MW,Malawi|MY,Malaysia|MV,Maldives|ML,Mali|MT,Malta|MH,Marshall Islands|MQ,Martinique|MR,Mauritania|MU,Mauritius|YT,Mayotte|MX,Mexico|FM,Micronesia|MD,Moldova|MC,Monaco|MN,Mongolia|ME,Montenegro|MS,Montserrat|MA,Morocco|MZ,Mozambique|MM,Myanmar|NA,Namibia|NR,Nauru|NP,Nepal|NL,Netherlands|NC,New Caledonia|NZ,New Zealand|NI,Nicaragua|NE,Niger|NG,Nigeria|NU,Niue|NF,Norfolk Island|MK,North Macedonia|MP, Northern Mariana Islands|NO,Norway|OM,Oman|PK,Pakistan|PW,Palau|PS,Palestine|PA,Panama|PG,Papua New Guinea|PY,Paraguay|PE,Peru|PH,Philippines|PN,Pitcairn|PL,Poland|PT,Portugal|PR,Puerto Rico|QA,Qatar|RE,Réunion|RO,Romania|RU,Russian Federation|RW,Rwanda|BL,Saint Barthélemy|SH,Saint Helena|KN,Saint Kitts and Nevis|LC,Saint Lucia|MF,Saint Martin (French part)|PM,Saint Pierre and Miquelon|VC,Saint Vincent and the Grenadines|WS,Samoa|SM,San Marino|ST,Sao Tome and Principe|SA,Saudi Arabia|SN,Senegal|RS,Serbia|SC,Seychelles|SL,Sierra Leone|SG,Singapore|SX,Sint Maarten (Dutch part)|SK,Slovakia|SI,Slovenia|SB,Solomon Islands|SO,Somalia|ZA,South Africa|GS,South Georgia and the South Sandwich Islands|SS,South Sudan|ES,Spain|LK,Sri Lanka|SD,Sudan|SR,Suriname|SJ,Svalbard and Jan Mayen|SE,Sweden|CH,Switzerland|SY,Syrian Arab Republic|TW,Taiwan|TJ,Tajikistan|TZ,Tanzania|TH,Thailand|TL,Timor-Leste|TG,Togo|TK,Tokelau|TO,Tonga|TT,Trinidad and Tobago|TN,Tunisia|TR,Turkey|TM,Turkmenistan|TC,Turks and Caicos Islands|TV,Tuvalu|UG,Uganda|UA,Ukraine|AE,United Arab Emirates|GB,United Kingdom|US,United States|UM,United States Minor Outlying Islands|UY,Uruguay|UZ,Uzbekistan|VU,Vanuatu|VE,Venezuela|VN,Viet Nam|VG,Virgin Islands|VI,Virgin Islands|WF,Wallis and Futuna|EH,Western Sahara|YE,Yemen|ZM,Zambia|ZW,Zimbabwe";
            var countries = country_data.split("|");
            for (var i = 0; i < countries.length; i++) {
            var country = countries[i].split(",");
            var countryCodedata = country[0];
            var Visitorcountry = country[1];
            if(countryCode== countryCodedata)
            {
               var VisitorCountryName=Visitorcountry;
            }
            }
            var visitorclass = document.getElementsByClassName('smarthVisitorCountry');
                for (var i = 0; i < visitorclass.length; i++) {
                var issetvisitorcountryrule = visitorclass[i].getAttribute('visitorcountryrule');  
                var secondChild = visitorclass[i].querySelector('div:nth-child(1)');
                var thirdChild = secondChild.querySelector('div:nth-child(1)'); 
                if( issetvisitorcountryrule == '1'){
                // $('.primebVisitorCountryName').replaceWith(VisitorCountryName);
                // visitorclass[i].style.display= 'block';
                var elements = document.querySelectorAll('.smarthVisitorCountryName');
                elements.forEach(function(element) {
                element.textContent = VisitorCountryName;
                });
                }
                }
        }

        


    function checksmarthjquery() {
      if (window.jQuery) {
      	checkSmarthVariantInventory("","first");
        $(document).on("change", ".single-option-selector", function() {
            var optionMaph = [];
            if(optionMaph.length == 0){
                $(".single-option-selector").each(function(key) {
                optionMaph[key] = $(this).val();
                });
                checkSmarthVariantInventory(optionMaph);
            }
        });

        $(document).on("change", ".ProductForm__Option select", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".ProductForm__Option select").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("click", ".tt-options-swatch li", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".tt-options-swatch li").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("click", ".swatch-element", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".swatch-element").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("change", ".form__input--select", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".form__input--select").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("change", ".sgl-opt-selector-product-template", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".sgl-opt-selector-product-template").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("click", ".tt-options-swatch li", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".tt-options-swatch li").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("change", ".product-option-value-item", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".product-option-value-item").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("click", ".clickyboxes a", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".clickyboxes a").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("change", "[data-product-options-container] .form-field-input", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $("[data-product-options-container] .form-field-input").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("change", "#data-product-option-0", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $("#data-product-option-0").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("click", ".product-options__section .active", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".product-options__section .active").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("click", ".product-options__value", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".product-options__value").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("click", ".variant-input", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".variant-input").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("change", ".product-form__single-selector", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".product-form__single-selector").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("click", ".gt_swatches--select.gf_active", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".gt_swatches--select.gf_active").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("click", ".nt-swatch", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".nt-swatch").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("change", ".disclosure--input", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".disclosure--input").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("click", ".product-form__input input", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".product-form__input input[type=radio]:checked").each(function(key) {
              optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("click", ".swatch-container input", function() {
          var optionMaph = [];
          if(optionMaph.length == 0){
            $(".swatch-container input[type=radio]:checked").each(function(key) {
            optionMaph[key] = $(this).val();
            });
            checkSmarthVariantInventory(optionMaph);
          }
        });

        $(document).on("click", ".swatch--gl input", function() {
            var optionMap = [];
            if(optionMap.length == 0){
                $(".swatch--gl input[type=radio]:checked").each(function(key) {
                optionMap[key] = $(this).val();
                });
                checkSmarthVariantInventory(optionMap);
            }
        });
        setTimeout(function(){ 
        getCountryCodesh(); 
        }, 500); 
        
      } else {
            	
              setTimeout(function() { checksmarthjquery() }, 2000);
          }
    }

    function removesmarthighlight() {
        var smarth1 = document.getElementsByClassName('1smarthDesktop');
        if(smarth1[0]){
            var remove_div1 = document.getElementsByClassName('1smartHighlights');
            for(var i = 0; i < remove_div1.length; i++) {
                if(remove_div1[i]){
                    remove_div1[i].style.display= 'block';
                }
            }
            
        } else {
            var remove_div1 = document.getElementsByClassName('1smartHighlights');
            if(remove_div1[0]){
                remove_div1[0].style.cssText = 'display:none !important';
            }
        }
        var smarth2 = document.getElementsByClassName('2smarthDesktop');
        if(smarth2[0]){
            var remove_div2 = document.getElementsByClassName('2smartHighlights');
            for(var i = 0; i < remove_div2.length; i++) {
                if(remove_div2[i]){
                    remove_div2[i].style.display= 'block';
                }
            }
        } else {
            var remove_div2 = document.getElementsByClassName('2smartHighlights');
            if(remove_div2[0]){
                remove_div2[0].style.cssText = 'display:none !important';
                // remove_div2[0].parentNode.removeChild(remove_div2[0]);
            }
        }
        var smarth3 = document.getElementsByClassName('3smarthDesktop');
        if(smarth3[0]){
            var remove_div3 = document.getElementsByClassName('3smartHighlights');
            for(var i = 0; i < remove_div3.length; i++) {
                if(remove_div3[i]){
                    remove_div3[i].style.display= 'block';
                }
            }
        } else {
            var remove_div3 = document.getElementsByClassName('3smartHighlights');
            if(remove_div3[0]){
                remove_div3[0].style.cssText = 'display:none !important';
                // remove_div3[0].parentNode.removeChild(remove_div3[0]);
            }
        }
    }

    window.addEventListener('DOMContentLoaded', (event) => {
         getCountryCodesh();  
        if(userid==4300){
          smarthonload();  
        }else{
            setTimeout(function(){ 
            smarthonload();
        }, 500);

        }  
    });

    function expdeliveryhdatesmart(value,count) {
        var weekdays = '';
        var dateformatselected = '';
        var datelang = 'en';
        var smarthTextdate = document.getElementsByClassName('smarthTitle');
        var realvalue = value;
        var pos = realvalue.indexOf("[[today");
        var pos2 = realvalue.indexOf("]]");
        var startres = realvalue.slice(pos+8, pos2);
        realvalue = realvalue.replace("[[today,", "" );
        realvalue = realvalue.replace("]]", "" );
        var pos3 = realvalue.indexOf("[[today");
        var pos4 = realvalue.indexOf("]]");
        var endres = realvalue.slice(pos3+8, pos4);
        realvalue = realvalue.replace("[[today,", "" );
        realvalue = realvalue.replace("]]", "" );
        var getlang = startres.split(",");
        var wrongdays = weekdays.split(",");
        var startDate = new Date(new Date().getTime()+(parseInt(startres)*24*60*60*1000));
        var today = new Date(new Date().getTime());
        var firstinc=0;
        while (today <= startDate) {
            var getday = String(today.getDay());
            if(wrongdays.indexOf(getday) != -1){
            startDate.setDate(startDate.getDate() + 1);
            firstinc++;
            }
            today.setDate(today.getDate() + 1);
        }
        var setlang = 'en';
        if(getlang.length > 1){
            setlang = getlang[1];
        }
        moment.locale(setlang);
        value = value.replace("[[today,"+startres+"]]", moment(startDate).locale(setlang).format(dateformatselected));

        var extradays = firstinc+parseInt(endres);
        var endDate = new Date(new Date().getTime()+(extradays*24*60*60*1000));
        var todayend = startDate;
        var secinc=0;
        while (todayend <= endDate) {
            var getday = String(todayend.getDay());
            if(wrongdays.indexOf(getday) != -1){
            endDate.setDate(endDate.getDate() + 1);
            secinc++;
            }
            todayend.setDate(todayend.getDate() + 1);
        }
        value = value.replace("[[today,"+endres+"]]", moment(endDate).locale(setlang).format(dateformatselected));
        smarthTextdate[count].innerHTML = value;
        var getchild = smarthTextdate[count].getElementsByClassName('smart-counter');
        if(getchild[0]){
            getchild[0].classList.remove("smart-counter");
        }
    }

    function expdeliveryhsubdatesmart(value,count) {
        var weekdays = '';
        var dateformatselected = '';
        var datelang = 'en';
        var smarthTextdate = document.getElementsByClassName('smarthSubTitle');
        var realvalue = value;
        var pos = realvalue.indexOf("[[today");
        var pos2 = realvalue.indexOf("]]");
        var startres = realvalue.slice(pos+8, pos2);
        realvalue = realvalue.replace("[[today,", "" );
        realvalue = realvalue.replace("]]", "" );
        var pos3 = realvalue.indexOf("[[today");
        var pos4 = realvalue.indexOf("]]");
        var endres = realvalue.slice(pos3+8, pos4);
        realvalue = realvalue.replace("[[today,", "" );
        realvalue = realvalue.replace("]]", "" );
        var getlang = startres.split(",");
        var wrongdays = weekdays.split(",");
        var startDate = new Date(new Date().getTime()+(parseInt(startres)*24*60*60*1000));
        var today = new Date(new Date().getTime());
        var firstinc=0;
        while (today <= startDate) {
            var getday = String(today.getDay());
            if(wrongdays.indexOf(getday) != -1){
            startDate.setDate(startDate.getDate() + 1);
            firstinc++;
            }
            today.setDate(today.getDate() + 1);
        }
        var setlang = 'en';
        if(getlang.length > 1){
            setlang = getlang[1];
        }
        moment.locale(setlang);
        value = value.replace("[[today,"+startres+"]]", moment(startDate).locale(setlang).format(dateformatselected));

        var extradays = firstinc+parseInt(endres);
        var endDate = new Date(new Date().getTime()+(extradays*24*60*60*1000));
        var todayend = startDate;
        var secinc=0;
        while (todayend <= endDate) {
            var getday = String(todayend.getDay());
            if(wrongdays.indexOf(getday) != -1){
            endDate.setDate(endDate.getDate() + 1);
            secinc++;
            }
            todayend.setDate(todayend.getDate() + 1);
        }
        value = value.replace("[[today,"+endres+"]]", moment(endDate).locale(setlang).format(dateformatselected));

        smarthTextdate[count].innerHTML = value;
        var getsubchild = smarthTextdate[count].getElementsByClassName('smart-d-none');
        if(getsubchild[0]){
            getsubchild[0].classList.remove("smart-d-none");
        }
    }

    function checkSmarthVariantInventory(optionMap,myfirstone='') {
        var productname = '';  
        var variantproductid = '';   
        var mydomclass = document.getElementsByClassName('smarthVariantInventory');   
        if(mydomclass.length > 0){
            if(optionMap.length > 0){  
                var realval = '';
                if(myfirstone == "first"){
                    realval = optionMap;
                }else{
                    for(var i = 0; i < optionMap.length; i++){
                        var spaces = ' / ';
                        if(i == 0){
                            spaces = '';
                        }
                        realval += spaces+optionMap[i];
                    }
                }
                
                var smartHighlightsAll = document.getElementsByClassName('smartHighlights');
                for (var i = 0; i < smartHighlightsAll.length; i++) {
                    var smarthOuterClass = smartHighlightsAll[i].getAttribute('data-smarthOuterClass');
                    var smarthOuterStyle = smartHighlightsAll[i].getAttribute('data-smarthOuterStyle');
                    var smarthInnerClass = smartHighlightsAll[i].getAttribute('data-smarthInnerClass');
                    var smarthInnerStyle = smartHighlightsAll[i].getAttribute('data-smarthInnerStyle');
                    var smarthImageClass = smartHighlightsAll[i].getAttribute('data-smarthImageClass');
                    var smarthImageStyle = smartHighlightsAll[i].getAttribute('data-smarthImageStyle');
                    var smarthTextClass = smartHighlightsAll[i].getAttribute('data-smarthTextClass');
                    var smarthTextStyle = smartHighlightsAll[i].getAttribute('data-smarthTextStyle');
                    var smarthGroup = smartHighlightsAll[i].getAttribute('data-smarthGroup');
                    hitsmarthpage(productname,variantproductid,smarthOuterClass,smarthOuterStyle,smarthInnerClass,smarthInnerStyle,smarthImageClass,smarthImageStyle,smarthTextClass,smarthTextStyle,smarthGroup,realval)
                }
            }
        }
        setTimeout(function(){ 
        getCountryCodesh(); 
        }, 500); 
    }

    function hitsmarthpage(productname,variantproductid,smarthOuterClass,smarthOuterStyle,smarthInnerClass,smarthInnerStyle,smarthImageClass,smarthImageStyle,smarthTextClass,smarthTextStyle,smarthGroup,realval) {
        
        var result = Math.random().toString(36).substring(2,7);
        if(smarthGroup == 1){
			var urlhit = productname+'/?view=smarthvariant&sort_by='+result+'&outerclass=='+smarthOuterClass+'&outerstyle=='+smarthOuterStyle+'&innerclass=='+smarthInnerClass+'&innerstyle=='+smarthInnerStyle+'&imageclass=='+smarthImageClass+'&imagestyle=='+smarthImageStyle+'&textclass=='+smarthTextClass+'&textstyle=='+smarthTextStyle+'&group==1&page=='+realval;
        }else if(smarthGroup == 2){
			var urlhit = productname+'/?view=smarthvarianttwo&sort_by='+result+'&outerclass=='+smarthOuterClass+'&outerstyle=='+smarthOuterStyle+'&innerclass=='+smarthInnerClass+'&innerstyle=='+smarthInnerStyle+'&imageclass=='+smarthImageClass+'&imagestyle=='+smarthImageStyle+'&textclass=='+smarthTextClass+'&textstyle=='+smarthTextStyle+'&group==2&page=='+realval;
        }else{
            var urlhit = productname+'/?view=smarthvariantthree&sort_by='+result+'&outerclass=='+smarthOuterClass+'&outerstyle=='+smarthOuterStyle+'&innerclass=='+smarthInnerClass+'&innerstyle=='+smarthInnerStyle+'&imageclass=='+smarthImageClass+'&imagestyle=='+smarthImageStyle+'&textclass=='+smarthTextClass+'&textstyle=='+smarthTextStyle+'&group==3&page=='+realval;
        }
        var xhr = new XMLHttpRequest();
        xhr.open("GET", urlhit, true);
        xhr.onreadystatechange  = function() {
            if (this.readyState === XMLHttpRequest.DONE) {
                if (this.status === 200) {
                    if(this.responseText == 0){
                        $('.outersmarth'+variantproductid+'-'+smarthGroup+' .smarthText .smarthVariantInventory').html("0");
                        $('.outersmarth'+variantproductid+'-'+smarthGroup+' .smart-counter').removeClass("smart-counter");
                        $('.outersmarth'+variantproductid+'-'+smarthGroup+' .hidevariant').remove();
                    }else{
                        $('.outersmarth'+variantproductid+'-'+smarthGroup).replaceWith( this.responseText );
                        $('.outersmarth'+variantproductid+'-'+smarthGroup+' .smart-counter').removeClass("smart-counter");
                        var countryclassh = document.getElementsByClassName('smarthCountry');
                        for (var i = 0; i < countryclassh.length; i++) {
                            var counrtylisth = countryclassh[i].getAttribute('data-countryselectedh');
                            var position = counrtylisth.search(smarthcountryName);
                            if(position < 0){ 
                                countryclassh[i].style.cssText = 'display:none !important';
                            }else{
                                countryclassh[i].style.cssText = 'display:unset !important';
                            }
                        }
                        setTimeout(function(){ 
                            smarthonload();
                        }, 500); 
                    }
                } else {
                    console.log('failed variant req');
                }
            }
        };
        xhr.send();

    }

    function smarthsetlivevisit(mypage,myproductid,highclassname) {
        setTimeout(function(){ 

            var settimelive = ;
            var setvisitlimit = ;

            var d = new Date();
            var time = setcookietimestamphsmart(settimelive);
            var mytime = '';
            if(settimelive < 5){
                mytime = (time * 60 );
            }else if(settimelive > 4 && settimelive < 8){
                mytime =(time * 60 * 60 );
            }else if(settimelive > 7){
                mytime = (time * 24 * 60 * 60 );
            }

            var realhighclass = '';
            if(highclassname == 'smarthloop'){
                realhighclass = "smartvisitshtitle";
            }else{
                realhighclass = 'smartvisitshsubtitle';
            }

            var smartloop2 = document.getElementsByClassName(highclassname);
            for (var i = 0; i < smartloop2.length; i++) {
                var bigloop2 = smartloop2[i].parentElement;
   				var smallloop2 = bigloop2.parentElement;
                var parentloop2 = smallloop2.getAttribute('data-smartproductid');
                var myuser = getCookiesmarth("smartvisits"+parentloop2);
                if (myuser != "") {
                    myhttpreqhsmart(parentloop2,0,mytime,setvisitlimit,highclassname,realhighclass);
                } else {
                    myhttpreqhsmart(parentloop2,1,mytime,setvisitlimit,highclassname,realhighclass);
                    setCookiesmarth("smartvisits"+parentloop2, 'setsmartvisits', settimelive);
                }

            }

            var smartloop = document.getElementsByClassName(highclassname);
            for (var i = 0; i < smartloop.length; i++) {
                if(mypage == 'product'){
                    var bigloop = smartloop[i].parentElement;
   				    var smallloop = bigloop.parentElement;
                    var parentloop = smallloop.getAttribute('data-smartproductid');
                    if(parentloop == myproductid){
                        smartloop[i].classList.add(realhighclass+parentloop);
                    }else{
                        var removeloop = smartloop[i].parentElement;
                        var bigloop = removeloop.parentElement;
                        var removeloop2 = bigloop.parentElement;
                        removeloop2.style.visibility = 'hidden';
                        smartloop[i].classList.remove(highclassname);
                        removeloop2.remove();
                    }
                }else{
                  var oldloop = smartloop[i].parentElement;
                  var bigloop = oldloop.parentElement;
                  var newloop = bigloop.parentElement;
                  newloop.style.visibility = 'hidden';
                  smartloop[i].classList.remove(highclassname);
                  newloop.remove();
                }
            }

        }, 500);
    }

    function myhttpreqhsmart(lastid,mynew,gettime,setvisitlimit,highclassname,realhighclass) {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                var pageliveview = JSON.parse(this.responseText);
                var smartvisits = document.getElementsByClassName(realhighclass+lastid);
                for (var i = 0; i < smartvisits.length; i++) {
                    if(setvisitlimit < pageliveview.pageviews){
                        smartvisits[i].innerHTML = pageliveview.pageviews;
                        var removeloop = smartvisits[i].parentElement;
                        removeloop.style.visibility = 'visible';
                    }else{
                        var removeloop = smartvisits[i].parentElement;
                        removeloop.style.visibility = 'hidden';
                        smartvisits[i].classList.remove(highclassname);
                        removeloop.remove();
                        removesmarthighlight();
                    }
                        
                }
            }
        };
        xhttp.open("GET","https://visitcounterstaging.thalia-apps.com/?shopifyid="+lastid+"&new="+mynew+"&time="+gettime, true);
        xhttp.send();
    }

    function mymodalsmarth() {
      var target = document.getElementById("smart-modal-window");
      var parenttarget = target.parentElement;
      if (parenttarget.classList.contains('smart-modal-open')) {
        parenttarget.classList.remove('smart-modal-open');
        document.getElementById('smart-modal-content').innerHTML = '';
      }
    }
    
    function shlink(highlightval,links,smarthighlightid,modalsize) {

        if(highlightval != ''){

            var highlightlink = highlightval;
            if(links == 0){
                window.location.href = highlightlink;
            }else{
                window.open(highlightlink,'_blank');
            }

        }
        if(links == 2){
            var target = document.getElementById("smart-modal-outer");
            var myclasses = '';
            if(modalsize == 0){
                myclasses = 'smart-modal-window smart-modal-small';
            }else if(modalsize == 2){
                myclasses = 'smart-modal-window smart-modal-large';
            }else{
                myclasses = 'smart-modal-window';
            }
            
            document.getElementById('smart-modal-outer').classList.add('smart-modal-open');
            var setclass = document.getElementById('smart-modal-window');
            setclass.className = '';
            setclass.className = myclasses;
            var xhr = new XMLHttpRequest();
            var url = '/?view=smartmeta&id==highlight-popup-'+smarthighlightid;
            xhr.open("GET", url, true);
            xhr.setRequestHeader("Cache-Control", "max-age=3600");
            xhr.onreadystatechange = function() {
                // if (this.readyState === XMLHttpRequest.DONE) {
                    if (this.status === 200) {
                        document.getElementById('smart-modal-content').innerHTML = this.responseText;
                    } else {
                        console.log(this.status, this.statusText);
                    }
                // }
                };
                xhr.send();
        }
    
    }

    function toValidDate(datestring){
        return datestring.replace(/(\d{2})(\/)(\d{2})/, "$3$2$1");   
    }

    function myTimer(newvalue,count) {

        var smarthText2 = document.getElementsByClassName('smarthTitle');
        var againvalue = newvalue;
        var pos3 = newvalue.indexOf("[[ CountdownTimer:");
        var pos4 = newvalue.indexOf("M,");
        if(pos4 < 0){
            pos4 = newvalue.indexOf(" ]]");
            var res = newvalue.slice(pos3+18, pos4);
        }else{
            var res = newvalue.slice(pos3+18, pos4+1);
        }
        var pos5 = newvalue.indexOf(" ]]");
        var pos6 = newvalue.indexOf("|");
        var endres = againvalue.slice(pos3+18, pos5);
        if(pos6 < 0){
            var customtext = '';
        }else{
            var customtext = againvalue.slice(pos6+1, pos5);
        }
        newvalue = newvalue.replace("[[ CountdownTimer:", "" );
        newvalue = newvalue.replace(" ]]", "" );
        endres = endres.replace(" |"+customtext , "" );
        var getlang = endres.split(",");
        var setlang2 = 'en';
        if(getlang.length > 1){
            if(getlang[1] == 'custom'){
                if (getlang[2] == null){
                    var setdays = '';
                }else{
                    var setdays = getlang[2];
                }
                if (getlang[3] == null){
                    var sethours = '';
                }else{
                    var sethours = getlang[3];
                }
                if (getlang[4] == null){
                    var setminutes = '';
                }else{
                    var setminutes = getlang[4];
                }
                if (getlang[5] == null){
                    var setseconds = '';
                }else{
                    var setseconds = getlang[5];
                }
            }else{
                setlang2 = getlang[1];
                var setmoment = moment();
                setmoment.locale(setlang2);
                setmoment.subtract({hours: 0, minutes: 0, seconds: 35});
                var getseconds = setmoment.toNow(true);
                setmoment.subtract({hours: 0, minutes: 10, seconds: 59});
                var getminutes = setmoment.toNow(true);
                setmoment.subtract({hours: 5, minutes: 59, seconds: 59});
                var gethours = setmoment.toNow(true);
                setmoment.subtract({hours: 222, minutes: 59, seconds: 59});
                var getdays = setmoment.toNow(true);
                var setseconds = getseconds.split(" ").pop();
                var setminutes = getminutes.split(" ").pop();
                var sethours = gethours.split(" ").pop();
                var setdays = getdays.split(" ").pop();
            }
        }else{
            var setdays = "days";
            var sethours = "hours";
            var setminutes = "minutes";
            var setseconds = "seconds";
        }

        var x = setInterval(function() { 
            let end = new Date(toValidDate(res));
            let start = new Date();
            var remaintime = end - start;
            var days = Math.floor(remaintime / (1000 * 60 * 60 * 24));
            var hours = Math.floor((remaintime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((remaintime % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((remaintime % (1000 * 60)) / 1000);
            var realtimeleft = days +" "+ setdays +" "+ hours +" " + sethours +" "+ minutes +" "+ setminutes +" "+ seconds +" " + setseconds + " ";
            if(seconds < 0 && customtext == ''){
                realtimeleft = "0 "+setdays+" 0 "+sethours+" 0 "+setminutes+" 0 "+setseconds;
            }else if(seconds < 0 && customtext != ''){
                newvalue = customtext;
            }else{
                newvalue = newvalue.replace(" |"+customtext , "");
            }
            if(getlang[1] == 'custom'){
                realtimeleft='';
                if(setdays != ''){
                realtimeleft = days +""+ setdays+ " ";
                }
                if(sethours != ''){
                realtimeleft = realtimeleft + hours +"" + sethours +" ";
                }
                if(setminutes != ''){
                realtimeleft = realtimeleft + minutes +""+ setminutes +" ";
                }
                if(setseconds != ''){
                realtimeleft = realtimeleft + seconds +"" + setseconds + " ";
                }
            }
            smarthText2[count].innerHTML = newvalue.replace(endres,realtimeleft);
            smarthText2[count].classList.remove("smart-counter");
            if (remaintime < 0) { 
                clearInterval(x); 
            } 
        }, 1000);
    }

    function myTimersub(newvalue,count) {

        var smarthText2 = document.getElementsByClassName('smarthSubTitle');
        var againvalue = newvalue;
        var pos3 = newvalue.indexOf("[[ CountdownTimer:");
        var pos4 = newvalue.indexOf("M,");
        if(pos4 < 0){
            pos4 = newvalue.indexOf(" ]]");
            var res = newvalue.slice(pos3+18, pos4);
        }else{
            var res = newvalue.slice(pos3+18, pos4+1);
        }
        var pos5 = newvalue.indexOf(" ]]");
        var pos6 = newvalue.indexOf("|");
        var endres = againvalue.slice(pos3+18, pos5);
        if(pos6 < 0){
            var customtext = '';
        }else{
            var customtext = againvalue.slice(pos6+1, pos5);
        }
        newvalue = newvalue.replace("[[ CountdownTimer:", "" );
        newvalue = newvalue.replace(" ]]", "" );
        endres = endres.replace(" |"+customtext , "" );
        var getlang = endres.split(",");
        var setlang2 = 'en';
        if(getlang.length > 1){
            if(getlang[1] == 'custom'){
                if (getlang[2] == null){
                    var setdays = '';
                }else{
                    var setdays = getlang[2];
                }
                if (getlang[3] == null){
                    var sethours = '';
                }else{
                    var sethours = getlang[3];
                }
                if (getlang[4] == null){
                    var setminutes = '';
                }else{
                    var setminutes = getlang[4];
                }
                if (getlang[5] == null){
                    var setseconds = '';
                }else{
                    var setseconds = getlang[5];
                }
            }else{
                setlang2 = getlang[1];
                var setmoment = moment();
                setmoment.locale(setlang2);
                setmoment.subtract({hours: 0, minutes: 0, seconds: 35});
                var getseconds = setmoment.toNow(true);
                setmoment.subtract({hours: 0, minutes: 10, seconds: 59});
                var getminutes = setmoment.toNow(true);
                setmoment.subtract({hours: 5, minutes: 59, seconds: 59});
                var gethours = setmoment.toNow(true);
                setmoment.subtract({hours: 222, minutes: 59, seconds: 59});
                var getdays = setmoment.toNow(true);
                var setseconds = getseconds.split(" ").pop();
                var setminutes = getminutes.split(" ").pop();
                var sethours = gethours.split(" ").pop();
                var setdays = getdays.split(" ").pop();
            }
        }else{
            var setdays = "days";
            var sethours = "hours";
            var setminutes = "minutes";
            var setseconds = "seconds";
        }

        var x = setInterval(function() { 
            let end = new Date(toValidDate(res));
            let start = new Date();
            var remaintime = end - start;
            var days = Math.floor(remaintime / (1000 * 60 * 60 * 24));
            var hours = Math.floor((remaintime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((remaintime % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((remaintime % (1000 * 60)) / 1000);
            var realtimeleft = days +" "+ setdays +" "+ hours +" " + sethours +" "+ minutes +" "+ setminutes +" "+ seconds +" " + setseconds + " ";
            if(seconds < 0 && customtext == ''){
                realtimeleft = "0 "+setdays+" 0 "+sethours+" 0 "+setminutes+" 0 "+setseconds;
            }else if(seconds < 0 && customtext != ''){
                newvalue = customtext;
            }else{
                newvalue = newvalue.replace(" |"+customtext , "");
            }
            if(getlang[1] == 'custom'){
                realtimeleft='';
                if(setdays != ''){
                realtimeleft = days +""+ setdays+ " ";
                }
                if(sethours != ''){
                realtimeleft = realtimeleft + hours +"" + sethours +" ";
                }
                if(setminutes != ''){
                realtimeleft = realtimeleft + minutes +""+ setminutes +" ";
                }
                if(setseconds != ''){
                realtimeleft = realtimeleft + seconds +"" + setseconds + " ";
                }
            }
            smarthText2[count].innerHTML = newvalue.replace(endres,realtimeleft);
            smarthText2[count].classList.remove("smart-counter");
            if (remaintime < 0) { 
                clearInterval(x); 
            } 
        }, 1000); 

    }
    
    function smarthonload() {

        screensizesmarthFunction();
        var mypage = '';
        var myproductid = '';
        setTimeout(function(){ 
            smarthsetlivevisit(mypage,myproductid,'smarthloop');
            smarthsetlivevisit(mypage,myproductid,'smarthsubtitleloop');
        }, 500); 

        var smarthsku = '';
        var skuclass = document.getElementsByClassName('smarthsku');
        if(smarthsku == 0){
            for (var i = 0; i < skuclass.length; i++) {
                if(skuclass[i].dataset.sku == 0){
                    var parentsku = skuclass[i].parentElement;
                    var parent2sku = parentsku.parentElement;
                    parent2sku.style.cssText = 'display:none !important';
                }
            }
        }

        // setTimeout(function(){ 
            var smart2hText = document.getElementsByClassName('smarthTitle');
            if(smart2hText[0]){
                for (var i = 0; i < smart2hText.length; i++) {
                    var value = smart2hText[i].innerHTML;
                    if( value.indexOf("[[today") != -1  ){
                        expdeliveryhdatesmart(value,i);
                    }
                }
            }

            var smart2hsubText = document.getElementsByClassName('smarthSubTitle');
            if(smart2hsubText[0]){
                for (var i = 0; i < smart2hsubText.length; i++) {
                    var value = smart2hsubText[i].innerHTML;
                    if( value.indexOf("[[today") != -1  ){
                        expdeliveryhsubdatesmart(value,i);
                    }
                }
            }

            var smarthText = document.getElementsByClassName('smarthTitle');
            if(smarthText[0]){
                for (var i = 0; i < smarthText.length; i++) {
                    var value = smarthText[i].innerHTML;
                    if( value.indexOf("CountdownTimer:") != -1  ){
                        myTimer(value,i);
                    }
                }
            }

            var smarthsubText = document.getElementsByClassName('smarthSubTitle');
            if(smarthsubText[0]){
                for (var i = 0; i < smarthsubText.length; i++) {
                    var value = smarthsubText[i].innerHTML;
                    if( value.indexOf("CountdownTimer:") != -1  ){
                        myTimersub(value,i);
                    }
                }
            }

            var getpage = '';
            var smarthText2 = document.getElementsByClassName('smarthText smarthVariantInventory');
            if(smarthText2[0]){
                if(getpage == 'collection'){
                    for (var i = 0; i < smarthText2.length; i++) {
                        var oldloop = smarthText2[i].parentElement;
                        var newloop = oldloop.parentElement;
                        newloop.remove();
                    }
                }
            } 
        // }, 1000);

        document.getElementById("smart-modal-close").onclick = function() {mymodalsmarth()};
        window.onclick = function(event) {
            if (event.target.classList[1] == 'smart-modal-open') {
                mymodalsmarth();
            }
        }

        removesmarthighlight();

        setTimeout(function(){ 
            var smartinstances = tippy('[data-tippy-content]');
        }, 500);


        if(countrysmarth == 'smarthighlightcountry'){
            countrysmarth = 'newsmarthighlightcountry';
            var countrycount = document.getElementsByClassName('smarthCountry');
            if (countrycount.length > 0) {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                
                    if (xhttp.readyState == 4 && xhttp.status == 200) {
                        var mycountryoldh = xhttp.responseText;
                        mycountryoldh = mycountryoldh.replace("{\n", "");
                        mycountryoldh = mycountryoldh.replace("\n}", "");
                        var newvarh = mycountryoldh.split(",");
                        var setcountryh = newvarh[0].slice(14);
                        var mycountrysmarth = setcountryh.replace('"', "");

                        var countryclassSmarth = document.getElementsByClassName('smarthCountry');
                        for (var i = 0; i < countryclassSmarth.length; i++) {
                            var counrtylisth = countryclassSmarth[i].getAttribute('data-countryselectedh');
                            var position = counrtylisth.search(mycountrysmarth);
                            smarthcountryName = mycountrysmarth;
                            if(position < 0){ 
                                countryclassSmarth[i].style.cssText = 'display:none !important';
                                countryclassSmarth[i].classList.add("removeme");
                            }else{
                                countryclassSmarth[i].style.display= 'block';
                                countryclassSmarth[i].setAttribute('countryrule', '1');
                                if (countryclassSmarth[i].classList.contains('smarthScreenSize')) {
                                var screenlist = countryclassSmarth[i].getAttribute('data-screensizeselectedh');
                                var screensizeArray = screenlist.split(",");
                                var smdevice = window.matchMedia( "screen and (max-width: 767.98px)" );
                                var mddevice = window.matchMedia( "screen and (min-width: 768px) and (max-width: 991.98px)" );
                                var lgdevice = window.matchMedia( "screen and (min-width: 992px) and (max-width: 1199.98px)" );
                                var xldevice = window.matchMedia( "(min-width: 1200px)" );

                                if (smdevice.matches ){
                                    if(screensizeArray[0] == '1'){
                                    }else{
                                    countryclassSmarth[i].style.setProperty("display", "none", "important");
                                    }
                                }else if( mddevice.matches){
                                    if(screensizeArray[1] == '1'){
                                    }else{
                                    countryclassSmarth[i].style.setProperty("display", "none", "important");
                                    }
                                }else if(lgdevice.matches){
                                    if(screensizeArray[2] == '1'){
                                    }else{
                                    countryclassSmarth[i].style.setProperty("display", "none", "important");
                                    }
                                }else{
                                    if(screensizeArray[3] == '1'){
                                    }else{
                                    countryclassSmarth[i].style.setProperty("display", "none", "important");
                                    }
                                }

                                }
                                
                            }
                        }
                        var removeclass = document.getElementsByClassName('removeme');
                        for (var i = 0; i < removeclass.length; i++) {
                            removeclass[i].remove();
                        }

                        removesmarthighlight();

                    }
                };
                xhttp.open("GET", "https://loc2.thapi.workers.dev/?key=", true);
                // xhttp.open("GET", "https://geoloc.thapi.workers.dev/", true);
                xhttp.send();
            }
        }

    }

    window.addEventListener('resize', screensizesmarthFunction);

    function screensizesmarthFunction() { 
      var screensizeclass = document.getElementsByClassName('smarthScreenSize');
      for (var i = 0; i < screensizeclass.length; i++) {
        var issetcountryrule = screensizeclass[i].getAttribute('countryrule');
        if( issetcountryrule == '1'){
          var screenlist = screensizeclass[i].getAttribute('data-screensizeselectedh');
          var screensizeArray = screenlist.split(",");
          
          var smdevice = window.matchMedia( "screen and (max-width: 767.98px)" );
          var mddevice = window.matchMedia( "screen and (min-width: 768px) and (max-width: 991.98px)" );
          var lgdevice = window.matchMedia( "screen and (min-width: 992px) and (max-width: 1199.98px)" );
          var xldevice = window.matchMedia( "(min-width: 1200px)" );

          if (smdevice.matches ){
            if(screensizeArray[0] == '1'){
                screensizeclass[i].style.display= 'block';
            }else{
                screensizeclass[i].style.setProperty("display", "none", "important");
            }
          }else if( mddevice.matches){
            if(screensizeArray[1] == '1'){
                screensizeclass[i].style.display= 'block';
            }else{
                screensizeclass[i].style.setProperty("display", "none", "important");
            }
          }else if(lgdevice.matches){
            if(screensizeArray[2] == '1'){
                screensizeclass[i].style.display= 'block';
            }else{
                screensizeclass[i].style.setProperty("display", "none", "important");
            }
          }else{
            if(screensizeArray[3] == '1'){
                screensizeclass[i].style.display= 'block';
            }else{
                screensizeclass[i].style.setProperty("display", "none", "important");
            }
          }

        }
      }

    }

    function setCookiesmarth(cname, cvalue, exdays) {
      var d = new Date();
      var time = setcookietimestamphsmart(exdays);
      if(exdays < 5){
        d.setTime(d.getTime() + (time * 60 * 1000));
      }else if(exdays > 4 && exdays < 8){
        d.setTime(d.getTime() + (time * 60 * 60 * 1000));
      }else if(exdays > 7){
        d.setTime(d.getTime() + (time * 24 * 60 * 60 * 1000));
      }
      
      var expires = "expires="+d.toUTCString();
      document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }

    function getCookiesmarth(cname) {
      var name = cname + "=";
      var ca = document.cookie.split(';');
      for(var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }

    function setcookietimestamphsmart(time) {
        var realtime='';
        if(time==1){
            realtime=1;
        }else if(time==2){
            realtime=5;
        }else if(time==3){
            realtime=10;
        }else if(time==4){
            realtime=30;
        }else if(time==5){
            realtime=1;
        }else if(time==6){
            realtime=6;
        }else if(time==7){
            realtime=12;
        }else if(time==8){
            realtime=1;
        }else if(time==9){
            realtime=7;
        }else if(time==10){
            realtime=15;
        }else if(time==11){
            realtime=30;
        }
        return realtime;
    }

</script> 


<script src="./Laphet_files/splide.js.download" type="text/javascript"></script>  <div id="shopify-block-AakNoTzR0N0NkN3Z2W__11532412952436166569" class="shopify-block shopify-app-block"><script async="" src="./Laphet_files/loox.1682202239152.js.download"></script>


	<script>var loox_global_hash = '1738674247829';</script><script>var loox_pop_active = true;var loox_pop_display = {"home_page":true,"product_page":true,"cart_page":false,"other_pages":true};</script><script>var loox_floating_widget = {"active":true,"rtl":false,"position":"right","button_text":"Bewertungen","button_bg_color":"FAF1EE","button_text_color":"000000","display_on_home_page":true,"display_on_product_page":true,"display_on_cart_page":true,"display_on_other_pages":true,"hide_on_mobile":false,"orientation":"default"};
</script><script>var visitor_level_referral = {"active":true,"rtl":false,"position":"left","button_text":"Erhalte €3","button_bg_color":"e0ecfc","button_text_color":"000000","display_on_home_page":false,"display_on_product_page":true,"display_on_cart_page":true,"display_on_other_pages":true,"hide_on_mobile":true,"sidebar_visible":true,"orientation":"default"};
</script><style>.loox-reviews-default { max-width: 1200px; margin: 0 auto; }.loox-rating .loox-icon { color:#EBBF20; }
:root { --lxs-rating-icon-color: #EBBF20; }</style>







</div><div id="shopify-block-AWHE2T09FSUhEck9pT__1744161739547163668" class="shopify-block shopify-app-block"><script type="application/javascript">
    window.hextom_ctb_meta = {
        p1: [
            
        ],
        p2: {
            
        },
        p3:null,
        p4:[],
        p5:null,
    };
    
    window.hextom_epb_config = {};
    
</script>

</div><div id="shopify-block-Aa3djTFFaSlV1ZWlBc__7853159783943503583" class="shopify-block shopify-app-block"><!-- this is global JS file that will run on every page -->

</div><div id="shopify-block-AQzZUdjQ3SXVxbUpNb__11348531219507317188" class="shopify-block shopify-app-block"><script>
    let shopifyLiquidValuesApp4Ext =   { 
      product: { 
            handle: null,
            productId: null,
            collections: [
                
            ],
        },
        selected_or_first_available_variant: null,
        cartData: {"note":"","attributes":{"lang":"de","Invoice Language":"de"},"original_total_price":990,"total_price":990,"total_discount":0,"total_weight":406.0,"item_count":2,"items":[{"id":49252148347215,"properties":{"Bundle":"Mix \u0026 Match","Box ID":"1"},"quantity":1,"variant_id":49252148347215,"key":"49252148347215:5137387cc9bca41694333fd666035c52","title":"Teepesto","price":495,"original_price":495,"discounted_price":495,"line_price":495,"original_line_price":495,"total_discount":0,"discounts":[{"amount":0,"title":"Quantity discount %"}],"sku":"TPO1001","grams":206,"vendor":"Tea Eats","taxable":true,"product_id":8796098265423,"product_has_only_default_variant":true,"gift_card":false,"final_price":495,"final_line_price":495,"url":"\/products\/laphet-tee-pesto?variant=49252148347215","featured_image":{"aspect_ratio":1.0,"alt":"Teepesto","height":2500,"url":"\/\/laphet.de\/cdn\/shop\/files\/Teepesto_Mild.png?v=1738400929","width":2500},"image":"\/\/laphet.de\/cdn\/shop\/files\/Teepesto_Mild.png?v=1738400929","handle":"laphet-tee-pesto","requires_shipping":true,"product_type":"Fermented Tea","product_title":"Teepesto","product_description":"Art.Nr. TPO1001\n\nMit milden Noten und subtilen Komplexitäten verleiht diese Sorte Teepesto deinen kulinarischen Kreationen eine einzigartige Note und macht es zu einem Muss für GenießerInnen und TeeliebhaberInnen gleichermaßen.\nSorgfältig im Fermentationsprozess hergestellt, verfügt es über ein sanftes Geschmacksprofil. Es eignet sich hervorragend zum Marinieren, Würzen und Verfeinern von Salaten, Nudeln, Reis, Currys, Brotaufstrichen, Saucen und vielem mehr.\n90g ℮","variant_title":null,"variant_options":["Default Title"],"options_with_values":[{"name":"Title","value":"Default Title"}],"line_level_discount_allocations":[{"amount":0,"discount_application":{"type":"","key":"4bf8d8a4-d6f4-420a-b19d-4483727f38cd","title":"Quantity discount %","description":null,"value":"0.0","created_at":"2025-02-07T08:28:46.532Z","value_type":"percentage","allocation_method":"across","target_selection":"entitled","target_type":"line_item","total_allocated_amount":0}}],"line_level_total_discount":0,"unit_price":5500,"unit_price_measurement":{"measured_type":"weight","quantity_value":"90.0","quantity_unit":"g","reference_value":1,"reference_unit":"kg"}},{"id":49252272505167,"properties":{"Bundle":"Mix \u0026 Match","Box ID":"1"},"quantity":1,"variant_id":49252272505167,"key":"49252272505167:6286aa339919c620abcfe957dcc0f510","title":"Teepesto mit Chili","price":495,"original_price":495,"discounted_price":495,"line_price":495,"original_line_price":495,"total_discount":0,"discounts":[{"amount":0,"title":"Quantity discount %"}],"sku":"TPC1002","grams":200,"vendor":"Tea Eats","taxable":true,"product_id":8799383355727,"product_has_only_default_variant":true,"gift_card":false,"final_price":495,"final_line_price":495,"url":"\/products\/laphet-teepesto-chili?variant=49252272505167","featured_image":{"aspect_ratio":1.0,"alt":"Teepesto mit Chili","height":2500,"url":"\/\/laphet.de\/cdn\/shop\/files\/Teepesto_Chili.png?v=1738401332","width":2500},"image":"\/\/laphet.de\/cdn\/shop\/files\/Teepesto_Chili.png?v=1738401332","handle":"laphet-teepesto-chili","requires_shipping":true,"product_type":"Fermented Tea","product_title":"Teepesto mit Chili","product_description":"Art.Nr. TPC1002\n\nDiese Sorte Teepesto präsentiert einen sauer-scharfen, würzigen Geschmack, ideal für diejenigen, die nach einem extra Kick suchen. Präzise im Verlauf des Fermentationsprozesses kreiert, besticht es durch ein kraftvolles Geschmacksprofil.\nMit seinen scharfen Noten und intensiven Komplexitäten verleiht es deinen kulinarischen Kreationen eine einzigartige Würze und wird zu einem unverzichtbaren Element für Foodies und Tee-EnthusiastInnen gleichermaßen.\n℮ 90g","variant_title":null,"variant_options":["Default Title"],"options_with_values":[{"name":"Title","value":"Default Title"}],"line_level_discount_allocations":[{"amount":0,"discount_application":{"type":"","key":"7b1e6784-500a-48d5-8ae2-536b0d0c159a","title":"Quantity discount %","description":null,"value":"0.0","created_at":"2025-02-07T08:28:46.532Z","value_type":"percentage","allocation_method":"across","target_selection":"entitled","target_type":"line_item","total_allocated_amount":0}}],"line_level_total_discount":0,"unit_price":5500,"unit_price_measurement":{"measured_type":"weight","quantity_value":"90.0","quantity_unit":"g","reference_value":1,"reference_unit":"kg"}}],"requires_shipping":true,"currency":"EUR","items_subtotal_price":990,"cart_level_discount_applications":[],"checkout_charge_amount":990}
    }
    window.shopifyLiquidValuesApp4Ext = shopifyLiquidValuesApp4Ext;
</script>

<script id="easybundles-ext-data" type="application/json" data-json=""></script>

<script>
    //console.log("inside app embed file");
    if (window && !window.easybundles_ext_data) {
      let metafieldData;
      
      // Get the JSON data from the data attribute of the script tag
      const jsonDataElement = document.getElementById('easybundles-ext-data');
      const jsonString = jsonDataElement ? jsonDataElement.getAttribute('data-json') : '';

      try {
        // Parse the JSON string
        metafieldData = JSON.parse(jsonString);
      } catch (error) {
        // Log the error if parsing fails
        console.error("Failed to parse metafield data:", error);
        metafieldData = { errorMsg: "This is not a valid JSON" };
      }

      // If the parsing was successful and no error message exists
      if (metafieldData && !metafieldData?.errorMsg && !metafieldData.isUseAppLevelMetafieldEnabled) {
        window.easybundles_ext_data = metafieldData;
        //console.log("app_data from easybundles app embed", window.easybundles_ext_data);
      }

      // Clear the data-json attribute
      if (jsonDataElement) {
        jsonDataElement.setAttribute('data-json', '');
      }
    }
</script>

</div><div id="shopify-block-AbXlxMFBiZSt3TUI4V__17198465164502963513" class="shopify-block shopify-app-block"><link rel="stylesheet" href="./Laphet_files/ins-theme-app.css" data-insurance-tag="load-theme-app-css">

<script defer="defer" src="./Laphet_files/ins-theme-app.js.download" type="text/javascript"></script>



</div><div id="shopify-block-AaUY3TDlOK3J2UVAyQ__4015264832934714879" class="shopify-block shopify-app-block">
<link rel="stylesheet" href="./Laphet_files/style.css" media="all" onload="this.media=&#39;all&#39;">

<script>
  function createEcomSendMainStyleEle() {
    const ele = document.createElement("link")
    ele.rel = "stylesheet"
    ele.href = 'https://cdn.shopify.com/extensions/6d078ce1-a6e3-41e3-a99c-d8eb22c6b306/ecomsend-popups-27/assets/style.css'
    ele.dataset.ecomsendTag = "load-alternate-css"

    return ele
  }

  if (window.EcomSendApps?.enableAlternateCSSLoading ?? false) {
    document.head.appendChild(createEcomSendMainStyleEle())
  }

  function createEcomSendMainJSEle() {
    const ele = document.createElement("script")
    ele.defer = true
    ele.id = "ecomsend-main-js"
    ele.src = 'https://cdn.shopify.com/extensions/6d078ce1-a6e3-41e3-a99c-d8eb22c6b306/ecomsend-popups-27/assets/ecomsend.js'

    if (null === document.getElementById(ele.id)) {
      document.head.appendChild(ele)
    }
  }
</script>

<style id="ecomsend-custom-style"></style>
<div id="ecomsend-widget"></div>


<!-- BEGIN app snippet: ecomsend-app --><script type="text/javascript">
  //EcomSend APPS COMMON JS CODE
  window.EcomSendApps = window.EcomSendApps || {}

  window.EcomSendApps.design_mode = false
  

  window.EcomSendApps.common = window.EcomSendApps.common || {}
  window.EcomSendApps.common.shop = {
    permanent_domain: 'myanmar-grocery.myshopify.com',
    currency: "EUR",
    money_format: "€{{amount_with_comma_separator}}",
    id: 65436647664,
  }

  
  

  
  window.EcomSendApps.common.template = ''
</script>
<!-- END app snippet -->


<script>window.shopLocale = 'de'</script>
<script defer="defer" src="./Laphet_files/react_react-dom.min.js.download"></script>
<script defer="defer" src="./Laphet_files/mobx_react-custom-roulette.min.js.download" onload="createEcomSendMainJSEle()"></script>



</div><div id="shopify-block-AeXdFL3NiTloxRjRUY__14952540001915115444" class="shopify-block shopify-app-block">




<link id="upcart-stylesheet" rel="stylesheet" href="./Laphet_files/upcart-stylesheet.css" as="style" onload="this.onload=null;this.rel=&#39;stylesheet&#39;">



<script>
  
  function b64DecodeUnicode(str) {
    try {
        return decodeURIComponent(
        atob(str)
            .split('')
            .map(function (c) {
            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            })
            .join(''),
        );
    } catch {
        return str;
    }
  }
</script>


<script>
(function() {
    window.upcartSettings = {};
    window.upcartSettings.upcartSettings = {};
    window.upcartSettings.upcartEditorSettings = {};
    window.upcartSettings.stickyCartButtonEditorSettings = {};

    
    
    

    let val;

    val = b64DecodeUnicode("cmlnaHQ=");
    if (val === '') {
        val = b64DecodeUnicode("cmlnaHQ=");
    }
    window.upcartSettings.upcartSettings.cartPosition = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.disableSticky = val;

    val = b64DecodeUnicode("dHJ1ZQ==");
    if (val === '') {
        val = b64DecodeUnicode("dHJ1ZQ==");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.openOnAddToCart = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.redirectToCart = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.enableCartSkeletons = val;

    val = b64DecodeUnicode("eyJjYXJ0VGl0bGUiOiJDYXJ0IOKAoiB7e2NhcnRfcXVhbnRpdHl9fSIsImNoZWNrb3V0IjoiQ2hlY2tvdXQg4oCiIHt7dG90YWxfcHJpY2V9fSIsImFkZFRleHQiOiJBZGQiLCJlbXB0eUNhcnQiOiJZb3VyIGNhcnQgaXMgZW1wdHkiLCJkaXNjb3VudFNhdmluZ3MiOiJTYXZlIiwiY29udGludWVTaG9wcGluZyI6Ik9yIGNvbnRpbnVlIHNob3BwaW5nIiwidG90YWxTYXZpbmdzIjoiRGlzY291bnRzIn0=");
    if (val === '') {
        val = b64DecodeUnicode("eyJjYXJ0VGl0bGUiOiJDYXJ0IOKAoiB7e2NhcnRfcXVhbnRpdHl9fSIsImNoZWNrb3V0IjoiQ2hlY2tvdXQg4oCiIHt7dG90YWxfcHJpY2V9fSIsImFkZFRleHQiOiJBZGQiLCJlbXB0eUNhcnQiOiJZb3VyIGNhcnQgaXMgZW1wdHkiLCJkaXNjb3VudFNhdmluZ3MiOiJTYXZlIiwiY29udGludWVTaG9wcGluZyI6Ik9yIGNvbnRpbnVlIHNob3BwaW5nIiwidG90YWxTYXZpbmdzIjoiRGlzY291bnRzIiwic3VidG90YWwiOiJTdWJ0b3RhbCIsImJ1bmRsZUhpZGVTaW5ndWxhckl0ZW1UZXh0IjoiSGlkZSAxIGl0ZW0iLCJidW5kbGVTaG93U2luZ3VsYXJJdGVtVGV4dCI6IlNob3cgMSBpdGVtIiwiYnVuZGxlSGlkZU11bHRpcGxlSXRlbXNUZXh0IjoiSGlkZSB7TlVNQkVSX09GX0lURU1TfSBpdGVtcyIsImJ1bmRsZVNob3dNdWx0aXBsZUl0ZW1zVGV4dCI6IlNob3cge05VTUJFUl9PRl9JVEVNU30gaXRlbXMifQ==");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.translations = val;

    val = b64DecodeUnicode("eyJhYm92ZUZvb3RlciI6IiIsImFib3ZlSGVhZGVyIjoiIiwiYmVsb3dIZWFkZXIiOiIiLCJiZWxvd0NoZWNrb3V0QnV0dG9uIjoiIiwib25FbXB0eUNhcnQiOiIifQ==");
    if (val === '') {
        val = b64DecodeUnicode("eyJhYm92ZUZvb3RlciI6IiIsImFib3ZlSGVhZGVyIjoiIiwiYmVsb3dIZWFkZXIiOiIiLCJiZXR3ZWVuTGluZUl0ZW1zIjoiIiwiYWJvdmVDaGVja291dEJ1dHRvbiI6IiIsImJlbG93Q2hlY2tvdXRCdXR0b24iOiIiLCJib3R0b21PZkNhcnQiOiIiLCJvbkVtcHR5Q2FydCI6IiIsInNjcmlwdHNCZWZvcmVMb2FkIjoiIn0=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.htmlFields = val;

    val = b64DecodeUnicode("dHJ1ZQ==");
    if (val === '') {
        val = b64DecodeUnicode("dHJ1ZQ==");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.automaticDiscount = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.basePriceForDiscount = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.hideSingleUnderscoredProperties = val;

    val = b64DecodeUnicode("dHJ1ZQ==");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.showContinueShoppingButton = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.ajaxRaceConditionPrevention = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.htmlFieldForceReRender = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.skipGoogleFonts = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.overrideScrollLocking = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("MTAw");
    }
    window.upcartSettings.upcartSettings.trafficAllocationPercent = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.renderCartInShadowDom = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.cartEventTracking = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("bGluZQ==");
    }
    window.upcartSettings.upcartSettings.updateItemIdentifier = val;

    val = b64DecodeUnicode("LnVwY2FydC1jYXJ0IC5zbGlkZXINCnsNCiAgICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7DQp9");
    if (val === '') {
        val = b64DecodeUnicode("Knt9");
    }
    window.upcartSettings.upcartSettings.customCSS = val;

    val = b64DecodeUnicode("Knt9");
    if (val === '') {
        val = b64DecodeUnicode("Knt9");
    }
    window.upcartSettings.upcartSettings.customStickyCartCSS = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.integrationZapietEnabled = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartSettings.integrationYmqEnabled = val;

    val = b64DecodeUnicode("dHJ1ZQ==");
    if (val === '') {
        val = b64DecodeUnicode("dHJ1ZQ==");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.cartIsEnabled = val;

    val = b64DecodeUnicode("eyJmaWVsZHMiOnsiY29tcGFyZUF0UHJpY2UiOnRydWUsImluaGVyaXRGb250cyI6dHJ1ZSwiYmFja2dyb3VuZENvbG9yIjoiI0ZGRkZGRiIsImNhcnRBY2NlbnRDb2xvciI6IiNmNmY2ZjciLCJidXR0b25Db2xvciI6IiNERkVERjkiLCJidXR0b25UZXh0Q29sb3IiOiIjMDMwMzAzIiwiYnV0dG9uVGV4dEhvdmVyQ29sb3IiOiIjMzA2NDI2IiwiY2FydFRleHRDb2xvciI6IiMwMDAwMDAifX0=");
    if (val === '') {
        val = b64DecodeUnicode("eyJmaWVsZHMiOnsiY29tcGFyZUF0UHJpY2UiOnRydWUsImluaGVyaXRGb250cyI6dHJ1ZSwiYmFja2dyb3VuZENvbG9yIjoiI0ZGRkZGRiIsImNhcnRBY2NlbnRDb2xvciI6IiNmNmY2ZjciLCJidXR0b25Db2xvciI6IiMwMDAwMDAiLCJidXR0b25UZXh0Q29sb3IiOiIjRkZGRkZGIiwiYnV0dG9uVGV4dEhvdmVyQ29sb3IiOiIjZTllOWU5IiwiY2FydFRleHRDb2xvciI6IiMwMDAwMDAiLCJidXR0b25Sb3VuZGVkQ29ybmVyc1NpemUiOjAsImVuYWJsZVN1YnRvdGFsTGluZSI6ZmFsc2UsInN1YnRvdGFsVGV4dENvbG9yIjoiIzAwMDAwMCIsImNhcnRXaWR0aCI6eyJkZXNrdG9wIjoiYmFzZSIsIm1vYmlsZSI6ImZ1bGwifX19");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.settingsModule = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("IzJlYTgxOA==");
    }
    window.upcartSettings.upcartEditorSettings.designSettingsCartSavingsTextColor = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("YmFzZQ==");
    }
    window.upcartSettings.upcartEditorSettings.headerBorderBottom = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("YmFzZQ==");
    }
    window.upcartSettings.upcartEditorSettings.headerHeight = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("I2ZmZmZmZjAw");
    }
    window.upcartSettings.upcartEditorSettings.headerBackgroundColor = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("eyJ0eXBlIjoiaW5oZXJpdEhlYWRpbmdTdHlsZXMiLCJoZWFkaW5nTGV2ZWwiOiJoMiJ9");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.headerTitleContent = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("c2lkZQ==");
    }
    window.upcartSettings.upcartEditorSettings.headerTitleAlignment = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("dGl0bGVfX2Nsb3NlQnV0dG9u");
    }
    window.upcartSettings.upcartEditorSettings.headerElementArrangement = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("eyJiYXNlIjoiIzAwMDAwMDBjIiwib25Ib3ZlciI6IiMwMDAwMDAxNCJ9");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.headerCloseButtonBackgroundColor = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("eyJiYXNlIjoiIzYzNzM4MSIsIm9uSG92ZXIiOm51bGx9");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.headerCloseButtonIconColor = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("c21hbGw=");
    }
    window.upcartSettings.upcartEditorSettings.headerCloseButtonIconSize = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("YmFzZQ==");
    }
    window.upcartSettings.upcartEditorSettings.headerCloseButtonIconStrokeWidth = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("bm9uZQ==");
    }
    window.upcartSettings.upcartEditorSettings.headerCloseButtonBorderWidth = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("eyJiYXNlIjoiIzAwMDAwMCIsIm9uSG92ZXIiOm51bGx9");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.headerCloseButtonBorderColor = val;

    val = b64DecodeUnicode("dHJ1ZQ==");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.announcementModule = val;

    val = b64DecodeUnicode("PHA+RGVpbmUgUHJvZHVrdGUgc2luZCBmw7xyIHtUSU1FUn0gIHJlc2VydmllcnQuPC9wPgo=");
    if (val === '') {
        val = b64DecodeUnicode("PHA+WW91ciBwcm9kdWN0cyBhcmUgcmVzZXJ2ZWQgZm9yIDxiPntUSU1FUn08L2I+IG1pbnV0ZXMhPC9wPg==");
    }
    window.upcartSettings.upcartEditorSettings.announcementEditor = val;

    val = b64DecodeUnicode("I2VkZDhkMA==");
    if (val === '') {
        val = b64DecodeUnicode("I0NERTBFMA==");
    }
    window.upcartSettings.upcartEditorSettings.announcementBackgroundColor = val;

    val = b64DecodeUnicode("dG9w");
    if (val === '') {
        val = b64DecodeUnicode("dG9w");
    }
    window.upcartSettings.upcartEditorSettings.announcementModulePosition = val;

    val = b64DecodeUnicode("I2VkZDhkMA==");
    if (val === '') {
        val = b64DecodeUnicode("I0M1RTZGRA==");
    }
    window.upcartSettings.upcartEditorSettings.announcementBorderColor = val;

    val = b64DecodeUnicode("MzAw");
    if (val === '') {
        val = b64DecodeUnicode("MDA6MDA=");
    }
    window.upcartSettings.upcartEditorSettings.announcementTimer = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("YmFzZQ==");
    }
    window.upcartSettings.upcartEditorSettings.announcementHeight = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("MTU=");
    }
    window.upcartSettings.upcartEditorSettings.announcementTextFontSizePx = val;

    val = b64DecodeUnicode("dHJ1ZQ==");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.rewardsModule = val;

    val = b64DecodeUnicode("I0UyRTJFMg==");
    if (val === '') {
        val = b64DecodeUnicode("I0UyRTJFMg==");
    }
    window.upcartSettings.upcartEditorSettings.rewardsBarBackgroundColor = val;

    val = b64DecodeUnicode("IzkzRDNGRg==");
    if (val === '') {
        val = b64DecodeUnicode("IzkzRDNGRg==");
    }
    window.upcartSettings.upcartEditorSettings.rewardsBarForegroundColor = val;

    val = b64DecodeUnicode("Y2FydFRvdGFs");
    if (val === '') {
        val = b64DecodeUnicode("Y2FydFRvdGFs");
    }
    window.upcartSettings.upcartEditorSettings.rewardsBasis = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.rewardsProductLinkVisible = val;

    val = b64DecodeUnicode("cHJvZHVjdHNPck9yZGVy");
    if (val === '') {
        val = b64DecodeUnicode("cHJvZHVjdHNPck9yZGVy");
    }
    window.upcartSettings.upcartEditorSettings.rewardsTargetType = val;

    val = b64DecodeUnicode("MTI1");
    if (val === '') {
        val = b64DecodeUnicode("MTI1");
    }
    window.upcartSettings.upcartEditorSettings.rewardsMinAmount = val;

    val = b64DecodeUnicode("PHA+WW914oCZcmUgPGI+e0FNT1VOVH08L2I+IGF3YXkgZnJvbSBmcmVlIHNoaXBwaW5nITwvcD4=");
    if (val === '') {
        val = b64DecodeUnicode("PHA+WW914oCZcmUgPGI+e0FNT1VOVH08L2I+IGF3YXkgZnJvbSBmcmVlIHNoaXBwaW5nITwvcD4=");
    }
    window.upcartSettings.upcartEditorSettings.rewardsEditor = val;

    val = b64DecodeUnicode("PHA+RnJlZSBzaGlwcGluZyB1bmxvY2tlZCE8L3A+Cg==");
    if (val === '') {
        val = b64DecodeUnicode("RnJlZSBzaGlwcGluZyB1bmxvY2tlZCE=");
    }
    window.upcartSettings.upcartEditorSettings.rewardsEditorAfterText = val;

    val = b64DecodeUnicode("PHA+WW914oCZcmUgPGI+e0NPVU5UfTwvYj4gcHJvZHVjdHMgYXdheSBmcm9tIGZyZWUgc2hpcHBpbmchPC9wPg==");
    if (val === '') {
        val = b64DecodeUnicode("PHA+WW914oCZcmUgPGI+e0NPVU5UfTwvYj4gcHJvZHVjdHMgYXdheSBmcm9tIGZyZWUgc2hpcHBpbmchPC9wPg==");
    }
    window.upcartSettings.upcartEditorSettings.rewardsEditorForItemCount = val;

    val = b64DecodeUnicode("NQ==");
    if (val === '') {
        val = b64DecodeUnicode("NQ==");
    }
    window.upcartSettings.upcartEditorSettings.rewardsItemCount = val;

    val = b64DecodeUnicode("eyJ0aWVycyI6W3sidGFyZ2V0VHlwZSI6InNoaXBwaW5nIiwibWluQW1vdW50IjoiNDkuMDAiLCJpdGVtQ291bnQiOiI1IiwidGV4dEJlZm9yZVJlYWNoaW5nRm9yQ2FydFRvdGFsIjoiPHA+WW914oCZcmUgPGI+e0FNT1VOVH08L2I+IGF3YXkgZnJvbSBmcmVlIHNoaXBwaW5nITwvcD4iLCJ0ZXh0QmVmb3JlUmVhY2hpbmdGb3JJdGVtQ291bnQiOiI8cD5Zb3XigJlyZSA8Yj57Q09VTlR9PC9iPiBwcm9kdWN0cyBhd2F5IGZyb20gZnJlZSBzaGlwcGluZyE8L3A+IiwicmV3YXJkRGVzY3JpcHRpb24iOiJGcmVlIFNoaXBwaW5nIiwicHJvZHVjdHMiOltdfV19");
    if (val === '') {
        val = b64DecodeUnicode("eyJ0aWVycyI6W10sImdlb0xvY2F0aW9uUHJpY2luZyI6W10sInJld2FyZHNBdXRvQ29udmVydEN1cnJlbmN5IjpmYWxzZSwicmV3YXJkc0dlb0xvY2F0aW9uRW5hYmxlZCI6ZmFsc2UsInVzZVByZURpc2NvdW50ZWRUb3RhbCI6ZmFsc2V9");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.rewardsTiers = val;

    val = b64DecodeUnicode("W10=");
    if (val === '') {
        val = b64DecodeUnicode("W10=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.rewardsTierProducts = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.rewardsShowIconWithSingleTier = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.rewardsShowOnEmptyCart = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.recommendationsModule = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("QWRkIHlvdXIgZmF2b3VyaXRlIGl0ZW1zIHRvIHlvdXIgY2FydC4=");
    }
    window.upcartSettings.upcartEditorSettings.recommendationsHeaderText = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.recommendationsEnableShopNowButton = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("U2hvcCBOb3c=");
    }
    window.upcartSettings.upcartEditorSettings.recommendationsShopNowButtonText = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("L2NvbGxlY3Rpb25z");
    }
    window.upcartSettings.upcartEditorSettings.recommendationsShopNowButtonURL = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("W3siaWQiOiIiLCJyZWNvbW1lbmRhdGlvbiI6bnVsbCwidiI6MX1d");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.recommendationItems = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("WW91IG1heSBhbHNvIGxpa2U=");
    }
    window.upcartSettings.upcartEditorSettings.recommendationsProductRecommendationsHeaderText = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("Mw==");
    }
    window.upcartSettings.upcartEditorSettings.recommendationsMaxRecommendationsToShow = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("dmVydGljYWw=");
    }
    window.upcartSettings.upcartEditorSettings.recommendationsDirection = val;

    val = b64DecodeUnicode("dHJ1ZQ==");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.upsellsModule = val;

    val = b64DecodeUnicode("aG9yaXpvbnRhbA==");
    if (val === '') {
        val = b64DecodeUnicode("aG9yaXpvbnRhbA==");
    }
    window.upcartSettings.upcartEditorSettings.upsellsDirection = val;

    val = b64DecodeUnicode("PHA+WW91J2xsIGxvdmUgdGhlc2U8L3A+Cg==");
    if (val === '') {
        val = b64DecodeUnicode("WW91J2xsIGxvdmUgdGhlc2U=");
    }
    window.upcartSettings.upcartEditorSettings.upsellsTitle = val;

    val = b64DecodeUnicode("MTA=");
    if (val === '') {
        val = b64DecodeUnicode("MTA=");
    }
    window.upcartSettings.upcartEditorSettings.maximumUpsellsToShow = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.upsellsShouldLimit = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.upsellsTrigger = val;

    val = b64DecodeUnicode("dHJ1ZQ==");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.showUpsellItemsAlreadyInCart = val;

    val = b64DecodeUnicode("W3siaWQiOiIiLCJ2IjoyLCJ0cmlnZ2VyIjp7Im9uIjoic3BlY2lmaWMiLCJzZWxlY3Rpb24iOnsidHlwZSI6IlByb2R1Y3QiLCJwcm9kdWN0cyI6W3siaWQiOiJnaWQ6Ly9zaG9waWZ5L1Byb2R1Y3QvODQ5NzE0NTgzOTk1MSIsInNob3J0SWQiOiI4NDk3MTQ1ODM5OTUxIiwidmFyaWFudHMiOlsiNDY2Mjc4MTk0NTQ3OTkiXSwiaGFuZGxlIjoiZmVybWVudGVkLXRlYS1sZWF2ZXMtY2hpbGkiLCJ0aXRsZSI6IkZlcm1lbnRpZXJ0ZSBUZWVibMOkdHRlciAtIENoaWxpIiwiaW1hZ2UiOiJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMDY1NC8zNjY0Lzc2NjQvZmlsZXMvMV83MmRiZjE0Ny04YjViLTQyMDktODMyNi1jYWNlNWEyNGQyNmEucG5nP3Y9MTY5MDMwNDYwOSJ9LHsiaWQiOiJnaWQ6Ly9zaG9waWZ5L1Byb2R1Y3QvODQ5NzEzNDk2MDk3NSIsInNob3J0SWQiOiI4NDk3MTM0OTYwOTc1IiwidmFyaWFudHMiOlsiNDY2Mjc3NDEyNzAzNTEiXSwiaGFuZGxlIjoiZmVybWVudGVkLXRlYS1sZWF2ZXMtbWlsZCIsInRpdGxlIjoiRmVybWVudGllcnRlIFRlZWJsw6R0dGVyIC0gTWlsZCIsImltYWdlIjoiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzA2NTQvMzY2NC83NjY0L2ZpbGVzLzJfZmNhYTJiNDctODFhMy00ZTk3LWFiOTMtMzc3ZDRhYzYxNjJiLnBuZz92PTE2OTAzMDQ1OTYifSx7ImlkIjoiZ2lkOi8vc2hvcGlmeS9Qcm9kdWN0Lzg2MTM4NTYyMTUzNzUiLCJzaG9ydElkIjoiODYxMzg1NjIxNTM3NSIsInZhcmlhbnRzIjpbIjQ2OTU4MDUxMjMwMDMxIl0sImhhbmRsZSI6ImZlcm1lbnRpZXJ0ZXItaW5nd2VyIiwidGl0bGUiOiJGZXJtZW50aWVydGVyIEluZ3dlciIsImltYWdlIjoiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzA2NTQvMzY2NC83NjY0L2ZpbGVzLzRfNGZjZTBhZmUtNTI5Zi00ZGFlLWI3NzQtMjhhMjUxNDg1NmUwLnBuZz92PTE2OTAzMDQ2MzMifSx7ImlkIjoiZ2lkOi8vc2hvcGlmeS9Qcm9kdWN0Lzg2MTM4NzI1NjY2MDciLCJzaG9ydElkIjoiODYxMzg3MjU2NjYwNyIsInZhcmlhbnRzIjpbIjQ2OTU4MDg2OTE0MzgzIl0sImhhbmRsZSI6ImZlcm1lbnRpZXJ0ZS10ZWVibGF0dGVyLWNob3BwZWQiLCJ0aXRsZSI6IkZlcm1lbnRpZXJ0ZSBUZWVibMOkdHRlciAtIENob3BwZWQiLCJpbWFnZSI6Imh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8wNjU0LzM2NjQvNzY2NC9maWxlcy8zXzM0N2U2MmFhLTUzOGYtNGZkZS05NmI4LTZkM2NmYzFiYWIwNy5wbmc/dj0xNjkwMzA0NjIzIn1dfX0sInVwc2VsbCI6eyJ0eXBlIjoiUHJvZHVjdCIsInByb2R1Y3RzIjpbeyJpZCI6ImdpZDovL3Nob3BpZnkvUHJvZHVjdC84NjE1MDk1MjA2MjIzIiwic2hvcnRJZCI6Ijg2MTUwOTUyMDYyMjMiLCJ2YXJpYW50cyI6WyI0Njk2MTYzNDU0MTkwMyJdLCJoYW5kbGUiOiJnZWJyYXRlbmUtYm9obmVuLW51c3NlLTEiLCJ0aXRsZSI6IkdlYnJhdGVuZSBCb2huZW4gJiBOw7xzc2UifSx7ImlkIjoiZ2lkOi8vc2hvcGlmeS9Qcm9kdWN0LzgzNzI5NzQzNTQ3NjciLCJzaG9ydElkIjoiODM3Mjk3NDM1NDc2NyIsInZhcmlhbnRzIjpbIjQ2NTIxNzQ2ODUwMTI3Il0sImhhbmRsZSI6InRoZXJtb2ZsYXNjaGUtbWl0LXRlZWZpbHRlciIsInRpdGxlIjoiRmxhc2sgd2l0aCBUZWEgSW5mdXNlciIsImltYWdlIjoiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzA2NTQvMzY2NC83NjY0L3Byb2R1Y3RzL1dodGVGbGFzazEuanBnP3Y9MTY5MDA1NzY5OSJ9LHsiaWQiOiJnaWQ6Ly9zaG9waWZ5L1Byb2R1Y3QvODM3MzE0MTk5NTg1NSIsInNob3J0SWQiOiI4MzczMTQxOTk1ODU1IiwidmFyaWFudHMiOlsiNDY1MjIyNDY5MjI1NzUiXSwiaGFuZGxlIjoidGhlcm1vZmxhc2NoZS1taXQtdGVlZmlsdGVyLW5hdnktYmxhdSIsInRpdGxlIjoiVGhlcm1vZmxhc2NoZSBtaXQgVGVlc2llYiAoQmVpZ2UpIiwiaW1hZ2UiOiJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMDY1NC8zNjY0Lzc2NjQvcHJvZHVjdHMvUGhvdG9Sb29tXzIwMjMwNDEzXzEwNTIzNS5qcGc/dj0xNjkwMDU3NzE2In1dfX1d");
    if (val === '') {
        val = b64DecodeUnicode("W3siX2lkIjoiIiwidHJpZ2dlciI6bnVsbCwidXBzZWxsIjpudWxsfV0=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.upsellsItems = val;

    val = b64DecodeUnicode("Ym90dG9t");
    if (val === '') {
        val = b64DecodeUnicode("Ym90dG9t");
    }
    window.upcartSettings.upcartEditorSettings.upsellsModulePosition = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.recommendedUpsells = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.smartVariantMatching = val;

    val = b64DecodeUnicode("cmVsYXRlZA==");
    if (val === '') {
        val = b64DecodeUnicode("cmVsYXRlZA==");
    }
    window.upcartSettings.upcartEditorSettings.upsellRecommendationIntent = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.addonsModule = val;

    val = b64DecodeUnicode("eyJzaGlwcGluZ1Byb3RlY3Rpb24iOnsiYWN0aXZlIjpmYWxzZSwicHJvZHVjdEhhbmRsZSI6bnVsbCwiZGVmYXVsdEJlaGF2aW9yIjpmYWxzZX0sInByb2R1Y3RBZGRvbiI6eyJkZWZhdWx0QmVoYXZpb3IiOmZhbHNlLCJhY3RpdmUiOnRydWUsInByb2R1Y3RIYW5kbGUiOiJnZWJyYXRlbmUtYm9obmVuLW51c3NlLTEiLCJwcm9kdWN0SWQiOiJnaWQ6Ly9zaG9waWZ5L1Byb2R1Y3QvODYxNTA5NTIwNjIyMyIsInByb2R1Y3QiOnsiYm9keUh0bWwiOiJHw7ZubmVuIFNpZSBzaWNoIGVpbmUgR2VzY2htYWNrc2V4cGxvc2lvbiBtaXQgdW5zZXJlbiBnZWJhY2tlbmVuIEJvaG5lbiAmIE7DvHNzLi4uIiwicHJpY2UiOiI4LjkwIiwiY29tcGFyZUF0UHJpY2UiOm51bGwsImlkIjoiZ2lkOi8vc2hvcGlmeS9Qcm9kdWN0Lzg2MTUwOTUyMDYyMjMiLCJzaG9ydElkIjoiODYxNTA5NTIwNjIyMyIsImltYWdlIjoiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzA2NTQvMzY2NC83NjY0L2ZpbGVzL1Byb2R1Y3RzUGhvdG9zLnBuZz92PTE2OTAzMDU2NzYiLCJ0aXRsZSI6IkdlYnJhdGVuZSBCb2huZW4gJiBOw7xzc2UiLCJoYW5kbGUiOiJnZWJyYXRlbmUtYm9obmVuLW51c3NlLTEiLCJ2YXJpYW50cyI6bnVsbH19fQ==");
    if (val === '') {
        val = b64DecodeUnicode("eyJzaGlwcGluZ1Byb3RlY3Rpb24iOnsiYWN0aXZlIjpmYWxzZSwicHJvZHVjdEhhbmRsZSI6bnVsbCwiZGVmYXVsdEJlaGF2aW9yIjpmYWxzZSwidGllcnMiOltdLCJ1c2VQcmVEaXNjb3VudGVkVG90YWwiOmZhbHNlfSwicHJvZHVjdEFkZG9uIjp7ImFjdGl2ZSI6ZmFsc2UsInByb2R1Y3RIYW5kbGUiOm51bGwsInByb2R1Y3QiOm51bGwsImRlZmF1bHRCZWhhdmlvciI6ZmFsc2V9fQ==");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.addonsField = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.addonsShouldBeCounted = val;

    val = b64DecodeUnicode("dHJ1ZQ==");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.notesModule = val;

    val = b64DecodeUnicode("PHA+QmVzdGVsbG5vdGl6IGhpbnp1ZsO8Z2VuPC9wPgo=");
    if (val === '') {
        val = b64DecodeUnicode("PHA+QWRkIHNwZWNpYWwgaW5zdHJ1Y3Rpb25zPC9wPg==");
    }
    window.upcartSettings.upcartEditorSettings.notesTitle = val;

    val = b64DecodeUnicode("R2liIGhpZXIgYmVzb25kZXJlIEFud2Vpc3VuZ2VuIGVpbg==");
    if (val === '') {
        val = b64DecodeUnicode("U3BlY2lhbCBpbnN0cnVjdGlvbnMgZm9yIHlvdXIgb3JkZXI=");
    }
    window.upcartSettings.upcartEditorSettings.notesPlaceholder = val;

    val = b64DecodeUnicode("Ym90dG9tT2ZDYXJ0");
    if (val === '') {
        val = b64DecodeUnicode("Ym90dG9tT2ZDYXJ0");
    }
    window.upcartSettings.upcartEditorSettings.notesPlacement = val;

    val = b64DecodeUnicode("dHJ1ZQ==");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.trustBadgesModule = val;

    val = b64DecodeUnicode("eyJ1cmwiOiJodHRwczovL3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vdXBjYXJ0LXB1YmxpYy9wYXltZW50LWljb25zLnBuZyIsInBvc2l0aW9uIjoiYm90dG9tIn0=");
    if (val === '') {
        val = b64DecodeUnicode("eyJ1cmwiOiIiLCJwb3NpdGlvbiI6ImJvdHRvbSJ9");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.trustBadges = val;

    val = b64DecodeUnicode("dHJ1ZQ==");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.discountCodeModule = val;

    val = b64DecodeUnicode("UmFiYXR0Y29kZSA=");
    if (val === '') {
        val = b64DecodeUnicode("RGlzY291bnQgY29kZQ==");
    }
    window.upcartSettings.upcartEditorSettings.discountCodePlaceholder = val;

    val = b64DecodeUnicode("ZWlubMO2c2Vu");
    if (val === '') {
        val = b64DecodeUnicode("QXBwbHk=");
    }
    window.upcartSettings.upcartEditorSettings.discountCodeButtonText = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.subscriptionUpgradesModule = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.subscriptionUpgradesPreventDowngrades = val;

    val = b64DecodeUnicode("VXBncmFkZSB0byB7e3NlbGxpbmdfcGxhbl9ncm91cF9uYW1lfX0=");
    if (val === '') {
        val = b64DecodeUnicode("VXBncmFkZSB0byB7e3NlbGxpbmdfcGxhbl9ncm91cF9uYW1lfX0=");
    }
    window.upcartSettings.upcartEditorSettings.subscriptionUpgradesButtonText = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.subscriptionUpgradesOptionsTextOverride = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("e3tzZWxsaW5nX3BsYW5fZ3JvdXBfbmFtZX19IC8ge3tzZWxsaW5nX3BsYW5fbmFtZX19");
    }
    window.upcartSettings.upcartEditorSettings.subscriptionUpgradesOptionsText = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("T25lLXRpbWUgcHVyY2hhc2U=");
    }
    window.upcartSettings.upcartEditorSettings.subscriptionUpgradesOneTimePurchaseText = val;

    val = b64DecodeUnicode("dHJ1ZQ==");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.expressPayModule = val;

    val = b64DecodeUnicode("WyJhcHBsZVBheSJd");
    if (val === '') {
        val = b64DecodeUnicode("W10=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.expressPayEnabledGateways = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("MQ==");
    }
    window.upcartSettings.upcartEditorSettings.expressPayVersion = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("eyJmaWVsZHMiOnsic2hvcGlmeUFjY2VsZXJhdGVkQ2hlY2tvdXRCdXR0b25CbG9ja1NpemUiOjQyLCJzaG9waWZ5QWNjZWxlcmF0ZWRDaGVja291dEJ1dHRvbklubGluZVNpemUiOjQyLCJzaG9waWZ5QWNjZWxlcmF0ZWRDaGVja291dElubGluZUFsaWdubWVudCI6ImNlbnRlciIsInNob3BpZnlBY2NlbGVyYXRlZENoZWNrb3V0Um93R2FwIjo4fX0=");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.expressPayAcceleratedCheckoutStyles = val;

    val = b64DecodeUnicode("");
    if (val === '') {
        val = b64DecodeUnicode("dHJ1ZQ==");
    }
    val = JSON.parse(val);
    window.upcartSettings.upcartEditorSettings.expressPayHideBuyerConsent = val;

    val = b64DecodeUnicode("ZmFsc2U=");
    if (val === '') {
        val = b64DecodeUnicode("ZmFsc2U=");
    }
    val = JSON.parse(val);
    window.upcartSettings.stickyCartButtonEditorSettings.stickyCartButtonIsEnabled = val;

    val = b64DecodeUnicode("IzAwMDAwMA==");
    if (val === '') {
        val = b64DecodeUnicode("IzAwMDAwMA==");
    }
    window.upcartSettings.stickyCartButtonEditorSettings.backgroundColor = val;

    val = b64DecodeUnicode("YWxsRGV2aWNlcw==");
    if (val === '') {
        val = b64DecodeUnicode("YWxsRGV2aWNlcw==");
    }
    window.upcartSettings.stickyCartButtonEditorSettings.deviceSettings = val;

    val = b64DecodeUnicode("I2ZmZmZmZg==");
    if (val === '') {
        val = b64DecodeUnicode("I2ZmZmZmZg==");
    }
    window.upcartSettings.stickyCartButtonEditorSettings.iconColor = val;

    val = b64DecodeUnicode("c3F1YXJlQmFn");
    if (val === '') {
        val = b64DecodeUnicode("c3F1YXJlQmFn");
    }
    window.upcartSettings.stickyCartButtonEditorSettings.iconStyle = val;

    val = b64DecodeUnicode("I2U0MjYyNg==");
    if (val === '') {
        val = b64DecodeUnicode("I2U0MjYyNg==");
    }
    window.upcartSettings.stickyCartButtonEditorSettings.quantityBackgroundColor = val;

    val = b64DecodeUnicode("I2ZmZmZmZg==");
    if (val === '') {
        val = b64DecodeUnicode("I2ZmZmZmZg==");
    }
    window.upcartSettings.stickyCartButtonEditorSettings.quantityTextColor = val;

    val = b64DecodeUnicode("Ym90dG9tUmlnaHQ=");
    if (val === '') {
        val = b64DecodeUnicode("Ym90dG9tUmlnaHQ=");
    }
    window.upcartSettings.stickyCartButtonEditorSettings.stickyCartPosition = val;

})();
</script>



  
  <div id="upcart-additional-checkout-buttons" style="position: absolute !important; margin-left: -9999px !important; display: block !important;" class="additional-checkout-buttons">
    
    <div class="dynamic-checkout__content" id="dynamic-checkout-cart" data-shopify="dynamic-checkout-cart"></div>
    <div class="upcart-additional-checkout-buttons-svgs">

      

      

      

      
        <!-- BEGIN app snippet: ApplePayLogo --><svg class="upcart-express-pay-button-apple-pay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 60" style="
    width: 60px;
    height: 36px;
  ">
  <g fill="none" fillrule="evenodd">
    <path fill="#FFF" d="M33.886 27.958c.037 3.825 3.5 5.097 3.538 5.113-.03.09-.553 1.814-1.824 3.595-1.099 1.54-2.24 3.073-4.035 3.105-1.765.032-2.332-1.003-4.35-1.003s-2.648.971-4.319 1.035c-1.733.063-3.054-1.666-4.161-3.2-2.264-3.137-3.994-8.866-1.67-12.732 1.153-1.92 3.215-3.137 5.453-3.168 1.702-.031 3.31 1.098 4.35 1.098 1.04 0 2.994-1.358 5.047-1.158.859.034 3.271.332 4.82 2.506-.125.075-2.88 1.612-2.849 4.81m-3.317-9.392c.92-1.069 1.54-2.556 1.371-4.035-1.327.05-2.931.847-3.882 1.915-.854.945-1.6 2.458-1.399 3.91 1.48.109 2.99-.721 3.91-1.79m13.323-1.83a41.71 41.71 0 0 1 2.257-.306 24.794 24.794 0 0 1 2.716-.136c1.411 0 2.628.164 3.65.494 1.023.33 1.863.801 2.521 1.415a5.812 5.812 0 0 1 1.323 1.943c.317.75.475 1.615.475 2.592 0 1.182-.217 2.217-.652 3.104a6.463 6.463 0 0 1-1.78 2.233c-.753.602-1.646 1.05-2.68 1.347-1.036.295-2.164.443-3.387.443-1.105 0-2.033-.08-2.785-.239v9.822h-1.658V16.738zm1.658 11.46c.4.112.846.192 1.34.237.494.045 1.022.068 1.586.068 2.116 0 3.756-.478 4.92-1.432 1.164-.955 1.746-2.353 1.746-4.194 0-.887-.153-1.66-.458-2.32a4.168 4.168 0 0 0-1.305-1.62c-.564-.42-1.234-.738-2.01-.955-.777-.216-1.635-.324-2.576-.324-.752 0-1.399.029-1.94.086-.54.057-.975.12-1.304.187v10.266zm24.47 7.365c0 .659.011 1.319.034 1.978.024.659.094 1.295.212 1.909h-1.552l-.246-2.319h-.072a5.809 5.809 0 0 1-.81.955 6.168 6.168 0 0 1-2.627 1.5 6.573 6.573 0 0 1-1.817.239c-.822 0-1.546-.132-2.17-.392-.623-.262-1.134-.603-1.534-1.023a4.14 4.14 0 0 1-.898-1.45 4.72 4.72 0 0 1-.3-1.636c0-1.933.84-3.421 2.521-4.468 1.682-1.046 4.215-1.545 7.602-1.5v-.444c0-.432-.042-.927-.124-1.484a4.553 4.553 0 0 0-.547-1.585c-.282-.5-.705-.92-1.27-1.26-.563-.342-1.328-.513-2.292-.513-.729 0-1.451.108-2.169.324a7.438 7.438 0 0 0-1.956.904l-.53-1.194a7.946 7.946 0 0 1 2.327-1.073 9.569 9.569 0 0 1 2.505-.324c1.175 0 2.134.193 2.874.58.74.386 1.323.886 1.746 1.5.423.613.712 1.3.864 2.063.152.762.23 1.518.23 2.267v6.446h-.001zm-1.658-4.877c-.894-.023-1.83.011-2.805.102-.975.09-1.875.29-2.697.597-.824.307-1.505.756-2.045 1.347-.541.592-.812 1.375-.812 2.353 0 1.159.341 2.012 1.023 2.557.682.546 1.445.82 2.292.82.682 0 1.293-.091 1.834-.274a4.708 4.708 0 0 0 2.415-1.773c.272-.387.477-.784.619-1.194.117-.455.177-.785.177-.99v-3.545zm4.9-7.605 4.301 10.64c.236.59.46 1.199.671 1.824.212.625.4 1.2.564 1.722h.071c.165-.5.352-1.063.564-1.688.212-.625.447-1.267.705-1.928l4.022-10.57h1.762l-4.9 12.004a136.65 136.65 0 0 1-1.394 3.46 32.347 32.347 0 0 1-1.323 2.797c-.447.83-.899 1.562-1.359 2.2a9.285 9.285 0 0 1-1.533 1.67c-.658.568-1.264.984-1.817 1.245a15.75 15.75 0 0 1-1.11.495l-.566-1.33c.424-.182.894-.42 1.411-.716a7.665 7.665 0 0 0 1.517-1.16c.424-.409.888-.948 1.393-1.62.506-.67.958-1.483 1.358-2.438.141-.364.212-.603.212-.716 0-.159-.07-.398-.212-.716l-6.102-15.176h1.765v.001z"></path>
  </g>
</svg>
<!-- END app snippet -->
      

      

      
    </div>
  </div>




<script>
  window.upcartPreloadedCart = {"note":"","attributes":{"lang":"de","Invoice Language":"de"},"original_total_price":990,"total_price":990,"total_discount":0,"total_weight":406.0,"item_count":2,"items":[{"id":49252148347215,"properties":{"Bundle":"Mix \u0026 Match","Box ID":"1"},"quantity":1,"variant_id":49252148347215,"key":"49252148347215:5137387cc9bca41694333fd666035c52","title":"Teepesto","price":495,"original_price":495,"discounted_price":495,"line_price":495,"original_line_price":495,"total_discount":0,"discounts":[{"amount":0,"title":"Quantity discount %"}],"sku":"TPO1001","grams":206,"vendor":"Tea Eats","taxable":true,"product_id":8796098265423,"product_has_only_default_variant":true,"gift_card":false,"final_price":495,"final_line_price":495,"url":"\/products\/laphet-tee-pesto?variant=49252148347215","featured_image":{"aspect_ratio":1.0,"alt":"Teepesto","height":2500,"url":"\/\/laphet.de\/cdn\/shop\/files\/Teepesto_Mild.png?v=1738400929","width":2500},"image":"\/\/laphet.de\/cdn\/shop\/files\/Teepesto_Mild.png?v=1738400929","handle":"laphet-tee-pesto","requires_shipping":true,"product_type":"Fermented Tea","product_title":"Teepesto","product_description":"Art.Nr. TPO1001\n\nMit milden Noten und subtilen Komplexitäten verleiht diese Sorte Teepesto deinen kulinarischen Kreationen eine einzigartige Note und macht es zu einem Muss für GenießerInnen und TeeliebhaberInnen gleichermaßen.\nSorgfältig im Fermentationsprozess hergestellt, verfügt es über ein sanftes Geschmacksprofil. Es eignet sich hervorragend zum Marinieren, Würzen und Verfeinern von Salaten, Nudeln, Reis, Currys, Brotaufstrichen, Saucen und vielem mehr.\n90g ℮","variant_title":null,"variant_options":["Default Title"],"options_with_values":[{"name":"Title","value":"Default Title"}],"line_level_discount_allocations":[{"amount":0,"discount_application":{"type":"","key":"4bf8d8a4-d6f4-420a-b19d-4483727f38cd","title":"Quantity discount %","description":null,"value":"0.0","created_at":"2025-02-07T08:28:46.532Z","value_type":"percentage","allocation_method":"across","target_selection":"entitled","target_type":"line_item","total_allocated_amount":0}}],"line_level_total_discount":0,"unit_price":5500,"unit_price_measurement":{"measured_type":"weight","quantity_value":"90.0","quantity_unit":"g","reference_value":1,"reference_unit":"kg"}},{"id":49252272505167,"properties":{"Bundle":"Mix \u0026 Match","Box ID":"1"},"quantity":1,"variant_id":49252272505167,"key":"49252272505167:6286aa339919c620abcfe957dcc0f510","title":"Teepesto mit Chili","price":495,"original_price":495,"discounted_price":495,"line_price":495,"original_line_price":495,"total_discount":0,"discounts":[{"amount":0,"title":"Quantity discount %"}],"sku":"TPC1002","grams":200,"vendor":"Tea Eats","taxable":true,"product_id":8799383355727,"product_has_only_default_variant":true,"gift_card":false,"final_price":495,"final_line_price":495,"url":"\/products\/laphet-teepesto-chili?variant=49252272505167","featured_image":{"aspect_ratio":1.0,"alt":"Teepesto mit Chili","height":2500,"url":"\/\/laphet.de\/cdn\/shop\/files\/Teepesto_Chili.png?v=1738401332","width":2500},"image":"\/\/laphet.de\/cdn\/shop\/files\/Teepesto_Chili.png?v=1738401332","handle":"laphet-teepesto-chili","requires_shipping":true,"product_type":"Fermented Tea","product_title":"Teepesto mit Chili","product_description":"Art.Nr. TPC1002\n\nDiese Sorte Teepesto präsentiert einen sauer-scharfen, würzigen Geschmack, ideal für diejenigen, die nach einem extra Kick suchen. Präzise im Verlauf des Fermentationsprozesses kreiert, besticht es durch ein kraftvolles Geschmacksprofil.\nMit seinen scharfen Noten und intensiven Komplexitäten verleiht es deinen kulinarischen Kreationen eine einzigartige Würze und wird zu einem unverzichtbaren Element für Foodies und Tee-EnthusiastInnen gleichermaßen.\n℮ 90g","variant_title":null,"variant_options":["Default Title"],"options_with_values":[{"name":"Title","value":"Default Title"}],"line_level_discount_allocations":[{"amount":0,"discount_application":{"type":"","key":"7b1e6784-500a-48d5-8ae2-536b0d0c159a","title":"Quantity discount %","description":null,"value":"0.0","created_at":"2025-02-07T08:28:46.532Z","value_type":"percentage","allocation_method":"across","target_selection":"entitled","target_type":"line_item","total_allocated_amount":0}}],"line_level_total_discount":0,"unit_price":5500,"unit_price_measurement":{"measured_type":"weight","quantity_value":"90.0","quantity_unit":"g","reference_value":1,"reference_unit":"kg"}}],"requires_shipping":true,"currency":"EUR","items_subtotal_price":990,"cart_level_discount_applications":[],"checkout_charge_amount":990};
  window.upcartMoneyFormat = "€{{amount_with_comma_separator}}";
  window.upcartStorefrontPublicAccessToken = '6d33f6c6aea0a8c68680118cc79cf70f' || undefined;
  window.upcartClientLocalizationCountry = {
    isoCode: 'DE',
    currency: 'CurrencyDrop',
    name: 'Deutschland'
  };
  window.upcartMyShopifyDomain = 'myanmar-grocery.myshopify.com';
</script>

<script>
  window.upcartPreloadedCart.items = window.upcartPreloadedCart.items.map((line) => {
    
      if (line.id === 49252148347215) {
        line.compareAtPrice = '' || null;
      }
    
      if (line.id === 49252272505167) {
        line.compareAtPrice = '' || null;
      }
    

    return line;
  });
</script>

<div id="upCart"><div id="UpcartPopup" style="--upcart-internal-global-button-border-radius: 0px; --upcart-internal-desktop-cart-width: 440px; --upcart-internal-mobile-cart-width: 100%; --upcart-internal-header-border-bottom: 1px solid rgba(0, 0, 0, 0.1); --upcart-internal-desktop-header-padding-block: 30px; --upcart-internal-mobile-header-padding-block: 20px; --upcart-internal-header-background-color: #ffffff00; --upcart-internal-header-title-margin-inline: 0; --upcart-internal-header-flex-direction: row; --upcart-internal-header-title-offset-direction-sign: 1; --upcart-internal-header-close-button-size: 30px; --upcart-internal-header-close-button-background-color: #0000000c; --upcart-internal-header-close-button-background-color-hover: #00000014; --upcart-internal-header-close-button-icon-color: #637381; --upcart-internal-header-close-button-icon-size: 33%; --upcart-internal-header-close-button-border-width: 0; --upcart-internal-header-close-button-border-color: #000000; --upcart-internal-desktop-announcement-padding-block: 18px; --upcart-internal-mobile-announcement-padding-block: 10px; --upcart-internal-announcement-text-font-size: 15px;"><style jsx="true" global="true">
        
          :host {
            all:initial;

            font: inherit;
            font-family: inherit;
            font-size: inherit;
            font-style: inherit;
            font-weight: inherit;
            letter-spacing: inherit;
            line-height: inherit;
            text-align: inherit;
            text-indent: inherit;
            text-justify: inherit;
            text-shadow: inherit;
            text-transform: inherit;
            word-spacing: inherit;
          }

        button.UpcartDesignSettings__button,
        input.UpcartDesignSettings__button,
          .UpcartDesignSettings__button,
        .UpcartDesignSettings__button span,
        .UpcartDesignSettings__button:visited {
          background: #DFEDF9;
          color: #030303;
          border-radius: var(--upcart-internal-global-button-border-radius);
        }

        .UpcartDesignSettings__buttonLoadingIcon {
          border: 2px solid #030303;
          border-top: 2px solid transparent;
        }

        .UpcartDesignSettings__buttonLoadingIcon--dark {
          border: 2px solid #DFEDF9;
          border-top: 2px solid transparent;
          opacity: 0.5;
        }

        .UpcartDesignSettings__discountBadge {
          background: #DFEDF9;
        }
        .UpcartDesignSettings__discountBadge p {
          color: #030303 !important;
        }
        .UpcartDesignSettings__discountBadge svg {
          color: #030303;
        }

        button.UpcartDesignSettings__button:hover span,
        input.UpcartDesignSettings__button:hover,
        .UpcartDesignSettings__button:hover,
        .UpcartDesignSettings__button:hover span {
          color: #306426 !important;
        }

        .UpcartDesignSettings__backgroundColor > div {
          background: #FFFFFF;
        }
        .UpcartDesignSettings__cartAccentColor {
          background: #f6f6f7;
        }
        .DesignSettings__cartAccentColor > div.Polaris-Card {
          background: #f6f6f7;
        }

        /* CartTextColor */
        .UpcartDesignSettings__cartTextColor {
          color: #000000;
        }
        .UpcartDesignSettings__cartTextSubduedColor {
          color: #000000;
          opacity: 0.4;
        }

        /* CartSavingsTextColor */
        .UpcartDesignSettings__cartSavingsTextColor {
          color: #2ea818
        }

        /* SubtotalTextColor */
        .UpcartDesignSettings__subtotalTextColor {
          color: undefined;
        }
        .UpcartDesignSettings__subtotalSubduedColor {
          color: undefined;
          opacity: 0.4;
        }
      </style><div id="CartPopup" class="upcart-cart styles_CartPreview__ styles_CartPreview__right__
      styles_CartPreview__position-fixed__
        UpcartDesignSettings__backgroundColor " data-scrollable="true" style="height: 911px;"><div class="styles_CartPreview__card__"><div><div class="styles_Header__ UpcartDesignSettings__cartTextColor upcart-header"><h2 class="upcart-header-text" data-has-non-default-title-alignment="false">Cart • 2</h2><div class="upcart-header-close-button styles_Header__closeButton__" data-has-background-hover-color="true" data-has-border-hover-color="false"><svg class="upcart-header-close-button-icon styles_Header__closeButtonIcon__" viewBox="0 0 20 20" data-has-icon-hover-color="false" data-has-non-default-icon-stroke-width="false"><path d="m11.414 10 6.293-6.293a1 1 0 1 0-1.414-1.414l-6.293 6.293-6.293-6.293a1 1 0 0 0-1.414 1.414l6.293 6.293-6.293 6.293a1 1 0 1 0 1.414 1.414l6.293-6.293 6.293 6.293a.998.998 0 0 0 1.707-.707.999.999 0 0 0-.293-.707l-6.293-6.293z"></path></svg></div></div></div><div class="upcart-cart-body styles_CartPreview__body__" style="flex-grow: 1; overflow-y: auto;"><div class="styles_skeleton__ upcart-announcement-skeleton upcart-skeleton" style="display: none; justify-content: center; width: 100%;"><div class="styles_shimmer__ styles_textMedium__" style="margin: 23px 0px; width: 80%;"></div></div><div><style>
        .upcart-announcement.upcart-announcement {
			background-color: #edd8d0;
			border-color: #edd8d0;
        }
		</style><div class="styles_Announcement__ UpcartDesignSettings__cartTextColor upcart-announcement"><p>Deine Produkte sind für 04:00  reserviert.</p>
</div></div><div class="upcart-external-integration abra-integration abra-upcart-tiers" data-render-state="0" style="display: none;"></div><div class="styles_skeleton__ upcart-rewards-skeleton upcart-skeleton" style="display: none; flex-direction: column; align-items: center; gap: 25px; padding: 23px 10px 35px;"><div class="styles_shimmer__ upcart-rewards-message-skeleton styles_textMedium__" style="width: 60%;"></div><div class="styles_shimmer__ upcart-rewards-bar-skeleton styles_textSmall__" style="width: 90%;"></div></div><div><div class="upcart-rewards styles_Rewards__ UpcartDesignSettings__cartTextColor"><div class="upcart-rewards-message"><p>You’re <b>€39,10</b> away from free shipping!</p></div><div class="upcart-rewards-bar-background styles_Rewards__progressBar__" style="background-color: rgb(226, 226, 226);"><div class="styles_Rewards__progressBar--progress__ upcart-rewards-bar-foreground" style="background-color: rgb(147, 211, 255); width: 18.3673%;"></div></div></div></div><div class="styles_skeleton__ upcart-product-item-skeleton upcart-skeleton" style="display: none; flex-direction: row; gap: 30px; justify-content: space-between; padding: 20px 30px;"><div class="styles_imageLarge__ upcart-product-image-skeleton styles_shimmer__"></div><div style="display: flex; flex-direction: column; justify-content: space-between; flex-grow: 1;"><div style="display: flex; flex-direction: column; gap: 8px;"><div class="styles_shimmer__ upcart-product-title-skeleton styles_textLarge__"></div><div class="styles_shimmer__ upcart-item-option-skeleton styles_textSmall__" style="width: 70%;"></div></div><div class="styles_shimmer__ upcart-product-quantity-skeleton" style="width: 50%; height: 30px;"></div></div><div class="upcart-product-price-container-skeleton" style="width: 25%; display: flex; flex-direction: column; gap: 8px; justify-content: flex-end; align-items: flex-end;"><div class="styles_shimmer__ styles_textMedium__" style="width: 100%;"></div><div class="styles_shimmer__ styles_textMedium__" style="width: 100%;"></div><div class="styles_shimmer__ styles_textMedium__" style="width: 80%;"></div><div class="styles_shimmer__"></div></div></div><div class="upcart-products-section"><div class="styles_ProductRow__product__ upcart-product-item " id="49252148347215:5137387cc9bca41694333fd666035c52"><div class="Stack Stack--distributionLeading Stack--spacingLoose"><div class="Stack__item"><div class="upcart-product-image-wrapper styles_ProductRow__imageWrapper__"><a href="https://laphet.de/products/laphet-tee-pesto?variant=49252148347215" data-no-pointer="false"><img src="./Laphet_files/Teepesto_Mild(2).png" alt="Teepesto"></a></div></div><div class="Stack__item Stack__item--fill"><div class="styles_ProductRow__productHeading__"><div class="styles_ProductRow__productTitleAndVariant__"><h3 class="upcart-product-title UpcartDesignSettings__cartTextColor styles_ProductRow__productTitle__"><a class="upcart-product-title-link styles_ProductRow__productTitleLink__" href="https://laphet.de/products/laphet-tee-pesto?variant=49252148347215" data-no-pointer="false">Teepesto</a></h3><div class="upcart-item-properties-anchor-before"></div><div class="upcart-item-properties TextStyle--variationSubdued UpcartDesignSettings__cartTextSubduedColor"><p class="upcart-item-property"><strong>Bundle: </strong><span>Mix &amp; Match</span></p><p class="upcart-item-property"><strong>Box ID: </strong><span>1</span></p></div><div class="upcart-item-properties-anchor-after"></div></div><div><div class="styles_TrashButton__deleteButton__"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.28125 3.28125L3.86719 12.6562C3.89502 13.1979 4.28906 13.5938 4.80469 13.5938H10.1953C10.713 13.5938 11.0997 13.1979 11.1328 12.6562L11.7188 3.28125" stroke="#8F8F8F" stroke-width="0.9375" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.34375 3.28125H12.6562H2.34375Z" fill="#8F8F8F"></path><path d="M2.34375 3.28125H12.6562" stroke="#8F8F8F" stroke-width="0.9375" stroke-miterlimit="10" stroke-linecap="round"></path><path d="M9.60938 5.15625L9.375 11.7188M5.625 3.28125V2.10938C5.62473 2.01697 5.64273 1.92541 5.67797 1.83998C5.71321 1.75455 5.76499 1.67693 5.83034 1.61159C5.89568 1.54624 5.9733 1.49446 6.05873 1.45922C6.14416 1.42398 6.23571 1.40598 6.32812 1.40625H8.67188C8.76429 1.40598 8.85584 1.42398 8.94127 1.45922C9.0267 1.49446 9.10432 1.54624 9.16966 1.61159C9.23501 1.67693 9.28679 1.75455 9.32203 1.83998C9.35727 1.92541 9.37527 2.01697 9.375 2.10938V3.28125H5.625ZM7.5 5.15625V11.7188V5.15625ZM5.39062 5.15625L5.625 11.7188L5.39062 5.15625Z" stroke="#8F8F8F" stroke-width="0.9375" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div><div class="Stack Stack--distributionEqualSpacing Stack--alignmentCenter"><div class="Stack__item"><div class="styles_ProductRow__stepper__" style="border-radius: var(--upcart-internal-global-button-border-radius);"><div class="styles_QuantityField__"><button class="upcart-product-quantity-minus styles_button__ styles_quantityMinus__" style="border-top-left-radius: var(--upcart-internal-global-button-border-radius); border-bottom-left-radius: var(--upcart-internal-global-button-border-radius);"><svg viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 10c0-.414.336-.75.75-.75h8.5c.414 0 .75.336.75.75s-.336.75-.75.75h-8.5c-.414 0-.75-.336-.75-.75Z"></path></svg></button><input class="upcart-product-quantity-input js-qty__num styles_quantityInput__" maxlength="4" value="1"><button class="upcart-product-quantity-plus styles_button__ styles_quantityPlus__" style="border-top-right-radius: var(--upcart-internal-global-button-border-radius); border-bottom-right-radius: var(--upcart-internal-global-button-border-radius);"><svg viewBox="0 0 20 20"><path d="M10.75 5.75c0-.414-.336-.75-.75-.75s-.75.336-.75.75v3.5h-3.5c-.414 0-.75.336-.75.75s.336.75.75.75h3.5v3.5c0 .414.336.75.75.75s.75-.336.75-.75v-3.5h3.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-3.5v-3.5Z"></path></svg></button></div></div></div><div class="Stack__item" style="margin-left: auto;"><div class="styles_ProductRow__price__"><div class="upcart-item-prices-row styles_ProductRow__priceRow__"><span class="upcart-do-not-modify-this-node-please-only-modify-child-node"><span class="upcart-item-price UpcartDesignSettings__cartTextColor styles_ProductRow__ProductPrice__">€4,95</span></span></div><div class="upcart-discount-code-badge DiscountCodeBadge_discountBadge__"><div class="upcart-discount-code-icon DiscountCodeBadge_icon__"><svg viewBox="0 0 20 20"><path d="M13 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"></path><path fill-rule="evenodd" d="M11.276 3.5a3.75 3.75 0 0 0-2.701 1.149l-4.254 4.417a2.75 2.75 0 0 0 .036 3.852l2.898 2.898a2.5 2.5 0 0 0 3.502.033l4.747-4.571a3.25 3.25 0 0 0 .996-2.341v-2.187a3.25 3.25 0 0 0-3.25-3.25h-1.974Zm-1.62 2.19a2.25 2.25 0 0 1 1.62-.69h1.974c.966 0 1.75.784 1.75 1.75v2.187c0 .475-.194.93-.536 1.26l-4.747 4.572a1 1 0 0 1-1.401-.014l-2.898-2.898a1.25 1.25 0 0 1-.016-1.75l4.253-4.418Z"></path></svg></div><span class="upcart-discount-code-text DiscountCodeBadge_title__">Quantity discount %</span></div></div></div></div></div></div></div></div><div class="styles_ProductRow__product__ upcart-product-item " id="49252272505167:6286aa339919c620abcfe957dcc0f510"><div class="Stack Stack--distributionLeading Stack--spacingLoose"><div class="Stack__item"><div class="upcart-product-image-wrapper styles_ProductRow__imageWrapper__"><a href="https://laphet.de/products/laphet-teepesto-chili?variant=49252272505167" data-no-pointer="false"><img src="./Laphet_files/Teepesto_Chili(2).png" alt="Teepesto mit Chili"></a></div></div><div class="Stack__item Stack__item--fill"><div class="styles_ProductRow__productHeading__"><div class="styles_ProductRow__productTitleAndVariant__"><h3 class="upcart-product-title UpcartDesignSettings__cartTextColor styles_ProductRow__productTitle__"><a class="upcart-product-title-link styles_ProductRow__productTitleLink__" href="https://laphet.de/products/laphet-teepesto-chili?variant=49252272505167" data-no-pointer="false">Teepesto mit Chili</a></h3><div class="upcart-item-properties-anchor-before"></div><div class="upcart-item-properties TextStyle--variationSubdued UpcartDesignSettings__cartTextSubduedColor"><p class="upcart-item-property"><strong>Bundle: </strong><span>Mix &amp; Match</span></p><p class="upcart-item-property"><strong>Box ID: </strong><span>1</span></p></div><div class="upcart-item-properties-anchor-after"></div></div><div><div class="styles_TrashButton__deleteButton__"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.28125 3.28125L3.86719 12.6562C3.89502 13.1979 4.28906 13.5938 4.80469 13.5938H10.1953C10.713 13.5938 11.0997 13.1979 11.1328 12.6562L11.7188 3.28125" stroke="#8F8F8F" stroke-width="0.9375" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.34375 3.28125H12.6562H2.34375Z" fill="#8F8F8F"></path><path d="M2.34375 3.28125H12.6562" stroke="#8F8F8F" stroke-width="0.9375" stroke-miterlimit="10" stroke-linecap="round"></path><path d="M9.60938 5.15625L9.375 11.7188M5.625 3.28125V2.10938C5.62473 2.01697 5.64273 1.92541 5.67797 1.83998C5.71321 1.75455 5.76499 1.67693 5.83034 1.61159C5.89568 1.54624 5.9733 1.49446 6.05873 1.45922C6.14416 1.42398 6.23571 1.40598 6.32812 1.40625H8.67188C8.76429 1.40598 8.85584 1.42398 8.94127 1.45922C9.0267 1.49446 9.10432 1.54624 9.16966 1.61159C9.23501 1.67693 9.28679 1.75455 9.32203 1.83998C9.35727 1.92541 9.37527 2.01697 9.375 2.10938V3.28125H5.625ZM7.5 5.15625V11.7188V5.15625ZM5.39062 5.15625L5.625 11.7188L5.39062 5.15625Z" stroke="#8F8F8F" stroke-width="0.9375" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div><div class="Stack Stack--distributionEqualSpacing Stack--alignmentCenter"><div class="Stack__item"><div class="styles_ProductRow__stepper__" style="border-radius: var(--upcart-internal-global-button-border-radius);"><div class="styles_QuantityField__"><button class="upcart-product-quantity-minus styles_button__ styles_quantityMinus__" style="border-top-left-radius: var(--upcart-internal-global-button-border-radius); border-bottom-left-radius: var(--upcart-internal-global-button-border-radius);"><svg viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 10c0-.414.336-.75.75-.75h8.5c.414 0 .75.336.75.75s-.336.75-.75.75h-8.5c-.414 0-.75-.336-.75-.75Z"></path></svg></button><input class="upcart-product-quantity-input js-qty__num styles_quantityInput__" maxlength="4" value="1"><button class="upcart-product-quantity-plus styles_button__ styles_quantityPlus__" style="border-top-right-radius: var(--upcart-internal-global-button-border-radius); border-bottom-right-radius: var(--upcart-internal-global-button-border-radius);"><svg viewBox="0 0 20 20"><path d="M10.75 5.75c0-.414-.336-.75-.75-.75s-.75.336-.75.75v3.5h-3.5c-.414 0-.75.336-.75.75s.336.75.75.75h3.5v3.5c0 .414.336.75.75.75s.75-.336.75-.75v-3.5h3.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-3.5v-3.5Z"></path></svg></button></div></div></div><div class="Stack__item" style="margin-left: auto;"><div class="styles_ProductRow__price__"><div class="upcart-item-prices-row styles_ProductRow__priceRow__"><span class="upcart-do-not-modify-this-node-please-only-modify-child-node"><span class="upcart-item-price UpcartDesignSettings__cartTextColor styles_ProductRow__ProductPrice__">€4,95</span></span></div><div class="upcart-discount-code-badge DiscountCodeBadge_discountBadge__"><div class="upcart-discount-code-icon DiscountCodeBadge_icon__"><svg viewBox="0 0 20 20"><path d="M13 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"></path><path fill-rule="evenodd" d="M11.276 3.5a3.75 3.75 0 0 0-2.701 1.149l-4.254 4.417a2.75 2.75 0 0 0 .036 3.852l2.898 2.898a2.5 2.5 0 0 0 3.502.033l4.747-4.571a3.25 3.25 0 0 0 .996-2.341v-2.187a3.25 3.25 0 0 0-3.25-3.25h-1.974Zm-1.62 2.19a2.25 2.25 0 0 1 1.62-.69h1.974c.966 0 1.75.784 1.75 1.75v2.187c0 .475-.194.93-.536 1.26l-4.747 4.572a1 1 0 0 1-1.401-.014l-2.898-2.898a1.25 1.25 0 0 1-.016-1.75l4.253-4.418Z"></path></svg></div><span class="upcart-discount-code-text DiscountCodeBadge_title__">Quantity discount %</span></div></div></div></div></div></div></div></div></div><div class="styles_CartPreview__bottomModules__"><div class="NotesModule_NotesModule__" data-placement="bottomOfCart"><div class="NotesModule_NotesModule__titleContainer__"><div class="NotesModule_NotesModule__dropdownContainer__"><span><p>Bestellnotiz hinzufügen</p>
</span><svg viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.72 8.47a.75.75 0 0 1 1.06 0l3.47 3.47 3.47-3.47a.75.75 0 1 1 1.06 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 0-1.06Z"></path></svg></div></div></div><div class="styles_skeleton__ upcart-upsells-module-skeleton upcart-skeleton" style="display: none; flex-direction: column; gap: 20px; padding: 30px 40px; align-items: center;"><div class="styles_shimmer__ upcart-upsells-title-skeleton styles_textMedium__" style="width: 35%;"></div><div style="display: flex; flex-direction: row; gap: 20px; width: 100%;"><div class="styles_shimmer__ upcart-upsell-item-image-skeleton styles_imageLarge__"></div><div style="display: flex; flex-direction: column; gap: 6px; flex-grow: 1;"><div class="styles_shimmer__ upcart-upsell-item-title-skeleton styles_textMedium__" style="width: 60%;"></div><div class="styles_shimmer__ upcart-upsell-item-price-skeleton styles_textMedium__" style="width: 20%;"></div><div class="styles_shimmer__ upcart-upsells-button-skeleton" style="width: 100%; height: 30px;"></div></div></div></div><div></div></div></div><div><div class="styles_Footer__ UpcartDesignSettings__cartAccentColor upcart-footer"><div class="styles_skeleton__ upcart-discount-code-module-skeleton upcart-skeleton" style="display: none; flex-direction: row; width: 100%; margin: 20px 0px; gap: 10px;"><div class="styles_shimmer__ upcart-discount-code-input-skeleton" style="height: 44px; flex-grow: 1;"></div><div class="styles_shimmer__ upcart-discount-code-button-skeleton" style="height: 44px; width: 22%;"></div></div><div class="upcart-discount-code-module DiscountCodeModule_DiscountCodeModule__"><form class="upcart-discount-code-row DiscountCodeModule_DiscountCodeModule__form__"><div class="upcart-discount-code-input-wrapper DiscountCodeModule_DiscountCodeModule__inputWrapper__"><input class="upcart-discount-code-input" placeholder="Rabattcode " value=""><div class="DiscountCodeModule_DiscountCodeModule__suffix__"></div></div><button class="upcart-discount-code-button UpcartDesignSettings__button" type="submit">einlösen</button></form></div><div class="upcart-savings-row styles_Footer__savings__"><div class="styles_Footer__savingsCodes__"><span class="UpcartDesignSettings__cartTextColor">Discounts</span><div class="styles_Footer__slidingCodes__"><div class="upcart-discount-code-badge DiscountCodeBadge_discountBadge__"><div class="upcart-discount-code-icon DiscountCodeBadge_icon__"><svg viewBox="0 0 20 20"><path d="M13 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"></path><path fill-rule="evenodd" d="M11.276 3.5a3.75 3.75 0 0 0-2.701 1.149l-4.254 4.417a2.75 2.75 0 0 0 .036 3.852l2.898 2.898a2.5 2.5 0 0 0 3.502.033l4.747-4.571a3.25 3.25 0 0 0 .996-2.341v-2.187a3.25 3.25 0 0 0-3.25-3.25h-1.974Zm-1.62 2.19a2.25 2.25 0 0 1 1.62-.69h1.974c.966 0 1.75.784 1.75 1.75v2.187c0 .475-.194.93-.536 1.26l-4.747 4.572a1 1 0 0 1-1.401-.014l-2.898-2.898a1.25 1.25 0 0 1-.016-1.75l4.253-4.418Z"></path></svg></div><span class="upcart-discount-code-text DiscountCodeBadge_title__">Quantity discount %</span></div></div></div></div><div class="styles_skeleton__ upcart-checkout-button-container-skeleton upcart-skeleton" style="display: none;"><div class="styles_shimmer__ upcart-checkout-button-skeleton" style="height: 50px;"></div></div><div class="styles_Footer__checkoutButton__"><div class="upcart-checkout-button-container styles_CustomButton__ "><a href="https://laphet.de/checkout" class="styles_CustomButton__fullWidth__
         styles_CustomButton__fullHight__
         UpcartDesignSettings__button upcart-checkout-button" data-disable-recharge="true">Checkout • €9,90</a></div></div><div class="upcart-continue-shopping UpcartDesignSettings__cartTextColor styles_Footer__continueShopping__"><a>Or continue shopping</a></div><div class="styles_skeleton__ upcart-trust-badge-skeleton upcart-skeleton" style="display: none; flex-direction: row; justify-content: space-between; gap: 10px; padding: 20px 10px 10px;"><div class="styles_shimmer__ upcart-trust-badge-image-skeleton" style="flex-grow: 1; height: 25px;"></div><div class="styles_shimmer__ upcart-trust-badge-image-skeleton" style="flex-grow: 1; height: 25px;"></div><div class="styles_shimmer__ upcart-trust-badge-image-skeleton" style="flex-grow: 1; height: 25px;"></div><div class="styles_shimmer__ upcart-trust-badge-image-skeleton" style="flex-grow: 1; height: 25px;"></div><div class="styles_shimmer__ upcart-trust-badge-image-skeleton" style="flex-grow: 1; height: 25px;"></div><div class="styles_shimmer__ upcart-trust-badge-image-skeleton" style="flex-grow: 1; height: 25px;"></div><div class="styles_shimmer__ upcart-trust-badge-image-skeleton" style="flex-grow: 1; height: 25px;"></div><div class="styles_shimmer__ upcart-trust-badge-image-skeleton" style="flex-grow: 1; height: 25px;"></div></div><div class="upcart-trust-badge TrustBadgesModule_trustBadgeContainer__"><img class="upcart-trust-badge-image" alt="Upcart Trust Badge" width="100%" height="100%" src="./Laphet_files/payment-icons.png" style="object-fit: contain;"></div></div></div></div></div><div class="upcart-backdrop styles_CartPreview__backdrop__" id="UpcartPopupBackDrop"></div></div></div>
<div id="upCartStickyButton"></div>

<style id="upCart-customCSS">
  .upcart-cart .slider
{
    opacity: 1 !important;
}
</style>


</div><div id="shopify-block-AWlIvdkFVaWsydStBQ__4804304946286255945" class="shopify-block shopify-app-block">
  
  <script>
    const cookieBarMetaFields = {"shopId":"kWxZB5cwj4XwGgXstlcf","settings":{"agreeBtnBorder":"#2C332F","desktopPosition":"bottom","customPrivacyLink":"","messageColor":"#2C332F","iconType":"default_icon","denyButtonText":"Decline","shopId":"kWxZB5cwj4XwGgXstlcf","showIcon":true,"textAvada":"rgba(29, 29, 29, 0.8)","urlIcon":"","customCss":"","displayAfter":"5","mobilePositions":"bottom","optionPolicyLink":"select","agreeButtonText":"Got it!","showPrivacyPolicy":true,"showOnCountry":"all","textFont":"Noto+Sans","advancedSetting":false,"privacyLinkText":"Learn more","removeBranding":true,"boxShadow":"0px 3px 8px rgba(0, 0, 0, 0.2)","borderColor":"#F1D00A","specificRegions":{"pipeda":false,"appi":false,"lgpd":false,"gdpr":true,"ccpa":false},"denyTextColor":"#5F5A56","float":"left","privacyLinkColor":"#5F5A56","textAvadaMobile":"rgba(29, 29, 29, 0.8)","agreeBtnBgColor":"#A38064","bgColor":"#F6EFEB","textBtnColor":"#A38064","desktopFloatCardPosition":"bottom_right","theme":"basic2","id":"Xo8Ru4eJWfWBdblFSaoK","fontStore":[{"label":"Century Gothic","value":"Century+Gothic"}],"fontWeight":"500","height":"100px","display":"","textColor":"#5F5A56","themeName":"Elegant","borderRadius":"32px","agreeBtnTextColor":"#F6EFEB","btnColor":"#F6EFEB","iconColor":"#5F5A56","width":"460px","privacyLink":"/pages/gdpr-privacy-policy","displayType":"float_card","message":"We use cookies on this website to ensure you get the best experience with us."},"status":true} || {};
    const resetMetafields = false || {};
    const {integration: avadaCbIntegration} = cookieBarMetaFields;
    const shopNameCookie = 'Laphet';
    window.AVADA_COOKIES_BAR = {
      shopName: shopNameCookie,
      shopId: cookieBarMetaFields.shopId,
      status: cookieBarMetaFields.status,
      ...(window.AVADA_COOKIES_BAR || {}),
      ...cookieBarMetaFields.settings,
      translation: cookieBarMetaFields.translations,
      cookies: cookieBarMetaFields.cookies,
      integration: avadaCbIntegration,
      customer: {
        id: null,
        email: null,
        first_name: null,
        last_name: null,
        phone: null
      },
      reset: resetMetafields,
      brandData: {
        primaryBackground: "#e4f6ff",
        primaryForeground: "#5daa29",
        secondaryBackground: "#FAF1EE",
        secondaryForeground: "#ffffff",
        logo: null
      }
    };

    if (avadaCbIntegration?.pinterestConsent?.enabled && typeof pintrk === 'function') {
      console.log('Disabled pinterest consent');
      pintrk('setconsent', false);
    }

    (() => {
      const getCookie= (name) => {
        const nameEQ = name + '=';
        const ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
          let c = ca[i];
          while (c.charAt(0) === ' ') c = c.substring(1, c.length);
          if (c.indexOf(nameEQ) === 0) return JSON.parse(decodeURIComponent(c.substring(nameEQ.length, c.length)));
        }
        return {};
      }
      window.AVADA_COOKIE_CONSENT = getCookie('avada_cookie_consent');
    })();

    try {
      const metaPixelScript = avadaCbIntegration?.metaPixel?.script || '';
      window.metaPixelFunc = new Function(metaPixelScript);
      if(avadaCbIntegration?.metaPixel?.enabled && window.AVADA_COOKIE_CONSENT.analytics && window.AVADA_COOKIE_CONSENT.marketing) {
        window.metaPixelFunc();
      }
    } catch (e) {
      console.error('Something went wrong in Meta Pixel:', e)
    }

    try {
      if(avadaCbIntegration?.pinterestConsent?.enabled && window.AVADA_COOKIE_CONSENT.analytics && window.AVADA_COOKIE_CONSENT.marketing) {
        pintrk('setconsent', true);
        console.log('Enabled pinterest consent');
      }
    } catch (e) {
      console.error('Something went wrong in Pinterest integration:', e)
    }

    try {
      const tiktokPixelScript = avadaCbIntegration?.tiktokPixel?.script || '';
      window.tiktokPixelFunc = new Function(tiktokPixelScript);
      if(avadaCbIntegration?.tiktokPixel?.enabled && window.AVADA_COOKIE_CONSENT.analytics && window.AVADA_COOKIE_CONSENT.marketing) {
        window.tiktokPixelFunc();
      }
    } catch (e) {
      console.error('Something went wrong in Tiktok Pixel:', e)
    }
  </script>



</div><div id="shopify-block-Aajk0TllTV2lJZTdoT__15683396631634586217" class="shopify-block shopify-app-block"><script id="chat-button-container" data-horizontal-position="bottom_right" data-vertical-position="lowest" data-icon="chat_bubble" data-text="no_text" data-color="#767676" data-secondary-color="#FFFFFF" data-ternary-color="#6A6A6A" data-greeting-message="%F0%9F%91%8B+Hello%21+Please+message+us+if+you+have+questions%2C+or+give+an+idea+of+what+you%E2%80%99re+looking+for.+We%E2%80%99re+happy+to+make+recommendations." data-domain="laphet.de" data-external-identifier="54ZwKmjf9Km65oHYfD8_CbugC0ZMMIL0fwSXyP2NQUQ">
</script>


<script src="./Laphet_files/shopifyChatV1Widget.js.download" type="module" defer="" async="" data-button-color="#767676" data-secondary-color="#FFFFFF" data-ternary-color="#6A6A6A" data-icon="chat_bubble" data-text="no_text" data-position="bottom_right" data-vertical-position="lowest" data-shop-id="54ZwKmjf9Km65oHYfD8_CbugC0ZMMIL0fwSXyP2NQUQ" data-shop="laphet.de"></script></div>

    
    <script>

    window.Samita = window.Samita || {}
    Samita.ProductLabels = Samita.ProductLabels || {}
    Samita.ProductLabels.overrideOptions = Samita.ProductLabels.overrideOptions || {}
    Samita.ProductLabels.overrideOptions.selectors = Samita.ProductLabels.overrideOptions.selectors || {}
    Samita.ProductLabels.overrideOptions.selectors.product ={
      elementSelectors: [".main-product__hero"],
    imageSelectors: [".image-container.image-container--product img.object-fit__image--cover",".img-product img"]
    }

    </script>
  <!-- End -->

<script src="./Laphet_files/js(3)"></script><style>#textfieldapp, .textfieldapp {display: flex !important; flex-direction: column !important;} #textfieldapp:empty, .textfieldapp:empty { display: none !important;} #textfieldapp .textbox_fields{} #textfieldapp textarea, .textfieldapp textarea{ line-height: initial !important; margin: 0 !important; box-shadow: none !important; min-width: 220px !important; height: auto; min-height: 44px; font-style: inherit !important; cursor: inherit !important; letter-spacing: inherit !important; } #textfieldapp p, .textfieldapp p{letter-spacing: inherit !important; font-weight: 300; margin-top: 0px; margin-bottom: 7px !important;text-transform: inherit !important; height: inherit !important; line-height: inherit !important;} div[id^=textFieldLabel_]{padding: 0 !important;} div[id^=textFieldTextArea_]{} .textfieldapp{width: 100% !important;} .textfieldapp{margin-left: auto;} #textfieldapp, .textfieldapp{margin-top: 0px; margin-bottom: 1em;  width: 100% !important;} .textboxTooltip { position: relative; display: inline-block; } .textboxTooltip .tooltiptext { visibility: hidden; width: 185px !important; border-radius: 6px; padding: 5px; box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px !important; position: absolute; z-index: 1200; bottom: 100%; margin: 0 !important; } .textboxTooltip:hover .tooltiptext { visibility: visible; } .tb_alertIcon{margin-bottom: 1em; margin-top: 5px; height: auto; position: relative; display: inline-block; min-height: 20px; padding: 7px 10px; background: #f1cec4 !important; border-radius: 5px; border: 1px solid #A21B00 !important; } .tb_alertIcon .alertText{margin: 0 !important; color: #A21B00; font-size: 14px; margin: 0 !important; height: auto !important; white-space: break-spaces !important;} .tb_border_alert{border: 1px solid #A21B00 !important; } .tb_border_dashed_alert{border-color: #A21B00 !important; } .tb_font_alert{color: #A21B00 !important; } #textfieldapp input, .textfieldapp input[type=checkbox]{display: none !important;} #textfieldapp input[data-optionlist='true'], .textfieldapp input[data-optionlist='true']{ min-height: inherit !important; position: relative !important; min-width: inherit !important; display: block !important; margin-bottom: 0 !important; margin-top: 0 !important; margin-right: 1px !important; margin-left: 3px !important; } .textfieldapp label:not(.checkbox_label, [class*=switch_]), #textfieldapp label:not(.checkbox_label, [class*=switch_]){ min-height: inherit !important; margin-right: 0 !important; position: relative !important; min-width: inherit !important; display: block !important; padding-left: 0 !important; display: initial !important; letter-spacing: normal !important; text-transform: none !important; margin-bottom: 0 !important; cursor: default !important; } .textfieldapp input[type='radio'], #textfieldapp input[type='radio']{ -webkit-appearance: none; border-radius: 50%; outline: none; } .textfieldapp input[type='radio']:before, #textfieldapp input[type='radio']:before { content: '' !important; position: relative !important; top: 0 !important; transform: inherit !important; left: 0 !important; display: block !important; height: 100% !important; border-radius: 50% !important; } .textfieldapp input[type='radio']::before, #textfieldapp input[type='radio']::before {content: '';} #textfieldapp select, .textfieldapp select{display: block !important; background-size: inherit !important;} #textfieldapp .tb_checkbox_control input , .textfieldapp .tb_checkbox_control input{ padding: 0; height: initial; width: initial; margin-bottom: 0; display: none; cursor: pointer; } .tb_checkbox_control label { position: relative; cursor: pointer; } .textbox_bluebox{cursor: pointer;}@media screen and (max-width: 700px) {.tooltiptext{left: unset !important; right: 50% !important;} input[type="text"],textarea {font-size:0.9rem;} #textfieldapp textarea, .textfieldapp textarea {min-width: 150px !important;}} .tb_cf_drop_img{ background: url("https://inspon-cloud.com/dev-app/img/uploading.png") !important; border-radius: 0px  !important; background-size: contain !important; background-repeat: no-repeat !important; background-position: center !important; transition: none !important; } .tb-blue-shade{background: #F0F8FF !important;} div[id^=tb_dropzone_]:hover{background: #F0F8FF !important;}</style><div id="yeps"><template shadowrootmode="open"><style>:host {
      all: initial !important;
      font-family: inherit !important;
    }</style><link rel="stylesheet" href="./Laphet_files/yeps.css"></template></div><div></div><div id="smart_modal_wrapper"><div id="smart-modal-outer" class="smart-modal"><div class="smart-modal-window" id="smart-modal-window"><span class="smart-modal-close" id="smart-modal-close" data-dismiss="modal">×</span><div id="smart-modal-content"></div></div></div></div><script src="./Laphet_files/instafeed-15c4b561d56183eb1100af04f08e5b9e.js.download"></script><style>.ht-animated{-webkit-animation-duration:4s;animation-duration:4s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-delay:1s;animation-delay:1s}.ht-animated.ht-infinite{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}@-webkit-keyframes ht-emitting{13%{box-shadow:0 0 5px 5px rgba(0,0,0,.8)}100%,25%{box-shadow:0 0 0 0 rgba(0,0,0,.8)}}@keyframes ht-emitting{13%{box-shadow:0 0 5px 5px rgba(0,0,0,.8)}100%,25%{box-shadow:0 0 0 0 rgba(0,0,0,.8)}}.ht-emitting{-webkit-animation-name:ht-emitting;animation-name:ht-emitting;-webkit-transform-origin:center bottom;transform-origin:center bottom}@-webkit-keyframes ht-bounce{13%,20%,25%,5%,from,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}10%,12%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}17%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}23%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}@keyframes ht-bounce{13%,20%,25%,5%,from,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}10%,12%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}17%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}23%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}.ht-bounce{-webkit-animation-name:ht-bounce;animation-name:ht-bounce;-webkit-transform-origin:center bottom;transform-origin:center bottom}@-webkit-keyframes ht-flash{12%,6%,from,to{opacity:1}3%,9%{opacity:0}}@keyframes ht-flash{12%,6%,from,to{opacity:1}3%,9%{opacity:0}}.ht-flash{-webkit-animation-name:ht-flash;animation-name:ht-flash}@-webkit-keyframes ht-rubberBand{25%,from,to{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}7%{-webkit-transform:scale3d(1.25,.75,1);transform:scale3d(1.25,.75,1)}10%{-webkit-transform:scale3d(.75,1.25,1);transform:scale3d(.75,1.25,1)}12%{-webkit-transform:scale3d(1.15,.85,1);transform:scale3d(1.15,.85,1)}16%{-webkit-transform:scale3d(.95,1.05,1);transform:scale3d(.95,1.05,1)}18%{-webkit-transform:scale3d(1.05,.95,1);transform:scale3d(1.05,.95,1)}}@keyframes ht-rubberBand{25%,from,to{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}7%{-webkit-transform:scale3d(1.25,.75,1);transform:scale3d(1.25,.75,1)}10%{-webkit-transform:scale3d(.75,1.25,1);transform:scale3d(.75,1.25,1)}12%{-webkit-transform:scale3d(1.15,.85,1);transform:scale3d(1.15,.85,1)}16%{-webkit-transform:scale3d(.95,1.05,1);transform:scale3d(.95,1.05,1)}18%{-webkit-transform:scale3d(1.05,.95,1);transform:scale3d(1.05,.95,1)}}.ht-rubberBand{-webkit-animation-name:ht-rubberBand;animation-name:ht-rubberBand}@-webkit-keyframes ht-swing{5%{-webkit-transform:rotate3d(0,0,1,15deg);transform:rotate3d(0,0,1,15deg)}10%{-webkit-transform:rotate3d(0,0,1,-10deg);transform:rotate3d(0,0,1,-10deg)}15%{-webkit-transform:rotate3d(0,0,1,5deg);transform:rotate3d(0,0,1,5deg)}20%{-webkit-transform:rotate3d(0,0,1,-5deg);transform:rotate3d(0,0,1,-5deg)}25%,to{-webkit-transform:rotate3d(0,0,1,0deg);transform:rotate3d(0,0,1,0deg)}}@keyframes ht-swing{5%{-webkit-transform:rotate3d(0,0,1,15deg);transform:rotate3d(0,0,1,15deg)}10%{-webkit-transform:rotate3d(0,0,1,-10deg);transform:rotate3d(0,0,1,-10deg)}15%{-webkit-transform:rotate3d(0,0,1,5deg);transform:rotate3d(0,0,1,5deg)}20%{-webkit-transform:rotate3d(0,0,1,-5deg);transform:rotate3d(0,0,1,-5deg)}25%,to{-webkit-transform:rotate3d(0,0,1,0deg);transform:rotate3d(0,0,1,0deg)}}.ht-swing{-webkit-transform-origin:top center;transform-origin:top center;-webkit-animation-name:ht-swing;animation-name:ht-swing}@-webkit-keyframes ht-tada{25%,from,to{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}2%,5%{-webkit-transform:scale3d(.9,.9,.9) rotate3d(0,0,1,-3deg);transform:scale3d(.9,.9,.9) rotate3d(0,0,1,-3deg)}12%,17%,22%,7%{-webkit-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,3deg);transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,3deg)}10%,15%,20%{-webkit-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,-3deg);transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,-3deg)}}@keyframes ht-tada{25%,from,to{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}2%,5%{-webkit-transform:scale3d(.9,.9,.9) rotate3d(0,0,1,-3deg);transform:scale3d(.9,.9,.9) rotate3d(0,0,1,-3deg)}12%,17%,22%,7%{-webkit-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,3deg);transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,3deg)}10%,15%,20%{-webkit-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,-3deg);transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,-3deg)}}.ht-tada{-webkit-animation-name:ht-tada;animation-name:ht-tada}@-webkit-keyframes ht-wobble{25%,from,to{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}3%{-webkit-transform:translate3d(-25%,0,0) rotate3d(0,0,1,-5deg);transform:translate3d(-25%,0,0) rotate3d(0,0,1,-5deg)}7%{-webkit-transform:translate3d(20%,0,0) rotate3d(0,0,1,3deg);transform:translate3d(20%,0,0) rotate3d(0,0,1,3deg)}11%{-webkit-transform:translate3d(-15%,0,0) rotate3d(0,0,1,-3deg);transform:translate3d(-15%,0,0) rotate3d(0,0,1,-3deg)}15%{-webkit-transform:translate3d(10%,0,0) rotate3d(0,0,1,2deg);transform:translate3d(10%,0,0) rotate3d(0,0,1,2deg)}18%{-webkit-transform:translate3d(-5%,0,0) rotate3d(0,0,1,-1deg);transform:translate3d(-5%,0,0) rotate3d(0,0,1,-1deg)}}@keyframes ht-wobble{25%,from,to{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}3%{-webkit-transform:translate3d(-25%,0,0) rotate3d(0,0,1,-5deg);transform:translate3d(-25%,0,0) rotate3d(0,0,1,-5deg)}7%{-webkit-transform:translate3d(20%,0,0) rotate3d(0,0,1,3deg);transform:translate3d(20%,0,0) rotate3d(0,0,1,3deg)}11%{-webkit-transform:translate3d(-15%,0,0) rotate3d(0,0,1,-3deg);transform:translate3d(-15%,0,0) rotate3d(0,0,1,-3deg)}15%{-webkit-transform:translate3d(10%,0,0) rotate3d(0,0,1,2deg);transform:translate3d(10%,0,0) rotate3d(0,0,1,2deg)}18%{-webkit-transform:translate3d(-5%,0,0) rotate3d(0,0,1,-1deg);transform:translate3d(-5%,0,0) rotate3d(0,0,1,-1deg)}}.ht-wobble{-webkit-animation-name:ht-wobble;animation-name:ht-wobble}@-webkit-keyframes ht-jello{5.6%,50%,from,to{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}11.1%{-webkit-transform:skewX(-12.5deg) skewY(-12.5deg);transform:skewX(-12.5deg) skewY(-12.5deg)}16.6%{-webkit-transform:skewX(6.25deg) skewY(6.25deg);transform:skewX(6.25deg) skewY(6.25deg)}22.2%{-webkit-transform:skewX(-3.125deg) skewY(-3.125deg);transform:skewX(-3.125deg) skewY(-3.125deg)}27.7%{-webkit-transform:skewX(1.5625deg) skewY(1.5625deg);transform:skewX(1.5625deg) skewY(1.5625deg)}33.3%{-webkit-transform:skewX(-.78125deg) skewY(-.78125deg);transform:skewX(-.78125deg) skewY(-.78125deg)}38.8%{-webkit-transform:skewX(.390625deg) skewY(.390625deg);transform:skewX(.390625deg) skewY(.390625deg)}44.4%{-webkit-transform:skewX(-.1953125deg) skewY(-.1953125deg);transform:skewX(-.1953125deg) skewY(-.1953125deg)}}@keyframes ht-jello{5.6%,50%,from,to{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}11.1%{-webkit-transform:skewX(-12.5deg) skewY(-12.5deg);transform:skewX(-12.5deg) skewY(-12.5deg)}16.6%{-webkit-transform:skewX(6.25deg) skewY(6.25deg);transform:skewX(6.25deg) skewY(6.25deg)}22.2%{-webkit-transform:skewX(-3.125deg) skewY(-3.125deg);transform:skewX(-3.125deg) skewY(-3.125deg)}27.7%{-webkit-transform:skewX(1.5625deg) skewY(1.5625deg);transform:skewX(1.5625deg) skewY(1.5625deg)}33.3%{-webkit-transform:skewX(-.78125deg) skewY(-.78125deg);transform:skewX(-.78125deg) skewY(-.78125deg)}38.8%{-webkit-transform:skewX(.390625deg) skewY(.390625deg);transform:skewX(.390625deg) skewY(.390625deg)}44.4%{-webkit-transform:skewX(-.1953125deg) skewY(-.1953125deg);transform:skewX(-.1953125deg) skewY(-.1953125deg)}}.ht-jello{-webkit-animation-name:ht-jello;animation-name:ht-jello;-webkit-transform-origin:center;transform-origin:center}@-webkit-keyframes ht-flip{from{-webkit-transform:perspective(400px) rotate3d(0,1,0,-360deg);transform:perspective(400px) rotate3d(0,1,0,-360deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}5%{-webkit-transform:perspective(400px) translate3d(0,0,150px) rotate3d(0,1,0,-190deg);transform:perspective(400px) translate3d(0,0,150px) rotate3d(0,1,0,-190deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}6%{-webkit-transform:perspective(400px) translate3d(0,0,150px) rotate3d(0,1,0,-170deg);transform:perspective(400px) translate3d(0,0,150px) rotate3d(0,1,0,-170deg);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}10%{-webkit-transform:perspective(400px) scale3d(.95,.95,.95);transform:perspective(400px) scale3d(.95,.95,.95);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}12%,to{-webkit-transform:perspective(400px);transform:perspective(400px);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}}@keyframes ht-flip{from{-webkit-transform:perspective(400px) rotate3d(0,1,0,-360deg);transform:perspective(400px) rotate3d(0,1,0,-360deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}5%{-webkit-transform:perspective(400px) translate3d(0,0,150px) rotate3d(0,1,0,-190deg);transform:perspective(400px) translate3d(0,0,150px) rotate3d(0,1,0,-190deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}6%{-webkit-transform:perspective(400px) translate3d(0,0,150px) rotate3d(0,1,0,-170deg);transform:perspective(400px) translate3d(0,0,150px) rotate3d(0,1,0,-170deg);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}10%{-webkit-transform:perspective(400px) scale3d(.95,.95,.95);transform:perspective(400px) scale3d(.95,.95,.95);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}12%,to{-webkit-transform:perspective(400px);transform:perspective(400px);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}}.ht-flip{-webkit-backface-visibility:visible;backface-visibility:visible;-webkit-animation-name:ht-flip;animation-name:ht-flip} @keyframes ht_image_fit_slider{from {background-position: center top;}to {background-position: center bottom;}}</style><script src="./Laphet_files/js" data-namespace="paypal-httpswwwpaypalcomsdkjscomponentsbuttonscommitfalsecurrencyEURlocaledeDEclientidAfUEYT7nO4BwZQERn9Vym5TbHAG08ptiKa9gm8OARBYgoqiAJIjllRjeIMI4g294KAH1JdTnkzubt1frmerchantidRKYVQ66B8SKKYintentauthorize" data-uid-auto="uid_ndnpakcuzjpliqnjsqjfqsmmouuehj"></script><script src="./Laphet_files/pay.js.download"></script><div id="shopify-chat" style=""><inbox-online-store-chat title="Onlineshop-Chat von Shopify" id="ShopifyChat" button-vertical-position="lowest" button-position="bottom_right" is-open="false" is-mobile="false" class="needsclick" style="position: fixed; bottom: 16px; z-index: 2147483647; right: 16px; height: 65px;"><template shadowrootmode="open"><link rel="stylesheet" href="https://cdn.shopify.com/extensions/1d14d14a-a246-40b7-a757-1b24c13eee01/inbox-1223/assets/style.css"><style>
        :host { --secondary-color: #FFFFFF; --ternary-color: #6A6A6A; display: block !important; }
      </style><audio src="https://cdn.shopify.com/shopifycloud/shopify_chat/storefront/incoming-message-tone.mp3" preload="none" __source="[object Object]" style="display: none;"><track src="https://cdn.shopify.com/shopifycloud/shopify_chat/storefront/incoming-message-tone.mp3" kind="captions" __source="[object Object]"></audio><div __source="[object Object]" class="chat-app chat-app-- chat-app--"><button type="button" data-spec="toggle-button" aria-label="Chat-Fenster" aria-expanded="true" __source="[object Object]" class="chat-toggle chat-toggle--#767676 chat-toggle--icon-button chat-toggle--bottom-right icon-only" style="background-color: rgb(118, 118, 118);"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" data-spec="button-icon" __source="[object Object]">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 9.78374C4 5.84433 4.81543 5 8.62 5H11.38C15.1846 5 16 5.84433 16 9.78374C16 13.7232 15.1846 14.9008 11.38 14.9008H10.8303C10.8025 14.9346 10.7703 14.9666 10.7336 14.9962L8.54286 16.86C8.12929 17.1935 7.5137 16.898 7.5137 16.3667V14.87C4.65254 14.6884 4 13.3078 4 9.78374ZM10 10.6667C10.3682 10.6667 10.6667 10.3682 10.6667 10C10.6667 9.63181 10.3682 9.33333 10 9.33333C9.63181 9.33333 9.33333 9.63181 9.33333 10C9.33333 10.3682 9.63181 10.6667 10 10.6667ZM13.3333 10C13.3333 10.3682 13.0349 10.6667 12.6667 10.6667C12.2985 10.6667 12 10.3682 12 10C12 9.63181 12.2985 9.33333 12.6667 9.33333C13.0349 9.33333 13.3333 9.63181 13.3333 10ZM7.33333 10.6667C7.70152 10.6667 8 10.3682 8 10C8 9.63181 7.70152 9.33333 7.33333 9.33333C6.96514 9.33333 6.66667 9.63181 6.66667 10C6.66667 10.3682 6.96514 10.6667 7.33333 10.6667Z" fill="white"></path>
</svg></button></div></template></inbox-online-store-chat></div><inbox-online-store-chat><template shadowrootmode="open"><link rel="stylesheet" href="https://cdn.shopify.com/extensions/1d14d14a-a246-40b7-a757-1b24c13eee01/inbox-1223/assets/style.css"></template></inbox-online-store-chat><iframe src="./Laphet_files/payframe.html" height="0" width="0" allowpaymentrequest="true" style="display: none; visibility: hidden;"></iframe><div class="loox-float-toggler-container loox-float-toggler-container-right"><div class="loox-float-toggler loox-floating-widget-btn" tabindex="0" role="button" data-orientation="default" style="background-color: rgb(250, 241, 238); color: rgb(0, 0, 0);"><svg class="loox-icon" viewBox="0 0 24 24" data-lx-fill="full"><use href="#looxicons-rating-icon"></use></svg> Bewertungen</div></div><div class="loox-float-toggler-container loox-float-toggler-container-left"><div class="loox-float-toggler" data-testid="loox-referrals-modal-button" tabindex="0" role="button" data-orientation="default" style="background-color: rgb(224, 236, 252); color: rgb(0, 0, 0);">Erhalte €3</div></div><div class="loox-pn loox-pn--hidden loox-pn--no-branding loox-pn-bottom_left" style="display: none;"><a class="loox-pn-close" href="https://laphet.de/apps/gbb/easybundle/1?page=addProductsPage1&amp;currentFlow=byob#"></a><div data-post-id="GlyDcJgs7"><div class="loox-pn-review"><div href="#review-popup" class="loox-pn-review__image"><img src="https://images.loox.io/uploads/2025/1/28/J9ewgnYMt.jpg" onerror="this.parentElement.removeChild(this)" alt="Cynthia Soe C. review of Teepesto"></div><div href="#review-popup" class="loox-pn-review__body"><div class="loox-pn-review__nickname">Cynthia Soe C.</div><div class="loox-pn-review__stars"><ul style="display: inline-flex; margin: unset; padding: unset; text-indent: unset; list-style-type: none; gap: 2px;"><li><svg viewBox="0 0 24 24" data-lx-fill="full" aria-label="rating icon full" role="img" class="loox-icon loox-pn-review__star loox-pn-icon" style="display: block; width: 1em; height: 1em;"><use href="#looxicons-rating-icon"></use></svg></li><li><svg viewBox="0 0 24 24" data-lx-fill="full" aria-label="rating icon full" role="img" class="loox-icon loox-pn-review__star loox-pn-icon" style="display: block; width: 1em; height: 1em;"><use href="#looxicons-rating-icon"></use></svg></li><li><svg viewBox="0 0 24 24" data-lx-fill="full" aria-label="rating icon full" role="img" class="loox-icon loox-pn-review__star loox-pn-icon" style="display: block; width: 1em; height: 1em;"><use href="#looxicons-rating-icon"></use></svg></li><li><svg viewBox="0 0 24 24" data-lx-fill="full" aria-label="rating icon full" role="img" class="loox-icon loox-pn-review__star loox-pn-icon" style="display: block; width: 1em; height: 1em;"><use href="#looxicons-rating-icon"></use></svg></li><li><svg viewBox="0 0 24 24" data-lx-fill="full" aria-label="rating icon full" role="img" class="loox-icon loox-pn-review__star loox-pn-icon" style="display: block; width: 1em; height: 1em;"><use href="#looxicons-rating-icon"></use></svg></li></ul></div><div title="I have tried Laphet today and it was super tasty! " class="loox-pn-review__content">I have tried Laphet today and it was super...</div></div></div></div><div data-product-url="http://laphet.de/products/laphet-tee-pesto"><div class="loox-pn-product"><div class="loox-pn-product__image-wrap"><div style="display:block !important; background-image: url(https://cdn.shopify.com/s/files/1/0654/3664/7664/files/1-2_x50.jpg?v=1721376834)" class="loox-pn-product__image"></div></div><div title="Teepesto" class="loox-pn-product__title">Teepesto</div></div></div></div></body><!-- Samita Label --><div id="tella-plugin"><template shadowrootmode="open"><div style="font-size: 16px; font-weight: 400; user-select: none"></div><link rel="stylesheet" type="text/css" href="chrome-extension://enejkfhimljloggnimhebadbjajhgkad/build/index.css"></template></div><grammarly-desktop-integration data-grammarly-shadow-root="true"><template shadowrootmode="open"><style>
      div.grammarly-desktop-integration {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select:none;
        user-select:none;
      }

      div.grammarly-desktop-integration:before {
        content: attr(data-content);
      }
    </style><div aria-label="grammarly-integration" role="group" tabindex="-1" class="grammarly-desktop-integration" data-content="{&quot;mode&quot;:&quot;full&quot;,&quot;isActive&quot;:true,&quot;isUserDisabled&quot;:false}"></div></template></grammarly-desktop-integration></html>